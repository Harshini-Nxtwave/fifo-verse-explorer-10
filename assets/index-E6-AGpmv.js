var UE=n=>{throw TypeError(n)};var C_=(n,e,t)=>e.has(n)||UE("Cannot "+t);var ft=(n,e,t)=>(C_(n,e,"read from private field"),t?t.call(n):e.get(n)),Wn=(n,e,t)=>e.has(n)?UE("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Mn=(n,e,t,r)=>(C_(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),ji=(n,e,t)=>(C_(n,e,"access private method"),t);var fv=(n,e,t,r)=>({set _(i){Mn(n,e,i,t)},get _(){return ft(n,e,r)}});function i3(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function SS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var R_={exports:{}},Hp={},P_={exports:{}},bn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OE;function s3(){if(OE)return bn;OE=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),m=Symbol.iterator;function g(L){return L===null||typeof L!="object"?null:(L=m&&L[m]||L["@@iterator"],typeof L=="function"?L:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,w={};function x(L,B,ne){this.props=L,this.context=B,this.refs=w,this.updater=ne||y}x.prototype.isReactComponent={},x.prototype.setState=function(L,B){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,B,"setState")},x.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function S(){}S.prototype=x.prototype;function b(L,B,ne){this.props=L,this.context=B,this.refs=w,this.updater=ne||y}var T=b.prototype=new S;T.constructor=b,_(T,x.prototype),T.isPureReactComponent=!0;var C=Array.isArray,P=Object.prototype.hasOwnProperty,D={current:null},U={key:!0,ref:!0,__self:!0,__source:!0};function F(L,B,ne){var ae,de={},pe=null,xe=null;if(B!=null)for(ae in B.ref!==void 0&&(xe=B.ref),B.key!==void 0&&(pe=""+B.key),B)P.call(B,ae)&&!U.hasOwnProperty(ae)&&(de[ae]=B[ae]);var Me=arguments.length-2;if(Me===1)de.children=ne;else if(1<Me){for(var Xe=Array(Me),ot=0;ot<Me;ot++)Xe[ot]=arguments[ot+2];de.children=Xe}if(L&&L.defaultProps)for(ae in Me=L.defaultProps,Me)de[ae]===void 0&&(de[ae]=Me[ae]);return{$$typeof:n,type:L,key:pe,ref:xe,props:de,_owner:D.current}}function I(L,B){return{$$typeof:n,type:L.type,key:B,ref:L.ref,props:L.props,_owner:L._owner}}function k(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function Q(L){var B={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ne){return B[ne]})}var j=/\/+/g;function $(L,B){return typeof L=="object"&&L!==null&&L.key!=null?Q(""+L.key):B.toString(36)}function H(L,B,ne,ae,de){var pe=typeof L;(pe==="undefined"||pe==="boolean")&&(L=null);var xe=!1;if(L===null)xe=!0;else switch(pe){case"string":case"number":xe=!0;break;case"object":switch(L.$$typeof){case n:case e:xe=!0}}if(xe)return xe=L,de=de(xe),L=ae===""?"."+$(xe,0):ae,C(de)?(ne="",L!=null&&(ne=L.replace(j,"$&/")+"/"),H(de,B,ne,"",function(ot){return ot})):de!=null&&(k(de)&&(de=I(de,ne+(!de.key||xe&&xe.key===de.key?"":(""+de.key).replace(j,"$&/")+"/")+L)),B.push(de)),1;if(xe=0,ae=ae===""?".":ae+":",C(L))for(var Me=0;Me<L.length;Me++){pe=L[Me];var Xe=ae+$(pe,Me);xe+=H(pe,B,ne,Xe,de)}else if(Xe=g(L),typeof Xe=="function")for(L=Xe.call(L),Me=0;!(pe=L.next()).done;)pe=pe.value,Xe=ae+$(pe,Me++),xe+=H(pe,B,ne,Xe,de);else if(pe==="object")throw B=String(L),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.");return xe}function ie(L,B,ne){if(L==null)return L;var ae=[],de=0;return H(L,ae,"","",function(pe){return B.call(ne,pe,de++)}),ae}function re(L){if(L._status===-1){var B=L._result;B=B(),B.then(function(ne){(L._status===0||L._status===-1)&&(L._status=1,L._result=ne)},function(ne){(L._status===0||L._status===-1)&&(L._status=2,L._result=ne)}),L._status===-1&&(L._status=0,L._result=B)}if(L._status===1)return L._result.default;throw L._result}var ue={current:null},G={transition:null},K={ReactCurrentDispatcher:ue,ReactCurrentBatchConfig:G,ReactCurrentOwner:D};function W(){throw Error("act(...) is not supported in production builds of React.")}return bn.Children={map:ie,forEach:function(L,B,ne){ie(L,function(){B.apply(this,arguments)},ne)},count:function(L){var B=0;return ie(L,function(){B++}),B},toArray:function(L){return ie(L,function(B){return B})||[]},only:function(L){if(!k(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},bn.Component=x,bn.Fragment=t,bn.Profiler=i,bn.PureComponent=b,bn.StrictMode=r,bn.Suspense=c,bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K,bn.act=W,bn.cloneElement=function(L,B,ne){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var ae=_({},L.props),de=L.key,pe=L.ref,xe=L._owner;if(B!=null){if(B.ref!==void 0&&(pe=B.ref,xe=D.current),B.key!==void 0&&(de=""+B.key),L.type&&L.type.defaultProps)var Me=L.type.defaultProps;for(Xe in B)P.call(B,Xe)&&!U.hasOwnProperty(Xe)&&(ae[Xe]=B[Xe]===void 0&&Me!==void 0?Me[Xe]:B[Xe])}var Xe=arguments.length-2;if(Xe===1)ae.children=ne;else if(1<Xe){Me=Array(Xe);for(var ot=0;ot<Xe;ot++)Me[ot]=arguments[ot+2];ae.children=Me}return{$$typeof:n,type:L.type,key:de,ref:pe,props:ae,_owner:xe}},bn.createContext=function(L){return L={$$typeof:o,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:s,_context:L},L.Consumer=L},bn.createElement=F,bn.createFactory=function(L){var B=F.bind(null,L);return B.type=L,B},bn.createRef=function(){return{current:null}},bn.forwardRef=function(L){return{$$typeof:a,render:L}},bn.isValidElement=k,bn.lazy=function(L){return{$$typeof:d,_payload:{_status:-1,_result:L},_init:re}},bn.memo=function(L,B){return{$$typeof:u,type:L,compare:B===void 0?null:B}},bn.startTransition=function(L){var B=G.transition;G.transition={};try{L()}finally{G.transition=B}},bn.unstable_act=W,bn.useCallback=function(L,B){return ue.current.useCallback(L,B)},bn.useContext=function(L){return ue.current.useContext(L)},bn.useDebugValue=function(){},bn.useDeferredValue=function(L){return ue.current.useDeferredValue(L)},bn.useEffect=function(L,B){return ue.current.useEffect(L,B)},bn.useId=function(){return ue.current.useId()},bn.useImperativeHandle=function(L,B,ne){return ue.current.useImperativeHandle(L,B,ne)},bn.useInsertionEffect=function(L,B){return ue.current.useInsertionEffect(L,B)},bn.useLayoutEffect=function(L,B){return ue.current.useLayoutEffect(L,B)},bn.useMemo=function(L,B){return ue.current.useMemo(L,B)},bn.useReducer=function(L,B,ne){return ue.current.useReducer(L,B,ne)},bn.useRef=function(L){return ue.current.useRef(L)},bn.useState=function(L){return ue.current.useState(L)},bn.useSyncExternalStore=function(L,B,ne){return ue.current.useSyncExternalStore(L,B,ne)},bn.useTransition=function(){return ue.current.useTransition()},bn.version="18.3.1",bn}var FE;function Z0(){return FE||(FE=1,P_.exports=s3()),P_.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kE;function o3(){if(kE)return Hp;kE=1;var n=Z0(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,c,u){var d,m={},g=null,y=null;u!==void 0&&(g=""+u),c.key!==void 0&&(g=""+c.key),c.ref!==void 0&&(y=c.ref);for(d in c)r.call(c,d)&&!s.hasOwnProperty(d)&&(m[d]=c[d]);if(a&&a.defaultProps)for(d in c=a.defaultProps,c)m[d]===void 0&&(m[d]=c[d]);return{$$typeof:e,type:a,key:g,ref:y,props:m,_owner:i.current}}return Hp.Fragment=t,Hp.jsx=o,Hp.jsxs=o,Hp}var BE;function a3(){return BE||(BE=1,R_.exports=o3()),R_.exports}var Ee=a3(),dv={},L_={exports:{}},Rs={},I_={exports:{}},N_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zE;function l3(){return zE||(zE=1,function(n){function e(G,K){var W=G.length;G.push(K);e:for(;0<W;){var L=W-1>>>1,B=G[L];if(0<i(B,K))G[L]=K,G[W]=B,W=L;else break e}}function t(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var K=G[0],W=G.pop();if(W!==K){G[0]=W;e:for(var L=0,B=G.length,ne=B>>>1;L<ne;){var ae=2*(L+1)-1,de=G[ae],pe=ae+1,xe=G[pe];if(0>i(de,W))pe<B&&0>i(xe,de)?(G[L]=xe,G[pe]=W,L=pe):(G[L]=de,G[ae]=W,L=ae);else if(pe<B&&0>i(xe,W))G[L]=xe,G[pe]=W,L=pe;else break e}}return K}function i(G,K){var W=G.sortIndex-K.sortIndex;return W!==0?W:G.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var c=[],u=[],d=1,m=null,g=3,y=!1,_=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(G){for(var K=t(u);K!==null;){if(K.callback===null)r(u);else if(K.startTime<=G)r(u),K.sortIndex=K.expirationTime,e(c,K);else break;K=t(u)}}function C(G){if(w=!1,T(G),!_)if(t(c)!==null)_=!0,re(P);else{var K=t(u);K!==null&&ue(C,K.startTime-G)}}function P(G,K){_=!1,w&&(w=!1,S(F),F=-1),y=!0;var W=g;try{for(T(K),m=t(c);m!==null&&(!(m.expirationTime>K)||G&&!Q());){var L=m.callback;if(typeof L=="function"){m.callback=null,g=m.priorityLevel;var B=L(m.expirationTime<=K);K=n.unstable_now(),typeof B=="function"?m.callback=B:m===t(c)&&r(c),T(K)}else r(c);m=t(c)}if(m!==null)var ne=!0;else{var ae=t(u);ae!==null&&ue(C,ae.startTime-K),ne=!1}return ne}finally{m=null,g=W,y=!1}}var D=!1,U=null,F=-1,I=5,k=-1;function Q(){return!(n.unstable_now()-k<I)}function j(){if(U!==null){var G=n.unstable_now();k=G;var K=!0;try{K=U(!0,G)}finally{K?$():(D=!1,U=null)}}else D=!1}var $;if(typeof b=="function")$=function(){b(j)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,ie=H.port2;H.port1.onmessage=j,$=function(){ie.postMessage(null)}}else $=function(){x(j,0)};function re(G){U=G,D||(D=!0,$())}function ue(G,K){F=x(function(){G(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_continueExecution=function(){_||y||(_=!0,re(P))},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(G){switch(g){case 1:case 2:case 3:var K=3;break;default:K=g}var W=g;g=K;try{return G()}finally{g=W}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(G,K){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var W=g;g=G;try{return K()}finally{g=W}},n.unstable_scheduleCallback=function(G,K,W){var L=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?L+W:L):W=L,G){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=W+B,G={id:d++,callback:K,priorityLevel:G,startTime:W,expirationTime:B,sortIndex:-1},W>L?(G.sortIndex=W,e(u,G),t(c)===null&&G===t(u)&&(w?(S(F),F=-1):w=!0,ue(C,W-L))):(G.sortIndex=B,e(c,G),_||y||(_=!0,re(P))),G},n.unstable_shouldYield=Q,n.unstable_wrapCallback=function(G){var K=g;return function(){var W=g;g=K;try{return G.apply(this,arguments)}finally{g=W}}}}(N_)),N_}var HE;function c3(){return HE||(HE=1,I_.exports=l3()),I_.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GE;function u3(){if(GE)return Rs;GE=1;var n=Z0(),e=c3();function t(l){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+l,v=1;v<arguments.length;v++)f+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+l+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(l,f){o(l,f),o(l+"Capture",f)}function o(l,f){for(i[l]=f,l=0;l<f.length;l++)r.add(f[l])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},m={};function g(l){return c.call(m,l)?!0:c.call(d,l)?!1:u.test(l)?m[l]=!0:(d[l]=!0,!1)}function y(l,f,v,M){if(v!==null&&v.type===0)return!1;switch(typeof f){case"function":case"symbol":return!0;case"boolean":return M?!1:v!==null?!v.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function _(l,f,v,M){if(f===null||typeof f>"u"||y(l,f,v,M))return!0;if(M)return!1;if(v!==null)switch(v.type){case 3:return!f;case 4:return f===!1;case 5:return isNaN(f);case 6:return isNaN(f)||1>f}return!1}function w(l,f,v,M,R,O,Z){this.acceptsBooleans=f===2||f===3||f===4,this.attributeName=M,this.attributeNamespace=R,this.mustUseProperty=v,this.propertyName=l,this.type=f,this.sanitizeURL=O,this.removeEmptyString=Z}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){x[l]=new w(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var f=l[0];x[f]=new w(f,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){x[l]=new w(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){x[l]=new w(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){x[l]=new w(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){x[l]=new w(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){x[l]=new w(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){x[l]=new w(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){x[l]=new w(l,5,!1,l.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function b(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var f=l.replace(S,b);x[f]=new w(f,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var f=l.replace(S,b);x[f]=new w(f,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var f=l.replace(S,b);x[f]=new w(f,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){x[l]=new w(l,1,!1,l.toLowerCase(),null,!1,!1)}),x.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){x[l]=new w(l,1,!1,l.toLowerCase(),null,!0,!0)});function T(l,f,v,M){var R=x.hasOwnProperty(f)?x[f]:null;(R!==null?R.type!==0:M||!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(_(f,v,R,M)&&(v=null),M||R===null?g(f)&&(v===null?l.removeAttribute(f):l.setAttribute(f,""+v)):R.mustUseProperty?l[R.propertyName]=v===null?R.type===3?!1:"":v:(f=R.attributeName,M=R.attributeNamespace,v===null?l.removeAttribute(f):(R=R.type,v=R===3||R===4&&v===!0?"":""+v,M?l.setAttributeNS(M,f,v):l.setAttribute(f,v))))}var C=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),D=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),Q=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),ie=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),ue=Symbol.for("react.offscreen"),G=Symbol.iterator;function K(l){return l===null||typeof l!="object"?null:(l=G&&l[G]||l["@@iterator"],typeof l=="function"?l:null)}var W=Object.assign,L;function B(l){if(L===void 0)try{throw Error()}catch(v){var f=v.stack.trim().match(/\n( *(at )?)/);L=f&&f[1]||""}return`
`+L+l}var ne=!1;function ae(l,f){if(!l||ne)return"";ne=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(Ke){var M=Ke}Reflect.construct(l,[],f)}else{try{f.call()}catch(Ke){M=Ke}l.call(f.prototype)}else{try{throw Error()}catch(Ke){M=Ke}l()}}catch(Ke){if(Ke&&M&&typeof Ke.stack=="string"){for(var R=Ke.stack.split(`
`),O=M.stack.split(`
`),Z=R.length-1,me=O.length-1;1<=Z&&0<=me&&R[Z]!==O[me];)me--;for(;1<=Z&&0<=me;Z--,me--)if(R[Z]!==O[me]){if(Z!==1||me!==1)do if(Z--,me--,0>me||R[Z]!==O[me]){var we=`
`+R[Z].replace(" at new "," at ");return l.displayName&&we.includes("<anonymous>")&&(we=we.replace("<anonymous>",l.displayName)),we}while(1<=Z&&0<=me);break}}}finally{ne=!1,Error.prepareStackTrace=v}return(l=l?l.displayName||l.name:"")?B(l):""}function de(l){switch(l.tag){case 5:return B(l.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return l=ae(l.type,!1),l;case 11:return l=ae(l.type.render,!1),l;case 1:return l=ae(l.type,!0),l;default:return""}}function pe(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case U:return"Fragment";case D:return"Portal";case I:return"Profiler";case F:return"StrictMode";case $:return"Suspense";case H:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case Q:return(l.displayName||"Context")+".Consumer";case k:return(l._context.displayName||"Context")+".Provider";case j:var f=l.render;return l=l.displayName,l||(l=f.displayName||f.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case ie:return f=l.displayName||null,f!==null?f:pe(l.type)||"Memo";case re:f=l._payload,l=l._init;try{return pe(l(f))}catch{}}return null}function xe(l){var f=l.type;switch(l.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=f.render,l=l.displayName||l.name||"",f.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(f);case 8:return f===F?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function Me(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Xe(l){var f=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function ot(l){var f=Xe(l)?"checked":"value",v=Object.getOwnPropertyDescriptor(l.constructor.prototype,f),M=""+l[f];if(!l.hasOwnProperty(f)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var R=v.get,O=v.set;return Object.defineProperty(l,f,{configurable:!0,get:function(){return R.call(this)},set:function(Z){M=""+Z,O.call(this,Z)}}),Object.defineProperty(l,f,{enumerable:v.enumerable}),{getValue:function(){return M},setValue:function(Z){M=""+Z},stopTracking:function(){l._valueTracker=null,delete l[f]}}}}function He(l){l._valueTracker||(l._valueTracker=ot(l))}function te(l){if(!l)return!1;var f=l._valueTracker;if(!f)return!0;var v=f.getValue(),M="";return l&&(M=Xe(l)?l.checked?"true":"false":l.value),l=M,l!==v?(f.setValue(l),!0):!1}function Ye(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function Re(l,f){var v=f.checked;return W({},f,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:v??l._wrapperState.initialChecked})}function je(l,f){var v=f.defaultValue==null?"":f.defaultValue,M=f.checked!=null?f.checked:f.defaultChecked;v=Me(f.value!=null?f.value:v),l._wrapperState={initialChecked:M,initialValue:v,controlled:f.type==="checkbox"||f.type==="radio"?f.checked!=null:f.value!=null}}function Ne(l,f){f=f.checked,f!=null&&T(l,"checked",f,!1)}function ct(l,f){Ne(l,f);var v=Me(f.value),M=f.type;if(v!=null)M==="number"?(v===0&&l.value===""||l.value!=v)&&(l.value=""+v):l.value!==""+v&&(l.value=""+v);else if(M==="submit"||M==="reset"){l.removeAttribute("value");return}f.hasOwnProperty("value")?qe(l,f.type,v):f.hasOwnProperty("defaultValue")&&qe(l,f.type,Me(f.defaultValue)),f.checked==null&&f.defaultChecked!=null&&(l.defaultChecked=!!f.defaultChecked)}function Fe(l,f,v){if(f.hasOwnProperty("value")||f.hasOwnProperty("defaultValue")){var M=f.type;if(!(M!=="submit"&&M!=="reset"||f.value!==void 0&&f.value!==null))return;f=""+l._wrapperState.initialValue,v||f===l.value||(l.value=f),l.defaultValue=f}v=l.name,v!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,v!==""&&(l.name=v)}function qe(l,f,v){(f!=="number"||Ye(l.ownerDocument)!==l)&&(v==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+v&&(l.defaultValue=""+v))}var nt=Array.isArray;function Ue(l,f,v,M){if(l=l.options,f){f={};for(var R=0;R<v.length;R++)f["$"+v[R]]=!0;for(v=0;v<l.length;v++)R=f.hasOwnProperty("$"+l[v].value),l[v].selected!==R&&(l[v].selected=R),R&&M&&(l[v].defaultSelected=!0)}else{for(v=""+Me(v),f=null,R=0;R<l.length;R++){if(l[R].value===v){l[R].selected=!0,M&&(l[R].defaultSelected=!0);return}f!==null||l[R].disabled||(f=l[R])}f!==null&&(f.selected=!0)}}function _t(l,f){if(f.dangerouslySetInnerHTML!=null)throw Error(t(91));return W({},f,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function J(l,f){var v=f.value;if(v==null){if(v=f.children,f=f.defaultValue,v!=null){if(f!=null)throw Error(t(92));if(nt(v)){if(1<v.length)throw Error(t(93));v=v[0]}f=v}f==null&&(f=""),v=f}l._wrapperState={initialValue:Me(v)}}function q(l,f){var v=Me(f.value),M=Me(f.defaultValue);v!=null&&(v=""+v,v!==l.value&&(l.value=v),f.defaultValue==null&&l.defaultValue!==v&&(l.defaultValue=v)),M!=null&&(l.defaultValue=""+M)}function ye(l){var f=l.textContent;f===l._wrapperState.initialValue&&f!==""&&f!==null&&(l.value=f)}function tt(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Le(l,f){return l==null||l==="http://www.w3.org/1999/xhtml"?tt(f):l==="http://www.w3.org/2000/svg"&&f==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var We,st=function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(f,v,M,R){MSApp.execUnsafeLocalFunction(function(){return l(f,v,M,R)})}:l}(function(l,f){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=f;else{for(We=We||document.createElement("div"),We.innerHTML="<svg>"+f.valueOf().toString()+"</svg>",f=We.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;f.firstChild;)l.appendChild(f.firstChild)}});function et(l,f){if(f){var v=l.firstChild;if(v&&v===l.lastChild&&v.nodeType===3){v.nodeValue=f;return}}l.textContent=f}var lt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mt=["Webkit","ms","Moz","O"];Object.keys(lt).forEach(function(l){Mt.forEach(function(f){f=f+l.charAt(0).toUpperCase()+l.substring(1),lt[f]=lt[l]})});function xt(l,f,v){return f==null||typeof f=="boolean"||f===""?"":v||typeof f!="number"||f===0||lt.hasOwnProperty(l)&&lt[l]?(""+f).trim():f+"px"}function Ge(l,f){l=l.style;for(var v in f)if(f.hasOwnProperty(v)){var M=v.indexOf("--")===0,R=xt(v,f[v],M);v==="float"&&(v="cssFloat"),M?l.setProperty(v,R):l[v]=R}}var mt=W({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ce(l,f){if(f){if(mt[l]&&(f.children!=null||f.dangerouslySetInnerHTML!=null))throw Error(t(137,l));if(f.dangerouslySetInnerHTML!=null){if(f.children!=null)throw Error(t(60));if(typeof f.dangerouslySetInnerHTML!="object"||!("__html"in f.dangerouslySetInnerHTML))throw Error(t(61))}if(f.style!=null&&typeof f.style!="object")throw Error(t(62))}}function Ie(l,f){if(l.indexOf("-")===-1)return typeof f.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pe=null;function ke(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Te=null,he=null,ut=null;function rt(l){if(l=Go(l)){if(typeof Te!="function")throw Error(t(280));var f=l.stateNode;f&&(f=gd(f),Te(l.stateNode,l.type,f))}}function De(l){he?ut?ut.push(l):ut=[l]:he=l}function at(){if(he){var l=he,f=ut;if(ut=he=null,rt(l),f)for(l=0;l<f.length;l++)rt(f[l])}}function St(l,f){return l(f)}function Et(){}var Wt=!1;function gn(l,f,v){if(Wt)return l(f,v);Wt=!0;try{return St(l,f,v)}finally{Wt=!1,(he!==null||ut!==null)&&(Et(),at())}}function Yt(l,f){var v=l.stateNode;if(v===null)return null;var M=gd(v);if(M===null)return null;v=M[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(M=!M.disabled)||(l=l.type,M=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!M;break e;default:l=!1}if(l)return null;if(v&&typeof v!="function")throw Error(t(231,f,typeof v));return v}var pn=!1;if(a)try{var kn={};Object.defineProperty(kn,"passive",{get:function(){pn=!0}}),window.addEventListener("test",kn,kn),window.removeEventListener("test",kn,kn)}catch{pn=!1}function Fr(l,f,v,M,R,O,Z,me,we){var Ke=Array.prototype.slice.call(arguments,3);try{f.apply(v,Ke)}catch(gt){this.onError(gt)}}var Sr=!1,sr=null,$n=!1,qt=null,fr={onError:function(l){Sr=!0,sr=l}};function Fi(l,f,v,M,R,O,Z,me,we){Sr=!1,sr=null,Fr.apply(fr,arguments)}function Y(l,f,v,M,R,O,Z,me,we){if(Fi.apply(this,arguments),Sr){if(Sr){var Ke=sr;Sr=!1,sr=null}else throw Error(t(198));$n||($n=!0,qt=Ke)}}function ee(l){var f=l,v=l;if(l.alternate)for(;f.return;)f=f.return;else{l=f;do f=l,(f.flags&4098)!==0&&(v=f.return),l=f.return;while(l)}return f.tag===3?v:null}function _e(l){if(l.tag===13){var f=l.memoizedState;if(f===null&&(l=l.alternate,l!==null&&(f=l.memoizedState)),f!==null)return f.dehydrated}return null}function V(l){if(ee(l)!==l)throw Error(t(188))}function se(l){var f=l.alternate;if(!f){if(f=ee(l),f===null)throw Error(t(188));return f!==l?null:l}for(var v=l,M=f;;){var R=v.return;if(R===null)break;var O=R.alternate;if(O===null){if(M=R.return,M!==null){v=M;continue}break}if(R.child===O.child){for(O=R.child;O;){if(O===v)return V(R),l;if(O===M)return V(R),f;O=O.sibling}throw Error(t(188))}if(v.return!==M.return)v=R,M=O;else{for(var Z=!1,me=R.child;me;){if(me===v){Z=!0,v=R,M=O;break}if(me===M){Z=!0,M=R,v=O;break}me=me.sibling}if(!Z){for(me=O.child;me;){if(me===v){Z=!0,v=O,M=R;break}if(me===M){Z=!0,M=O,v=R;break}me=me.sibling}if(!Z)throw Error(t(189))}}if(v.alternate!==M)throw Error(t(190))}if(v.tag!==3)throw Error(t(188));return v.stateNode.current===v?l:f}function le(l){return l=se(l),l!==null?ve(l):null}function ve(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var f=ve(l);if(f!==null)return f;l=l.sibling}return null}var ge=e.unstable_scheduleCallback,Be=e.unstable_cancelCallback,Ze=e.unstable_shouldYield,Je=e.unstable_requestPaint,Se=e.unstable_now,Lt=e.unstable_getCurrentPriorityLevel,dt=e.unstable_ImmediatePriority,ht=e.unstable_UserBlockingPriority,It=e.unstable_NormalPriority,Ht=e.unstable_LowPriority,jt=e.unstable_IdlePriority,Zt=null,Tt=null;function bt(l){if(Tt&&typeof Tt.onCommitFiberRoot=="function")try{Tt.onCommitFiberRoot(Zt,l,void 0,(l.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:In,$t=Math.log,Qt=Math.LN2;function In(l){return l>>>=0,l===0?32:31-($t(l)/Qt|0)|0}var Un=64,On=4194304;function un(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function an(l,f){var v=l.pendingLanes;if(v===0)return 0;var M=0,R=l.suspendedLanes,O=l.pingedLanes,Z=v&268435455;if(Z!==0){var me=Z&~R;me!==0?M=un(me):(O&=Z,O!==0&&(M=un(O)))}else Z=v&~R,Z!==0?M=un(Z):O!==0&&(M=un(O));if(M===0)return 0;if(f!==0&&f!==M&&(f&R)===0&&(R=M&-M,O=f&-f,R>=O||R===16&&(O&4194240)!==0))return f;if((M&4)!==0&&(M|=v&16),f=l.entangledLanes,f!==0)for(l=l.entanglements,f&=M;0<f;)v=31-Kt(f),R=1<<v,M|=l[v],f&=~R;return M}function Yn(l,f){switch(l){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function on(l,f){for(var v=l.suspendedLanes,M=l.pingedLanes,R=l.expirationTimes,O=l.pendingLanes;0<O;){var Z=31-Kt(O),me=1<<Z,we=R[Z];we===-1?((me&v)===0||(me&M)!==0)&&(R[Z]=Yn(me,f)):we<=f&&(l.expiredLanes|=me),O&=~me}}function rn(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function zn(){var l=Un;return Un<<=1,(Un&4194240)===0&&(Un=64),l}function kr(l){for(var f=[],v=0;31>v;v++)f.push(l);return f}function er(l,f,v){l.pendingLanes|=f,f!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,f=31-Kt(f),l[f]=v}function Ji(l,f){var v=l.pendingLanes&~f;l.pendingLanes=f,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=f,l.mutableReadLanes&=f,l.entangledLanes&=f,f=l.entanglements;var M=l.eventTimes;for(l=l.expirationTimes;0<v;){var R=31-Kt(v),O=1<<R;f[R]=0,M[R]=-1,l[R]=-1,v&=~O}}function Fs(l,f){var v=l.entangledLanes|=f;for(l=l.entanglements;v;){var M=31-Kt(v),R=1<<M;R&f|l[M]&f&&(l[M]|=f),v&=~R}}var Tn=0;function lo(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var xa,Kl,Zl,co,rl,vs=!1,ks=[],ni=null,ln=null,ys=null,$i=new Map,uo=new Map,_s=[],jf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function or(l,f){switch(l){case"focusin":case"focusout":ni=null;break;case"dragenter":case"dragleave":ln=null;break;case"mouseover":case"mouseout":ys=null;break;case"pointerover":case"pointerout":$i.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":uo.delete(f.pointerId)}}function Bs(l,f,v,M,R,O){return l===null||l.nativeEvent!==O?(l={blockedOn:f,domEventName:v,eventSystemFlags:M,nativeEvent:O,targetContainers:[R]},f!==null&&(f=Go(f),f!==null&&Kl(f)),l):(l.eventSystemFlags|=M,f=l.targetContainers,R!==null&&f.indexOf(R)===-1&&f.push(R),l)}function Xf(l,f,v,M,R){switch(f){case"focusin":return ni=Bs(ni,l,f,v,M,R),!0;case"dragenter":return ln=Bs(ln,l,f,v,M,R),!0;case"mouseover":return ys=Bs(ys,l,f,v,M,R),!0;case"pointerover":var O=R.pointerId;return $i.set(O,Bs($i.get(O)||null,l,f,v,M,R)),!0;case"gotpointercapture":return O=R.pointerId,uo.set(O,Bs(uo.get(O)||null,l,f,v,M,R)),!0}return!1}function yi(l){var f=Ia(l.target);if(f!==null){var v=ee(f);if(v!==null){if(f=v.tag,f===13){if(f=_e(v),f!==null){l.blockedOn=f,rl(l.priority,function(){Zl(v)});return}}else if(f===3&&v.stateNode.current.memoizedState.isDehydrated){l.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Sa(l){if(l.blockedOn!==null)return!1;for(var f=l.targetContainers;0<f.length;){var v=_i(l.domEventName,l.eventSystemFlags,f[0],l.nativeEvent);if(v===null){v=l.nativeEvent;var M=new v.constructor(v.type,v);Pe=M,v.target.dispatchEvent(M),Pe=null}else return f=Go(v),f!==null&&Kl(f),l.blockedOn=v,!1;f.shift()}return!0}function wa(l,f,v){Sa(l)&&v.delete(f)}function es(){vs=!1,ni!==null&&Sa(ni)&&(ni=null),ln!==null&&Sa(ln)&&(ln=null),ys!==null&&Sa(ys)&&(ys=null),$i.forEach(wa),uo.forEach(wa)}function Lo(l,f){l.blockedOn===f&&(l.blockedOn=null,vs||(vs=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,es)))}function Ea(l){function f(R){return Lo(R,l)}if(0<ks.length){Lo(ks[0],l);for(var v=1;v<ks.length;v++){var M=ks[v];M.blockedOn===l&&(M.blockedOn=null)}}for(ni!==null&&Lo(ni,l),ln!==null&&Lo(ln,l),ys!==null&&Lo(ys,l),$i.forEach(f),uo.forEach(f),v=0;v<_s.length;v++)M=_s[v],M.blockedOn===l&&(M.blockedOn=null);for(;0<_s.length&&(v=_s[0],v.blockedOn===null);)yi(v),v.blockedOn===null&&_s.shift()}var Wr=C.ReactCurrentBatchConfig,jr=!0;function fo(l,f,v,M){var R=Tn,O=Wr.transition;Wr.transition=null;try{Tn=1,il(l,f,v,M)}finally{Tn=R,Wr.transition=O}}function xs(l,f,v,M){var R=Tn,O=Wr.transition;Wr.transition=null;try{Tn=4,il(l,f,v,M)}finally{Tn=R,Wr.transition=O}}function il(l,f,v,M){if(jr){var R=_i(l,f,v,M);if(R===null)ud(l,f,M,Ma,v),or(l,M);else if(Xf(R,l,f,v,M))M.stopPropagation();else if(or(l,M),f&4&&-1<jf.indexOf(l)){for(;R!==null;){var O=Go(R);if(O!==null&&xa(O),O=_i(l,f,v,M),O===null&&ud(l,f,M,Ma,v),O===R)break;R=O}R!==null&&M.stopPropagation()}else ud(l,f,M,null,v)}}var Ma=null;function _i(l,f,v,M){if(Ma=null,l=ke(M),l=Ia(l),l!==null)if(f=ee(l),f===null)l=null;else if(v=f.tag,v===13){if(l=_e(f),l!==null)return l;l=null}else if(v===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;l=null}else f!==l&&(l=null);return Ma=l,null}function Ta(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Lt()){case dt:return 1;case ht:return 4;case It:case Ht:return 16;case jt:return 536870912;default:return 16}default:return 16}}var ki=null,Io=null,Xr=null;function Br(){if(Xr)return Xr;var l,f=Io,v=f.length,M,R="value"in ki?ki.value:ki.textContent,O=R.length;for(l=0;l<v&&f[l]===R[l];l++);var Z=v-l;for(M=1;M<=Z&&f[v-M]===R[O-M];M++);return Xr=R.slice(l,1<M?1-M:void 0)}function No(l){var f=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&f===13&&(l=13)):l=f,l===10&&(l=13),32<=l||l===13?l:0}function Bi(){return!0}function Do(){return!1}function Yr(l){function f(v,M,R,O,Z){this._reactName=v,this._targetInst=R,this.type=M,this.nativeEvent=O,this.target=Z,this.currentTarget=null;for(var me in l)l.hasOwnProperty(me)&&(v=l[me],this[me]=v?v(O):O[me]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?Bi:Do,this.isPropagationStopped=Do,this}return W(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=Bi)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=Bi)},persist:function(){},isPersistent:Bi}),f}var Uo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ar=Yr(Uo),zr=W({},Uo,{view:0,detail:0}),wr=Yr(zr),dr,Ci,Ss,Ql=W({},zr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Aa,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Ss&&(Ss&&l.type==="mousemove"?(dr=l.screenX-Ss.screenX,Ci=l.screenY-Ss.screenY):Ci=dr=0,Ss=l),dr)},movementY:function(l){return"movementY"in l?l.movementY:Ci}}),Zh=Yr(Ql),Oo=W({},Ql,{dataTransfer:0}),ba=Yr(Oo),Yf=W({},zr,{relatedTarget:0}),qf=Yr(Yf),Kf=W({},Uo,{animationName:0,elapsedTime:0,pseudoElement:0}),Sg=Yr(Kf),wg=W({},Uo,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Qh=Yr(wg),Zf=W({},Uo,{data:0}),Jh=Yr(Zf),Eg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$h={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jl(l){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(l):(l=$h[l])?!!f[l]:!1}function Aa(){return Jl}var Qf=W({},zr,{key:function(l){if(l.key){var f=Eg[l.key]||l.key;if(f!=="Unidentified")return f}return l.type==="keypress"?(l=No(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Mg[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Aa,charCode:function(l){return l.type==="keypress"?No(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?No(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Jf=Yr(Qf),ws=W({},Ql,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ts=Yr(ws),sl=W({},zr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Aa}),Fo=Yr(sl),ko=W({},Uo,{propertyName:0,elapsedTime:0,pseudoElement:0}),ol=Yr(ko),Tg=W({},Ql,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),ep=Yr(Tg),tp=[9,13,27,32],Ri=a&&"CompositionEvent"in window,ri=null;a&&"documentMode"in document&&(ri=document.documentMode);var ar=a&&"TextEvent"in window&&!ri,$l=a&&(!Ri||ri&&8<ri&&11>=ri),Es=" ",np=!1;function rp(l,f){switch(l){case"keyup":return tp.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $f(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Ca=!1;function bg(l,f){switch(l){case"compositionend":return $f(f);case"keypress":return f.which!==32?null:(np=!0,Es);case"textInput":return l=f.data,l===Es&&np?null:l;default:return null}}function pu(l,f){if(Ca)return l==="compositionend"||!Ri&&rp(l,f)?(l=Br(),Xr=Io=ki=null,Ca=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return $l&&f.locale!=="ko"?null:f.data;default:return null}}var ec={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ed(l){var f=l&&l.nodeName&&l.nodeName.toLowerCase();return f==="input"?!!ec[l.type]:f==="textarea"}function tc(l,f,v,M){De(M),f=fd(f,"onChange"),0<f.length&&(v=new Ar("onChange","change",null,v,M),l.push({event:v,listeners:f}))}var Ra=null,nc=null;function Ag(l){oc(l,0)}function Bo(l){var f=Er(l);if(te(f))return l}function Cg(l,f){if(l==="change")return f}var rc=!1;if(a){var zi;if(a){var al="oninput"in document;if(!al){var ll=document.createElement("div");ll.setAttribute("oninput","return;"),al=typeof ll.oninput=="function"}zi=al}else zi=!1;rc=zi&&(!document.documentMode||9<document.documentMode)}function zs(){Ra&&(Ra.detachEvent("onpropertychange",td),nc=Ra=null)}function td(l){if(l.propertyName==="value"&&Bo(nc)){var f=[];tc(f,nc,l,ke(l)),gn(Ag,f)}}function ic(l,f,v){l==="focusin"?(zs(),Ra=f,nc=v,Ra.attachEvent("onpropertychange",td)):l==="focusout"&&zs()}function Rg(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Bo(nc)}function ip(l,f){if(l==="click")return Bo(f)}function hr(l,f){if(l==="input"||l==="change")return Bo(f)}function nd(l,f){return l===f&&(l!==0||1/l===1/f)||l!==l&&f!==f}var ns=typeof Object.is=="function"?Object.is:nd;function cl(l,f){if(ns(l,f))return!0;if(typeof l!="object"||l===null||typeof f!="object"||f===null)return!1;var v=Object.keys(l),M=Object.keys(f);if(v.length!==M.length)return!1;for(M=0;M<v.length;M++){var R=v[M];if(!c.call(f,R)||!ns(l[R],f[R]))return!1}return!0}function mu(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function rs(l,f){var v=mu(l);l=0;for(var M;v;){if(v.nodeType===3){if(M=l+v.textContent.length,l<=f&&M>=f)return{node:v,offset:f-l};l=M}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=mu(v)}}function ul(l,f){return l&&f?l===f?!0:l&&l.nodeType===3?!1:f&&f.nodeType===3?ul(l,f.parentNode):"contains"in l?l.contains(f):l.compareDocumentPosition?!!(l.compareDocumentPosition(f)&16):!1:!1}function pr(){for(var l=window,f=Ye();f instanceof l.HTMLIFrameElement;){try{var v=typeof f.contentWindow.location.href=="string"}catch{v=!1}if(v)l=f.contentWindow;else break;f=Ye(l.document)}return f}function qr(l){var f=l&&l.nodeName&&l.nodeName.toLowerCase();return f&&(f==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||f==="textarea"||l.contentEditable==="true")}function Kr(l){var f=pr(),v=l.focusedElem,M=l.selectionRange;if(f!==v&&v&&v.ownerDocument&&ul(v.ownerDocument.documentElement,v)){if(M!==null&&qr(v)){if(f=M.start,l=M.end,l===void 0&&(l=f),"selectionStart"in v)v.selectionStart=f,v.selectionEnd=Math.min(l,v.value.length);else if(l=(f=v.ownerDocument||document)&&f.defaultView||window,l.getSelection){l=l.getSelection();var R=v.textContent.length,O=Math.min(M.start,R);M=M.end===void 0?O:Math.min(M.end,R),!l.extend&&O>M&&(R=M,M=O,O=R),R=rs(v,O);var Z=rs(v,M);R&&Z&&(l.rangeCount!==1||l.anchorNode!==R.node||l.anchorOffset!==R.offset||l.focusNode!==Z.node||l.focusOffset!==Z.offset)&&(f=f.createRange(),f.setStart(R.node,R.offset),l.removeAllRanges(),O>M?(l.addRange(f),l.extend(Z.node,Z.offset)):(f.setEnd(Z.node,Z.offset),l.addRange(f)))}}for(f=[],l=v;l=l.parentNode;)l.nodeType===1&&f.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<f.length;v++)l=f[v],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var rd=a&&"documentMode"in document&&11>=document.documentMode,ho=null,fl=null,gu=null,Zr=!1;function id(l,f,v){var M=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;Zr||ho==null||ho!==Ye(M)||(M=ho,"selectionStart"in M&&qr(M)?M={start:M.selectionStart,end:M.selectionEnd}:(M=(M.ownerDocument&&M.ownerDocument.defaultView||window).getSelection(),M={anchorNode:M.anchorNode,anchorOffset:M.anchorOffset,focusNode:M.focusNode,focusOffset:M.focusOffset}),gu&&cl(gu,M)||(gu=M,M=fd(fl,"onSelect"),0<M.length&&(f=new Ar("onSelect","select",null,f,v),l.push({event:f,listeners:M}),f.target=ho)))}function sc(l,f){var v={};return v[l.toLowerCase()]=f.toLowerCase(),v["Webkit"+l]="webkit"+f,v["Moz"+l]="moz"+f,v}var Pa={animationend:sc("Animation","AnimationEnd"),animationiteration:sc("Animation","AnimationIteration"),animationstart:sc("Animation","AnimationStart"),transitionend:sc("Transition","TransitionEnd")},Hs={},Gs={};a&&(Gs=document.createElement("div").style,"AnimationEvent"in window||(delete Pa.animationend.animation,delete Pa.animationiteration.animation,delete Pa.animationstart.animation),"TransitionEvent"in window||delete Pa.transitionend.transition);function po(l){if(Hs[l])return Hs[l];if(!Pa[l])return l;var f=Pa[l],v;for(v in f)if(f.hasOwnProperty(v)&&v in Gs)return Hs[l]=f[v];return l}var vu=po("animationend"),yu=po("animationiteration"),sp=po("animationstart"),op=po("transitionend"),ap=new Map,lp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zo(l,f){ap.set(l,f),s(f,[l])}for(var sd=0;sd<lp.length;sd++){var _u=lp[sd],xu=_u.toLowerCase(),Pg=_u[0].toUpperCase()+_u.slice(1);zo(xu,"on"+Pg)}zo(vu,"onAnimationEnd"),zo(yu,"onAnimationIteration"),zo(sp,"onAnimationStart"),zo("dblclick","onDoubleClick"),zo("focusin","onFocus"),zo("focusout","onBlur"),zo(op,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var La="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),od=new Set("cancel close invalid load scroll toggle".split(" ").concat(La));function ad(l,f,v){var M=l.type||"unknown-event";l.currentTarget=v,Y(M,f,void 0,l),l.currentTarget=null}function oc(l,f){f=(f&4)!==0;for(var v=0;v<l.length;v++){var M=l[v],R=M.event;M=M.listeners;e:{var O=void 0;if(f)for(var Z=M.length-1;0<=Z;Z--){var me=M[Z],we=me.instance,Ke=me.currentTarget;if(me=me.listener,we!==O&&R.isPropagationStopped())break e;ad(R,me,Ke),O=we}else for(Z=0;Z<M.length;Z++){if(me=M[Z],we=me.instance,Ke=me.currentTarget,me=me.listener,we!==O&&R.isPropagationStopped())break e;ad(R,me,Ke),O=we}}}if($n)throw l=qt,$n=!1,qt=null,l}function Zn(l,f){var v=f[pl];v===void 0&&(v=f[pl]=new Set);var M=l+"__bubble";v.has(M)||(cd(f,l,2,!1),v.add(M))}function ld(l,f,v){var M=0;f&&(M|=4),cd(v,l,M,f)}var Su="_reactListening"+Math.random().toString(36).slice(2);function ac(l){if(!l[Su]){l[Su]=!0,r.forEach(function(v){v!=="selectionchange"&&(od.has(v)||ld(v,!1,l),ld(v,!0,l))});var f=l.nodeType===9?l:l.ownerDocument;f===null||f[Su]||(f[Su]=!0,ld("selectionchange",!1,f))}}function cd(l,f,v,M){switch(Ta(f)){case 1:var R=fo;break;case 4:R=xs;break;default:R=il}v=R.bind(null,f,v,l),R=void 0,!pn||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(R=!0),M?R!==void 0?l.addEventListener(f,v,{capture:!0,passive:R}):l.addEventListener(f,v,!0):R!==void 0?l.addEventListener(f,v,{passive:R}):l.addEventListener(f,v,!1)}function ud(l,f,v,M,R){var O=M;if((f&1)===0&&(f&2)===0&&M!==null)e:for(;;){if(M===null)return;var Z=M.tag;if(Z===3||Z===4){var me=M.stateNode.containerInfo;if(me===R||me.nodeType===8&&me.parentNode===R)break;if(Z===4)for(Z=M.return;Z!==null;){var we=Z.tag;if((we===3||we===4)&&(we=Z.stateNode.containerInfo,we===R||we.nodeType===8&&we.parentNode===R))return;Z=Z.return}for(;me!==null;){if(Z=Ia(me),Z===null)return;if(we=Z.tag,we===5||we===6){M=O=Z;continue e}me=me.parentNode}}M=M.return}gn(function(){var Ke=O,gt=ke(v),vt=[];e:{var pt=ap.get(l);if(pt!==void 0){var Ot=Ar,Bt=l;switch(l){case"keypress":if(No(v)===0)break e;case"keydown":case"keyup":Ot=Jf;break;case"focusin":Bt="focus",Ot=qf;break;case"focusout":Bt="blur",Ot=qf;break;case"beforeblur":case"afterblur":Ot=qf;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ot=Zh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ot=ba;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ot=Fo;break;case vu:case yu:case sp:Ot=Sg;break;case op:Ot=ol;break;case"scroll":Ot=wr;break;case"wheel":Ot=ep;break;case"copy":case"cut":case"paste":Ot=Qh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ot=ts}var zt=(f&4)!==0,Gr=!zt&&l==="scroll",Oe=zt?pt!==null?pt+"Capture":null:pt;zt=[];for(var be=Ke,ze;be!==null;){ze=be;var wt=ze.stateNode;if(ze.tag===5&&wt!==null&&(ze=wt,Oe!==null&&(wt=Yt(be,Oe),wt!=null&&zt.push(lc(be,wt,ze)))),Gr)break;be=be.return}0<zt.length&&(pt=new Ot(pt,Bt,null,v,gt),vt.push({event:pt,listeners:zt}))}}if((f&7)===0){e:{if(pt=l==="mouseover"||l==="pointerover",Ot=l==="mouseout"||l==="pointerout",pt&&v!==Pe&&(Bt=v.relatedTarget||v.fromElement)&&(Ia(Bt)||Bt[is]))break e;if((Ot||pt)&&(pt=gt.window===gt?gt:(pt=gt.ownerDocument)?pt.defaultView||pt.parentWindow:window,Ot?(Bt=v.relatedTarget||v.toElement,Ot=Ke,Bt=Bt?Ia(Bt):null,Bt!==null&&(Gr=ee(Bt),Bt!==Gr||Bt.tag!==5&&Bt.tag!==6)&&(Bt=null)):(Ot=null,Bt=Ke),Ot!==Bt)){if(zt=Zh,wt="onMouseLeave",Oe="onMouseEnter",be="mouse",(l==="pointerout"||l==="pointerover")&&(zt=ts,wt="onPointerLeave",Oe="onPointerEnter",be="pointer"),Gr=Ot==null?pt:Er(Ot),ze=Bt==null?pt:Er(Bt),pt=new zt(wt,be+"leave",Ot,v,gt),pt.target=Gr,pt.relatedTarget=ze,wt=null,Ia(gt)===Ke&&(zt=new zt(Oe,be+"enter",Bt,v,gt),zt.target=ze,zt.relatedTarget=Gr,wt=zt),Gr=wt,Ot&&Bt)t:{for(zt=Ot,Oe=Bt,be=0,ze=zt;ze;ze=dl(ze))be++;for(ze=0,wt=Oe;wt;wt=dl(wt))ze++;for(;0<be-ze;)zt=dl(zt),be--;for(;0<ze-be;)Oe=dl(Oe),ze--;for(;be--;){if(zt===Oe||Oe!==null&&zt===Oe.alternate)break t;zt=dl(zt),Oe=dl(Oe)}zt=null}else zt=null;Ot!==null&&Lg(vt,pt,Ot,zt,!1),Bt!==null&&Gr!==null&&Lg(vt,Gr,Bt,zt,!0)}}e:{if(pt=Ke?Er(Ke):window,Ot=pt.nodeName&&pt.nodeName.toLowerCase(),Ot==="select"||Ot==="input"&&pt.type==="file")var Xt=Cg;else if(ed(pt))if(rc)Xt=hr;else{Xt=Rg;var en=ic}else(Ot=pt.nodeName)&&Ot.toLowerCase()==="input"&&(pt.type==="checkbox"||pt.type==="radio")&&(Xt=ip);if(Xt&&(Xt=Xt(l,Ke))){tc(vt,Xt,v,gt);break e}en&&en(l,pt,Ke),l==="focusout"&&(en=pt._wrapperState)&&en.controlled&&pt.type==="number"&&qe(pt,"number",pt.value)}switch(en=Ke?Er(Ke):window,l){case"focusin":(ed(en)||en.contentEditable==="true")&&(ho=en,fl=Ke,gu=null);break;case"focusout":gu=fl=ho=null;break;case"mousedown":Zr=!0;break;case"contextmenu":case"mouseup":case"dragend":Zr=!1,id(vt,v,gt);break;case"selectionchange":if(rd)break;case"keydown":case"keyup":id(vt,v,gt)}var tn;if(Ri)e:{switch(l){case"compositionstart":var cn="onCompositionStart";break e;case"compositionend":cn="onCompositionEnd";break e;case"compositionupdate":cn="onCompositionUpdate";break e}cn=void 0}else Ca?rp(l,v)&&(cn="onCompositionEnd"):l==="keydown"&&v.keyCode===229&&(cn="onCompositionStart");cn&&($l&&v.locale!=="ko"&&(Ca||cn!=="onCompositionStart"?cn==="onCompositionEnd"&&Ca&&(tn=Br()):(ki=gt,Io="value"in ki?ki.value:ki.textContent,Ca=!0)),en=fd(Ke,cn),0<en.length&&(cn=new Jh(cn,l,null,v,gt),vt.push({event:cn,listeners:en}),tn?cn.data=tn:(tn=$f(v),tn!==null&&(cn.data=tn)))),(tn=ar?bg(l,v):pu(l,v))&&(Ke=fd(Ke,"onBeforeInput"),0<Ke.length&&(gt=new Jh("onBeforeInput","beforeinput",null,v,gt),vt.push({event:gt,listeners:Ke}),gt.data=tn))}oc(vt,f)})}function lc(l,f,v){return{instance:l,listener:f,currentTarget:v}}function fd(l,f){for(var v=f+"Capture",M=[];l!==null;){var R=l,O=R.stateNode;R.tag===5&&O!==null&&(R=O,O=Yt(l,v),O!=null&&M.unshift(lc(l,O,R)),O=Yt(l,f),O!=null&&M.push(lc(l,O,R))),l=l.return}return M}function dl(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function Lg(l,f,v,M,R){for(var O=f._reactName,Z=[];v!==null&&v!==M;){var me=v,we=me.alternate,Ke=me.stateNode;if(we!==null&&we===M)break;me.tag===5&&Ke!==null&&(me=Ke,R?(we=Yt(v,O),we!=null&&Z.unshift(lc(v,we,me))):R||(we=Yt(v,O),we!=null&&Z.push(lc(v,we,me)))),v=v.return}Z.length!==0&&l.push({event:f,listeners:Z})}var t_=/\r\n?/g,Ig=/\u0000|\uFFFD/g;function cp(l){return(typeof l=="string"?l:""+l).replace(t_,`
`).replace(Ig,"")}function wu(l,f,v){if(f=cp(f),cp(l)!==f&&v)throw Error(t(425))}function Eu(){}var cc=null,up=null;function fp(l,f){return l==="textarea"||l==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var dp=typeof setTimeout=="function"?setTimeout:void 0,hp=typeof clearTimeout=="function"?clearTimeout:void 0,dd=typeof Promise=="function"?Promise:void 0,n_=typeof queueMicrotask=="function"?queueMicrotask:typeof dd<"u"?function(l){return dd.resolve(null).then(l).catch(Ng)}:dp;function Ng(l){setTimeout(function(){throw l})}function hd(l,f){var v=f,M=0;do{var R=v.nextSibling;if(l.removeChild(v),R&&R.nodeType===8)if(v=R.data,v==="/$"){if(M===0){l.removeChild(R),Ea(f);return}M--}else v!=="$"&&v!=="$?"&&v!=="$!"||M++;v=R}while(v);Ea(f)}function Ho(l){for(;l!=null;l=l.nextSibling){var f=l.nodeType;if(f===1||f===3)break;if(f===8){if(f=l.data,f==="$"||f==="$!"||f==="$?")break;if(f==="/$")return null}}return l}function pp(l){l=l.previousSibling;for(var f=0;l;){if(l.nodeType===8){var v=l.data;if(v==="$"||v==="$!"||v==="$?"){if(f===0)return l;f--}else v==="/$"&&f++}l=l.previousSibling}return null}var hl=Math.random().toString(36).slice(2),Hr="__reactFiber$"+hl,uc="__reactProps$"+hl,is="__reactContainer$"+hl,pl="__reactEvents$"+hl,pd="__reactListeners$"+hl,md="__reactHandles$"+hl;function Ia(l){var f=l[Hr];if(f)return f;for(var v=l.parentNode;v;){if(f=v[is]||v[Hr]){if(v=f.alternate,f.child!==null||v!==null&&v.child!==null)for(l=pp(l);l!==null;){if(v=l[Hr])return v;l=pp(l)}return f}l=v,v=l.parentNode}return null}function Go(l){return l=l[Hr]||l[is],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function Er(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(t(33))}function gd(l){return l[uc]||null}var mp=[],Qr=-1;function yr(l){return{current:l}}function Qn(l){0>Qr||(l.current=mp[Qr],mp[Qr]=null,Qr--)}function qn(l,f){Qr++,mp[Qr]=l.current,l.current=f}var Vo={},ii=yr(Vo),Pi=yr(!1),Wo=Vo;function ml(l,f){var v=l.type.contextTypes;if(!v)return Vo;var M=l.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===f)return M.__reactInternalMemoizedMaskedChildContext;var R={},O;for(O in v)R[O]=f[O];return M&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=f,l.__reactInternalMemoizedMaskedChildContext=R),R}function xi(l){return l=l.childContextTypes,l!=null}function Mu(){Qn(Pi),Qn(ii)}function gp(l,f,v){if(ii.current!==Vo)throw Error(t(168));qn(ii,f),qn(Pi,v)}function Tu(l,f,v){var M=l.stateNode;if(f=f.childContextTypes,typeof M.getChildContext!="function")return v;M=M.getChildContext();for(var R in M)if(!(R in f))throw Error(t(108,xe(l)||"Unknown",R));return W({},v,M)}function gl(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||Vo,Wo=ii.current,qn(ii,l),qn(Pi,Pi.current),!0}function vp(l,f,v){var M=l.stateNode;if(!M)throw Error(t(169));v?(l=Tu(l,f,Wo),M.__reactInternalMemoizedMergedChildContext=l,Qn(Pi),Qn(ii),qn(ii,l)):Qn(Pi),qn(Pi,v)}var Vs=null,bu=!1,vd=!1;function Au(l){Vs===null?Vs=[l]:Vs.push(l)}function Dg(l){bu=!0,Au(l)}function mo(){if(!vd&&Vs!==null){vd=!0;var l=0,f=Tn;try{var v=Vs;for(Tn=1;l<v.length;l++){var M=v[l];do M=M(!0);while(M!==null)}Vs=null,bu=!1}catch(R){throw Vs!==null&&(Vs=Vs.slice(l+1)),ge(dt,mo),R}finally{Tn=f,vd=!1}}return null}var vl=[],Hi=0,yd=null,_d=0,Li=[],Jr=0,yl=null,At=1,Ms="";function jo(l,f){vl[Hi++]=_d,vl[Hi++]=yd,yd=l,_d=f}function yp(l,f,v){Li[Jr++]=At,Li[Jr++]=Ms,Li[Jr++]=yl,yl=l;var M=At;l=Ms;var R=32-Kt(M)-1;M&=~(1<<R),v+=1;var O=32-Kt(f)+R;if(30<O){var Z=R-R%5;O=(M&(1<<Z)-1).toString(32),M>>=Z,R-=Z,At=1<<32-Kt(f)+R|v<<R|M,Ms=O+l}else At=1<<O|v<<R|M,Ms=l}function _p(l){l.return!==null&&(jo(l,1),yp(l,1,0))}function Xo(l){for(;l===yd;)yd=vl[--Hi],vl[Hi]=null,_d=vl[--Hi],vl[Hi]=null;for(;l===yl;)yl=Li[--Jr],Li[Jr]=null,Ms=Li[--Jr],Li[Jr]=null,At=Li[--Jr],Li[Jr]=null}var si=null,Ii=null,tr=!1,Ts=null;function xp(l,f){var v=xo(5,null,null,0);v.elementType="DELETED",v.stateNode=f,v.return=l,f=l.deletions,f===null?(l.deletions=[v],l.flags|=16):f.push(v)}function Sp(l,f){switch(l.tag){case 5:var v=l.type;return f=f.nodeType!==1||v.toLowerCase()!==f.nodeName.toLowerCase()?null:f,f!==null?(l.stateNode=f,si=l,Ii=Ho(f.firstChild),!0):!1;case 6:return f=l.pendingProps===""||f.nodeType!==3?null:f,f!==null?(l.stateNode=f,si=l,Ii=null,!0):!1;case 13:return f=f.nodeType!==8?null:f,f!==null?(v=yl!==null?{id:At,overflow:Ms}:null,l.memoizedState={dehydrated:f,treeContext:v,retryLane:1073741824},v=xo(18,null,null,0),v.stateNode=f,v.return=l,l.child=v,si=l,Ii=null,!0):!1;default:return!1}}function xd(l){return(l.mode&1)!==0&&(l.flags&128)===0}function Sd(l){if(tr){var f=Ii;if(f){var v=f;if(!Sp(l,f)){if(xd(l))throw Error(t(418));f=Ho(v.nextSibling);var M=si;f&&Sp(l,f)?xp(M,v):(l.flags=l.flags&-4097|2,tr=!1,si=l)}}else{if(xd(l))throw Error(t(418));l.flags=l.flags&-4097|2,tr=!1,si=l}}}function wd(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;si=l}function fc(l){if(l!==si)return!1;if(!tr)return wd(l),tr=!0,!1;var f;if((f=l.tag!==3)&&!(f=l.tag!==5)&&(f=l.type,f=f!=="head"&&f!=="body"&&!fp(l.type,l.memoizedProps)),f&&(f=Ii)){if(xd(l))throw wp(),Error(t(418));for(;f;)xp(l,f),f=Ho(f.nextSibling)}if(wd(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(t(317));e:{for(l=l.nextSibling,f=0;l;){if(l.nodeType===8){var v=l.data;if(v==="/$"){if(f===0){Ii=Ho(l.nextSibling);break e}f--}else v!=="$"&&v!=="$!"&&v!=="$?"||f++}l=l.nextSibling}Ii=null}}else Ii=si?Ho(l.stateNode.nextSibling):null;return!0}function wp(){for(var l=Ii;l;)l=Ho(l.nextSibling)}function Na(){Ii=si=null,tr=!1}function dc(l){Ts===null?Ts=[l]:Ts.push(l)}var r_=C.ReactCurrentBatchConfig;function Cu(l,f,v){if(l=v.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(t(309));var M=v.stateNode}if(!M)throw Error(t(147,l));var R=M,O=""+l;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===O?f.ref:(f=function(Z){var me=R.refs;Z===null?delete me[O]:me[O]=Z},f._stringRef=O,f)}if(typeof l!="string")throw Error(t(284));if(!v._owner)throw Error(t(290,l))}return l}function Ru(l,f){throw l=Object.prototype.toString.call(f),Error(t(31,l==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":l))}function Ep(l){var f=l._init;return f(l._payload)}function Mp(l){function f(Oe,be){if(l){var ze=Oe.deletions;ze===null?(Oe.deletions=[be],Oe.flags|=16):ze.push(be)}}function v(Oe,be){if(!l)return null;for(;be!==null;)f(Oe,be),be=be.sibling;return null}function M(Oe,be){for(Oe=new Map;be!==null;)be.key!==null?Oe.set(be.key,be):Oe.set(be.index,be),be=be.sibling;return Oe}function R(Oe,be){return Oe=Ec(Oe,be),Oe.index=0,Oe.sibling=null,Oe}function O(Oe,be,ze){return Oe.index=ze,l?(ze=Oe.alternate,ze!==null?(ze=ze.index,ze<be?(Oe.flags|=2,be):ze):(Oe.flags|=2,be)):(Oe.flags|=1048576,be)}function Z(Oe){return l&&Oe.alternate===null&&(Oe.flags|=2),Oe}function me(Oe,be,ze,wt){return be===null||be.tag!==6?(be=w_(ze,Oe.mode,wt),be.return=Oe,be):(be=R(be,ze),be.return=Oe,be)}function we(Oe,be,ze,wt){var Xt=ze.type;return Xt===U?gt(Oe,be,ze.props.children,wt,ze.key):be!==null&&(be.elementType===Xt||typeof Xt=="object"&&Xt!==null&&Xt.$$typeof===re&&Ep(Xt)===be.type)?(wt=R(be,ze.props),wt.ref=Cu(Oe,be,ze),wt.return=Oe,wt):(wt=rv(ze.type,ze.key,ze.props,null,Oe.mode,wt),wt.ref=Cu(Oe,be,ze),wt.return=Oe,wt)}function Ke(Oe,be,ze,wt){return be===null||be.tag!==4||be.stateNode.containerInfo!==ze.containerInfo||be.stateNode.implementation!==ze.implementation?(be=E_(ze,Oe.mode,wt),be.return=Oe,be):(be=R(be,ze.children||[]),be.return=Oe,be)}function gt(Oe,be,ze,wt,Xt){return be===null||be.tag!==7?(be=Xu(ze,Oe.mode,wt,Xt),be.return=Oe,be):(be=R(be,ze),be.return=Oe,be)}function vt(Oe,be,ze){if(typeof be=="string"&&be!==""||typeof be=="number")return be=w_(""+be,Oe.mode,ze),be.return=Oe,be;if(typeof be=="object"&&be!==null){switch(be.$$typeof){case P:return ze=rv(be.type,be.key,be.props,null,Oe.mode,ze),ze.ref=Cu(Oe,null,be),ze.return=Oe,ze;case D:return be=E_(be,Oe.mode,ze),be.return=Oe,be;case re:var wt=be._init;return vt(Oe,wt(be._payload),ze)}if(nt(be)||K(be))return be=Xu(be,Oe.mode,ze,null),be.return=Oe,be;Ru(Oe,be)}return null}function pt(Oe,be,ze,wt){var Xt=be!==null?be.key:null;if(typeof ze=="string"&&ze!==""||typeof ze=="number")return Xt!==null?null:me(Oe,be,""+ze,wt);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case P:return ze.key===Xt?we(Oe,be,ze,wt):null;case D:return ze.key===Xt?Ke(Oe,be,ze,wt):null;case re:return Xt=ze._init,pt(Oe,be,Xt(ze._payload),wt)}if(nt(ze)||K(ze))return Xt!==null?null:gt(Oe,be,ze,wt,null);Ru(Oe,ze)}return null}function Ot(Oe,be,ze,wt,Xt){if(typeof wt=="string"&&wt!==""||typeof wt=="number")return Oe=Oe.get(ze)||null,me(be,Oe,""+wt,Xt);if(typeof wt=="object"&&wt!==null){switch(wt.$$typeof){case P:return Oe=Oe.get(wt.key===null?ze:wt.key)||null,we(be,Oe,wt,Xt);case D:return Oe=Oe.get(wt.key===null?ze:wt.key)||null,Ke(be,Oe,wt,Xt);case re:var en=wt._init;return Ot(Oe,be,ze,en(wt._payload),Xt)}if(nt(wt)||K(wt))return Oe=Oe.get(ze)||null,gt(be,Oe,wt,Xt,null);Ru(be,wt)}return null}function Bt(Oe,be,ze,wt){for(var Xt=null,en=null,tn=be,cn=be=0,Mi=null;tn!==null&&cn<ze.length;cn++){tn.index>cn?(Mi=tn,tn=null):Mi=tn.sibling;var Bn=pt(Oe,tn,ze[cn],wt);if(Bn===null){tn===null&&(tn=Mi);break}l&&tn&&Bn.alternate===null&&f(Oe,tn),be=O(Bn,be,cn),en===null?Xt=Bn:en.sibling=Bn,en=Bn,tn=Mi}if(cn===ze.length)return v(Oe,tn),tr&&jo(Oe,cn),Xt;if(tn===null){for(;cn<ze.length;cn++)tn=vt(Oe,ze[cn],wt),tn!==null&&(be=O(tn,be,cn),en===null?Xt=tn:en.sibling=tn,en=tn);return tr&&jo(Oe,cn),Xt}for(tn=M(Oe,tn);cn<ze.length;cn++)Mi=Ot(tn,Oe,cn,ze[cn],wt),Mi!==null&&(l&&Mi.alternate!==null&&tn.delete(Mi.key===null?cn:Mi.key),be=O(Mi,be,cn),en===null?Xt=Mi:en.sibling=Mi,en=Mi);return l&&tn.forEach(function(Mc){return f(Oe,Mc)}),tr&&jo(Oe,cn),Xt}function zt(Oe,be,ze,wt){var Xt=K(ze);if(typeof Xt!="function")throw Error(t(150));if(ze=Xt.call(ze),ze==null)throw Error(t(151));for(var en=Xt=null,tn=be,cn=be=0,Mi=null,Bn=ze.next();tn!==null&&!Bn.done;cn++,Bn=ze.next()){tn.index>cn?(Mi=tn,tn=null):Mi=tn.sibling;var Mc=pt(Oe,tn,Bn.value,wt);if(Mc===null){tn===null&&(tn=Mi);break}l&&tn&&Mc.alternate===null&&f(Oe,tn),be=O(Mc,be,cn),en===null?Xt=Mc:en.sibling=Mc,en=Mc,tn=Mi}if(Bn.done)return v(Oe,tn),tr&&jo(Oe,cn),Xt;if(tn===null){for(;!Bn.done;cn++,Bn=ze.next())Bn=vt(Oe,Bn.value,wt),Bn!==null&&(be=O(Bn,be,cn),en===null?Xt=Bn:en.sibling=Bn,en=Bn);return tr&&jo(Oe,cn),Xt}for(tn=M(Oe,tn);!Bn.done;cn++,Bn=ze.next())Bn=Ot(tn,Oe,cn,Bn.value,wt),Bn!==null&&(l&&Bn.alternate!==null&&tn.delete(Bn.key===null?cn:Bn.key),be=O(Bn,be,cn),en===null?Xt=Bn:en.sibling=Bn,en=Bn);return l&&tn.forEach(function(r3){return f(Oe,r3)}),tr&&jo(Oe,cn),Xt}function Gr(Oe,be,ze,wt){if(typeof ze=="object"&&ze!==null&&ze.type===U&&ze.key===null&&(ze=ze.props.children),typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case P:e:{for(var Xt=ze.key,en=be;en!==null;){if(en.key===Xt){if(Xt=ze.type,Xt===U){if(en.tag===7){v(Oe,en.sibling),be=R(en,ze.props.children),be.return=Oe,Oe=be;break e}}else if(en.elementType===Xt||typeof Xt=="object"&&Xt!==null&&Xt.$$typeof===re&&Ep(Xt)===en.type){v(Oe,en.sibling),be=R(en,ze.props),be.ref=Cu(Oe,en,ze),be.return=Oe,Oe=be;break e}v(Oe,en);break}else f(Oe,en);en=en.sibling}ze.type===U?(be=Xu(ze.props.children,Oe.mode,wt,ze.key),be.return=Oe,Oe=be):(wt=rv(ze.type,ze.key,ze.props,null,Oe.mode,wt),wt.ref=Cu(Oe,be,ze),wt.return=Oe,Oe=wt)}return Z(Oe);case D:e:{for(en=ze.key;be!==null;){if(be.key===en)if(be.tag===4&&be.stateNode.containerInfo===ze.containerInfo&&be.stateNode.implementation===ze.implementation){v(Oe,be.sibling),be=R(be,ze.children||[]),be.return=Oe,Oe=be;break e}else{v(Oe,be);break}else f(Oe,be);be=be.sibling}be=E_(ze,Oe.mode,wt),be.return=Oe,Oe=be}return Z(Oe);case re:return en=ze._init,Gr(Oe,be,en(ze._payload),wt)}if(nt(ze))return Bt(Oe,be,ze,wt);if(K(ze))return zt(Oe,be,ze,wt);Ru(Oe,ze)}return typeof ze=="string"&&ze!==""||typeof ze=="number"?(ze=""+ze,be!==null&&be.tag===6?(v(Oe,be.sibling),be=R(be,ze),be.return=Oe,Oe=be):(v(Oe,be),be=w_(ze,Oe.mode,wt),be.return=Oe,Oe=be),Z(Oe)):v(Oe,be)}return Gr}var _l=Mp(!0),Pu=Mp(!1),xl=yr(null),Sl=null,Yo=null,hc=null;function wl(){hc=Yo=Sl=null}function Lu(l){var f=xl.current;Qn(xl),l._currentValue=f}function Iu(l,f,v){for(;l!==null;){var M=l.alternate;if((l.childLanes&f)!==f?(l.childLanes|=f,M!==null&&(M.childLanes|=f)):M!==null&&(M.childLanes&f)!==f&&(M.childLanes|=f),l===v)break;l=l.return}}function Da(l,f){Sl=l,hc=Yo=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&f)!==0&&(vn=!0),l.firstContext=null)}function ss(l){var f=l._currentValue;if(hc!==l)if(l={context:l,memoizedValue:f,next:null},Yo===null){if(Sl===null)throw Error(t(308));Yo=l,Sl.dependencies={lanes:0,firstContext:l}}else Yo=Yo.next=l;return f}var qo=null;function Tp(l){qo===null?qo=[l]:qo.push(l)}function Nu(l,f,v,M){var R=f.interleaved;return R===null?(v.next=v,Tp(f)):(v.next=R.next,R.next=v),f.interleaved=v,Ws(l,M)}function Ws(l,f){l.lanes|=f;var v=l.alternate;for(v!==null&&(v.lanes|=f),v=l,l=l.return;l!==null;)l.childLanes|=f,v=l.alternate,v!==null&&(v.childLanes|=f),v=l,l=l.return;return v.tag===3?v.stateNode:null}var Gn=!1;function mn(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mr(l,f){l=l.updateQueue,f.updateQueue===l&&(f.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function Vn(l,f){return{eventTime:l,lane:f,tag:0,payload:null,callback:null,next:null}}function lr(l,f,v){var M=l.updateQueue;if(M===null)return null;if(M=M.shared,(Fn&2)!==0){var R=M.pending;return R===null?f.next=f:(f.next=R.next,R.next=f),M.pending=f,Ws(l,v)}return R=M.interleaved,R===null?(f.next=f,Tp(M)):(f.next=R.next,R.next=f),M.interleaved=f,Ws(l,v)}function Si(l,f,v){if(f=f.updateQueue,f!==null&&(f=f.shared,(v&4194240)!==0)){var M=f.lanes;M&=l.pendingLanes,v|=M,f.lanes=v,Fs(l,v)}}function El(l,f){var v=l.updateQueue,M=l.alternate;if(M!==null&&(M=M.updateQueue,v===M)){var R=null,O=null;if(v=v.firstBaseUpdate,v!==null){do{var Z={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};O===null?R=O=Z:O=O.next=Z,v=v.next}while(v!==null);O===null?R=O=f:O=O.next=f}else R=O=f;v={baseState:M.baseState,firstBaseUpdate:R,lastBaseUpdate:O,shared:M.shared,effects:M.effects},l.updateQueue=v;return}l=v.lastBaseUpdate,l===null?v.firstBaseUpdate=f:l.next=f,v.lastBaseUpdate=f}function _r(l,f,v,M){var R=l.updateQueue;Gn=!1;var O=R.firstBaseUpdate,Z=R.lastBaseUpdate,me=R.shared.pending;if(me!==null){R.shared.pending=null;var we=me,Ke=we.next;we.next=null,Z===null?O=Ke:Z.next=Ke,Z=we;var gt=l.alternate;gt!==null&&(gt=gt.updateQueue,me=gt.lastBaseUpdate,me!==Z&&(me===null?gt.firstBaseUpdate=Ke:me.next=Ke,gt.lastBaseUpdate=we))}if(O!==null){var vt=R.baseState;Z=0,gt=Ke=we=null,me=O;do{var pt=me.lane,Ot=me.eventTime;if((M&pt)===pt){gt!==null&&(gt=gt.next={eventTime:Ot,lane:0,tag:me.tag,payload:me.payload,callback:me.callback,next:null});e:{var Bt=l,zt=me;switch(pt=f,Ot=v,zt.tag){case 1:if(Bt=zt.payload,typeof Bt=="function"){vt=Bt.call(Ot,vt,pt);break e}vt=Bt;break e;case 3:Bt.flags=Bt.flags&-65537|128;case 0:if(Bt=zt.payload,pt=typeof Bt=="function"?Bt.call(Ot,vt,pt):Bt,pt==null)break e;vt=W({},vt,pt);break e;case 2:Gn=!0}}me.callback!==null&&me.lane!==0&&(l.flags|=64,pt=R.effects,pt===null?R.effects=[me]:pt.push(me))}else Ot={eventTime:Ot,lane:pt,tag:me.tag,payload:me.payload,callback:me.callback,next:null},gt===null?(Ke=gt=Ot,we=vt):gt=gt.next=Ot,Z|=pt;if(me=me.next,me===null){if(me=R.shared.pending,me===null)break;pt=me,me=pt.next,pt.next=null,R.lastBaseUpdate=pt,R.shared.pending=null}}while(!0);if(gt===null&&(we=vt),R.baseState=we,R.firstBaseUpdate=Ke,R.lastBaseUpdate=gt,f=R.shared.interleaved,f!==null){R=f;do Z|=R.lane,R=R.next;while(R!==f)}else O===null&&(R.shared.lanes=0);Gu|=Z,l.lanes=Z,l.memoizedState=vt}}function pc(l,f,v){if(l=f.effects,f.effects=null,l!==null)for(f=0;f<l.length;f++){var M=l[f],R=M.callback;if(R!==null){if(M.callback=null,M=v,typeof R!="function")throw Error(t(191,R));R.call(M)}}}var go={},os=yr(go),Ml=yr(go),Ko=yr(go);function Cr(l){if(l===go)throw Error(t(174));return l}function Du(l,f){switch(qn(Ko,f),qn(Ml,l),qn(os,go),l=f.nodeType,l){case 9:case 11:f=(f=f.documentElement)?f.namespaceURI:Le(null,"");break;default:l=l===8?f.parentNode:f,f=l.namespaceURI||null,l=l.tagName,f=Le(f,l)}Qn(os),qn(os,f)}function Ua(){Qn(os),Qn(Ml),Qn(Ko)}function Tl(l){Cr(Ko.current);var f=Cr(os.current),v=Le(f,l.type);f!==v&&(qn(Ml,l),qn(os,v))}function mc(l){Ml.current===l&&(Qn(os),Qn(Ml))}var nr=yr(0);function js(l){for(var f=l;f!==null;){if(f.tag===13){var v=f.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||v.data==="$!"))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var gc=[];function vo(){for(var l=0;l<gc.length;l++)gc[l]._workInProgressVersionPrimary=null;gc.length=0}var bl=C.ReactCurrentDispatcher,Al=C.ReactCurrentBatchConfig,Zo=0,Jn=null,xr=null,Nn=null,Xs=!1,wi=!1,Oa=0,Gi=0;function oi(){throw Error(t(321))}function Uu(l,f){if(f===null)return!1;for(var v=0;v<f.length&&v<l.length;v++)if(!ns(l[v],f[v]))return!1;return!0}function Ou(l,f,v,M,R,O){if(Zo=O,Jn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,bl.current=l===null||l.memoizedState===null?Hg:Gg,l=v(M,R),wi){O=0;do{if(wi=!1,Oa=0,25<=O)throw Error(t(301));O+=1,Nn=xr=null,f.updateQueue=null,bl.current=Vg,l=v(M,R)}while(wi)}if(bl.current=Rd,f=xr!==null&&xr.next!==null,Zo=0,Nn=xr=Jn=null,Xs=!1,f)throw Error(t(300));return l}function bp(){var l=Oa!==0;return Oa=0,l}function ai(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?Jn.memoizedState=Nn=l:Nn=Nn.next=l,Nn}function as(){if(xr===null){var l=Jn.alternate;l=l!==null?l.memoizedState:null}else l=xr.next;var f=Nn===null?Jn.memoizedState:Nn.next;if(f!==null)Nn=f,xr=l;else{if(l===null)throw Error(t(310));xr=l,l={memoizedState:xr.memoizedState,baseState:xr.baseState,baseQueue:xr.baseQueue,queue:xr.queue,next:null},Nn===null?Jn.memoizedState=Nn=l:Nn=Nn.next=l}return Nn}function vc(l,f){return typeof f=="function"?f(l):f}function Fu(l){var f=as(),v=f.queue;if(v===null)throw Error(t(311));v.lastRenderedReducer=l;var M=xr,R=M.baseQueue,O=v.pending;if(O!==null){if(R!==null){var Z=R.next;R.next=O.next,O.next=Z}M.baseQueue=R=O,v.pending=null}if(R!==null){O=R.next,M=M.baseState;var me=Z=null,we=null,Ke=O;do{var gt=Ke.lane;if((Zo&gt)===gt)we!==null&&(we=we.next={lane:0,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null}),M=Ke.hasEagerState?Ke.eagerState:l(M,Ke.action);else{var vt={lane:gt,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null};we===null?(me=we=vt,Z=M):we=we.next=vt,Jn.lanes|=gt,Gu|=gt}Ke=Ke.next}while(Ke!==null&&Ke!==O);we===null?Z=M:we.next=me,ns(M,f.memoizedState)||(vn=!0),f.memoizedState=M,f.baseState=Z,f.baseQueue=we,v.lastRenderedState=M}if(l=v.interleaved,l!==null){R=l;do O=R.lane,Jn.lanes|=O,Gu|=O,R=R.next;while(R!==l)}else R===null&&(v.lanes=0);return[f.memoizedState,v.dispatch]}function Qo(l){var f=as(),v=f.queue;if(v===null)throw Error(t(311));v.lastRenderedReducer=l;var M=v.dispatch,R=v.pending,O=f.memoizedState;if(R!==null){v.pending=null;var Z=R=R.next;do O=l(O,Z.action),Z=Z.next;while(Z!==R);ns(O,f.memoizedState)||(vn=!0),f.memoizedState=O,f.baseQueue===null&&(f.baseState=O),v.lastRenderedState=O}return[O,M]}function Ap(){}function Cp(l,f){var v=Jn,M=as(),R=f(),O=!ns(M.memoizedState,R);if(O&&(M.memoizedState=R,vn=!0),M=M.queue,Lp(Ug.bind(null,v,M,l),[l]),M.getSnapshot!==f||O||Nn!==null&&Nn.memoizedState.tag&1){if(v.flags|=2048,Ys(9,ku.bind(null,v,M,R,f),void 0,null),Ei===null)throw Error(t(349));(Zo&30)!==0||Ed(v,f,R)}return R}function Ed(l,f,v){l.flags|=16384,l={getSnapshot:f,value:v},f=Jn.updateQueue,f===null?(f={lastEffect:null,stores:null},Jn.updateQueue=f,f.stores=[l]):(v=f.stores,v===null?f.stores=[l]:v.push(l))}function ku(l,f,v,M){f.value=v,f.getSnapshot=M,Og(f)&&Rp(l)}function Ug(l,f,v){return v(function(){Og(f)&&Rp(l)})}function Og(l){var f=l.getSnapshot;l=l.value;try{var v=f();return!ns(l,v)}catch{return!0}}function Rp(l){var f=Ws(l,1);f!==null&&na(f,l,1,-1)}function Pp(l){var f=ai();return typeof l=="function"&&(l=l()),f.memoizedState=f.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vc,lastRenderedState:l},f.queue=l,l=l.dispatch=Cl.bind(null,Jn,l),[f.memoizedState,l]}function Ys(l,f,v,M){return l={tag:l,create:f,destroy:v,deps:M,next:null},f=Jn.updateQueue,f===null?(f={lastEffect:null,stores:null},Jn.updateQueue=f,f.lastEffect=l.next=l):(v=f.lastEffect,v===null?f.lastEffect=l.next=l:(M=v.next,v.next=l,l.next=M,f.lastEffect=l)),l}function Fg(){return as().memoizedState}function yo(l,f,v,M){var R=ai();Jn.flags|=l,R.memoizedState=Ys(1|f,v,void 0,M===void 0?null:M)}function Bu(l,f,v,M){var R=as();M=M===void 0?null:M;var O=void 0;if(xr!==null){var Z=xr.memoizedState;if(O=Z.destroy,M!==null&&Uu(M,Z.deps)){R.memoizedState=Ys(f,v,O,M);return}}Jn.flags|=l,R.memoizedState=Ys(1|f,v,O,M)}function Ni(l,f){return yo(8390656,8,l,f)}function Lp(l,f){return Bu(2048,8,l,f)}function Ip(l,f){return Bu(4,2,l,f)}function kg(l,f){return Bu(4,4,l,f)}function Bg(l,f){if(typeof f=="function")return l=l(),f(l),function(){f(null)};if(f!=null)return l=l(),f.current=l,function(){f.current=null}}function Np(l,f,v){return v=v!=null?v.concat([l]):null,Bu(4,4,Bg.bind(null,f,l),v)}function Md(){}function zg(l,f){var v=as();f=f===void 0?null:f;var M=v.memoizedState;return M!==null&&f!==null&&Uu(f,M[1])?M[0]:(v.memoizedState=[l,f],l)}function ls(l,f){var v=as();f=f===void 0?null:f;var M=v.memoizedState;return M!==null&&f!==null&&Uu(f,M[1])?M[0]:(l=l(),v.memoizedState=[l,f],l)}function Td(l,f,v){return(Zo&21)===0?(l.baseState&&(l.baseState=!1,vn=!0),l.memoizedState=v):(ns(v,f)||(v=zn(),Jn.lanes|=v,Gu|=v,l.baseState=!0),f)}function i_(l,f){var v=Tn;Tn=v!==0&&4>v?v:4,l(!0);var M=Al.transition;Al.transition={};try{l(!1),f()}finally{Tn=v,Al.transition=M}}function Jo(){return as().memoizedState}function bd(l,f,v){var M=Sc(l);if(v={lane:M,action:v,hasEagerState:!1,eagerState:null,next:null},zu(l))Ad(f,v);else if(v=Nu(l,f,v,M),v!==null){var R=us();na(v,l,M,R),Cd(v,f,M)}}function Cl(l,f,v){var M=Sc(l),R={lane:M,action:v,hasEagerState:!1,eagerState:null,next:null};if(zu(l))Ad(f,R);else{var O=l.alternate;if(l.lanes===0&&(O===null||O.lanes===0)&&(O=f.lastRenderedReducer,O!==null))try{var Z=f.lastRenderedState,me=O(Z,v);if(R.hasEagerState=!0,R.eagerState=me,ns(me,Z)){var we=f.interleaved;we===null?(R.next=R,Tp(f)):(R.next=we.next,we.next=R),f.interleaved=R;return}}catch{}finally{}v=Nu(l,f,R,M),v!==null&&(R=us(),na(v,l,M,R),Cd(v,f,M))}}function zu(l){var f=l.alternate;return l===Jn||f!==null&&f===Jn}function Ad(l,f){wi=Xs=!0;var v=l.pending;v===null?f.next=f:(f.next=v.next,v.next=f),l.pending=f}function Cd(l,f,v){if((v&4194240)!==0){var M=f.lanes;M&=l.pendingLanes,v|=M,f.lanes=v,Fs(l,v)}}var Rd={readContext:ss,useCallback:oi,useContext:oi,useEffect:oi,useImperativeHandle:oi,useInsertionEffect:oi,useLayoutEffect:oi,useMemo:oi,useReducer:oi,useRef:oi,useState:oi,useDebugValue:oi,useDeferredValue:oi,useTransition:oi,useMutableSource:oi,useSyncExternalStore:oi,useId:oi,unstable_isNewReconciler:!1},Hg={readContext:ss,useCallback:function(l,f){return ai().memoizedState=[l,f===void 0?null:f],l},useContext:ss,useEffect:Ni,useImperativeHandle:function(l,f,v){return v=v!=null?v.concat([l]):null,yo(4194308,4,Bg.bind(null,f,l),v)},useLayoutEffect:function(l,f){return yo(4194308,4,l,f)},useInsertionEffect:function(l,f){return yo(4,2,l,f)},useMemo:function(l,f){var v=ai();return f=f===void 0?null:f,l=l(),v.memoizedState=[l,f],l},useReducer:function(l,f,v){var M=ai();return f=v!==void 0?v(f):f,M.memoizedState=M.baseState=f,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:f},M.queue=l,l=l.dispatch=bd.bind(null,Jn,l),[M.memoizedState,l]},useRef:function(l){var f=ai();return l={current:l},f.memoizedState=l},useState:Pp,useDebugValue:Md,useDeferredValue:function(l){return ai().memoizedState=l},useTransition:function(){var l=Pp(!1),f=l[0];return l=i_.bind(null,l[1]),ai().memoizedState=l,[f,l]},useMutableSource:function(){},useSyncExternalStore:function(l,f,v){var M=Jn,R=ai();if(tr){if(v===void 0)throw Error(t(407));v=v()}else{if(v=f(),Ei===null)throw Error(t(349));(Zo&30)!==0||Ed(M,f,v)}R.memoizedState=v;var O={value:v,getSnapshot:f};return R.queue=O,Ni(Ug.bind(null,M,O,l),[l]),M.flags|=2048,Ys(9,ku.bind(null,M,O,v,f),void 0,null),v},useId:function(){var l=ai(),f=Ei.identifierPrefix;if(tr){var v=Ms,M=At;v=(M&~(1<<32-Kt(M)-1)).toString(32)+v,f=":"+f+"R"+v,v=Oa++,0<v&&(f+="H"+v.toString(32)),f+=":"}else v=Gi++,f=":"+f+"r"+v.toString(32)+":";return l.memoizedState=f},unstable_isNewReconciler:!1},Gg={readContext:ss,useCallback:zg,useContext:ss,useEffect:Lp,useImperativeHandle:Np,useInsertionEffect:Ip,useLayoutEffect:kg,useMemo:ls,useReducer:Fu,useRef:Fg,useState:function(){return Fu(vc)},useDebugValue:Md,useDeferredValue:function(l){var f=as();return Td(f,xr.memoizedState,l)},useTransition:function(){var l=Fu(vc)[0],f=as().memoizedState;return[l,f]},useMutableSource:Ap,useSyncExternalStore:Cp,useId:Jo,unstable_isNewReconciler:!1},Vg={readContext:ss,useCallback:zg,useContext:ss,useEffect:Lp,useImperativeHandle:Np,useInsertionEffect:Ip,useLayoutEffect:kg,useMemo:ls,useReducer:Qo,useRef:Fg,useState:function(){return Qo(vc)},useDebugValue:Md,useDeferredValue:function(l){var f=as();return xr===null?f.memoizedState=l:Td(f,xr.memoizedState,l)},useTransition:function(){var l=Qo(vc)[0],f=as().memoizedState;return[l,f]},useMutableSource:Ap,useSyncExternalStore:Cp,useId:Jo,unstable_isNewReconciler:!1};function bs(l,f){if(l&&l.defaultProps){f=W({},f),l=l.defaultProps;for(var v in l)f[v]===void 0&&(f[v]=l[v]);return f}return f}function Hu(l,f,v,M){f=l.memoizedState,v=v(M,f),v=v==null?f:W({},f,v),l.memoizedState=v,l.lanes===0&&(l.updateQueue.baseState=v)}var Pd={isMounted:function(l){return(l=l._reactInternals)?ee(l)===l:!1},enqueueSetState:function(l,f,v){l=l._reactInternals;var M=us(),R=Sc(l),O=Vn(M,R);O.payload=f,v!=null&&(O.callback=v),f=lr(l,O,R),f!==null&&(na(f,l,R,M),Si(f,l,R))},enqueueReplaceState:function(l,f,v){l=l._reactInternals;var M=us(),R=Sc(l),O=Vn(M,R);O.tag=1,O.payload=f,v!=null&&(O.callback=v),f=lr(l,O,R),f!==null&&(na(f,l,R,M),Si(f,l,R))},enqueueForceUpdate:function(l,f){l=l._reactInternals;var v=us(),M=Sc(l),R=Vn(v,M);R.tag=2,f!=null&&(R.callback=f),f=lr(l,R,M),f!==null&&(na(f,l,M,v),Si(f,l,M))}};function Wg(l,f,v,M,R,O,Z){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(M,O,Z):f.prototype&&f.prototype.isPureReactComponent?!cl(v,M)||!cl(R,O):!0}function h(l,f,v){var M=!1,R=Vo,O=f.contextType;return typeof O=="object"&&O!==null?O=ss(O):(R=xi(f)?Wo:ii.current,M=f.contextTypes,O=(M=M!=null)?ml(l,R):Vo),f=new f(v,O),l.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Pd,l.stateNode=f,f._reactInternals=l,M&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=R,l.__reactInternalMemoizedMaskedChildContext=O),f}function p(l,f,v,M){l=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(v,M),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(v,M),f.state!==l&&Pd.enqueueReplaceState(f,f.state,null)}function E(l,f,v,M){var R=l.stateNode;R.props=v,R.state=l.memoizedState,R.refs={},mn(l);var O=f.contextType;typeof O=="object"&&O!==null?R.context=ss(O):(O=xi(f)?Wo:ii.current,R.context=ml(l,O)),R.state=l.memoizedState,O=f.getDerivedStateFromProps,typeof O=="function"&&(Hu(l,f,O,v),R.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(f=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),f!==R.state&&Pd.enqueueReplaceState(R,R.state,null),_r(l,v,R,M),R.state=l.memoizedState),typeof R.componentDidMount=="function"&&(l.flags|=4194308)}function A(l,f){try{var v="",M=f;do v+=de(M),M=M.return;while(M);var R=v}catch(O){R=`
Error generating stack: `+O.message+`
`+O.stack}return{value:l,source:f,stack:R,digest:null}}function N(l,f,v){return{value:l,source:null,stack:v??null,digest:f??null}}function z(l,f){try{console.error(f.value)}catch(v){setTimeout(function(){throw v})}}var fe=typeof WeakMap=="function"?WeakMap:Map;function Ae(l,f,v){v=Vn(-1,v),v.tag=3,v.payload={element:null};var M=f.value;return v.callback=function(){Qg||(Qg=!0,p_=M),z(l,f)},v}function $e(l,f,v){v=Vn(-1,v),v.tag=3;var M=l.type.getDerivedStateFromError;if(typeof M=="function"){var R=f.value;v.payload=function(){return M(R)},v.callback=function(){z(l,f)}}var O=l.stateNode;return O!==null&&typeof O.componentDidCatch=="function"&&(v.callback=function(){z(l,f),typeof M!="function"&&(_c===null?_c=new Set([this]):_c.add(this));var Z=f.stack;this.componentDidCatch(f.value,{componentStack:Z!==null?Z:""})}),v}function yt(l,f,v){var M=l.pingCache;if(M===null){M=l.pingCache=new fe;var R=new Set;M.set(f,R)}else R=M.get(f),R===void 0&&(R=new Set,M.set(f,R));R.has(v)||(R.add(v),l=XL.bind(null,l,f,v),f.then(l,l))}function Ft(l){do{var f;if((f=l.tag===13)&&(f=l.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return l;l=l.return}while(l!==null);return null}function fn(l,f,v,M,R){return(l.mode&1)===0?(l===f?l.flags|=65536:(l.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(f=Vn(-1,1),f.tag=2,lr(v,f,1))),v.lanes|=1),l):(l.flags|=65536,l.lanes=R,l)}var Jt=C.ReactCurrentOwner,vn=!1;function Ut(l,f,v,M){f.child=l===null?Pu(f,null,v,M):_l(f,l.child,v,M)}function li(l,f,v,M,R){v=v.render;var O=f.ref;return Da(f,R),M=Ou(l,f,v,M,O,R),v=bp(),l!==null&&!vn?(f.updateQueue=l.updateQueue,f.flags&=-2053,l.lanes&=~R,Rl(l,f,R)):(tr&&v&&_p(f),f.flags|=1,Ut(l,f,M,R),f.child)}function cs(l,f,v,M,R){if(l===null){var O=v.type;return typeof O=="function"&&!S_(O)&&O.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(f.tag=15,f.type=O,Ve(l,f,O,M,R)):(l=rv(v.type,null,M,f,f.mode,R),l.ref=f.ref,l.return=f,f.child=l)}if(O=l.child,(l.lanes&R)===0){var Z=O.memoizedProps;if(v=v.compare,v=v!==null?v:cl,v(Z,M)&&l.ref===f.ref)return Rl(l,f,R)}return f.flags|=1,l=Ec(O,M),l.ref=f.ref,l.return=f,f.child=l}function Ve(l,f,v,M,R){if(l!==null){var O=l.memoizedProps;if(cl(O,M)&&l.ref===f.ref)if(vn=!1,f.pendingProps=M=O,(l.lanes&R)!==0)(l.flags&131072)!==0&&(vn=!0);else return f.lanes=l.lanes,Rl(l,f,R)}return Nt(l,f,v,M,R)}function Ce(l,f,v){var M=f.pendingProps,R=M.children,O=l!==null?l.memoizedState:null;if(M.mode==="hidden")if((f.mode&1)===0)f.memoizedState={baseLanes:0,cachePool:null,transitions:null},qn(Id,qs),qs|=v;else{if((v&1073741824)===0)return l=O!==null?O.baseLanes|v:v,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:l,cachePool:null,transitions:null},f.updateQueue=null,qn(Id,qs),qs|=l,null;f.memoizedState={baseLanes:0,cachePool:null,transitions:null},M=O!==null?O.baseLanes:v,qn(Id,qs),qs|=M}else O!==null?(M=O.baseLanes|v,f.memoizedState=null):M=v,qn(Id,qs),qs|=M;return Ut(l,f,R,v),f.child}function Qe(l,f){var v=f.ref;(l===null&&v!==null||l!==null&&l.ref!==v)&&(f.flags|=512,f.flags|=2097152)}function Nt(l,f,v,M,R){var O=xi(v)?Wo:ii.current;return O=ml(f,O),Da(f,R),v=Ou(l,f,v,M,O,R),M=bp(),l!==null&&!vn?(f.updateQueue=l.updateQueue,f.flags&=-2053,l.lanes&=~R,Rl(l,f,R)):(tr&&M&&_p(f),f.flags|=1,Ut(l,f,v,R),f.child)}function Gt(l,f,v,M,R){if(xi(v)){var O=!0;gl(f)}else O=!1;if(Da(f,R),f.stateNode===null)Xg(l,f),h(f,v,M),E(f,v,M,R),M=!0;else if(l===null){var Z=f.stateNode,me=f.memoizedProps;Z.props=me;var we=Z.context,Ke=v.contextType;typeof Ke=="object"&&Ke!==null?Ke=ss(Ke):(Ke=xi(v)?Wo:ii.current,Ke=ml(f,Ke));var gt=v.getDerivedStateFromProps,vt=typeof gt=="function"||typeof Z.getSnapshotBeforeUpdate=="function";vt||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(me!==M||we!==Ke)&&p(f,Z,M,Ke),Gn=!1;var pt=f.memoizedState;Z.state=pt,_r(f,M,Z,R),we=f.memoizedState,me!==M||pt!==we||Pi.current||Gn?(typeof gt=="function"&&(Hu(f,v,gt,M),we=f.memoizedState),(me=Gn||Wg(f,v,me,M,pt,we,Ke))?(vt||typeof Z.UNSAFE_componentWillMount!="function"&&typeof Z.componentWillMount!="function"||(typeof Z.componentWillMount=="function"&&Z.componentWillMount(),typeof Z.UNSAFE_componentWillMount=="function"&&Z.UNSAFE_componentWillMount()),typeof Z.componentDidMount=="function"&&(f.flags|=4194308)):(typeof Z.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=M,f.memoizedState=we),Z.props=M,Z.state=we,Z.context=Ke,M=me):(typeof Z.componentDidMount=="function"&&(f.flags|=4194308),M=!1)}else{Z=f.stateNode,Mr(l,f),me=f.memoizedProps,Ke=f.type===f.elementType?me:bs(f.type,me),Z.props=Ke,vt=f.pendingProps,pt=Z.context,we=v.contextType,typeof we=="object"&&we!==null?we=ss(we):(we=xi(v)?Wo:ii.current,we=ml(f,we));var Ot=v.getDerivedStateFromProps;(gt=typeof Ot=="function"||typeof Z.getSnapshotBeforeUpdate=="function")||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(me!==vt||pt!==we)&&p(f,Z,M,we),Gn=!1,pt=f.memoizedState,Z.state=pt,_r(f,M,Z,R);var Bt=f.memoizedState;me!==vt||pt!==Bt||Pi.current||Gn?(typeof Ot=="function"&&(Hu(f,v,Ot,M),Bt=f.memoizedState),(Ke=Gn||Wg(f,v,Ke,M,pt,Bt,we)||!1)?(gt||typeof Z.UNSAFE_componentWillUpdate!="function"&&typeof Z.componentWillUpdate!="function"||(typeof Z.componentWillUpdate=="function"&&Z.componentWillUpdate(M,Bt,we),typeof Z.UNSAFE_componentWillUpdate=="function"&&Z.UNSAFE_componentWillUpdate(M,Bt,we)),typeof Z.componentDidUpdate=="function"&&(f.flags|=4),typeof Z.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof Z.componentDidUpdate!="function"||me===l.memoizedProps&&pt===l.memoizedState||(f.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||me===l.memoizedProps&&pt===l.memoizedState||(f.flags|=1024),f.memoizedProps=M,f.memoizedState=Bt),Z.props=M,Z.state=Bt,Z.context=we,M=Ke):(typeof Z.componentDidUpdate!="function"||me===l.memoizedProps&&pt===l.memoizedState||(f.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||me===l.memoizedProps&&pt===l.memoizedState||(f.flags|=1024),M=!1)}return hn(l,f,v,M,O,R)}function hn(l,f,v,M,R,O){Qe(l,f);var Z=(f.flags&128)!==0;if(!M&&!Z)return R&&vp(f,v,!1),Rl(l,f,O);M=f.stateNode,Jt.current=f;var me=Z&&typeof v.getDerivedStateFromError!="function"?null:M.render();return f.flags|=1,l!==null&&Z?(f.child=_l(f,l.child,null,O),f.child=_l(f,null,me,O)):Ut(l,f,me,O),f.memoizedState=M.state,R&&vp(f,v,!0),f.child}function dn(l){var f=l.stateNode;f.pendingContext?gp(l,f.pendingContext,f.pendingContext!==f.context):f.context&&gp(l,f.context,!1),Du(l,f.containerInfo)}function Rn(l,f,v,M,R){return Na(),dc(R),f.flags|=256,Ut(l,f,v,M),f.child}var Rr={dehydrated:null,treeContext:null,retryLane:0};function Cn(l){return{baseLanes:l,cachePool:null,transitions:null}}function $o(l,f,v){var M=f.pendingProps,R=nr.current,O=!1,Z=(f.flags&128)!==0,me;if((me=Z)||(me=l!==null&&l.memoizedState===null?!1:(R&2)!==0),me?(O=!0,f.flags&=-129):(l===null||l.memoizedState!==null)&&(R|=1),qn(nr,R&1),l===null)return Sd(f),l=f.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((f.mode&1)===0?f.lanes=1:l.data==="$!"?f.lanes=8:f.lanes=1073741824,null):(Z=M.children,l=M.fallback,O?(M=f.mode,O=f.child,Z={mode:"hidden",children:Z},(M&1)===0&&O!==null?(O.childLanes=0,O.pendingProps=Z):O=iv(Z,M,0,null),l=Xu(l,M,v,null),O.return=f,l.return=f,O.sibling=l,f.child=O,f.child.memoizedState=Cn(v),f.memoizedState=Rr,l):Dp(f,Z));if(R=l.memoizedState,R!==null&&(me=R.dehydrated,me!==null))return DL(l,f,Z,M,me,R,v);if(O){O=M.fallback,Z=f.mode,R=l.child,me=R.sibling;var we={mode:"hidden",children:M.children};return(Z&1)===0&&f.child!==R?(M=f.child,M.childLanes=0,M.pendingProps=we,f.deletions=null):(M=Ec(R,we),M.subtreeFlags=R.subtreeFlags&14680064),me!==null?O=Ec(me,O):(O=Xu(O,Z,v,null),O.flags|=2),O.return=f,M.return=f,M.sibling=O,f.child=M,M=O,O=f.child,Z=l.child.memoizedState,Z=Z===null?Cn(v):{baseLanes:Z.baseLanes|v,cachePool:null,transitions:Z.transitions},O.memoizedState=Z,O.childLanes=l.childLanes&~v,f.memoizedState=Rr,M}return O=l.child,l=O.sibling,M=Ec(O,{mode:"visible",children:M.children}),(f.mode&1)===0&&(M.lanes=v),M.return=f,M.sibling=null,l!==null&&(v=f.deletions,v===null?(f.deletions=[l],f.flags|=16):v.push(l)),f.child=M,f.memoizedState=null,M}function Dp(l,f){return f=iv({mode:"visible",children:f},l.mode,0,null),f.return=l,l.child=f}function jg(l,f,v,M){return M!==null&&dc(M),_l(f,l.child,null,v),l=Dp(f,f.pendingProps.children),l.flags|=2,f.memoizedState=null,l}function DL(l,f,v,M,R,O,Z){if(v)return f.flags&256?(f.flags&=-257,M=N(Error(t(422))),jg(l,f,Z,M)):f.memoizedState!==null?(f.child=l.child,f.flags|=128,null):(O=M.fallback,R=f.mode,M=iv({mode:"visible",children:M.children},R,0,null),O=Xu(O,R,Z,null),O.flags|=2,M.return=f,O.return=f,M.sibling=O,f.child=M,(f.mode&1)!==0&&_l(f,l.child,null,Z),f.child.memoizedState=Cn(Z),f.memoizedState=Rr,O);if((f.mode&1)===0)return jg(l,f,Z,null);if(R.data==="$!"){if(M=R.nextSibling&&R.nextSibling.dataset,M)var me=M.dgst;return M=me,O=Error(t(419)),M=N(O,M,void 0),jg(l,f,Z,M)}if(me=(Z&l.childLanes)!==0,vn||me){if(M=Ei,M!==null){switch(Z&-Z){case 4:R=2;break;case 16:R=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:R=32;break;case 536870912:R=268435456;break;default:R=0}R=(R&(M.suspendedLanes|Z))!==0?0:R,R!==0&&R!==O.retryLane&&(O.retryLane=R,Ws(l,R),na(M,l,R,-1))}return x_(),M=N(Error(t(421))),jg(l,f,Z,M)}return R.data==="$?"?(f.flags|=128,f.child=l.child,f=YL.bind(null,l),R._reactRetry=f,null):(l=O.treeContext,Ii=Ho(R.nextSibling),si=f,tr=!0,Ts=null,l!==null&&(Li[Jr++]=At,Li[Jr++]=Ms,Li[Jr++]=yl,At=l.id,Ms=l.overflow,yl=f),f=Dp(f,M.children),f.flags|=4096,f)}function iE(l,f,v){l.lanes|=f;var M=l.alternate;M!==null&&(M.lanes|=f),Iu(l.return,f,v)}function s_(l,f,v,M,R){var O=l.memoizedState;O===null?l.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:M,tail:v,tailMode:R}:(O.isBackwards=f,O.rendering=null,O.renderingStartTime=0,O.last=M,O.tail=v,O.tailMode=R)}function sE(l,f,v){var M=f.pendingProps,R=M.revealOrder,O=M.tail;if(Ut(l,f,M.children,v),M=nr.current,(M&2)!==0)M=M&1|2,f.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=f.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&iE(l,v,f);else if(l.tag===19)iE(l,v,f);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===f)break e;for(;l.sibling===null;){if(l.return===null||l.return===f)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}M&=1}if(qn(nr,M),(f.mode&1)===0)f.memoizedState=null;else switch(R){case"forwards":for(v=f.child,R=null;v!==null;)l=v.alternate,l!==null&&js(l)===null&&(R=v),v=v.sibling;v=R,v===null?(R=f.child,f.child=null):(R=v.sibling,v.sibling=null),s_(f,!1,R,v,O);break;case"backwards":for(v=null,R=f.child,f.child=null;R!==null;){if(l=R.alternate,l!==null&&js(l)===null){f.child=R;break}l=R.sibling,R.sibling=v,v=R,R=l}s_(f,!0,v,null,O);break;case"together":s_(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Xg(l,f){(f.mode&1)===0&&l!==null&&(l.alternate=null,f.alternate=null,f.flags|=2)}function Rl(l,f,v){if(l!==null&&(f.dependencies=l.dependencies),Gu|=f.lanes,(v&f.childLanes)===0)return null;if(l!==null&&f.child!==l.child)throw Error(t(153));if(f.child!==null){for(l=f.child,v=Ec(l,l.pendingProps),f.child=v,v.return=f;l.sibling!==null;)l=l.sibling,v=v.sibling=Ec(l,l.pendingProps),v.return=f;v.sibling=null}return f.child}function UL(l,f,v){switch(f.tag){case 3:dn(f),Na();break;case 5:Tl(f);break;case 1:xi(f.type)&&gl(f);break;case 4:Du(f,f.stateNode.containerInfo);break;case 10:var M=f.type._context,R=f.memoizedProps.value;qn(xl,M._currentValue),M._currentValue=R;break;case 13:if(M=f.memoizedState,M!==null)return M.dehydrated!==null?(qn(nr,nr.current&1),f.flags|=128,null):(v&f.child.childLanes)!==0?$o(l,f,v):(qn(nr,nr.current&1),l=Rl(l,f,v),l!==null?l.sibling:null);qn(nr,nr.current&1);break;case 19:if(M=(v&f.childLanes)!==0,(l.flags&128)!==0){if(M)return sE(l,f,v);f.flags|=128}if(R=f.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),qn(nr,nr.current),M)break;return null;case 22:case 23:return f.lanes=0,Ce(l,f,v)}return Rl(l,f,v)}var oE,o_,aE,lE;oE=function(l,f){for(var v=f.child;v!==null;){if(v.tag===5||v.tag===6)l.appendChild(v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===f)break;for(;v.sibling===null;){if(v.return===null||v.return===f)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},o_=function(){},aE=function(l,f,v,M){var R=l.memoizedProps;if(R!==M){l=f.stateNode,Cr(os.current);var O=null;switch(v){case"input":R=Re(l,R),M=Re(l,M),O=[];break;case"select":R=W({},R,{value:void 0}),M=W({},M,{value:void 0}),O=[];break;case"textarea":R=_t(l,R),M=_t(l,M),O=[];break;default:typeof R.onClick!="function"&&typeof M.onClick=="function"&&(l.onclick=Eu)}ce(v,M);var Z;v=null;for(Ke in R)if(!M.hasOwnProperty(Ke)&&R.hasOwnProperty(Ke)&&R[Ke]!=null)if(Ke==="style"){var me=R[Ke];for(Z in me)me.hasOwnProperty(Z)&&(v||(v={}),v[Z]="")}else Ke!=="dangerouslySetInnerHTML"&&Ke!=="children"&&Ke!=="suppressContentEditableWarning"&&Ke!=="suppressHydrationWarning"&&Ke!=="autoFocus"&&(i.hasOwnProperty(Ke)?O||(O=[]):(O=O||[]).push(Ke,null));for(Ke in M){var we=M[Ke];if(me=R!=null?R[Ke]:void 0,M.hasOwnProperty(Ke)&&we!==me&&(we!=null||me!=null))if(Ke==="style")if(me){for(Z in me)!me.hasOwnProperty(Z)||we&&we.hasOwnProperty(Z)||(v||(v={}),v[Z]="");for(Z in we)we.hasOwnProperty(Z)&&me[Z]!==we[Z]&&(v||(v={}),v[Z]=we[Z])}else v||(O||(O=[]),O.push(Ke,v)),v=we;else Ke==="dangerouslySetInnerHTML"?(we=we?we.__html:void 0,me=me?me.__html:void 0,we!=null&&me!==we&&(O=O||[]).push(Ke,we)):Ke==="children"?typeof we!="string"&&typeof we!="number"||(O=O||[]).push(Ke,""+we):Ke!=="suppressContentEditableWarning"&&Ke!=="suppressHydrationWarning"&&(i.hasOwnProperty(Ke)?(we!=null&&Ke==="onScroll"&&Zn("scroll",l),O||me===we||(O=[])):(O=O||[]).push(Ke,we))}v&&(O=O||[]).push("style",v);var Ke=O;(f.updateQueue=Ke)&&(f.flags|=4)}},lE=function(l,f,v,M){v!==M&&(f.flags|=4)};function Up(l,f){if(!tr)switch(l.tailMode){case"hidden":f=l.tail;for(var v=null;f!==null;)f.alternate!==null&&(v=f),f=f.sibling;v===null?l.tail=null:v.sibling=null;break;case"collapsed":v=l.tail;for(var M=null;v!==null;)v.alternate!==null&&(M=v),v=v.sibling;M===null?f||l.tail===null?l.tail=null:l.tail.sibling=null:M.sibling=null}}function Vi(l){var f=l.alternate!==null&&l.alternate.child===l.child,v=0,M=0;if(f)for(var R=l.child;R!==null;)v|=R.lanes|R.childLanes,M|=R.subtreeFlags&14680064,M|=R.flags&14680064,R.return=l,R=R.sibling;else for(R=l.child;R!==null;)v|=R.lanes|R.childLanes,M|=R.subtreeFlags,M|=R.flags,R.return=l,R=R.sibling;return l.subtreeFlags|=M,l.childLanes=v,f}function OL(l,f,v){var M=f.pendingProps;switch(Xo(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vi(f),null;case 1:return xi(f.type)&&Mu(),Vi(f),null;case 3:return M=f.stateNode,Ua(),Qn(Pi),Qn(ii),vo(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(l===null||l.child===null)&&(fc(f)?f.flags|=4:l===null||l.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,Ts!==null&&(v_(Ts),Ts=null))),o_(l,f),Vi(f),null;case 5:mc(f);var R=Cr(Ko.current);if(v=f.type,l!==null&&f.stateNode!=null)aE(l,f,v,M,R),l.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!M){if(f.stateNode===null)throw Error(t(166));return Vi(f),null}if(l=Cr(os.current),fc(f)){M=f.stateNode,v=f.type;var O=f.memoizedProps;switch(M[Hr]=f,M[uc]=O,l=(f.mode&1)!==0,v){case"dialog":Zn("cancel",M),Zn("close",M);break;case"iframe":case"object":case"embed":Zn("load",M);break;case"video":case"audio":for(R=0;R<La.length;R++)Zn(La[R],M);break;case"source":Zn("error",M);break;case"img":case"image":case"link":Zn("error",M),Zn("load",M);break;case"details":Zn("toggle",M);break;case"input":je(M,O),Zn("invalid",M);break;case"select":M._wrapperState={wasMultiple:!!O.multiple},Zn("invalid",M);break;case"textarea":J(M,O),Zn("invalid",M)}ce(v,O),R=null;for(var Z in O)if(O.hasOwnProperty(Z)){var me=O[Z];Z==="children"?typeof me=="string"?M.textContent!==me&&(O.suppressHydrationWarning!==!0&&wu(M.textContent,me,l),R=["children",me]):typeof me=="number"&&M.textContent!==""+me&&(O.suppressHydrationWarning!==!0&&wu(M.textContent,me,l),R=["children",""+me]):i.hasOwnProperty(Z)&&me!=null&&Z==="onScroll"&&Zn("scroll",M)}switch(v){case"input":He(M),Fe(M,O,!0);break;case"textarea":He(M),ye(M);break;case"select":case"option":break;default:typeof O.onClick=="function"&&(M.onclick=Eu)}M=R,f.updateQueue=M,M!==null&&(f.flags|=4)}else{Z=R.nodeType===9?R:R.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=tt(v)),l==="http://www.w3.org/1999/xhtml"?v==="script"?(l=Z.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof M.is=="string"?l=Z.createElement(v,{is:M.is}):(l=Z.createElement(v),v==="select"&&(Z=l,M.multiple?Z.multiple=!0:M.size&&(Z.size=M.size))):l=Z.createElementNS(l,v),l[Hr]=f,l[uc]=M,oE(l,f,!1,!1),f.stateNode=l;e:{switch(Z=Ie(v,M),v){case"dialog":Zn("cancel",l),Zn("close",l),R=M;break;case"iframe":case"object":case"embed":Zn("load",l),R=M;break;case"video":case"audio":for(R=0;R<La.length;R++)Zn(La[R],l);R=M;break;case"source":Zn("error",l),R=M;break;case"img":case"image":case"link":Zn("error",l),Zn("load",l),R=M;break;case"details":Zn("toggle",l),R=M;break;case"input":je(l,M),R=Re(l,M),Zn("invalid",l);break;case"option":R=M;break;case"select":l._wrapperState={wasMultiple:!!M.multiple},R=W({},M,{value:void 0}),Zn("invalid",l);break;case"textarea":J(l,M),R=_t(l,M),Zn("invalid",l);break;default:R=M}ce(v,R),me=R;for(O in me)if(me.hasOwnProperty(O)){var we=me[O];O==="style"?Ge(l,we):O==="dangerouslySetInnerHTML"?(we=we?we.__html:void 0,we!=null&&st(l,we)):O==="children"?typeof we=="string"?(v!=="textarea"||we!=="")&&et(l,we):typeof we=="number"&&et(l,""+we):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(i.hasOwnProperty(O)?we!=null&&O==="onScroll"&&Zn("scroll",l):we!=null&&T(l,O,we,Z))}switch(v){case"input":He(l),Fe(l,M,!1);break;case"textarea":He(l),ye(l);break;case"option":M.value!=null&&l.setAttribute("value",""+Me(M.value));break;case"select":l.multiple=!!M.multiple,O=M.value,O!=null?Ue(l,!!M.multiple,O,!1):M.defaultValue!=null&&Ue(l,!!M.multiple,M.defaultValue,!0);break;default:typeof R.onClick=="function"&&(l.onclick=Eu)}switch(v){case"button":case"input":case"select":case"textarea":M=!!M.autoFocus;break e;case"img":M=!0;break e;default:M=!1}}M&&(f.flags|=4)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return Vi(f),null;case 6:if(l&&f.stateNode!=null)lE(l,f,l.memoizedProps,M);else{if(typeof M!="string"&&f.stateNode===null)throw Error(t(166));if(v=Cr(Ko.current),Cr(os.current),fc(f)){if(M=f.stateNode,v=f.memoizedProps,M[Hr]=f,(O=M.nodeValue!==v)&&(l=si,l!==null))switch(l.tag){case 3:wu(M.nodeValue,v,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&wu(M.nodeValue,v,(l.mode&1)!==0)}O&&(f.flags|=4)}else M=(v.nodeType===9?v:v.ownerDocument).createTextNode(M),M[Hr]=f,f.stateNode=M}return Vi(f),null;case 13:if(Qn(nr),M=f.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(tr&&Ii!==null&&(f.mode&1)!==0&&(f.flags&128)===0)wp(),Na(),f.flags|=98560,O=!1;else if(O=fc(f),M!==null&&M.dehydrated!==null){if(l===null){if(!O)throw Error(t(318));if(O=f.memoizedState,O=O!==null?O.dehydrated:null,!O)throw Error(t(317));O[Hr]=f}else Na(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Vi(f),O=!1}else Ts!==null&&(v_(Ts),Ts=null),O=!0;if(!O)return f.flags&65536?f:null}return(f.flags&128)!==0?(f.lanes=v,f):(M=M!==null,M!==(l!==null&&l.memoizedState!==null)&&M&&(f.child.flags|=8192,(f.mode&1)!==0&&(l===null||(nr.current&1)!==0?ci===0&&(ci=3):x_())),f.updateQueue!==null&&(f.flags|=4),Vi(f),null);case 4:return Ua(),o_(l,f),l===null&&ac(f.stateNode.containerInfo),Vi(f),null;case 10:return Lu(f.type._context),Vi(f),null;case 17:return xi(f.type)&&Mu(),Vi(f),null;case 19:if(Qn(nr),O=f.memoizedState,O===null)return Vi(f),null;if(M=(f.flags&128)!==0,Z=O.rendering,Z===null)if(M)Up(O,!1);else{if(ci!==0||l!==null&&(l.flags&128)!==0)for(l=f.child;l!==null;){if(Z=js(l),Z!==null){for(f.flags|=128,Up(O,!1),M=Z.updateQueue,M!==null&&(f.updateQueue=M,f.flags|=4),f.subtreeFlags=0,M=v,v=f.child;v!==null;)O=v,l=M,O.flags&=14680066,Z=O.alternate,Z===null?(O.childLanes=0,O.lanes=l,O.child=null,O.subtreeFlags=0,O.memoizedProps=null,O.memoizedState=null,O.updateQueue=null,O.dependencies=null,O.stateNode=null):(O.childLanes=Z.childLanes,O.lanes=Z.lanes,O.child=Z.child,O.subtreeFlags=0,O.deletions=null,O.memoizedProps=Z.memoizedProps,O.memoizedState=Z.memoizedState,O.updateQueue=Z.updateQueue,O.type=Z.type,l=Z.dependencies,O.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),v=v.sibling;return qn(nr,nr.current&1|2),f.child}l=l.sibling}O.tail!==null&&Se()>Nd&&(f.flags|=128,M=!0,Up(O,!1),f.lanes=4194304)}else{if(!M)if(l=js(Z),l!==null){if(f.flags|=128,M=!0,v=l.updateQueue,v!==null&&(f.updateQueue=v,f.flags|=4),Up(O,!0),O.tail===null&&O.tailMode==="hidden"&&!Z.alternate&&!tr)return Vi(f),null}else 2*Se()-O.renderingStartTime>Nd&&v!==1073741824&&(f.flags|=128,M=!0,Up(O,!1),f.lanes=4194304);O.isBackwards?(Z.sibling=f.child,f.child=Z):(v=O.last,v!==null?v.sibling=Z:f.child=Z,O.last=Z)}return O.tail!==null?(f=O.tail,O.rendering=f,O.tail=f.sibling,O.renderingStartTime=Se(),f.sibling=null,v=nr.current,qn(nr,M?v&1|2:v&1),f):(Vi(f),null);case 22:case 23:return __(),M=f.memoizedState!==null,l!==null&&l.memoizedState!==null!==M&&(f.flags|=8192),M&&(f.mode&1)!==0?(qs&1073741824)!==0&&(Vi(f),f.subtreeFlags&6&&(f.flags|=8192)):Vi(f),null;case 24:return null;case 25:return null}throw Error(t(156,f.tag))}function FL(l,f){switch(Xo(f),f.tag){case 1:return xi(f.type)&&Mu(),l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 3:return Ua(),Qn(Pi),Qn(ii),vo(),l=f.flags,(l&65536)!==0&&(l&128)===0?(f.flags=l&-65537|128,f):null;case 5:return mc(f),null;case 13:if(Qn(nr),l=f.memoizedState,l!==null&&l.dehydrated!==null){if(f.alternate===null)throw Error(t(340));Na()}return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 19:return Qn(nr),null;case 4:return Ua(),null;case 10:return Lu(f.type._context),null;case 22:case 23:return __(),null;case 24:return null;default:return null}}var Yg=!1,Wi=!1,kL=typeof WeakSet=="function"?WeakSet:Set,kt=null;function Ld(l,f){var v=l.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(M){Pr(l,f,M)}else v.current=null}function a_(l,f,v){try{v()}catch(M){Pr(l,f,M)}}var cE=!1;function BL(l,f){if(cc=jr,l=pr(),qr(l)){if("selectionStart"in l)var v={start:l.selectionStart,end:l.selectionEnd};else e:{v=(v=l.ownerDocument)&&v.defaultView||window;var M=v.getSelection&&v.getSelection();if(M&&M.rangeCount!==0){v=M.anchorNode;var R=M.anchorOffset,O=M.focusNode;M=M.focusOffset;try{v.nodeType,O.nodeType}catch{v=null;break e}var Z=0,me=-1,we=-1,Ke=0,gt=0,vt=l,pt=null;t:for(;;){for(var Ot;vt!==v||R!==0&&vt.nodeType!==3||(me=Z+R),vt!==O||M!==0&&vt.nodeType!==3||(we=Z+M),vt.nodeType===3&&(Z+=vt.nodeValue.length),(Ot=vt.firstChild)!==null;)pt=vt,vt=Ot;for(;;){if(vt===l)break t;if(pt===v&&++Ke===R&&(me=Z),pt===O&&++gt===M&&(we=Z),(Ot=vt.nextSibling)!==null)break;vt=pt,pt=vt.parentNode}vt=Ot}v=me===-1||we===-1?null:{start:me,end:we}}else v=null}v=v||{start:0,end:0}}else v=null;for(up={focusedElem:l,selectionRange:v},jr=!1,kt=f;kt!==null;)if(f=kt,l=f.child,(f.subtreeFlags&1028)!==0&&l!==null)l.return=f,kt=l;else for(;kt!==null;){f=kt;try{var Bt=f.alternate;if((f.flags&1024)!==0)switch(f.tag){case 0:case 11:case 15:break;case 1:if(Bt!==null){var zt=Bt.memoizedProps,Gr=Bt.memoizedState,Oe=f.stateNode,be=Oe.getSnapshotBeforeUpdate(f.elementType===f.type?zt:bs(f.type,zt),Gr);Oe.__reactInternalSnapshotBeforeUpdate=be}break;case 3:var ze=f.stateNode.containerInfo;ze.nodeType===1?ze.textContent="":ze.nodeType===9&&ze.documentElement&&ze.removeChild(ze.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(wt){Pr(f,f.return,wt)}if(l=f.sibling,l!==null){l.return=f.return,kt=l;break}kt=f.return}return Bt=cE,cE=!1,Bt}function Op(l,f,v){var M=f.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var R=M=M.next;do{if((R.tag&l)===l){var O=R.destroy;R.destroy=void 0,O!==void 0&&a_(f,v,O)}R=R.next}while(R!==M)}}function qg(l,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var v=f=f.next;do{if((v.tag&l)===l){var M=v.create;v.destroy=M()}v=v.next}while(v!==f)}}function l_(l){var f=l.ref;if(f!==null){var v=l.stateNode;switch(l.tag){case 5:l=v;break;default:l=v}typeof f=="function"?f(l):f.current=l}}function uE(l){var f=l.alternate;f!==null&&(l.alternate=null,uE(f)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(f=l.stateNode,f!==null&&(delete f[Hr],delete f[uc],delete f[pl],delete f[pd],delete f[md])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function fE(l){return l.tag===5||l.tag===3||l.tag===4}function dE(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||fE(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function c_(l,f,v){var M=l.tag;if(M===5||M===6)l=l.stateNode,f?v.nodeType===8?v.parentNode.insertBefore(l,f):v.insertBefore(l,f):(v.nodeType===8?(f=v.parentNode,f.insertBefore(l,v)):(f=v,f.appendChild(l)),v=v._reactRootContainer,v!=null||f.onclick!==null||(f.onclick=Eu));else if(M!==4&&(l=l.child,l!==null))for(c_(l,f,v),l=l.sibling;l!==null;)c_(l,f,v),l=l.sibling}function u_(l,f,v){var M=l.tag;if(M===5||M===6)l=l.stateNode,f?v.insertBefore(l,f):v.appendChild(l);else if(M!==4&&(l=l.child,l!==null))for(u_(l,f,v),l=l.sibling;l!==null;)u_(l,f,v),l=l.sibling}var Di=null,ea=!1;function yc(l,f,v){for(v=v.child;v!==null;)hE(l,f,v),v=v.sibling}function hE(l,f,v){if(Tt&&typeof Tt.onCommitFiberUnmount=="function")try{Tt.onCommitFiberUnmount(Zt,v)}catch{}switch(v.tag){case 5:Wi||Ld(v,f);case 6:var M=Di,R=ea;Di=null,yc(l,f,v),Di=M,ea=R,Di!==null&&(ea?(l=Di,v=v.stateNode,l.nodeType===8?l.parentNode.removeChild(v):l.removeChild(v)):Di.removeChild(v.stateNode));break;case 18:Di!==null&&(ea?(l=Di,v=v.stateNode,l.nodeType===8?hd(l.parentNode,v):l.nodeType===1&&hd(l,v),Ea(l)):hd(Di,v.stateNode));break;case 4:M=Di,R=ea,Di=v.stateNode.containerInfo,ea=!0,yc(l,f,v),Di=M,ea=R;break;case 0:case 11:case 14:case 15:if(!Wi&&(M=v.updateQueue,M!==null&&(M=M.lastEffect,M!==null))){R=M=M.next;do{var O=R,Z=O.destroy;O=O.tag,Z!==void 0&&((O&2)!==0||(O&4)!==0)&&a_(v,f,Z),R=R.next}while(R!==M)}yc(l,f,v);break;case 1:if(!Wi&&(Ld(v,f),M=v.stateNode,typeof M.componentWillUnmount=="function"))try{M.props=v.memoizedProps,M.state=v.memoizedState,M.componentWillUnmount()}catch(me){Pr(v,f,me)}yc(l,f,v);break;case 21:yc(l,f,v);break;case 22:v.mode&1?(Wi=(M=Wi)||v.memoizedState!==null,yc(l,f,v),Wi=M):yc(l,f,v);break;default:yc(l,f,v)}}function pE(l){var f=l.updateQueue;if(f!==null){l.updateQueue=null;var v=l.stateNode;v===null&&(v=l.stateNode=new kL),f.forEach(function(M){var R=qL.bind(null,l,M);v.has(M)||(v.add(M),M.then(R,R))})}}function ta(l,f){var v=f.deletions;if(v!==null)for(var M=0;M<v.length;M++){var R=v[M];try{var O=l,Z=f,me=Z;e:for(;me!==null;){switch(me.tag){case 5:Di=me.stateNode,ea=!1;break e;case 3:Di=me.stateNode.containerInfo,ea=!0;break e;case 4:Di=me.stateNode.containerInfo,ea=!0;break e}me=me.return}if(Di===null)throw Error(t(160));hE(O,Z,R),Di=null,ea=!1;var we=R.alternate;we!==null&&(we.return=null),R.return=null}catch(Ke){Pr(R,f,Ke)}}if(f.subtreeFlags&12854)for(f=f.child;f!==null;)mE(f,l),f=f.sibling}function mE(l,f){var v=l.alternate,M=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(ta(f,l),Fa(l),M&4){try{Op(3,l,l.return),qg(3,l)}catch(zt){Pr(l,l.return,zt)}try{Op(5,l,l.return)}catch(zt){Pr(l,l.return,zt)}}break;case 1:ta(f,l),Fa(l),M&512&&v!==null&&Ld(v,v.return);break;case 5:if(ta(f,l),Fa(l),M&512&&v!==null&&Ld(v,v.return),l.flags&32){var R=l.stateNode;try{et(R,"")}catch(zt){Pr(l,l.return,zt)}}if(M&4&&(R=l.stateNode,R!=null)){var O=l.memoizedProps,Z=v!==null?v.memoizedProps:O,me=l.type,we=l.updateQueue;if(l.updateQueue=null,we!==null)try{me==="input"&&O.type==="radio"&&O.name!=null&&Ne(R,O),Ie(me,Z);var Ke=Ie(me,O);for(Z=0;Z<we.length;Z+=2){var gt=we[Z],vt=we[Z+1];gt==="style"?Ge(R,vt):gt==="dangerouslySetInnerHTML"?st(R,vt):gt==="children"?et(R,vt):T(R,gt,vt,Ke)}switch(me){case"input":ct(R,O);break;case"textarea":q(R,O);break;case"select":var pt=R._wrapperState.wasMultiple;R._wrapperState.wasMultiple=!!O.multiple;var Ot=O.value;Ot!=null?Ue(R,!!O.multiple,Ot,!1):pt!==!!O.multiple&&(O.defaultValue!=null?Ue(R,!!O.multiple,O.defaultValue,!0):Ue(R,!!O.multiple,O.multiple?[]:"",!1))}R[uc]=O}catch(zt){Pr(l,l.return,zt)}}break;case 6:if(ta(f,l),Fa(l),M&4){if(l.stateNode===null)throw Error(t(162));R=l.stateNode,O=l.memoizedProps;try{R.nodeValue=O}catch(zt){Pr(l,l.return,zt)}}break;case 3:if(ta(f,l),Fa(l),M&4&&v!==null&&v.memoizedState.isDehydrated)try{Ea(f.containerInfo)}catch(zt){Pr(l,l.return,zt)}break;case 4:ta(f,l),Fa(l);break;case 13:ta(f,l),Fa(l),R=l.child,R.flags&8192&&(O=R.memoizedState!==null,R.stateNode.isHidden=O,!O||R.alternate!==null&&R.alternate.memoizedState!==null||(h_=Se())),M&4&&pE(l);break;case 22:if(gt=v!==null&&v.memoizedState!==null,l.mode&1?(Wi=(Ke=Wi)||gt,ta(f,l),Wi=Ke):ta(f,l),Fa(l),M&8192){if(Ke=l.memoizedState!==null,(l.stateNode.isHidden=Ke)&&!gt&&(l.mode&1)!==0)for(kt=l,gt=l.child;gt!==null;){for(vt=kt=gt;kt!==null;){switch(pt=kt,Ot=pt.child,pt.tag){case 0:case 11:case 14:case 15:Op(4,pt,pt.return);break;case 1:Ld(pt,pt.return);var Bt=pt.stateNode;if(typeof Bt.componentWillUnmount=="function"){M=pt,v=pt.return;try{f=M,Bt.props=f.memoizedProps,Bt.state=f.memoizedState,Bt.componentWillUnmount()}catch(zt){Pr(M,v,zt)}}break;case 5:Ld(pt,pt.return);break;case 22:if(pt.memoizedState!==null){yE(vt);continue}}Ot!==null?(Ot.return=pt,kt=Ot):yE(vt)}gt=gt.sibling}e:for(gt=null,vt=l;;){if(vt.tag===5){if(gt===null){gt=vt;try{R=vt.stateNode,Ke?(O=R.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none"):(me=vt.stateNode,we=vt.memoizedProps.style,Z=we!=null&&we.hasOwnProperty("display")?we.display:null,me.style.display=xt("display",Z))}catch(zt){Pr(l,l.return,zt)}}}else if(vt.tag===6){if(gt===null)try{vt.stateNode.nodeValue=Ke?"":vt.memoizedProps}catch(zt){Pr(l,l.return,zt)}}else if((vt.tag!==22&&vt.tag!==23||vt.memoizedState===null||vt===l)&&vt.child!==null){vt.child.return=vt,vt=vt.child;continue}if(vt===l)break e;for(;vt.sibling===null;){if(vt.return===null||vt.return===l)break e;gt===vt&&(gt=null),vt=vt.return}gt===vt&&(gt=null),vt.sibling.return=vt.return,vt=vt.sibling}}break;case 19:ta(f,l),Fa(l),M&4&&pE(l);break;case 21:break;default:ta(f,l),Fa(l)}}function Fa(l){var f=l.flags;if(f&2){try{e:{for(var v=l.return;v!==null;){if(fE(v)){var M=v;break e}v=v.return}throw Error(t(160))}switch(M.tag){case 5:var R=M.stateNode;M.flags&32&&(et(R,""),M.flags&=-33);var O=dE(l);u_(l,O,R);break;case 3:case 4:var Z=M.stateNode.containerInfo,me=dE(l);c_(l,me,Z);break;default:throw Error(t(161))}}catch(we){Pr(l,l.return,we)}l.flags&=-3}f&4096&&(l.flags&=-4097)}function zL(l,f,v){kt=l,gE(l)}function gE(l,f,v){for(var M=(l.mode&1)!==0;kt!==null;){var R=kt,O=R.child;if(R.tag===22&&M){var Z=R.memoizedState!==null||Yg;if(!Z){var me=R.alternate,we=me!==null&&me.memoizedState!==null||Wi;me=Yg;var Ke=Wi;if(Yg=Z,(Wi=we)&&!Ke)for(kt=R;kt!==null;)Z=kt,we=Z.child,Z.tag===22&&Z.memoizedState!==null?_E(R):we!==null?(we.return=Z,kt=we):_E(R);for(;O!==null;)kt=O,gE(O),O=O.sibling;kt=R,Yg=me,Wi=Ke}vE(l)}else(R.subtreeFlags&8772)!==0&&O!==null?(O.return=R,kt=O):vE(l)}}function vE(l){for(;kt!==null;){var f=kt;if((f.flags&8772)!==0){var v=f.alternate;try{if((f.flags&8772)!==0)switch(f.tag){case 0:case 11:case 15:Wi||qg(5,f);break;case 1:var M=f.stateNode;if(f.flags&4&&!Wi)if(v===null)M.componentDidMount();else{var R=f.elementType===f.type?v.memoizedProps:bs(f.type,v.memoizedProps);M.componentDidUpdate(R,v.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var O=f.updateQueue;O!==null&&pc(f,O,M);break;case 3:var Z=f.updateQueue;if(Z!==null){if(v=null,f.child!==null)switch(f.child.tag){case 5:v=f.child.stateNode;break;case 1:v=f.child.stateNode}pc(f,Z,v)}break;case 5:var me=f.stateNode;if(v===null&&f.flags&4){v=me;var we=f.memoizedProps;switch(f.type){case"button":case"input":case"select":case"textarea":we.autoFocus&&v.focus();break;case"img":we.src&&(v.src=we.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(f.memoizedState===null){var Ke=f.alternate;if(Ke!==null){var gt=Ke.memoizedState;if(gt!==null){var vt=gt.dehydrated;vt!==null&&Ea(vt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Wi||f.flags&512&&l_(f)}catch(pt){Pr(f,f.return,pt)}}if(f===l){kt=null;break}if(v=f.sibling,v!==null){v.return=f.return,kt=v;break}kt=f.return}}function yE(l){for(;kt!==null;){var f=kt;if(f===l){kt=null;break}var v=f.sibling;if(v!==null){v.return=f.return,kt=v;break}kt=f.return}}function _E(l){for(;kt!==null;){var f=kt;try{switch(f.tag){case 0:case 11:case 15:var v=f.return;try{qg(4,f)}catch(we){Pr(f,v,we)}break;case 1:var M=f.stateNode;if(typeof M.componentDidMount=="function"){var R=f.return;try{M.componentDidMount()}catch(we){Pr(f,R,we)}}var O=f.return;try{l_(f)}catch(we){Pr(f,O,we)}break;case 5:var Z=f.return;try{l_(f)}catch(we){Pr(f,Z,we)}}}catch(we){Pr(f,f.return,we)}if(f===l){kt=null;break}var me=f.sibling;if(me!==null){me.return=f.return,kt=me;break}kt=f.return}}var HL=Math.ceil,Kg=C.ReactCurrentDispatcher,f_=C.ReactCurrentOwner,_o=C.ReactCurrentBatchConfig,Fn=0,Ei=null,$r=null,Ui=0,qs=0,Id=yr(0),ci=0,Fp=null,Gu=0,Zg=0,d_=0,kp=null,As=null,h_=0,Nd=1/0,Pl=null,Qg=!1,p_=null,_c=null,Jg=!1,xc=null,$g=0,Bp=0,m_=null,ev=-1,tv=0;function us(){return(Fn&6)!==0?Se():ev!==-1?ev:ev=Se()}function Sc(l){return(l.mode&1)===0?1:(Fn&2)!==0&&Ui!==0?Ui&-Ui:r_.transition!==null?(tv===0&&(tv=zn()),tv):(l=Tn,l!==0||(l=window.event,l=l===void 0?16:Ta(l.type)),l)}function na(l,f,v,M){if(50<Bp)throw Bp=0,m_=null,Error(t(185));er(l,v,M),((Fn&2)===0||l!==Ei)&&(l===Ei&&((Fn&2)===0&&(Zg|=v),ci===4&&wc(l,Ui)),Cs(l,M),v===1&&Fn===0&&(f.mode&1)===0&&(Nd=Se()+500,bu&&mo()))}function Cs(l,f){var v=l.callbackNode;on(l,f);var M=an(l,l===Ei?Ui:0);if(M===0)v!==null&&Be(v),l.callbackNode=null,l.callbackPriority=0;else if(f=M&-M,l.callbackPriority!==f){if(v!=null&&Be(v),f===1)l.tag===0?Dg(SE.bind(null,l)):Au(SE.bind(null,l)),n_(function(){(Fn&6)===0&&mo()}),v=null;else{switch(lo(M)){case 1:v=dt;break;case 4:v=ht;break;case 16:v=It;break;case 536870912:v=jt;break;default:v=It}v=RE(v,xE.bind(null,l))}l.callbackPriority=f,l.callbackNode=v}}function xE(l,f){if(ev=-1,tv=0,(Fn&6)!==0)throw Error(t(327));var v=l.callbackNode;if(Dd()&&l.callbackNode!==v)return null;var M=an(l,l===Ei?Ui:0);if(M===0)return null;if((M&30)!==0||(M&l.expiredLanes)!==0||f)f=nv(l,M);else{f=M;var R=Fn;Fn|=2;var O=EE();(Ei!==l||Ui!==f)&&(Pl=null,Nd=Se()+500,Wu(l,f));do try{WL();break}catch(me){wE(l,me)}while(!0);wl(),Kg.current=O,Fn=R,$r!==null?f=0:(Ei=null,Ui=0,f=ci)}if(f!==0){if(f===2&&(R=rn(l),R!==0&&(M=R,f=g_(l,R))),f===1)throw v=Fp,Wu(l,0),wc(l,M),Cs(l,Se()),v;if(f===6)wc(l,M);else{if(R=l.current.alternate,(M&30)===0&&!GL(R)&&(f=nv(l,M),f===2&&(O=rn(l),O!==0&&(M=O,f=g_(l,O))),f===1))throw v=Fp,Wu(l,0),wc(l,M),Cs(l,Se()),v;switch(l.finishedWork=R,l.finishedLanes=M,f){case 0:case 1:throw Error(t(345));case 2:ju(l,As,Pl);break;case 3:if(wc(l,M),(M&130023424)===M&&(f=h_+500-Se(),10<f)){if(an(l,0)!==0)break;if(R=l.suspendedLanes,(R&M)!==M){us(),l.pingedLanes|=l.suspendedLanes&R;break}l.timeoutHandle=dp(ju.bind(null,l,As,Pl),f);break}ju(l,As,Pl);break;case 4:if(wc(l,M),(M&4194240)===M)break;for(f=l.eventTimes,R=-1;0<M;){var Z=31-Kt(M);O=1<<Z,Z=f[Z],Z>R&&(R=Z),M&=~O}if(M=R,M=Se()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*HL(M/1960))-M,10<M){l.timeoutHandle=dp(ju.bind(null,l,As,Pl),M);break}ju(l,As,Pl);break;case 5:ju(l,As,Pl);break;default:throw Error(t(329))}}}return Cs(l,Se()),l.callbackNode===v?xE.bind(null,l):null}function g_(l,f){var v=kp;return l.current.memoizedState.isDehydrated&&(Wu(l,f).flags|=256),l=nv(l,f),l!==2&&(f=As,As=v,f!==null&&v_(f)),l}function v_(l){As===null?As=l:As.push.apply(As,l)}function GL(l){for(var f=l;;){if(f.flags&16384){var v=f.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var M=0;M<v.length;M++){var R=v[M],O=R.getSnapshot;R=R.value;try{if(!ns(O(),R))return!1}catch{return!1}}}if(v=f.child,f.subtreeFlags&16384&&v!==null)v.return=f,f=v;else{if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function wc(l,f){for(f&=~d_,f&=~Zg,l.suspendedLanes|=f,l.pingedLanes&=~f,l=l.expirationTimes;0<f;){var v=31-Kt(f),M=1<<v;l[v]=-1,f&=~M}}function SE(l){if((Fn&6)!==0)throw Error(t(327));Dd();var f=an(l,0);if((f&1)===0)return Cs(l,Se()),null;var v=nv(l,f);if(l.tag!==0&&v===2){var M=rn(l);M!==0&&(f=M,v=g_(l,M))}if(v===1)throw v=Fp,Wu(l,0),wc(l,f),Cs(l,Se()),v;if(v===6)throw Error(t(345));return l.finishedWork=l.current.alternate,l.finishedLanes=f,ju(l,As,Pl),Cs(l,Se()),null}function y_(l,f){var v=Fn;Fn|=1;try{return l(f)}finally{Fn=v,Fn===0&&(Nd=Se()+500,bu&&mo())}}function Vu(l){xc!==null&&xc.tag===0&&(Fn&6)===0&&Dd();var f=Fn;Fn|=1;var v=_o.transition,M=Tn;try{if(_o.transition=null,Tn=1,l)return l()}finally{Tn=M,_o.transition=v,Fn=f,(Fn&6)===0&&mo()}}function __(){qs=Id.current,Qn(Id)}function Wu(l,f){l.finishedWork=null,l.finishedLanes=0;var v=l.timeoutHandle;if(v!==-1&&(l.timeoutHandle=-1,hp(v)),$r!==null)for(v=$r.return;v!==null;){var M=v;switch(Xo(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&Mu();break;case 3:Ua(),Qn(Pi),Qn(ii),vo();break;case 5:mc(M);break;case 4:Ua();break;case 13:Qn(nr);break;case 19:Qn(nr);break;case 10:Lu(M.type._context);break;case 22:case 23:__()}v=v.return}if(Ei=l,$r=l=Ec(l.current,null),Ui=qs=f,ci=0,Fp=null,d_=Zg=Gu=0,As=kp=null,qo!==null){for(f=0;f<qo.length;f++)if(v=qo[f],M=v.interleaved,M!==null){v.interleaved=null;var R=M.next,O=v.pending;if(O!==null){var Z=O.next;O.next=R,M.next=Z}v.pending=M}qo=null}return l}function wE(l,f){do{var v=$r;try{if(wl(),bl.current=Rd,Xs){for(var M=Jn.memoizedState;M!==null;){var R=M.queue;R!==null&&(R.pending=null),M=M.next}Xs=!1}if(Zo=0,Nn=xr=Jn=null,wi=!1,Oa=0,f_.current=null,v===null||v.return===null){ci=1,Fp=f,$r=null;break}e:{var O=l,Z=v.return,me=v,we=f;if(f=Ui,me.flags|=32768,we!==null&&typeof we=="object"&&typeof we.then=="function"){var Ke=we,gt=me,vt=gt.tag;if((gt.mode&1)===0&&(vt===0||vt===11||vt===15)){var pt=gt.alternate;pt?(gt.updateQueue=pt.updateQueue,gt.memoizedState=pt.memoizedState,gt.lanes=pt.lanes):(gt.updateQueue=null,gt.memoizedState=null)}var Ot=Ft(Z);if(Ot!==null){Ot.flags&=-257,fn(Ot,Z,me,O,f),Ot.mode&1&&yt(O,Ke,f),f=Ot,we=Ke;var Bt=f.updateQueue;if(Bt===null){var zt=new Set;zt.add(we),f.updateQueue=zt}else Bt.add(we);break e}else{if((f&1)===0){yt(O,Ke,f),x_();break e}we=Error(t(426))}}else if(tr&&me.mode&1){var Gr=Ft(Z);if(Gr!==null){(Gr.flags&65536)===0&&(Gr.flags|=256),fn(Gr,Z,me,O,f),dc(A(we,me));break e}}O=we=A(we,me),ci!==4&&(ci=2),kp===null?kp=[O]:kp.push(O),O=Z;do{switch(O.tag){case 3:O.flags|=65536,f&=-f,O.lanes|=f;var Oe=Ae(O,we,f);El(O,Oe);break e;case 1:me=we;var be=O.type,ze=O.stateNode;if((O.flags&128)===0&&(typeof be.getDerivedStateFromError=="function"||ze!==null&&typeof ze.componentDidCatch=="function"&&(_c===null||!_c.has(ze)))){O.flags|=65536,f&=-f,O.lanes|=f;var wt=$e(O,me,f);El(O,wt);break e}}O=O.return}while(O!==null)}TE(v)}catch(Xt){f=Xt,$r===v&&v!==null&&($r=v=v.return);continue}break}while(!0)}function EE(){var l=Kg.current;return Kg.current=Rd,l===null?Rd:l}function x_(){(ci===0||ci===3||ci===2)&&(ci=4),Ei===null||(Gu&268435455)===0&&(Zg&268435455)===0||wc(Ei,Ui)}function nv(l,f){var v=Fn;Fn|=2;var M=EE();(Ei!==l||Ui!==f)&&(Pl=null,Wu(l,f));do try{VL();break}catch(R){wE(l,R)}while(!0);if(wl(),Fn=v,Kg.current=M,$r!==null)throw Error(t(261));return Ei=null,Ui=0,ci}function VL(){for(;$r!==null;)ME($r)}function WL(){for(;$r!==null&&!Ze();)ME($r)}function ME(l){var f=CE(l.alternate,l,qs);l.memoizedProps=l.pendingProps,f===null?TE(l):$r=f,f_.current=null}function TE(l){var f=l;do{var v=f.alternate;if(l=f.return,(f.flags&32768)===0){if(v=OL(v,f,qs),v!==null){$r=v;return}}else{if(v=FL(v,f),v!==null){v.flags&=32767,$r=v;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{ci=6,$r=null;return}}if(f=f.sibling,f!==null){$r=f;return}$r=f=l}while(f!==null);ci===0&&(ci=5)}function ju(l,f,v){var M=Tn,R=_o.transition;try{_o.transition=null,Tn=1,jL(l,f,v,M)}finally{_o.transition=R,Tn=M}return null}function jL(l,f,v,M){do Dd();while(xc!==null);if((Fn&6)!==0)throw Error(t(327));v=l.finishedWork;var R=l.finishedLanes;if(v===null)return null;if(l.finishedWork=null,l.finishedLanes=0,v===l.current)throw Error(t(177));l.callbackNode=null,l.callbackPriority=0;var O=v.lanes|v.childLanes;if(Ji(l,O),l===Ei&&($r=Ei=null,Ui=0),(v.subtreeFlags&2064)===0&&(v.flags&2064)===0||Jg||(Jg=!0,RE(It,function(){return Dd(),null})),O=(v.flags&15990)!==0,(v.subtreeFlags&15990)!==0||O){O=_o.transition,_o.transition=null;var Z=Tn;Tn=1;var me=Fn;Fn|=4,f_.current=null,BL(l,v),mE(v,l),Kr(up),jr=!!cc,up=cc=null,l.current=v,zL(v),Je(),Fn=me,Tn=Z,_o.transition=O}else l.current=v;if(Jg&&(Jg=!1,xc=l,$g=R),O=l.pendingLanes,O===0&&(_c=null),bt(v.stateNode),Cs(l,Se()),f!==null)for(M=l.onRecoverableError,v=0;v<f.length;v++)R=f[v],M(R.value,{componentStack:R.stack,digest:R.digest});if(Qg)throw Qg=!1,l=p_,p_=null,l;return($g&1)!==0&&l.tag!==0&&Dd(),O=l.pendingLanes,(O&1)!==0?l===m_?Bp++:(Bp=0,m_=l):Bp=0,mo(),null}function Dd(){if(xc!==null){var l=lo($g),f=_o.transition,v=Tn;try{if(_o.transition=null,Tn=16>l?16:l,xc===null)var M=!1;else{if(l=xc,xc=null,$g=0,(Fn&6)!==0)throw Error(t(331));var R=Fn;for(Fn|=4,kt=l.current;kt!==null;){var O=kt,Z=O.child;if((kt.flags&16)!==0){var me=O.deletions;if(me!==null){for(var we=0;we<me.length;we++){var Ke=me[we];for(kt=Ke;kt!==null;){var gt=kt;switch(gt.tag){case 0:case 11:case 15:Op(8,gt,O)}var vt=gt.child;if(vt!==null)vt.return=gt,kt=vt;else for(;kt!==null;){gt=kt;var pt=gt.sibling,Ot=gt.return;if(uE(gt),gt===Ke){kt=null;break}if(pt!==null){pt.return=Ot,kt=pt;break}kt=Ot}}}var Bt=O.alternate;if(Bt!==null){var zt=Bt.child;if(zt!==null){Bt.child=null;do{var Gr=zt.sibling;zt.sibling=null,zt=Gr}while(zt!==null)}}kt=O}}if((O.subtreeFlags&2064)!==0&&Z!==null)Z.return=O,kt=Z;else e:for(;kt!==null;){if(O=kt,(O.flags&2048)!==0)switch(O.tag){case 0:case 11:case 15:Op(9,O,O.return)}var Oe=O.sibling;if(Oe!==null){Oe.return=O.return,kt=Oe;break e}kt=O.return}}var be=l.current;for(kt=be;kt!==null;){Z=kt;var ze=Z.child;if((Z.subtreeFlags&2064)!==0&&ze!==null)ze.return=Z,kt=ze;else e:for(Z=be;kt!==null;){if(me=kt,(me.flags&2048)!==0)try{switch(me.tag){case 0:case 11:case 15:qg(9,me)}}catch(Xt){Pr(me,me.return,Xt)}if(me===Z){kt=null;break e}var wt=me.sibling;if(wt!==null){wt.return=me.return,kt=wt;break e}kt=me.return}}if(Fn=R,mo(),Tt&&typeof Tt.onPostCommitFiberRoot=="function")try{Tt.onPostCommitFiberRoot(Zt,l)}catch{}M=!0}return M}finally{Tn=v,_o.transition=f}}return!1}function bE(l,f,v){f=A(v,f),f=Ae(l,f,1),l=lr(l,f,1),f=us(),l!==null&&(er(l,1,f),Cs(l,f))}function Pr(l,f,v){if(l.tag===3)bE(l,l,v);else for(;f!==null;){if(f.tag===3){bE(f,l,v);break}else if(f.tag===1){var M=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(_c===null||!_c.has(M))){l=A(v,l),l=$e(f,l,1),f=lr(f,l,1),l=us(),f!==null&&(er(f,1,l),Cs(f,l));break}}f=f.return}}function XL(l,f,v){var M=l.pingCache;M!==null&&M.delete(f),f=us(),l.pingedLanes|=l.suspendedLanes&v,Ei===l&&(Ui&v)===v&&(ci===4||ci===3&&(Ui&130023424)===Ui&&500>Se()-h_?Wu(l,0):d_|=v),Cs(l,f)}function AE(l,f){f===0&&((l.mode&1)===0?f=1:(f=On,On<<=1,(On&130023424)===0&&(On=4194304)));var v=us();l=Ws(l,f),l!==null&&(er(l,f,v),Cs(l,v))}function YL(l){var f=l.memoizedState,v=0;f!==null&&(v=f.retryLane),AE(l,v)}function qL(l,f){var v=0;switch(l.tag){case 13:var M=l.stateNode,R=l.memoizedState;R!==null&&(v=R.retryLane);break;case 19:M=l.stateNode;break;default:throw Error(t(314))}M!==null&&M.delete(f),AE(l,v)}var CE;CE=function(l,f,v){if(l!==null)if(l.memoizedProps!==f.pendingProps||Pi.current)vn=!0;else{if((l.lanes&v)===0&&(f.flags&128)===0)return vn=!1,UL(l,f,v);vn=(l.flags&131072)!==0}else vn=!1,tr&&(f.flags&1048576)!==0&&yp(f,_d,f.index);switch(f.lanes=0,f.tag){case 2:var M=f.type;Xg(l,f),l=f.pendingProps;var R=ml(f,ii.current);Da(f,v),R=Ou(null,f,M,l,R,v);var O=bp();return f.flags|=1,typeof R=="object"&&R!==null&&typeof R.render=="function"&&R.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,xi(M)?(O=!0,gl(f)):O=!1,f.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,mn(f),R.updater=Pd,f.stateNode=R,R._reactInternals=f,E(f,M,l,v),f=hn(null,f,M,!0,O,v)):(f.tag=0,tr&&O&&_p(f),Ut(null,f,R,v),f=f.child),f;case 16:M=f.elementType;e:{switch(Xg(l,f),l=f.pendingProps,R=M._init,M=R(M._payload),f.type=M,R=f.tag=ZL(M),l=bs(M,l),R){case 0:f=Nt(null,f,M,l,v);break e;case 1:f=Gt(null,f,M,l,v);break e;case 11:f=li(null,f,M,l,v);break e;case 14:f=cs(null,f,M,bs(M.type,l),v);break e}throw Error(t(306,M,""))}return f;case 0:return M=f.type,R=f.pendingProps,R=f.elementType===M?R:bs(M,R),Nt(l,f,M,R,v);case 1:return M=f.type,R=f.pendingProps,R=f.elementType===M?R:bs(M,R),Gt(l,f,M,R,v);case 3:e:{if(dn(f),l===null)throw Error(t(387));M=f.pendingProps,O=f.memoizedState,R=O.element,Mr(l,f),_r(f,M,null,v);var Z=f.memoizedState;if(M=Z.element,O.isDehydrated)if(O={element:M,isDehydrated:!1,cache:Z.cache,pendingSuspenseBoundaries:Z.pendingSuspenseBoundaries,transitions:Z.transitions},f.updateQueue.baseState=O,f.memoizedState=O,f.flags&256){R=A(Error(t(423)),f),f=Rn(l,f,M,v,R);break e}else if(M!==R){R=A(Error(t(424)),f),f=Rn(l,f,M,v,R);break e}else for(Ii=Ho(f.stateNode.containerInfo.firstChild),si=f,tr=!0,Ts=null,v=Pu(f,null,M,v),f.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(Na(),M===R){f=Rl(l,f,v);break e}Ut(l,f,M,v)}f=f.child}return f;case 5:return Tl(f),l===null&&Sd(f),M=f.type,R=f.pendingProps,O=l!==null?l.memoizedProps:null,Z=R.children,fp(M,R)?Z=null:O!==null&&fp(M,O)&&(f.flags|=32),Qe(l,f),Ut(l,f,Z,v),f.child;case 6:return l===null&&Sd(f),null;case 13:return $o(l,f,v);case 4:return Du(f,f.stateNode.containerInfo),M=f.pendingProps,l===null?f.child=_l(f,null,M,v):Ut(l,f,M,v),f.child;case 11:return M=f.type,R=f.pendingProps,R=f.elementType===M?R:bs(M,R),li(l,f,M,R,v);case 7:return Ut(l,f,f.pendingProps,v),f.child;case 8:return Ut(l,f,f.pendingProps.children,v),f.child;case 12:return Ut(l,f,f.pendingProps.children,v),f.child;case 10:e:{if(M=f.type._context,R=f.pendingProps,O=f.memoizedProps,Z=R.value,qn(xl,M._currentValue),M._currentValue=Z,O!==null)if(ns(O.value,Z)){if(O.children===R.children&&!Pi.current){f=Rl(l,f,v);break e}}else for(O=f.child,O!==null&&(O.return=f);O!==null;){var me=O.dependencies;if(me!==null){Z=O.child;for(var we=me.firstContext;we!==null;){if(we.context===M){if(O.tag===1){we=Vn(-1,v&-v),we.tag=2;var Ke=O.updateQueue;if(Ke!==null){Ke=Ke.shared;var gt=Ke.pending;gt===null?we.next=we:(we.next=gt.next,gt.next=we),Ke.pending=we}}O.lanes|=v,we=O.alternate,we!==null&&(we.lanes|=v),Iu(O.return,v,f),me.lanes|=v;break}we=we.next}}else if(O.tag===10)Z=O.type===f.type?null:O.child;else if(O.tag===18){if(Z=O.return,Z===null)throw Error(t(341));Z.lanes|=v,me=Z.alternate,me!==null&&(me.lanes|=v),Iu(Z,v,f),Z=O.sibling}else Z=O.child;if(Z!==null)Z.return=O;else for(Z=O;Z!==null;){if(Z===f){Z=null;break}if(O=Z.sibling,O!==null){O.return=Z.return,Z=O;break}Z=Z.return}O=Z}Ut(l,f,R.children,v),f=f.child}return f;case 9:return R=f.type,M=f.pendingProps.children,Da(f,v),R=ss(R),M=M(R),f.flags|=1,Ut(l,f,M,v),f.child;case 14:return M=f.type,R=bs(M,f.pendingProps),R=bs(M.type,R),cs(l,f,M,R,v);case 15:return Ve(l,f,f.type,f.pendingProps,v);case 17:return M=f.type,R=f.pendingProps,R=f.elementType===M?R:bs(M,R),Xg(l,f),f.tag=1,xi(M)?(l=!0,gl(f)):l=!1,Da(f,v),h(f,M,R),E(f,M,R,v),hn(null,f,M,!0,l,v);case 19:return sE(l,f,v);case 22:return Ce(l,f,v)}throw Error(t(156,f.tag))};function RE(l,f){return ge(l,f)}function KL(l,f,v,M){this.tag=l,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xo(l,f,v,M){return new KL(l,f,v,M)}function S_(l){return l=l.prototype,!(!l||!l.isReactComponent)}function ZL(l){if(typeof l=="function")return S_(l)?1:0;if(l!=null){if(l=l.$$typeof,l===j)return 11;if(l===ie)return 14}return 2}function Ec(l,f){var v=l.alternate;return v===null?(v=xo(l.tag,f,l.key,l.mode),v.elementType=l.elementType,v.type=l.type,v.stateNode=l.stateNode,v.alternate=l,l.alternate=v):(v.pendingProps=f,v.type=l.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=l.flags&14680064,v.childLanes=l.childLanes,v.lanes=l.lanes,v.child=l.child,v.memoizedProps=l.memoizedProps,v.memoizedState=l.memoizedState,v.updateQueue=l.updateQueue,f=l.dependencies,v.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},v.sibling=l.sibling,v.index=l.index,v.ref=l.ref,v}function rv(l,f,v,M,R,O){var Z=2;if(M=l,typeof l=="function")S_(l)&&(Z=1);else if(typeof l=="string")Z=5;else e:switch(l){case U:return Xu(v.children,R,O,f);case F:Z=8,R|=8;break;case I:return l=xo(12,v,f,R|2),l.elementType=I,l.lanes=O,l;case $:return l=xo(13,v,f,R),l.elementType=$,l.lanes=O,l;case H:return l=xo(19,v,f,R),l.elementType=H,l.lanes=O,l;case ue:return iv(v,R,O,f);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case k:Z=10;break e;case Q:Z=9;break e;case j:Z=11;break e;case ie:Z=14;break e;case re:Z=16,M=null;break e}throw Error(t(130,l==null?l:typeof l,""))}return f=xo(Z,v,f,R),f.elementType=l,f.type=M,f.lanes=O,f}function Xu(l,f,v,M){return l=xo(7,l,M,f),l.lanes=v,l}function iv(l,f,v,M){return l=xo(22,l,M,f),l.elementType=ue,l.lanes=v,l.stateNode={isHidden:!1},l}function w_(l,f,v){return l=xo(6,l,null,f),l.lanes=v,l}function E_(l,f,v){return f=xo(4,l.children!==null?l.children:[],l.key,f),f.lanes=v,f.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},f}function QL(l,f,v,M,R){this.tag=f,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kr(0),this.expirationTimes=kr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kr(0),this.identifierPrefix=M,this.onRecoverableError=R,this.mutableSourceEagerHydrationData=null}function M_(l,f,v,M,R,O,Z,me,we){return l=new QL(l,f,v,me,we),f===1?(f=1,O===!0&&(f|=8)):f=0,O=xo(3,null,null,f),l.current=O,O.stateNode=l,O.memoizedState={element:M,isDehydrated:v,cache:null,transitions:null,pendingSuspenseBoundaries:null},mn(O),l}function JL(l,f,v){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D,key:M==null?null:""+M,children:l,containerInfo:f,implementation:v}}function PE(l){if(!l)return Vo;l=l._reactInternals;e:{if(ee(l)!==l||l.tag!==1)throw Error(t(170));var f=l;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(xi(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(t(171))}if(l.tag===1){var v=l.type;if(xi(v))return Tu(l,v,f)}return f}function LE(l,f,v,M,R,O,Z,me,we){return l=M_(v,M,!0,l,R,O,Z,me,we),l.context=PE(null),v=l.current,M=us(),R=Sc(v),O=Vn(M,R),O.callback=f??null,lr(v,O,R),l.current.lanes=R,er(l,R,M),Cs(l,M),l}function sv(l,f,v,M){var R=f.current,O=us(),Z=Sc(R);return v=PE(v),f.context===null?f.context=v:f.pendingContext=v,f=Vn(O,Z),f.payload={element:l},M=M===void 0?null:M,M!==null&&(f.callback=M),l=lr(R,f,Z),l!==null&&(na(l,R,Z,O),Si(l,R,Z)),Z}function ov(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function IE(l,f){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var v=l.retryLane;l.retryLane=v!==0&&v<f?v:f}}function T_(l,f){IE(l,f),(l=l.alternate)&&IE(l,f)}function $L(){return null}var NE=typeof reportError=="function"?reportError:function(l){console.error(l)};function b_(l){this._internalRoot=l}av.prototype.render=b_.prototype.render=function(l){var f=this._internalRoot;if(f===null)throw Error(t(409));sv(l,f,null,null)},av.prototype.unmount=b_.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var f=l.containerInfo;Vu(function(){sv(null,l,null,null)}),f[is]=null}};function av(l){this._internalRoot=l}av.prototype.unstable_scheduleHydration=function(l){if(l){var f=co();l={blockedOn:null,target:l,priority:f};for(var v=0;v<_s.length&&f!==0&&f<_s[v].priority;v++);_s.splice(v,0,l),v===0&&yi(l)}};function A_(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function lv(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function DE(){}function e3(l,f,v,M,R){if(R){if(typeof M=="function"){var O=M;M=function(){var Ke=ov(Z);O.call(Ke)}}var Z=LE(f,M,l,0,null,!1,!1,"",DE);return l._reactRootContainer=Z,l[is]=Z.current,ac(l.nodeType===8?l.parentNode:l),Vu(),Z}for(;R=l.lastChild;)l.removeChild(R);if(typeof M=="function"){var me=M;M=function(){var Ke=ov(we);me.call(Ke)}}var we=M_(l,0,!1,null,null,!1,!1,"",DE);return l._reactRootContainer=we,l[is]=we.current,ac(l.nodeType===8?l.parentNode:l),Vu(function(){sv(f,we,v,M)}),we}function cv(l,f,v,M,R){var O=v._reactRootContainer;if(O){var Z=O;if(typeof R=="function"){var me=R;R=function(){var we=ov(Z);me.call(we)}}sv(f,Z,l,R)}else Z=e3(v,f,l,R,M);return ov(Z)}xa=function(l){switch(l.tag){case 3:var f=l.stateNode;if(f.current.memoizedState.isDehydrated){var v=un(f.pendingLanes);v!==0&&(Fs(f,v|1),Cs(f,Se()),(Fn&6)===0&&(Nd=Se()+500,mo()))}break;case 13:Vu(function(){var M=Ws(l,1);if(M!==null){var R=us();na(M,l,1,R)}}),T_(l,1)}},Kl=function(l){if(l.tag===13){var f=Ws(l,134217728);if(f!==null){var v=us();na(f,l,134217728,v)}T_(l,134217728)}},Zl=function(l){if(l.tag===13){var f=Sc(l),v=Ws(l,f);if(v!==null){var M=us();na(v,l,f,M)}T_(l,f)}},co=function(){return Tn},rl=function(l,f){var v=Tn;try{return Tn=l,f()}finally{Tn=v}},Te=function(l,f,v){switch(f){case"input":if(ct(l,v),f=v.name,v.type==="radio"&&f!=null){for(v=l;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll("input[name="+JSON.stringify(""+f)+'][type="radio"]'),f=0;f<v.length;f++){var M=v[f];if(M!==l&&M.form===l.form){var R=gd(M);if(!R)throw Error(t(90));te(M),ct(M,R)}}}break;case"textarea":q(l,v);break;case"select":f=v.value,f!=null&&Ue(l,!!v.multiple,f,!1)}},St=y_,Et=Vu;var t3={usingClientEntryPoint:!1,Events:[Go,Er,gd,De,at,y_]},zp={findFiberByHostInstance:Ia,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},n3={bundleType:zp.bundleType,version:zp.version,rendererPackageName:zp.rendererPackageName,rendererConfig:zp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:C.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=le(l),l===null?null:l.stateNode},findFiberByHostInstance:zp.findFiberByHostInstance||$L,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uv.isDisabled&&uv.supportsFiber)try{Zt=uv.inject(n3),Tt=uv}catch{}}return Rs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=t3,Rs.createPortal=function(l,f){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!A_(f))throw Error(t(200));return JL(l,f,null,v)},Rs.createRoot=function(l,f){if(!A_(l))throw Error(t(299));var v=!1,M="",R=NE;return f!=null&&(f.unstable_strictMode===!0&&(v=!0),f.identifierPrefix!==void 0&&(M=f.identifierPrefix),f.onRecoverableError!==void 0&&(R=f.onRecoverableError)),f=M_(l,1,!1,null,null,v,!1,M,R),l[is]=f.current,ac(l.nodeType===8?l.parentNode:l),new b_(f)},Rs.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var f=l._reactInternals;if(f===void 0)throw typeof l.render=="function"?Error(t(188)):(l=Object.keys(l).join(","),Error(t(268,l)));return l=le(f),l=l===null?null:l.stateNode,l},Rs.flushSync=function(l){return Vu(l)},Rs.hydrate=function(l,f,v){if(!lv(f))throw Error(t(200));return cv(null,l,f,!0,v)},Rs.hydrateRoot=function(l,f,v){if(!A_(l))throw Error(t(405));var M=v!=null&&v.hydratedSources||null,R=!1,O="",Z=NE;if(v!=null&&(v.unstable_strictMode===!0&&(R=!0),v.identifierPrefix!==void 0&&(O=v.identifierPrefix),v.onRecoverableError!==void 0&&(Z=v.onRecoverableError)),f=LE(f,null,l,1,v??null,R,!1,O,Z),l[is]=f.current,ac(l),M)for(l=0;l<M.length;l++)v=M[l],R=v._getVersion,R=R(v._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[v,R]:f.mutableSourceEagerHydrationData.push(v,R);return new av(f)},Rs.render=function(l,f,v){if(!lv(f))throw Error(t(200));return cv(null,l,f,!1,v)},Rs.unmountComponentAtNode=function(l){if(!lv(l))throw Error(t(40));return l._reactRootContainer?(Vu(function(){cv(null,null,l,!1,function(){l._reactRootContainer=null,l[is]=null})}),!0):!1},Rs.unstable_batchedUpdates=y_,Rs.unstable_renderSubtreeIntoContainer=function(l,f,v,M){if(!lv(v))throw Error(t(200));if(l==null||l._reactInternals===void 0)throw Error(t(38));return cv(l,f,v,!1,M)},Rs.version="18.3.1-next-f1338f8080-20240426",Rs}var VE;function MA(){if(VE)return L_.exports;VE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),L_.exports=u3(),L_.exports}var WE;function f3(){if(WE)return dv;WE=1;var n=MA();return dv.createRoot=n.createRoot,dv.hydrateRoot=n.hydrateRoot,dv}var d3=f3(),X=Z0();const Ct=SS(X),h3=i3({__proto__:null,default:Ct},[X]),p3=1,m3=1e6;let D_=0;function g3(){return D_=(D_+1)%Number.MAX_SAFE_INTEGER,D_.toString()}const U_=new Map,jE=n=>{if(U_.has(n))return;const e=setTimeout(()=>{U_.delete(n),hm({type:"REMOVE_TOAST",toastId:n})},m3);U_.set(n,e)},v3=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,p3)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?jE(t):n.toasts.forEach(r=>{jE(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},g0=[];let v0={toasts:[]};function hm(n){v0=v3(v0,n),g0.forEach(e=>{e(v0)})}function y3({...n}){const e=g3(),t=i=>hm({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>hm({type:"DISMISS_TOAST",toastId:e});return hm({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:t}}function _3(){const[n,e]=X.useState(v0);return X.useEffect(()=>(g0.push(e),()=>{const t=g0.indexOf(e);t>-1&&g0.splice(t,1)}),[n]),{...n,toast:y3,dismiss:t=>hm({type:"DISMISS_TOAST",toastId:t})}}var Q0=MA();const TA=SS(Q0);function fi(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function x3(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function bA(...n){return e=>n.forEach(t=>x3(t,e))}function pa(...n){return X.useCallback(bA(...n),n)}function S3(n,e=[]){let t=[];function r(s,o){const a=X.createContext(o),c=t.length;t=[...t,o];function u(m){const{scope:g,children:y,..._}=m,w=(g==null?void 0:g[n][c])||a,x=X.useMemo(()=>_,Object.values(_));return Ee.jsx(w.Provider,{value:x,children:y})}function d(m,g){const y=(g==null?void 0:g[n][c])||a,_=X.useContext(y);if(_)return _;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,d]}const i=()=>{const s=t.map(o=>X.createContext(o));return function(a){const c=(a==null?void 0:a[n])||s;return X.useMemo(()=>({[`__scope${n}`]:{...a,[n]:c}}),[a,c])}};return i.scopeName=n,[r,w3(i,...e)]}function w3(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:c,scopeName:u})=>{const m=c(s)[`__scope${u}`];return{...a,...m}},{});return X.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var P0=X.forwardRef((n,e)=>{const{children:t,...r}=n,i=X.Children.toArray(t),s=i.find(E3);if(s){const o=s.props.children,a=i.map(c=>c===s?X.Children.count(o)>1?X.Children.only(null):X.isValidElement(o)?o.props.children:null:c);return Ee.jsx(Zx,{...r,ref:e,children:X.isValidElement(o)?X.cloneElement(o,void 0,a):null})}return Ee.jsx(Zx,{...r,ref:e,children:t})});P0.displayName="Slot";var Zx=X.forwardRef((n,e)=>{const{children:t,...r}=n;if(X.isValidElement(t)){const i=T3(t);return X.cloneElement(t,{...M3(r,t.props),ref:e?bA(e,i):i})}return X.Children.count(t)>1?X.Children.only(null):null});Zx.displayName="SlotClone";var AA=({children:n})=>Ee.jsx(Ee.Fragment,{children:n});function E3(n){return X.isValidElement(n)&&n.type===AA}function M3(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...a)=>{s(...a),i(...a)}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function T3(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function b3(n){const e=n+"CollectionProvider",[t,r]=S3(e),[i,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:_,children:w}=y,x=Ct.useRef(null),S=Ct.useRef(new Map).current;return Ee.jsx(i,{scope:_,itemMap:S,collectionRef:x,children:w})};o.displayName=e;const a=n+"CollectionSlot",c=Ct.forwardRef((y,_)=>{const{scope:w,children:x}=y,S=s(a,w),b=pa(_,S.collectionRef);return Ee.jsx(P0,{ref:b,children:x})});c.displayName=a;const u=n+"CollectionItemSlot",d="data-radix-collection-item",m=Ct.forwardRef((y,_)=>{const{scope:w,children:x,...S}=y,b=Ct.useRef(null),T=pa(_,b),C=s(u,w);return Ct.useEffect(()=>(C.itemMap.set(b,{ref:b,...S}),()=>void C.itemMap.delete(b))),Ee.jsx(P0,{[d]:"",ref:T,children:x})});m.displayName=u;function g(y){const _=s(n+"CollectionConsumer",y);return Ct.useCallback(()=>{const x=_.collectionRef.current;if(!x)return[];const S=Array.from(x.querySelectorAll(`[${d}]`));return Array.from(_.itemMap.values()).sort((C,P)=>S.indexOf(C.ref.current)-S.indexOf(P.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:o,Slot:c,ItemSlot:m},g,r]}function CA(n,e=[]){let t=[];function r(s,o){const a=X.createContext(o),c=t.length;t=[...t,o];const u=m=>{var S;const{scope:g,children:y,..._}=m,w=((S=g==null?void 0:g[n])==null?void 0:S[c])||a,x=X.useMemo(()=>_,Object.values(_));return Ee.jsx(w.Provider,{value:x,children:y})};u.displayName=s+"Provider";function d(m,g){var w;const y=((w=g==null?void 0:g[n])==null?void 0:w[c])||a,_=X.useContext(y);if(_)return _;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${s}\``)}return[u,d]}const i=()=>{const s=t.map(o=>X.createContext(o));return function(a){const c=(a==null?void 0:a[n])||s;return X.useMemo(()=>({[`__scope${n}`]:{...a,[n]:c}}),[a,c])}};return i.scopeName=n,[r,A3(i,...e)]}function A3(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:c,scopeName:u})=>{const m=c(s)[`__scope${u}`];return{...a,...m}},{});return X.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var C3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ds=C3.reduce((n,e)=>{const t=X.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?P0:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),Ee.jsx(a,{...o,ref:i})});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function RA(n,e){n&&Q0.flushSync(()=>n.dispatchEvent(e))}function Ka(n){const e=X.useRef(n);return X.useEffect(()=>{e.current=n}),X.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function R3(n,e=globalThis==null?void 0:globalThis.document){const t=Ka(n);X.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var P3="DismissableLayer",Qx="dismissableLayer.update",L3="dismissableLayer.pointerDownOutside",I3="dismissableLayer.focusOutside",XE,PA=X.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),wS=X.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...c}=n,u=X.useContext(PA),[d,m]=X.useState(null),g=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=X.useState({}),_=pa(e,U=>m(U)),w=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),S=w.indexOf(x),b=d?w.indexOf(d):-1,T=u.layersWithOutsidePointerEventsDisabled.size>0,C=b>=S,P=D3(U=>{const F=U.target,I=[...u.branches].some(k=>k.contains(F));!C||I||(i==null||i(U),o==null||o(U),U.defaultPrevented||a==null||a())},g),D=U3(U=>{const F=U.target;[...u.branches].some(k=>k.contains(F))||(s==null||s(U),o==null||o(U),U.defaultPrevented||a==null||a())},g);return R3(U=>{b===u.layers.size-1&&(r==null||r(U),!U.defaultPrevented&&a&&(U.preventDefault(),a()))},g),X.useEffect(()=>{if(d)return t&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(XE=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),YE(),()=>{t&&u.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=XE)}},[d,g,t,u]),X.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),YE())},[d,u]),X.useEffect(()=>{const U=()=>y({});return document.addEventListener(Qx,U),()=>document.removeEventListener(Qx,U)},[]),Ee.jsx(Ds.div,{...c,ref:_,style:{pointerEvents:T?C?"auto":"none":void 0,...n.style},onFocusCapture:fi(n.onFocusCapture,D.onFocusCapture),onBlurCapture:fi(n.onBlurCapture,D.onBlurCapture),onPointerDownCapture:fi(n.onPointerDownCapture,P.onPointerDownCapture)})});wS.displayName=P3;var N3="DismissableLayerBranch",LA=X.forwardRef((n,e)=>{const t=X.useContext(PA),r=X.useRef(null),i=pa(e,r);return X.useEffect(()=>{const s=r.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),Ee.jsx(Ds.div,{...n,ref:i})});LA.displayName=N3;function D3(n,e=globalThis==null?void 0:globalThis.document){const t=Ka(n),r=X.useRef(!1),i=X.useRef(()=>{});return X.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let c=function(){IA(L3,t,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function U3(n,e=globalThis==null?void 0:globalThis.document){const t=Ka(n),r=X.useRef(!1);return X.useEffect(()=>{const i=s=>{s.target&&!r.current&&IA(I3,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function YE(){const n=new CustomEvent(Qx);document.dispatchEvent(n)}function IA(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?RA(i,s):i.dispatchEvent(s)}var O3=wS,F3=LA,Pf=globalThis!=null&&globalThis.document?X.useLayoutEffect:()=>{},k3="Portal",NA=X.forwardRef((n,e)=>{var a;const{container:t,...r}=n,[i,s]=X.useState(!1);Pf(()=>s(!0),[]);const o=t||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?TA.createPortal(Ee.jsx(Ds.div,{...r,ref:e}),o):null});NA.displayName=k3;function B3(n,e){return X.useReducer((t,r)=>e[t][r]??t,n)}var ES=n=>{const{present:e,children:t}=n,r=z3(e),i=typeof t=="function"?t({present:r.isPresent}):X.Children.only(t),s=pa(r.ref,H3(i));return typeof t=="function"||r.isPresent?X.cloneElement(i,{ref:s}):null};ES.displayName="Presence";function z3(n){const[e,t]=X.useState(),r=X.useRef({}),i=X.useRef(n),s=X.useRef("none"),o=n?"mounted":"unmounted",[a,c]=B3(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return X.useEffect(()=>{const u=hv(r.current);s.current=a==="mounted"?u:"none"},[a]),Pf(()=>{const u=r.current,d=i.current;if(d!==n){const g=s.current,y=hv(u);n?c("MOUNT"):y==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&g!==y?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,c]),Pf(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,m=y=>{const w=hv(r.current).includes(y.animationName);if(y.target===e&&w&&(c("ANIMATION_END"),!i.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},g=y=>{y.target===e&&(s.current=hv(r.current))};return e.addEventListener("animationstart",g),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",g),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:X.useCallback(u=>{u&&(r.current=getComputedStyle(u)),t(u)},[])}}function hv(n){return(n==null?void 0:n.animationName)||"none"}function H3(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function G3({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,i]=V3({defaultProp:e,onChange:t}),s=n!==void 0,o=s?n:r,a=Ka(t),c=X.useCallback(u=>{if(s){const m=typeof u=="function"?u(n):u;m!==n&&a(m)}else i(u)},[s,n,i,a]);return[o,c]}function V3({defaultProp:n,onChange:e}){const t=X.useState(n),[r]=t,i=X.useRef(r),s=Ka(e);return X.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),t}var W3="VisuallyHidden",J0=X.forwardRef((n,e)=>Ee.jsx(Ds.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));J0.displayName=W3;var j3=J0,MS="ToastProvider",[TS,X3,Y3]=b3("Toast"),[DA,n9]=CA("Toast",[Y3]),[q3,$0]=DA(MS),UA=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=n,[a,c]=X.useState(null),[u,d]=X.useState(0),m=X.useRef(!1),g=X.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${MS}\`. Expected non-empty \`string\`.`),Ee.jsx(TS.Provider,{scope:e,children:Ee.jsx(q3,{scope:e,label:t,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:u,viewport:a,onViewportChange:c,onToastAdd:X.useCallback(()=>d(y=>y+1),[]),onToastRemove:X.useCallback(()=>d(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:g,children:o})})};UA.displayName=MS;var OA="ToastViewport",K3=["F8"],Jx="toast.viewportPause",$x="toast.viewportResume",FA=X.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=K3,label:i="Notifications ({hotkey})",...s}=n,o=$0(OA,t),a=X3(t),c=X.useRef(null),u=X.useRef(null),d=X.useRef(null),m=X.useRef(null),g=pa(e,m,o.onViewportChange),y=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),_=o.toastCount>0;X.useEffect(()=>{const x=S=>{var T;r.length!==0&&r.every(C=>S[C]||S.code===C)&&((T=m.current)==null||T.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),X.useEffect(()=>{const x=c.current,S=m.current;if(_&&x&&S){const b=()=>{if(!o.isClosePausedRef.current){const D=new CustomEvent(Jx);S.dispatchEvent(D),o.isClosePausedRef.current=!0}},T=()=>{if(o.isClosePausedRef.current){const D=new CustomEvent($x);S.dispatchEvent(D),o.isClosePausedRef.current=!1}},C=D=>{!x.contains(D.relatedTarget)&&T()},P=()=>{x.contains(document.activeElement)||T()};return x.addEventListener("focusin",b),x.addEventListener("focusout",C),x.addEventListener("pointermove",b),x.addEventListener("pointerleave",P),window.addEventListener("blur",b),window.addEventListener("focus",T),()=>{x.removeEventListener("focusin",b),x.removeEventListener("focusout",C),x.removeEventListener("pointermove",b),x.removeEventListener("pointerleave",P),window.removeEventListener("blur",b),window.removeEventListener("focus",T)}}},[_,o.isClosePausedRef]);const w=X.useCallback(({tabbingDirection:x})=>{const b=a().map(T=>{const C=T.ref.current,P=[C,...lI(C)];return x==="forwards"?P:P.reverse()});return(x==="forwards"?b.reverse():b).flat()},[a]);return X.useEffect(()=>{const x=m.current;if(x){const S=b=>{var P,D,U;const T=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!T){const F=document.activeElement,I=b.shiftKey;if(b.target===x&&I){(P=u.current)==null||P.focus();return}const j=w({tabbingDirection:I?"backwards":"forwards"}),$=j.findIndex(H=>H===F);O_(j.slice($+1))?b.preventDefault():I?(D=u.current)==null||D.focus():(U=d.current)==null||U.focus()}};return x.addEventListener("keydown",S),()=>x.removeEventListener("keydown",S)}},[a,w]),Ee.jsxs(F3,{ref:c,role:"region","aria-label":i.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:_?void 0:"none"},children:[_&&Ee.jsx(e1,{ref:u,onFocusFromOutsideViewport:()=>{const x=w({tabbingDirection:"forwards"});O_(x)}}),Ee.jsx(TS.Slot,{scope:t,children:Ee.jsx(Ds.ol,{tabIndex:-1,...s,ref:g})}),_&&Ee.jsx(e1,{ref:d,onFocusFromOutsideViewport:()=>{const x=w({tabbingDirection:"backwards"});O_(x)}})]})});FA.displayName=OA;var kA="ToastFocusProxy",e1=X.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...i}=n,s=$0(kA,t);return Ee.jsx(J0,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const a=o.relatedTarget;!((u=s.viewport)!=null&&u.contains(a))&&r()}})});e1.displayName=kA;var ey="Toast",Z3="toast.swipeStart",Q3="toast.swipeMove",J3="toast.swipeCancel",$3="toast.swipeEnd",BA=X.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:i,onOpenChange:s,...o}=n,[a=!0,c]=G3({prop:r,defaultProp:i,onChange:s});return Ee.jsx(ES,{present:t||a,children:Ee.jsx(nI,{open:a,...o,ref:e,onClose:()=>c(!1),onPause:Ka(n.onPause),onResume:Ka(n.onResume),onSwipeStart:fi(n.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:fi(n.onSwipeMove,u=>{const{x:d,y:m}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:fi(n.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:fi(n.onSwipeEnd,u=>{const{x:d,y:m}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),c(!1)})})})});BA.displayName=ey;var[eI,tI]=DA(ey,{onClose(){}}),nI=X.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:m,onSwipeCancel:g,onSwipeEnd:y,..._}=n,w=$0(ey,t),[x,S]=X.useState(null),b=pa(e,H=>S(H)),T=X.useRef(null),C=X.useRef(null),P=i||w.duration,D=X.useRef(0),U=X.useRef(P),F=X.useRef(0),{onToastAdd:I,onToastRemove:k}=w,Q=Ka(()=>{var ie;(x==null?void 0:x.contains(document.activeElement))&&((ie=w.viewport)==null||ie.focus()),o()}),j=X.useCallback(H=>{!H||H===1/0||(window.clearTimeout(F.current),D.current=new Date().getTime(),F.current=window.setTimeout(Q,H))},[Q]);X.useEffect(()=>{const H=w.viewport;if(H){const ie=()=>{j(U.current),u==null||u()},re=()=>{const ue=new Date().getTime()-D.current;U.current=U.current-ue,window.clearTimeout(F.current),c==null||c()};return H.addEventListener(Jx,re),H.addEventListener($x,ie),()=>{H.removeEventListener(Jx,re),H.removeEventListener($x,ie)}}},[w.viewport,P,c,u,j]),X.useEffect(()=>{s&&!w.isClosePausedRef.current&&j(P)},[s,P,w.isClosePausedRef,j]),X.useEffect(()=>(I(),()=>k()),[I,k]);const $=X.useMemo(()=>x?XA(x):null,[x]);return w.viewport?Ee.jsxs(Ee.Fragment,{children:[$&&Ee.jsx(rI,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:$}),Ee.jsx(eI,{scope:t,onClose:Q,children:Q0.createPortal(Ee.jsx(TS.ItemSlot,{scope:t,children:Ee.jsx(O3,{asChild:!0,onEscapeKeyDown:fi(a,()=>{w.isFocusedToastEscapeKeyDownRef.current||Q(),w.isFocusedToastEscapeKeyDownRef.current=!1}),children:Ee.jsx(Ds.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":w.swipeDirection,..._,ref:b,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:fi(n.onKeyDown,H=>{H.key==="Escape"&&(a==null||a(H.nativeEvent),H.nativeEvent.defaultPrevented||(w.isFocusedToastEscapeKeyDownRef.current=!0,Q()))}),onPointerDown:fi(n.onPointerDown,H=>{H.button===0&&(T.current={x:H.clientX,y:H.clientY})}),onPointerMove:fi(n.onPointerMove,H=>{if(!T.current)return;const ie=H.clientX-T.current.x,re=H.clientY-T.current.y,ue=!!C.current,G=["left","right"].includes(w.swipeDirection),K=["left","up"].includes(w.swipeDirection)?Math.min:Math.max,W=G?K(0,ie):0,L=G?0:K(0,re),B=H.pointerType==="touch"?10:2,ne={x:W,y:L},ae={originalEvent:H,delta:ne};ue?(C.current=ne,pv(Q3,m,ae,{discrete:!1})):qE(ne,w.swipeDirection,B)?(C.current=ne,pv(Z3,d,ae,{discrete:!1}),H.target.setPointerCapture(H.pointerId)):(Math.abs(ie)>B||Math.abs(re)>B)&&(T.current=null)}),onPointerUp:fi(n.onPointerUp,H=>{const ie=C.current,re=H.target;if(re.hasPointerCapture(H.pointerId)&&re.releasePointerCapture(H.pointerId),C.current=null,T.current=null,ie){const ue=H.currentTarget,G={originalEvent:H,delta:ie};qE(ie,w.swipeDirection,w.swipeThreshold)?pv($3,y,G,{discrete:!0}):pv(J3,g,G,{discrete:!0}),ue.addEventListener("click",K=>K.preventDefault(),{once:!0})}})})})}),w.viewport)})]}):null}),rI=n=>{const{__scopeToast:e,children:t,...r}=n,i=$0(ey,e),[s,o]=X.useState(!1),[a,c]=X.useState(!1);return oI(()=>o(!0)),X.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:Ee.jsx(NA,{asChild:!0,children:Ee.jsx(J0,{...r,children:s&&Ee.jsxs(Ee.Fragment,{children:[i.label," ",t]})})})},iI="ToastTitle",zA=X.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return Ee.jsx(Ds.div,{...r,ref:e})});zA.displayName=iI;var sI="ToastDescription",HA=X.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return Ee.jsx(Ds.div,{...r,ref:e})});HA.displayName=sI;var GA="ToastAction",VA=X.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?Ee.jsx(jA,{altText:t,asChild:!0,children:Ee.jsx(bS,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${GA}\`. Expected non-empty \`string\`.`),null)});VA.displayName=GA;var WA="ToastClose",bS=X.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,i=tI(WA,t);return Ee.jsx(jA,{asChild:!0,children:Ee.jsx(Ds.button,{type:"button",...r,ref:e,onClick:fi(n.onClick,i.onClose)})})});bS.displayName=WA;var jA=X.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...i}=n;return Ee.jsx(Ds.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function XA(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),aI(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...XA(r))}}),e}function pv(n,e,t,{discrete:r}){const i=t.originalEvent.currentTarget,s=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?RA(i,s):i.dispatchEvent(s)}var qE=(n,e,t=0)=>{const r=Math.abs(n.x),i=Math.abs(n.y),s=r>i;return e==="left"||e==="right"?s&&r>t:!s&&i>t};function oI(n=()=>{}){const e=Ka(n);Pf(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function aI(n){return n.nodeType===n.ELEMENT_NODE}function lI(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function O_(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var cI=UA,YA=FA,qA=BA,KA=zA,ZA=HA,QA=VA,JA=bS;function $A(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=$A(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function e2(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=$A(n))&&(r&&(r+=" "),r+=e);return r}const KE=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,ZE=e2,uI=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return ZE(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(u=>{const d=t==null?void 0:t[u],m=s==null?void 0:s[u];if(d===null)return null;const g=KE(d)||KE(m);return i[u][g]}),a=t&&Object.entries(t).reduce((u,d)=>{let[m,g]=d;return g===void 0||(u[m]=g),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:m,className:g,...y}=d;return Object.entries(y).every(_=>{let[w,x]=_;return Array.isArray(x)?x.includes({...s,...a}[w]):{...s,...a}[w]===x})?[...u,m,g]:u},[]);return ZE(n,o,c,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fI=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),t2=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var dI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=X.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},c)=>X.createElement("svg",{ref:c,...dI,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:t2("lucide",i),...a},[...o.map(([u,d])=>X.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pI=(n,e)=>{const t=X.forwardRef(({className:r,...i},s)=>X.createElement(hI,{ref:s,iconNode:e,className:t2(`lucide-${fI(n)}`,r),...i}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=pI("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),AS="-",gI=n=>{const e=yI(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:o=>{const a=o.split(AS);return a[0]===""&&a.length!==1&&a.shift(),n2(a,e)||vI(o)},getConflictingClassGroupIds:(o,a)=>{const c=t[o]||[];return a&&r[o]?[...c,...r[o]]:c}}},n2=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?n2(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=n.join(AS);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},QE=/^\[(.+)\]$/,vI=n=>{if(QE.test(n)){const e=QE.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},yI=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return xI(Object.entries(n.classGroups),t).forEach(([s,o])=>{t1(o,r,s,e)}),r},t1=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const s=i===""?e:JE(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(_I(i)){t1(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([s,o])=>{t1(o,JE(e,s),t,r)})})},JE=(n,e)=>{let t=n;return e.split(AS).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},_I=n=>n.isThemeGetter,xI=(n,e)=>e?n.map(([t,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[t,i]}):n,SI=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(s,o)=>{t.set(s,o),e++,e>n&&(e=0,r=t,t=new Map)};return{get(s){let o=t.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){t.has(s)?t.set(s,o):i(s,o)}}},r2="!",wI=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,i=e[0],s=e.length,o=a=>{const c=[];let u=0,d=0,m;for(let x=0;x<a.length;x++){let S=a[x];if(u===0){if(S===i&&(r||a.slice(x,x+s)===e)){c.push(a.slice(d,x)),d=x+s;continue}if(S==="/"){m=x;continue}}S==="["?u++:S==="]"&&u--}const g=c.length===0?a:a.substring(d),y=g.startsWith(r2),_=y?g.substring(1):g,w=m&&m>d?m-d:void 0;return{modifiers:c,hasImportantModifier:y,baseClassName:_,maybePostfixModifierPosition:w}};return t?a=>t({className:a,parseClassName:o}):o},EI=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},MI=n=>({cache:SI(n.cacheSize),parseClassName:wI(n),...gI(n)}),TI=/\s+/,bI=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=n.trim().split(TI);let a="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:y}=t(u);let _=!!y,w=r(_?g.substring(0,y):g);if(!w){if(!_){a=u+(a.length>0?" "+a:a);continue}if(w=r(g),!w){a=u+(a.length>0?" "+a:a);continue}_=!1}const x=EI(d).join(":"),S=m?x+r2:x,b=S+w;if(s.includes(b))continue;s.push(b);const T=i(w,_);for(let C=0;C<T.length;++C){const P=T[C];s.push(S+P)}a=u+(a.length>0?" "+a:a)}return a};function AI(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=i2(e))&&(r&&(r+=" "),r+=t);return r}const i2=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=i2(n[r]))&&(t&&(t+=" "),t+=e);return t};function CI(n,...e){let t,r,i,s=o;function o(c){const u=e.reduce((d,m)=>m(d),n());return t=MI(u),r=t.cache.get,i=t.cache.set,s=a,a(c)}function a(c){const u=r(c);if(u)return u;const d=bI(c,t);return i(c,d),d}return function(){return s(AI.apply(null,arguments))}}const mr=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},s2=/^\[(?:([a-z-]+):)?(.+)\]$/i,RI=/^\d+\/\d+$/,PI=new Set(["px","full","screen"]),LI=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,II=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,NI=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,DI=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,UI=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ll=n=>fh(n)||PI.has(n)||RI.test(n),Tc=n=>zh(n,"length",VI),fh=n=>!!n&&!Number.isNaN(Number(n)),F_=n=>zh(n,"number",fh),Gp=n=>!!n&&Number.isInteger(Number(n)),OI=n=>n.endsWith("%")&&fh(n.slice(0,-1)),_n=n=>s2.test(n),bc=n=>LI.test(n),FI=new Set(["length","size","percentage"]),kI=n=>zh(n,FI,o2),BI=n=>zh(n,"position",o2),zI=new Set(["image","url"]),HI=n=>zh(n,zI,jI),GI=n=>zh(n,"",WI),Vp=()=>!0,zh=(n,e,t)=>{const r=s2.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},VI=n=>II.test(n)&&!NI.test(n),o2=()=>!1,WI=n=>DI.test(n),jI=n=>UI.test(n),XI=()=>{const n=mr("colors"),e=mr("spacing"),t=mr("blur"),r=mr("brightness"),i=mr("borderColor"),s=mr("borderRadius"),o=mr("borderSpacing"),a=mr("borderWidth"),c=mr("contrast"),u=mr("grayscale"),d=mr("hueRotate"),m=mr("invert"),g=mr("gap"),y=mr("gradientColorStops"),_=mr("gradientColorStopPositions"),w=mr("inset"),x=mr("margin"),S=mr("opacity"),b=mr("padding"),T=mr("saturate"),C=mr("scale"),P=mr("sepia"),D=mr("skew"),U=mr("space"),F=mr("translate"),I=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],Q=()=>["auto",_n,e],j=()=>[_n,e],$=()=>["",Ll,Tc],H=()=>["auto",fh,_n],ie=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],re=()=>["solid","dashed","dotted","double","none"],ue=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],G=()=>["start","end","center","between","around","evenly","stretch"],K=()=>["","0",_n],W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],L=()=>[fh,_n];return{cacheSize:500,separator:":",theme:{colors:[Vp],spacing:[Ll,Tc],blur:["none","",bc,_n],brightness:L(),borderColor:[n],borderRadius:["none","","full",bc,_n],borderSpacing:j(),borderWidth:$(),contrast:L(),grayscale:K(),hueRotate:L(),invert:K(),gap:j(),gradientColorStops:[n],gradientColorStopPositions:[OI,Tc],inset:Q(),margin:Q(),opacity:L(),padding:j(),saturate:L(),scale:L(),sepia:K(),skew:L(),space:j(),translate:j()},classGroups:{aspect:[{aspect:["auto","square","video",_n]}],container:["container"],columns:[{columns:[bc]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ie(),_n]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Gp,_n]}],basis:[{basis:Q()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",_n]}],grow:[{grow:K()}],shrink:[{shrink:K()}],order:[{order:["first","last","none",Gp,_n]}],"grid-cols":[{"grid-cols":[Vp]}],"col-start-end":[{col:["auto",{span:["full",Gp,_n]},_n]}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":[Vp]}],"row-start-end":[{row:["auto",{span:[Gp,_n]},_n]}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",_n]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",_n]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...G()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...G(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...G(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[U]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[U]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",_n,e]}],"min-w":[{"min-w":[_n,e,"min","max","fit"]}],"max-w":[{"max-w":[_n,e,"none","full","min","max","fit","prose",{screen:[bc]},bc]}],h:[{h:[_n,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[_n,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[_n,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[_n,e,"auto","min","max","fit"]}],"font-size":[{text:["base",bc,Tc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",F_]}],"font-family":[{font:[Vp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",_n]}],"line-clamp":[{"line-clamp":["none",fh,F_]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ll,_n]}],"list-image":[{"list-image":["none",_n]}],"list-style-type":[{list:["none","disc","decimal",_n]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[S]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[S]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...re(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ll,Tc]}],"underline-offset":[{"underline-offset":["auto",Ll,_n]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_n]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_n]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[S]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ie(),BI]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",kI]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},HI]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[S]}],"border-style":[{border:[...re(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[S]}],"divide-style":[{divide:re()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...re()]}],"outline-offset":[{"outline-offset":[Ll,_n]}],"outline-w":[{outline:[Ll,Tc]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[S]}],"ring-offset-w":[{"ring-offset":[Ll,Tc]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",bc,GI]}],"shadow-color":[{shadow:[Vp]}],opacity:[{opacity:[S]}],"mix-blend":[{"mix-blend":[...ue(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ue()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",bc,_n]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[m]}],saturate:[{saturate:[T]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[S]}],"backdrop-saturate":[{"backdrop-saturate":[T]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",_n]}],duration:[{duration:L()}],ease:[{ease:["linear","in","out","in-out",_n]}],delay:[{delay:L()}],animate:[{animate:["none","spin","ping","pulse","bounce",_n]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[Gp,_n]}],"translate-x":[{"translate-x":[F]}],"translate-y":[{"translate-y":[F]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",_n]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_n]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_n]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Ll,Tc,F_]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},YI=CI(XI);function zf(...n){return YI(e2(n))}const qI=cI,a2=X.forwardRef(({className:n,...e},t)=>Ee.jsx(YA,{ref:t,className:zf("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));a2.displayName=YA.displayName;const KI=uI("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),l2=X.forwardRef(({className:n,variant:e,...t},r)=>Ee.jsx(qA,{ref:r,className:zf(KI({variant:e}),n),...t}));l2.displayName=qA.displayName;const ZI=X.forwardRef(({className:n,...e},t)=>Ee.jsx(QA,{ref:t,className:zf("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));ZI.displayName=QA.displayName;const c2=X.forwardRef(({className:n,...e},t)=>Ee.jsx(JA,{ref:t,className:zf("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:Ee.jsx(mI,{className:"h-4 w-4"})}));c2.displayName=JA.displayName;const u2=X.forwardRef(({className:n,...e},t)=>Ee.jsx(KA,{ref:t,className:zf("text-sm font-semibold",n),...e}));u2.displayName=KA.displayName;const f2=X.forwardRef(({className:n,...e},t)=>Ee.jsx(ZA,{ref:t,className:zf("text-sm opacity-90",n),...e}));f2.displayName=ZA.displayName;function QI(){const{toasts:n}=_3();return Ee.jsxs(qI,{children:[n.map(function({id:e,title:t,description:r,action:i,...s}){return Ee.jsxs(l2,{...s,children:[Ee.jsxs("div",{className:"grid gap-1",children:[t&&Ee.jsx(u2,{children:t}),r&&Ee.jsx(f2,{children:r})]}),i,Ee.jsx(c2,{})]},e)}),Ee.jsx(a2,{})]})}var $E=["light","dark"],JI="(prefers-color-scheme: dark)",$I=X.createContext(void 0),eN={setTheme:n=>{},themes:[]},tN=()=>{var n;return(n=X.useContext($I))!=null?n:eN};X.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:i,defaultTheme:s,value:o,attrs:a,nonce:c})=>{let u=s==="system",d=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(_=>`'${_}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,m=i?$E.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",g=(_,w=!1,x=!0)=>{let S=o?o[_]:_,b=w?_+"|| ''":`'${S}'`,T="";return i&&x&&!w&&$E.includes(_)&&(T+=`d.style.colorScheme = '${_}';`),t==="class"?w||S?T+=`c.add(${b})`:T+="null":S&&(T+=`d[s](n,${b})`),T},y=n?`!function(){${d}${g(n)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${JI}',m=window.matchMedia(t);if(m.media!==t||m.matches){${g("dark")}}else{${g("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${g(o?"x[e]":"e",!0)}}${u?"":"else{"+g(s,!1,!1)+"}"}${m}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${g(o?"x[e]":"e",!0)}}else{${g(s,!1,!1)};}${m}}catch(t){}}();`;return X.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:y}})});var nN=n=>{switch(n){case"success":return sN;case"info":return aN;case"warning":return oN;case"error":return lN;default:return null}},rN=Array(12).fill(0),iN=({visible:n})=>Ct.createElement("div",{className:"sonner-loading-wrapper","data-visible":n},Ct.createElement("div",{className:"sonner-spinner"},rN.map((e,t)=>Ct.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),sN=Ct.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ct.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),oN=Ct.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ct.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),aN=Ct.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ct.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),lN=Ct.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ct.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),cN=()=>{let[n,e]=Ct.useState(document.hidden);return Ct.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},n1=1,uN=class{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{let e=this.subscribers.indexOf(n);this.subscribers.splice(e,1)}),this.publish=n=>{this.subscribers.forEach(e=>e(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var e;let{message:t,...r}=n,i=typeof(n==null?void 0:n.id)=="number"||((e=n.id)==null?void 0:e.length)>0?n.id:n1++,s=this.toasts.find(a=>a.id===i),o=n.dismissible===void 0?!0:n.dismissible;return s?this.toasts=this.toasts.map(a=>a.id===i?(this.publish({...a,...n,id:i,title:t}),{...a,...n,id:i,dismissible:o,title:t}):a):this.addToast({title:t,...r,dismissible:o,id:i}),i},this.dismiss=n=>(n||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:n,dismiss:!0})),n),this.message=(n,e)=>this.create({...e,message:n}),this.error=(n,e)=>this.create({...e,message:n,type:"error"}),this.success=(n,e)=>this.create({...e,type:"success",message:n}),this.info=(n,e)=>this.create({...e,type:"info",message:n}),this.warning=(n,e)=>this.create({...e,type:"warning",message:n}),this.loading=(n,e)=>this.create({...e,type:"loading",message:n}),this.promise=(n,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:n,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=n instanceof Promise?n:n(),i=t!==void 0;return r.then(async s=>{if(dN(s)&&!s.ok){i=!1;let o=typeof e.error=="function"?await e.error(`HTTP error! status: ${s.status}`):e.error,a=typeof e.description=="function"?await e.description(`HTTP error! status: ${s.status}`):e.description;this.create({id:t,type:"error",message:o,description:a})}else if(e.success!==void 0){i=!1;let o=typeof e.success=="function"?await e.success(s):e.success,a=typeof e.description=="function"?await e.description(s):e.description;this.create({id:t,type:"success",message:o,description:a})}}).catch(async s=>{if(e.error!==void 0){i=!1;let o=typeof e.error=="function"?await e.error(s):e.error,a=typeof e.description=="function"?await e.description(s):e.description;this.create({id:t,type:"error",message:o,description:a})}}).finally(()=>{var s;i&&(this.dismiss(t),t=void 0),(s=e.finally)==null||s.call(e)}),t},this.custom=(n,e)=>{let t=(e==null?void 0:e.id)||n1++;return this.create({jsx:n(t),id:t,...e}),t},this.subscribers=[],this.toasts=[]}},Js=new uN,fN=(n,e)=>{let t=(e==null?void 0:e.id)||n1++;return Js.addToast({title:n,...e,id:t}),t},dN=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",hN=fN,pN=()=>Js.toasts;Object.assign(hN,{success:Js.success,info:Js.info,warning:Js.warning,error:Js.error,custom:Js.custom,message:Js.message,promise:Js.promise,dismiss:Js.dismiss,loading:Js.loading},{getHistory:pN});function mN(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}mN(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function mv(n){return n.label!==void 0}var gN=3,vN="32px",yN=4e3,_N=356,xN=14,SN=20,wN=200;function EN(...n){return n.filter(Boolean).join(" ")}var MN=n=>{var e,t,r,i,s,o,a,c,u,d;let{invert:m,toast:g,unstyled:y,interacting:_,setHeights:w,visibleToasts:x,heights:S,index:b,toasts:T,expanded:C,removeToast:P,defaultRichColors:D,closeButton:U,style:F,cancelButtonStyle:I,actionButtonStyle:k,className:Q="",descriptionClassName:j="",duration:$,position:H,gap:ie,loadingIcon:re,expandByDefault:ue,classNames:G,icons:K,closeButtonAriaLabel:W="Close toast",pauseWhenPageIsHidden:L,cn:B}=n,[ne,ae]=Ct.useState(!1),[de,pe]=Ct.useState(!1),[xe,Me]=Ct.useState(!1),[Xe,ot]=Ct.useState(!1),[He,te]=Ct.useState(0),[Ye,Re]=Ct.useState(0),je=Ct.useRef(null),Ne=Ct.useRef(null),ct=b===0,Fe=b+1<=x,qe=g.type,nt=g.dismissible!==!1,Ue=g.className||"",_t=g.descriptionClassName||"",J=Ct.useMemo(()=>S.findIndex(Pe=>Pe.toastId===g.id)||0,[S,g.id]),q=Ct.useMemo(()=>{var Pe;return(Pe=g.closeButton)!=null?Pe:U},[g.closeButton,U]),ye=Ct.useMemo(()=>g.duration||$||yN,[g.duration,$]),tt=Ct.useRef(0),Le=Ct.useRef(0),We=Ct.useRef(0),st=Ct.useRef(null),[et,lt]=H.split("-"),Mt=Ct.useMemo(()=>S.reduce((Pe,ke,Te)=>Te>=J?Pe:Pe+ke.height,0),[S,J]),xt=cN(),Ge=g.invert||m,mt=qe==="loading";Le.current=Ct.useMemo(()=>J*ie+Mt,[J,Mt]),Ct.useEffect(()=>{ae(!0)},[]),Ct.useLayoutEffect(()=>{if(!ne)return;let Pe=Ne.current,ke=Pe.style.height;Pe.style.height="auto";let Te=Pe.getBoundingClientRect().height;Pe.style.height=ke,Re(Te),w(he=>he.find(ut=>ut.toastId===g.id)?he.map(ut=>ut.toastId===g.id?{...ut,height:Te}:ut):[{toastId:g.id,height:Te,position:g.position},...he])},[ne,g.title,g.description,w,g.id]);let ce=Ct.useCallback(()=>{pe(!0),te(Le.current),w(Pe=>Pe.filter(ke=>ke.toastId!==g.id)),setTimeout(()=>{P(g)},wN)},[g,P,w,Le]);Ct.useEffect(()=>{if(g.promise&&qe==="loading"||g.duration===1/0||g.type==="loading")return;let Pe,ke=ye;return C||_||L&&xt?(()=>{if(We.current<tt.current){let Te=new Date().getTime()-tt.current;ke=ke-Te}We.current=new Date().getTime()})():ke!==1/0&&(tt.current=new Date().getTime(),Pe=setTimeout(()=>{var Te;(Te=g.onAutoClose)==null||Te.call(g,g),ce()},ke)),()=>clearTimeout(Pe)},[C,_,ue,g,ye,ce,g.promise,qe,L,xt]),Ct.useEffect(()=>{let Pe=Ne.current;if(Pe){let ke=Pe.getBoundingClientRect().height;return Re(ke),w(Te=>[{toastId:g.id,height:ke,position:g.position},...Te]),()=>w(Te=>Te.filter(he=>he.toastId!==g.id))}},[w,g.id]),Ct.useEffect(()=>{g.delete&&ce()},[ce,g.delete]);function Ie(){return K!=null&&K.loading?Ct.createElement("div",{className:"sonner-loader","data-visible":qe==="loading"},K.loading):re?Ct.createElement("div",{className:"sonner-loader","data-visible":qe==="loading"},re):Ct.createElement(iN,{visible:qe==="loading"})}return Ct.createElement("li",{"aria-live":g.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Ne,className:B(Q,Ue,G==null?void 0:G.toast,(e=g==null?void 0:g.classNames)==null?void 0:e.toast,G==null?void 0:G.default,G==null?void 0:G[qe],(t=g==null?void 0:g.classNames)==null?void 0:t[qe]),"data-sonner-toast":"","data-rich-colors":(r=g.richColors)!=null?r:D,"data-styled":!(g.jsx||g.unstyled||y),"data-mounted":ne,"data-promise":!!g.promise,"data-removed":de,"data-visible":Fe,"data-y-position":et,"data-x-position":lt,"data-index":b,"data-front":ct,"data-swiping":xe,"data-dismissible":nt,"data-type":qe,"data-invert":Ge,"data-swipe-out":Xe,"data-expanded":!!(C||ue&&ne),style:{"--index":b,"--toasts-before":b,"--z-index":T.length-b,"--offset":`${de?He:Le.current}px`,"--initial-height":ue?"auto":`${Ye}px`,...F,...g.style},onPointerDown:Pe=>{mt||!nt||(je.current=new Date,te(Le.current),Pe.target.setPointerCapture(Pe.pointerId),Pe.target.tagName!=="BUTTON"&&(Me(!0),st.current={x:Pe.clientX,y:Pe.clientY}))},onPointerUp:()=>{var Pe,ke,Te,he;if(Xe||!nt)return;st.current=null;let ut=Number(((Pe=Ne.current)==null?void 0:Pe.style.getPropertyValue("--swipe-amount").replace("px",""))||0),rt=new Date().getTime()-((ke=je.current)==null?void 0:ke.getTime()),De=Math.abs(ut)/rt;if(Math.abs(ut)>=SN||De>.11){te(Le.current),(Te=g.onDismiss)==null||Te.call(g,g),ce(),ot(!0);return}(he=Ne.current)==null||he.style.setProperty("--swipe-amount","0px"),Me(!1)},onPointerMove:Pe=>{var ke;if(!st.current||!nt)return;let Te=Pe.clientY-st.current.y,he=Pe.clientX-st.current.x,ut=(et==="top"?Math.min:Math.max)(0,Te),rt=Pe.pointerType==="touch"?10:2;Math.abs(ut)>rt?(ke=Ne.current)==null||ke.style.setProperty("--swipe-amount",`${Te}px`):Math.abs(he)>rt&&(st.current=null)}},q&&!g.jsx?Ct.createElement("button",{"aria-label":W,"data-disabled":mt,"data-close-button":!0,onClick:mt||!nt?()=>{}:()=>{var Pe;ce(),(Pe=g.onDismiss)==null||Pe.call(g,g)},className:B(G==null?void 0:G.closeButton,(i=g==null?void 0:g.classNames)==null?void 0:i.closeButton)},Ct.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ct.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ct.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,g.jsx||Ct.isValidElement(g.title)?g.jsx||g.title:Ct.createElement(Ct.Fragment,null,qe||g.icon||g.promise?Ct.createElement("div",{"data-icon":"",className:B(G==null?void 0:G.icon,(s=g==null?void 0:g.classNames)==null?void 0:s.icon)},g.promise||g.type==="loading"&&!g.icon?g.icon||Ie():null,g.type!=="loading"?g.icon||(K==null?void 0:K[qe])||nN(qe):null):null,Ct.createElement("div",{"data-content":"",className:B(G==null?void 0:G.content,(o=g==null?void 0:g.classNames)==null?void 0:o.content)},Ct.createElement("div",{"data-title":"",className:B(G==null?void 0:G.title,(a=g==null?void 0:g.classNames)==null?void 0:a.title)},g.title),g.description?Ct.createElement("div",{"data-description":"",className:B(j,_t,G==null?void 0:G.description,(c=g==null?void 0:g.classNames)==null?void 0:c.description)},g.description):null),Ct.isValidElement(g.cancel)?g.cancel:g.cancel&&mv(g.cancel)?Ct.createElement("button",{"data-button":!0,"data-cancel":!0,style:g.cancelButtonStyle||I,onClick:Pe=>{var ke,Te;mv(g.cancel)&&nt&&((Te=(ke=g.cancel).onClick)==null||Te.call(ke,Pe),ce())},className:B(G==null?void 0:G.cancelButton,(u=g==null?void 0:g.classNames)==null?void 0:u.cancelButton)},g.cancel.label):null,Ct.isValidElement(g.action)?g.action:g.action&&mv(g.action)?Ct.createElement("button",{"data-button":!0,"data-action":!0,style:g.actionButtonStyle||k,onClick:Pe=>{var ke,Te;mv(g.action)&&(Pe.defaultPrevented||((Te=(ke=g.action).onClick)==null||Te.call(ke,Pe),ce()))},className:B(G==null?void 0:G.actionButton,(d=g==null?void 0:g.classNames)==null?void 0:d.actionButton)},g.action.label):null))};function eM(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}var TN=n=>{let{invert:e,position:t="bottom-right",hotkey:r=["altKey","KeyT"],expand:i,closeButton:s,className:o,offset:a,theme:c="light",richColors:u,duration:d,style:m,visibleToasts:g=gN,toastOptions:y,dir:_=eM(),gap:w=xN,loadingIcon:x,icons:S,containerAriaLabel:b="Notifications",pauseWhenPageIsHidden:T,cn:C=EN}=n,[P,D]=Ct.useState([]),U=Ct.useMemo(()=>Array.from(new Set([t].concat(P.filter(L=>L.position).map(L=>L.position)))),[P,t]),[F,I]=Ct.useState([]),[k,Q]=Ct.useState(!1),[j,$]=Ct.useState(!1),[H,ie]=Ct.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),re=Ct.useRef(null),ue=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),G=Ct.useRef(null),K=Ct.useRef(!1),W=Ct.useCallback(L=>{var B;(B=P.find(ne=>ne.id===L.id))!=null&&B.delete||Js.dismiss(L.id),D(ne=>ne.filter(({id:ae})=>ae!==L.id))},[P]);return Ct.useEffect(()=>Js.subscribe(L=>{if(L.dismiss){D(B=>B.map(ne=>ne.id===L.id?{...ne,delete:!0}:ne));return}setTimeout(()=>{TA.flushSync(()=>{D(B=>{let ne=B.findIndex(ae=>ae.id===L.id);return ne!==-1?[...B.slice(0,ne),{...B[ne],...L},...B.slice(ne+1)]:[L,...B]})})})}),[]),Ct.useEffect(()=>{if(c!=="system"){ie(c);return}c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ie("dark"):ie("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:L})=>{ie(L?"dark":"light")})},[c]),Ct.useEffect(()=>{P.length<=1&&Q(!1)},[P]),Ct.useEffect(()=>{let L=B=>{var ne,ae;r.every(de=>B[de]||B.code===de)&&(Q(!0),(ne=re.current)==null||ne.focus()),B.code==="Escape"&&(document.activeElement===re.current||(ae=re.current)!=null&&ae.contains(document.activeElement))&&Q(!1)};return document.addEventListener("keydown",L),()=>document.removeEventListener("keydown",L)},[r]),Ct.useEffect(()=>{if(re.current)return()=>{G.current&&(G.current.focus({preventScroll:!0}),G.current=null,K.current=!1)}},[re.current]),P.length?Ct.createElement("section",{"aria-label":`${b} ${ue}`,tabIndex:-1},U.map((L,B)=>{var ne;let[ae,de]=L.split("-");return Ct.createElement("ol",{key:L,dir:_==="auto"?eM():_,tabIndex:-1,ref:re,className:o,"data-sonner-toaster":!0,"data-theme":H,"data-y-position":ae,"data-x-position":de,style:{"--front-toast-height":`${((ne=F[0])==null?void 0:ne.height)||0}px`,"--offset":typeof a=="number"?`${a}px`:a||vN,"--width":`${_N}px`,"--gap":`${w}px`,...m},onBlur:pe=>{K.current&&!pe.currentTarget.contains(pe.relatedTarget)&&(K.current=!1,G.current&&(G.current.focus({preventScroll:!0}),G.current=null))},onFocus:pe=>{pe.target instanceof HTMLElement&&pe.target.dataset.dismissible==="false"||K.current||(K.current=!0,G.current=pe.relatedTarget)},onMouseEnter:()=>Q(!0),onMouseMove:()=>Q(!0),onMouseLeave:()=>{j||Q(!1)},onPointerDown:pe=>{pe.target instanceof HTMLElement&&pe.target.dataset.dismissible==="false"||$(!0)},onPointerUp:()=>$(!1)},P.filter(pe=>!pe.position&&B===0||pe.position===L).map((pe,xe)=>{var Me,Xe;return Ct.createElement(MN,{key:pe.id,icons:S,index:xe,toast:pe,defaultRichColors:u,duration:(Me=y==null?void 0:y.duration)!=null?Me:d,className:y==null?void 0:y.className,descriptionClassName:y==null?void 0:y.descriptionClassName,invert:e,visibleToasts:g,closeButton:(Xe=y==null?void 0:y.closeButton)!=null?Xe:s,interacting:j,position:L,style:y==null?void 0:y.style,unstyled:y==null?void 0:y.unstyled,classNames:y==null?void 0:y.classNames,cancelButtonStyle:y==null?void 0:y.cancelButtonStyle,actionButtonStyle:y==null?void 0:y.actionButtonStyle,removeToast:W,toasts:P.filter(ot=>ot.position==pe.position),heights:F.filter(ot=>ot.position==pe.position),setHeights:I,expandByDefault:i,gap:w,loadingIcon:x,expanded:k,pauseWhenPageIsHidden:T,cn:C})}))})):null};const bN=({...n})=>{const{theme:e="system"}=tN();return Ee.jsx(TN,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})},AN=["top","right","bottom","left"],eu=Math.min,$s=Math.max,L0=Math.round,gv=Math.floor,tu=n=>({x:n,y:n}),CN={left:"right",right:"left",bottom:"top",top:"bottom"},RN={start:"end",end:"start"};function r1(n,e,t){return $s(n,eu(e,t))}function jl(n,e){return typeof n=="function"?n(e):n}function Xl(n){return n.split("-")[0]}function Hh(n){return n.split("-")[1]}function CS(n){return n==="x"?"y":"x"}function RS(n){return n==="y"?"height":"width"}function nu(n){return["top","bottom"].includes(Xl(n))?"y":"x"}function PS(n){return CS(nu(n))}function PN(n,e,t){t===void 0&&(t=!1);const r=Hh(n),i=PS(n),s=RS(i);let o=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=I0(o)),[o,I0(o)]}function LN(n){const e=I0(n);return[i1(n),e,i1(e)]}function i1(n){return n.replace(/start|end/g,e=>RN[e])}function IN(n,e,t){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function NN(n,e,t,r){const i=Hh(n);let s=IN(Xl(n),t==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(i1)))),s}function I0(n){return n.replace(/left|right|bottom|top/g,e=>CN[e])}function DN(n){return{top:0,right:0,bottom:0,left:0,...n}}function d2(n){return typeof n!="number"?DN(n):{top:n,right:n,bottom:n,left:n}}function N0(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function tM(n,e,t){let{reference:r,floating:i}=n;const s=nu(e),o=PS(e),a=RS(o),c=Xl(e),u=s==="y",d=r.x+r.width/2-i.width/2,m=r.y+r.height/2-i.height/2,g=r[a]/2-i[a]/2;let y;switch(c){case"top":y={x:d,y:r.y-i.height};break;case"bottom":y={x:d,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:m};break;case"left":y={x:r.x-i.width,y:m};break;default:y={x:r.x,y:r.y}}switch(Hh(e)){case"start":y[o]-=g*(t&&u?-1:1);break;case"end":y[o]+=g*(t&&u?-1:1);break}return y}const UN=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:d,y:m}=tM(u,r,c),g=r,y={},_=0;for(let w=0;w<a.length;w++){const{name:x,fn:S}=a[w],{x:b,y:T,data:C,reset:P}=await S({x:d,y:m,initialPlacement:r,placement:g,strategy:i,middlewareData:y,rects:u,platform:o,elements:{reference:n,floating:e}});d=b??d,m=T??m,y={...y,[x]:{...y[x],...C}},P&&_<=50&&(_++,typeof P=="object"&&(P.placement&&(g=P.placement),P.rects&&(u=P.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):P.rects),{x:d,y:m}=tM(u,g,c)),w=-1)}return{x:d,y:m,placement:g,strategy:i,middlewareData:y}};async function Tm(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:c}=n,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:m="floating",altBoundary:g=!1,padding:y=0}=jl(e,n),_=d2(y),x=a[g?m==="floating"?"reference":"floating":m],S=N0(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(x)))==null||t?x:x.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:c})),b=m==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,T=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),C=await(s.isElement==null?void 0:s.isElement(T))?await(s.getScale==null?void 0:s.getScale(T))||{x:1,y:1}:{x:1,y:1},P=N0(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:T,strategy:c}):b);return{top:(S.top-P.top+_.top)/C.y,bottom:(P.bottom-S.bottom+_.bottom)/C.y,left:(S.left-P.left+_.left)/C.x,right:(P.right-S.right+_.right)/C.x}}const ON=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:c}=e,{element:u,padding:d=0}=jl(n,e)||{};if(u==null)return{};const m=d2(d),g={x:t,y:r},y=PS(i),_=RS(y),w=await o.getDimensions(u),x=y==="y",S=x?"top":"left",b=x?"bottom":"right",T=x?"clientHeight":"clientWidth",C=s.reference[_]+s.reference[y]-g[y]-s.floating[_],P=g[y]-s.reference[y],D=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let U=D?D[T]:0;(!U||!await(o.isElement==null?void 0:o.isElement(D)))&&(U=a.floating[T]||s.floating[_]);const F=C/2-P/2,I=U/2-w[_]/2-1,k=eu(m[S],I),Q=eu(m[b],I),j=k,$=U-w[_]-Q,H=U/2-w[_]/2+F,ie=r1(j,H,$),re=!c.arrow&&Hh(i)!=null&&H!==ie&&s.reference[_]/2-(H<j?k:Q)-w[_]/2<0,ue=re?H<j?H-j:H-$:0;return{[y]:g[y]+ue,data:{[y]:ie,centerOffset:H-ie-ue,...re&&{alignmentOffset:ue}},reset:re}}}),FN=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:m=!0,fallbackPlacements:g,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:w=!0,...x}=jl(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const S=Xl(i),b=nu(a),T=Xl(a)===a,C=await(c.isRTL==null?void 0:c.isRTL(u.floating)),P=g||(T||!w?[I0(a)]:LN(a)),D=_!=="none";!g&&D&&P.push(...NN(a,w,_,C));const U=[a,...P],F=await Tm(e,x),I=[];let k=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&I.push(F[S]),m){const H=PN(i,o,C);I.push(F[H[0]],F[H[1]])}if(k=[...k,{placement:i,overflows:I}],!I.every(H=>H<=0)){var Q,j;const H=(((Q=s.flip)==null?void 0:Q.index)||0)+1,ie=U[H];if(ie)return{data:{index:H,overflows:k},reset:{placement:ie}};let re=(j=k.filter(ue=>ue.overflows[0]<=0).sort((ue,G)=>ue.overflows[1]-G.overflows[1])[0])==null?void 0:j.placement;if(!re)switch(y){case"bestFit":{var $;const ue=($=k.filter(G=>{if(D){const K=nu(G.placement);return K===b||K==="y"}return!0}).map(G=>[G.placement,G.overflows.filter(K=>K>0).reduce((K,W)=>K+W,0)]).sort((G,K)=>G[1]-K[1])[0])==null?void 0:$[0];ue&&(re=ue);break}case"initialPlacement":re=a;break}if(i!==re)return{reset:{placement:re}}}return{}}}};function nM(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function rM(n){return AN.some(e=>n[e]>=0)}const kN=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=jl(n,e);switch(r){case"referenceHidden":{const s=await Tm(e,{...i,elementContext:"reference"}),o=nM(s,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:rM(o)}}}case"escaped":{const s=await Tm(e,{...i,altBoundary:!0}),o=nM(s,t.floating);return{data:{escapedOffsets:o,escaped:rM(o)}}}default:return{}}}}};async function BN(n,e){const{placement:t,platform:r,elements:i}=n,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Xl(t),a=Hh(t),c=nu(t)==="y",u=["left","top"].includes(o)?-1:1,d=s&&c?-1:1,m=jl(e,n);let{mainAxis:g,crossAxis:y,alignmentAxis:_}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return a&&typeof _=="number"&&(y=a==="end"?_*-1:_),c?{x:y*d,y:g*u}:{x:g*u,y:y*d}}const zN=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:s,placement:o,middlewareData:a}=e,c=await BN(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:o}}}}},HN=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:x=>{let{x:S,y:b}=x;return{x:S,y:b}}},...c}=jl(n,e),u={x:t,y:r},d=await Tm(e,c),m=nu(Xl(i)),g=CS(m);let y=u[g],_=u[m];if(s){const x=g==="y"?"top":"left",S=g==="y"?"bottom":"right",b=y+d[x],T=y-d[S];y=r1(b,y,T)}if(o){const x=m==="y"?"top":"left",S=m==="y"?"bottom":"right",b=_+d[x],T=_-d[S];_=r1(b,_,T)}const w=a.fn({...e,[g]:y,[m]:_});return{...w,data:{x:w.x-t,y:w.y-r,enabled:{[g]:s,[m]:o}}}}}},GN=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:c=!0,crossAxis:u=!0}=jl(n,e),d={x:t,y:r},m=nu(i),g=CS(m);let y=d[g],_=d[m];const w=jl(a,e),x=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(c){const T=g==="y"?"height":"width",C=s.reference[g]-s.floating[T]+x.mainAxis,P=s.reference[g]+s.reference[T]-x.mainAxis;y<C?y=C:y>P&&(y=P)}if(u){var S,b;const T=g==="y"?"width":"height",C=["top","left"].includes(Xl(i)),P=s.reference[m]-s.floating[T]+(C&&((S=o.offset)==null?void 0:S[m])||0)+(C?0:x.crossAxis),D=s.reference[m]+s.reference[T]+(C?0:((b=o.offset)==null?void 0:b[m])||0)-(C?x.crossAxis:0);_<P?_=P:_>D&&(_=D)}return{[g]:y,[m]:_}}}},VN=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:c=()=>{},...u}=jl(n,e),d=await Tm(e,u),m=Xl(i),g=Hh(i),y=nu(i)==="y",{width:_,height:w}=s.floating;let x,S;m==="top"||m==="bottom"?(x=m,S=g===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(S=m,x=g==="end"?"top":"bottom");const b=w-d.top-d.bottom,T=_-d.left-d.right,C=eu(w-d[x],b),P=eu(_-d[S],T),D=!e.middlewareData.shift;let U=C,F=P;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(F=T),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(U=b),D&&!g){const k=$s(d.left,0),Q=$s(d.right,0),j=$s(d.top,0),$=$s(d.bottom,0);y?F=_-2*(k!==0||Q!==0?k+Q:$s(d.left,d.right)):U=w-2*(j!==0||$!==0?j+$:$s(d.top,d.bottom))}await c({...e,availableWidth:F,availableHeight:U});const I=await o.getDimensions(a.floating);return _!==I.width||w!==I.height?{reset:{rects:!0}}:{}}}};function ty(){return typeof window<"u"}function Gh(n){return h2(n)?(n.nodeName||"").toLowerCase():"#document"}function no(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function tl(n){var e;return(e=(h2(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function h2(n){return ty()?n instanceof Node||n instanceof no(n).Node:!1}function ma(n){return ty()?n instanceof Element||n instanceof no(n).Element:!1}function Za(n){return ty()?n instanceof HTMLElement||n instanceof no(n).HTMLElement:!1}function iM(n){return!ty()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof no(n).ShadowRoot}function rg(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=ga(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(i)}function WN(n){return["table","td","th"].includes(Gh(n))}function ny(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function LS(n){const e=IS(),t=ma(n)?ga(n):n;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function jN(n){let e=ru(n);for(;Za(e)&&!Rh(e);){if(LS(e))return e;if(ny(e))return null;e=ru(e)}return null}function IS(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Rh(n){return["html","body","#document"].includes(Gh(n))}function ga(n){return no(n).getComputedStyle(n)}function ry(n){return ma(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function ru(n){if(Gh(n)==="html")return n;const e=n.assignedSlot||n.parentNode||iM(n)&&n.host||tl(n);return iM(e)?e.host:e}function p2(n){const e=ru(n);return Rh(e)?n.ownerDocument?n.ownerDocument.body:n.body:Za(e)&&rg(e)?e:p2(e)}function bm(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=p2(n),s=i===((r=n.ownerDocument)==null?void 0:r.body),o=no(i);if(s){const a=s1(o);return e.concat(o,o.visualViewport||[],rg(i)?i:[],a&&t?bm(a):[])}return e.concat(i,bm(i,[],t))}function s1(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function m2(n){const e=ga(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Za(n),s=i?n.offsetWidth:t,o=i?n.offsetHeight:r,a=L0(t)!==s||L0(r)!==o;return a&&(t=s,r=o),{width:t,height:r,$:a}}function NS(n){return ma(n)?n:n.contextElement}function dh(n){const e=NS(n);if(!Za(e))return tu(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:s}=m2(e);let o=(s?L0(t.width):t.width)/r,a=(s?L0(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const XN=tu(0);function g2(n){const e=no(n);return!IS()||!e.visualViewport?XN:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function YN(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==no(n)?!1:e}function Lf(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=NS(n);let o=tu(1);e&&(r?ma(r)&&(o=dh(r)):o=dh(n));const a=YN(s,t,r)?g2(s):tu(0);let c=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,d=i.width/o.x,m=i.height/o.y;if(s){const g=no(s),y=r&&ma(r)?no(r):r;let _=g,w=s1(_);for(;w&&r&&y!==_;){const x=dh(w),S=w.getBoundingClientRect(),b=ga(w),T=S.left+(w.clientLeft+parseFloat(b.paddingLeft))*x.x,C=S.top+(w.clientTop+parseFloat(b.paddingTop))*x.y;c*=x.x,u*=x.y,d*=x.x,m*=x.y,c+=T,u+=C,_=no(w),w=s1(_)}}return N0({width:d,height:m,x:c,y:u})}function qN(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const s=i==="fixed",o=tl(r),a=e?ny(e.floating):!1;if(r===o||a&&s)return t;let c={scrollLeft:0,scrollTop:0},u=tu(1);const d=tu(0),m=Za(r);if((m||!m&&!s)&&((Gh(r)!=="body"||rg(o))&&(c=ry(r)),Za(r))){const g=Lf(r);u=dh(r),d.x=g.x+r.clientLeft,d.y=g.y+r.clientTop}return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-c.scrollLeft*u.x+d.x,y:t.y*u.y-c.scrollTop*u.y+d.y}}function KN(n){return Array.from(n.getClientRects())}function o1(n,e){const t=ry(n).scrollLeft;return e?e.left+t:Lf(tl(n)).left+t}function ZN(n){const e=tl(n),t=ry(n),r=n.ownerDocument.body,i=$s(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=$s(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+o1(n);const a=-t.scrollTop;return ga(r).direction==="rtl"&&(o+=$s(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function QN(n,e){const t=no(n),r=tl(n),i=t.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,c=0;if(i){s=i.width,o=i.height;const u=IS();(!u||u&&e==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}return{width:s,height:o,x:a,y:c}}function JN(n,e){const t=Lf(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,s=Za(n)?dh(n):tu(1),o=n.clientWidth*s.x,a=n.clientHeight*s.y,c=i*s.x,u=r*s.y;return{width:o,height:a,x:c,y:u}}function sM(n,e,t){let r;if(e==="viewport")r=QN(n,t);else if(e==="document")r=ZN(tl(n));else if(ma(e))r=JN(e,t);else{const i=g2(n);r={...e,x:e.x-i.x,y:e.y-i.y}}return N0(r)}function v2(n,e){const t=ru(n);return t===e||!ma(t)||Rh(t)?!1:ga(t).position==="fixed"||v2(t,e)}function $N(n,e){const t=e.get(n);if(t)return t;let r=bm(n,[],!1).filter(a=>ma(a)&&Gh(a)!=="body"),i=null;const s=ga(n).position==="fixed";let o=s?ru(n):n;for(;ma(o)&&!Rh(o);){const a=ga(o),c=LS(o);!c&&a.position==="fixed"&&(i=null),(s?!c&&!i:!c&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||rg(o)&&!c&&v2(n,o))?r=r.filter(d=>d!==o):i=a,o=ru(o)}return e.set(n,r),r}function eD(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const o=[...t==="clippingAncestors"?ny(e)?[]:$N(e,this._c):[].concat(t),r],a=o[0],c=o.reduce((u,d)=>{const m=sM(e,d,i);return u.top=$s(m.top,u.top),u.right=eu(m.right,u.right),u.bottom=eu(m.bottom,u.bottom),u.left=$s(m.left,u.left),u},sM(e,a,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function tD(n){const{width:e,height:t}=m2(n);return{width:e,height:t}}function nD(n,e,t){const r=Za(e),i=tl(e),s=t==="fixed",o=Lf(n,!0,s,e);let a={scrollLeft:0,scrollTop:0};const c=tu(0);if(r||!r&&!s)if((Gh(e)!=="body"||rg(i))&&(a=ry(e)),r){const y=Lf(e,!0,s,e);c.x=y.x+e.clientLeft,c.y=y.y+e.clientTop}else i&&(c.x=o1(i));let u=0,d=0;if(i&&!r&&!s){const y=i.getBoundingClientRect();d=y.top+a.scrollTop,u=y.left+a.scrollLeft-o1(i,y)}const m=o.left+a.scrollLeft-c.x-u,g=o.top+a.scrollTop-c.y-d;return{x:m,y:g,width:o.width,height:o.height}}function k_(n){return ga(n).position==="static"}function oM(n,e){if(!Za(n)||ga(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return tl(n)===t&&(t=t.ownerDocument.body),t}function y2(n,e){const t=no(n);if(ny(n))return t;if(!Za(n)){let i=ru(n);for(;i&&!Rh(i);){if(ma(i)&&!k_(i))return i;i=ru(i)}return t}let r=oM(n,e);for(;r&&WN(r)&&k_(r);)r=oM(r,e);return r&&Rh(r)&&k_(r)&&!LS(r)?t:r||jN(n)||t}const rD=async function(n){const e=this.getOffsetParent||y2,t=this.getDimensions,r=await t(n.floating);return{reference:nD(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function iD(n){return ga(n).direction==="rtl"}const sD={convertOffsetParentRelativeRectToViewportRelativeRect:qN,getDocumentElement:tl,getClippingRect:eD,getOffsetParent:y2,getElementRects:rD,getClientRects:KN,getDimensions:tD,getScale:dh,isElement:ma,isRTL:iD};function oD(n,e){let t=null,r;const i=tl(n);function s(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),s();const{left:u,top:d,width:m,height:g}=n.getBoundingClientRect();if(a||e(),!m||!g)return;const y=gv(d),_=gv(i.clientWidth-(u+m)),w=gv(i.clientHeight-(d+g)),x=gv(u),b={rootMargin:-y+"px "+-_+"px "+-w+"px "+-x+"px",threshold:$s(0,eu(1,c))||1};let T=!0;function C(P){const D=P[0].intersectionRatio;if(D!==c){if(!T)return o();D?o(!1,D):r=setTimeout(()=>{o(!1,1e-7)},1e3)}T=!1}try{t=new IntersectionObserver(C,{...b,root:i.ownerDocument})}catch{t=new IntersectionObserver(C,b)}t.observe(n)}return o(!0),s}function aD(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=NS(n),d=i||s?[...u?bm(u):[],...bm(e)]:[];d.forEach(S=>{i&&S.addEventListener("scroll",t,{passive:!0}),s&&S.addEventListener("resize",t)});const m=u&&a?oD(u,t):null;let g=-1,y=null;o&&(y=new ResizeObserver(S=>{let[b]=S;b&&b.target===u&&y&&(y.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var T;(T=y)==null||T.observe(e)})),t()}),u&&!c&&y.observe(u),y.observe(e));let _,w=c?Lf(n):null;c&&x();function x(){const S=Lf(n);w&&(S.x!==w.x||S.y!==w.y||S.width!==w.width||S.height!==w.height)&&t(),w=S,_=requestAnimationFrame(x)}return t(),()=>{var S;d.forEach(b=>{i&&b.removeEventListener("scroll",t),s&&b.removeEventListener("resize",t)}),m==null||m(),(S=y)==null||S.disconnect(),y=null,c&&cancelAnimationFrame(_)}}const lD=zN,cD=HN,uD=FN,fD=VN,dD=kN,aM=ON,hD=GN,pD=(n,e,t)=>{const r=new Map,i={platform:sD,...t},s={...i.platform,_c:r};return UN(n,e,{...i,platform:s})};var y0=typeof document<"u"?X.useLayoutEffect:X.useEffect;function D0(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!D0(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const s=i[r];if(!(s==="_owner"&&n.$$typeof)&&!D0(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function _2(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function lM(n,e){const t=_2(n);return Math.round(e*t)/t}function B_(n){const e=X.useRef(n);return y0(()=>{e.current=n}),e}function mD(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:c,open:u}=n,[d,m]=X.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[g,y]=X.useState(r);D0(g,r)||y(r);const[_,w]=X.useState(null),[x,S]=X.useState(null),b=X.useCallback(G=>{G!==D.current&&(D.current=G,w(G))},[]),T=X.useCallback(G=>{G!==U.current&&(U.current=G,S(G))},[]),C=s||_,P=o||x,D=X.useRef(null),U=X.useRef(null),F=X.useRef(d),I=c!=null,k=B_(c),Q=B_(i),j=B_(u),$=X.useCallback(()=>{if(!D.current||!U.current)return;const G={placement:e,strategy:t,middleware:g};Q.current&&(G.platform=Q.current),pD(D.current,U.current,G).then(K=>{const W={...K,isPositioned:j.current!==!1};H.current&&!D0(F.current,W)&&(F.current=W,Q0.flushSync(()=>{m(W)}))})},[g,e,t,Q,j]);y0(()=>{u===!1&&F.current.isPositioned&&(F.current.isPositioned=!1,m(G=>({...G,isPositioned:!1})))},[u]);const H=X.useRef(!1);y0(()=>(H.current=!0,()=>{H.current=!1}),[]),y0(()=>{if(C&&(D.current=C),P&&(U.current=P),C&&P){if(k.current)return k.current(C,P,$);$()}},[C,P,$,k,I]);const ie=X.useMemo(()=>({reference:D,floating:U,setReference:b,setFloating:T}),[b,T]),re=X.useMemo(()=>({reference:C,floating:P}),[C,P]),ue=X.useMemo(()=>{const G={position:t,left:0,top:0};if(!re.floating)return G;const K=lM(re.floating,d.x),W=lM(re.floating,d.y);return a?{...G,transform:"translate("+K+"px, "+W+"px)",..._2(re.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:K,top:W}},[t,a,re.floating,d.x,d.y]);return X.useMemo(()=>({...d,update:$,refs:ie,elements:re,floatingStyles:ue}),[d,$,ie,re,ue])}const gD=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?aM({element:r.current,padding:i}).fn(t):{}:r?aM({element:r,padding:i}).fn(t):{}}}},vD=(n,e)=>({...lD(n),options:[n,e]}),yD=(n,e)=>({...cD(n),options:[n,e]}),_D=(n,e)=>({...hD(n),options:[n,e]}),xD=(n,e)=>({...uD(n),options:[n,e]}),SD=(n,e)=>({...fD(n),options:[n,e]}),wD=(n,e)=>({...dD(n),options:[n,e]}),ED=(n,e)=>({...gD(n),options:[n,e]});var MD="Arrow",x2=X.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...s}=n;return Ee.jsx(Ds.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:Ee.jsx("polygon",{points:"0,0 30,0 15,10"})})});x2.displayName=MD;var TD=x2;function bD(n,e=[]){let t=[];function r(s,o){const a=X.createContext(o),c=t.length;t=[...t,o];function u(m){const{scope:g,children:y,..._}=m,w=(g==null?void 0:g[n][c])||a,x=X.useMemo(()=>_,Object.values(_));return Ee.jsx(w.Provider,{value:x,children:y})}function d(m,g){const y=(g==null?void 0:g[n][c])||a,_=X.useContext(y);if(_)return _;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,d]}const i=()=>{const s=t.map(o=>X.createContext(o));return function(a){const c=(a==null?void 0:a[n])||s;return X.useMemo(()=>({[`__scope${n}`]:{...a,[n]:c}}),[a,c])}};return i.scopeName=n,[r,AD(i,...e)]}function AD(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:c,scopeName:u})=>{const m=c(s)[`__scope${u}`];return{...a,...m}},{});return X.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function CD(n){const[e,t]=X.useState(void 0);return Pf(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const c=s.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,a=u.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var S2="Popper",[w2,E2]=bD(S2),[r9,M2]=w2(S2),T2="PopperAnchor",b2=X.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=M2(T2,t),o=X.useRef(null),a=pa(e,o);return X.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:Ee.jsx(Ds.div,{...i,ref:a})});b2.displayName=T2;var DS="PopperContent",[RD,PD]=w2(DS),A2=X.forwardRef((n,e)=>{var xe,Me,Xe,ot,He,te;const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:m="partial",hideWhenDetached:g=!1,updatePositionStrategy:y="optimized",onPlaced:_,...w}=n,x=M2(DS,t),[S,b]=X.useState(null),T=pa(e,Ye=>b(Ye)),[C,P]=X.useState(null),D=CD(C),U=(D==null?void 0:D.width)??0,F=(D==null?void 0:D.height)??0,I=r+(s!=="center"?"-"+s:""),k=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},Q=Array.isArray(u)?u:[u],j=Q.length>0,$={padding:k,boundary:Q.filter(ID),altBoundary:j},{refs:H,floatingStyles:ie,placement:re,isPositioned:ue,middlewareData:G}=mD({strategy:"fixed",placement:I,whileElementsMounted:(...Ye)=>aD(...Ye,{animationFrame:y==="always"}),elements:{reference:x.anchor},middleware:[vD({mainAxis:i+F,alignmentAxis:o}),c&&yD({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?_D():void 0,...$}),c&&xD({...$}),SD({...$,apply:({elements:Ye,rects:Re,availableWidth:je,availableHeight:Ne})=>{const{width:ct,height:Fe}=Re.reference,qe=Ye.floating.style;qe.setProperty("--radix-popper-available-width",`${je}px`),qe.setProperty("--radix-popper-available-height",`${Ne}px`),qe.setProperty("--radix-popper-anchor-width",`${ct}px`),qe.setProperty("--radix-popper-anchor-height",`${Fe}px`)}}),C&&ED({element:C,padding:a}),ND({arrowWidth:U,arrowHeight:F}),g&&wD({strategy:"referenceHidden",...$})]}),[K,W]=P2(re),L=Ka(_);Pf(()=>{ue&&(L==null||L())},[ue,L]);const B=(xe=G.arrow)==null?void 0:xe.x,ne=(Me=G.arrow)==null?void 0:Me.y,ae=((Xe=G.arrow)==null?void 0:Xe.centerOffset)!==0,[de,pe]=X.useState();return Pf(()=>{S&&pe(window.getComputedStyle(S).zIndex)},[S]),Ee.jsx("div",{ref:H.setFloating,"data-radix-popper-content-wrapper":"",style:{...ie,transform:ue?ie.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:de,"--radix-popper-transform-origin":[(ot=G.transformOrigin)==null?void 0:ot.x,(He=G.transformOrigin)==null?void 0:He.y].join(" "),...((te=G.hide)==null?void 0:te.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:Ee.jsx(RD,{scope:t,placedSide:K,onArrowChange:P,arrowX:B,arrowY:ne,shouldHideArrow:ae,children:Ee.jsx(Ds.div,{"data-side":K,"data-align":W,...w,ref:T,style:{...w.style,animation:ue?void 0:"none"}})})})});A2.displayName=DS;var C2="PopperArrow",LD={top:"bottom",right:"left",bottom:"top",left:"right"},R2=X.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,s=PD(C2,r),o=LD[s.placedSide];return Ee.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:Ee.jsx(TD,{...i,ref:t,style:{...i.style,display:"block"}})})});R2.displayName=C2;function ID(n){return n!==null}var ND=n=>({name:"transformOrigin",options:n,fn(e){var x,S,b;const{placement:t,rects:r,middlewareData:i}=e,o=((x=i.arrow)==null?void 0:x.centerOffset)!==0,a=o?0:n.arrowWidth,c=o?0:n.arrowHeight,[u,d]=P2(t),m={start:"0%",center:"50%",end:"100%"}[d],g=(((S=i.arrow)==null?void 0:S.x)??0)+a/2,y=(((b=i.arrow)==null?void 0:b.y)??0)+c/2;let _="",w="";return u==="bottom"?(_=o?m:`${g}px`,w=`${-c}px`):u==="top"?(_=o?m:`${g}px`,w=`${r.floating.height+c}px`):u==="right"?(_=`${-c}px`,w=o?m:`${y}px`):u==="left"&&(_=`${r.floating.width+c}px`,w=o?m:`${y}px`),{data:{x:_,y:w}}}});function P2(n){const[e,t="center"]=n.split("-");return[e,t]}var DD=b2,UD=A2,OD=R2,[iy,i9]=CA("Tooltip",[E2]),US=E2(),L2="TooltipProvider",FD=700,cM="tooltip.open",[kD,I2]=iy(L2),N2=n=>{const{__scopeTooltip:e,delayDuration:t=FD,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=n,[o,a]=X.useState(!0),c=X.useRef(!1),u=X.useRef(0);return X.useEffect(()=>{const d=u.current;return()=>window.clearTimeout(d)},[]),Ee.jsx(kD,{scope:e,isOpenDelayed:o,delayDuration:t,onOpen:X.useCallback(()=>{window.clearTimeout(u.current),a(!1)},[]),onClose:X.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>a(!0),r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:X.useCallback(d=>{c.current=d},[]),disableHoverableContent:i,children:s})};N2.displayName=L2;var D2="Tooltip",[s9,sy]=iy(D2),a1="TooltipTrigger",BD=X.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=sy(a1,t),s=I2(a1,t),o=US(t),a=X.useRef(null),c=pa(e,a,i.onTriggerChange),u=X.useRef(!1),d=X.useRef(!1),m=X.useCallback(()=>u.current=!1,[]);return X.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),Ee.jsx(DD,{asChild:!0,...o,children:Ee.jsx(Ds.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:c,onPointerMove:fi(n.onPointerMove,g=>{g.pointerType!=="touch"&&!d.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),d.current=!0)}),onPointerLeave:fi(n.onPointerLeave,()=>{i.onTriggerLeave(),d.current=!1}),onPointerDown:fi(n.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:fi(n.onFocus,()=>{u.current||i.onOpen()}),onBlur:fi(n.onBlur,i.onClose),onClick:fi(n.onClick,i.onClose)})})});BD.displayName=a1;var zD="TooltipPortal",[o9,HD]=iy(zD,{forceMount:void 0}),Ph="TooltipContent",U2=X.forwardRef((n,e)=>{const t=HD(Ph,n.__scopeTooltip),{forceMount:r=t.forceMount,side:i="top",...s}=n,o=sy(Ph,n.__scopeTooltip);return Ee.jsx(ES,{present:r||o.open,children:o.disableHoverableContent?Ee.jsx(O2,{side:i,...s,ref:e}):Ee.jsx(GD,{side:i,...s,ref:e})})}),GD=X.forwardRef((n,e)=>{const t=sy(Ph,n.__scopeTooltip),r=I2(Ph,n.__scopeTooltip),i=X.useRef(null),s=pa(e,i),[o,a]=X.useState(null),{trigger:c,onClose:u}=t,d=i.current,{onPointerInTransitChange:m}=r,g=X.useCallback(()=>{a(null),m(!1)},[m]),y=X.useCallback((_,w)=>{const x=_.currentTarget,S={x:_.clientX,y:_.clientY},b=XD(S,x.getBoundingClientRect()),T=YD(S,b),C=qD(w.getBoundingClientRect()),P=ZD([...T,...C]);a(P),m(!0)},[m]);return X.useEffect(()=>()=>g(),[g]),X.useEffect(()=>{if(c&&d){const _=x=>y(x,d),w=x=>y(x,c);return c.addEventListener("pointerleave",_),d.addEventListener("pointerleave",w),()=>{c.removeEventListener("pointerleave",_),d.removeEventListener("pointerleave",w)}}},[c,d,y,g]),X.useEffect(()=>{if(o){const _=w=>{const x=w.target,S={x:w.clientX,y:w.clientY},b=(c==null?void 0:c.contains(x))||(d==null?void 0:d.contains(x)),T=!KD(S,o);b?g():T&&(g(),u())};return document.addEventListener("pointermove",_),()=>document.removeEventListener("pointermove",_)}},[c,d,o,u,g]),Ee.jsx(O2,{...n,ref:s})}),[VD,WD]=iy(D2,{isInside:!1}),O2=X.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=n,c=sy(Ph,t),u=US(t),{onClose:d}=c;return X.useEffect(()=>(document.addEventListener(cM,d),()=>document.removeEventListener(cM,d)),[d]),X.useEffect(()=>{if(c.trigger){const m=g=>{const y=g.target;y!=null&&y.contains(c.trigger)&&d()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,d]),Ee.jsx(wS,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:m=>m.preventDefault(),onDismiss:d,children:Ee.jsxs(UD,{"data-state":c.stateAttribute,...u,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[Ee.jsx(AA,{children:r}),Ee.jsx(VD,{scope:t,isInside:!0,children:Ee.jsx(j3,{id:c.contentId,role:"tooltip",children:i||r})})]})})});U2.displayName=Ph;var F2="TooltipArrow",jD=X.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=US(t);return WD(F2,t).isInside?null:Ee.jsx(OD,{...i,...r,ref:e})});jD.displayName=F2;function XD(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,r,i,s)){case s:return"left";case i:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function YD(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function qD(n){const{top:e,right:t,bottom:r,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:r},{x:i,y:r}]}function KD(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,c=e[s].y,u=e[o].x,d=e[o].y;c>r!=d>r&&t<(u-a)*(r-c)/(d-c)+a&&(i=!i)}return i}function ZD(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),QD(e)}function QD(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const i=n[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var JD=N2,k2=U2;const $D=JD,eU=X.forwardRef(({className:n,sideOffset:e=4,...t},r)=>Ee.jsx(k2,{ref:r,sideOffset:e,className:zf("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));eU.displayName=k2.displayName;var oy=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ay=typeof window>"u"||"Deno"in globalThis;function la(){}function tU(n,e){return typeof n=="function"?n(e):n}function nU(n){return typeof n=="number"&&n>=0&&n!==1/0}function rU(n,e){return Math.max(n+(e||0)-Date.now(),0)}function uM(n,e){return typeof n=="function"?n(e):n}function iU(n,e){return typeof n=="function"?n(e):n}function fM(n,e){const{type:t="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=n;if(o){if(r){if(e.queryHash!==OS(o,e.options))return!1}else if(!Cm(e.queryKey,o))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function dM(n,e){const{exact:t,status:r,predicate:i,mutationKey:s}=n;if(s){if(!e.options.mutationKey)return!1;if(t){if(Am(e.options.mutationKey)!==Am(s))return!1}else if(!Cm(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function OS(n,e){return((e==null?void 0:e.queryKeyHashFn)||Am)(n)}function Am(n){return JSON.stringify(n,(e,t)=>l1(t)?Object.keys(t).sort().reduce((r,i)=>(r[i]=t[i],r),{}):t)}function Cm(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!Cm(n[t],e[t])):!1}function B2(n,e){if(n===e)return n;const t=hM(n)&&hM(e);if(t||l1(n)&&l1(e)){const r=t?n:Object.keys(n),i=r.length,s=t?e:Object.keys(e),o=s.length,a=t?[]:{};let c=0;for(let u=0;u<o;u++){const d=t?u:s[u];(!t&&r.includes(d)||t)&&n[d]===void 0&&e[d]===void 0?(a[d]=void 0,c++):(a[d]=B2(n[d],e[d]),a[d]===n[d]&&n[d]!==void 0&&c++)}return i===o&&c===i?n:a}return e}function hM(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function l1(n){if(!pM(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!pM(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function pM(n){return Object.prototype.toString.call(n)==="[object Object]"}function sU(n){return new Promise(e=>{setTimeout(e,n)})}function oU(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?B2(n,e):e}function aU(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function lU(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var FS=Symbol();function z2(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===FS?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var yf,zc,xh,gA,cU=(gA=class extends oy{constructor(){super();Wn(this,yf);Wn(this,zc);Wn(this,xh);Mn(this,xh,e=>{if(!ay&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){ft(this,zc)||this.setEventListener(ft(this,xh))}onUnsubscribe(){var e;this.hasListeners()||((e=ft(this,zc))==null||e.call(this),Mn(this,zc,void 0))}setEventListener(e){var t;Mn(this,xh,e),(t=ft(this,zc))==null||t.call(this),Mn(this,zc,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){ft(this,yf)!==e&&(Mn(this,yf,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof ft(this,yf)=="boolean"?ft(this,yf):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},yf=new WeakMap,zc=new WeakMap,xh=new WeakMap,gA),H2=new cU,Sh,Hc,wh,vA,uU=(vA=class extends oy{constructor(){super();Wn(this,Sh,!0);Wn(this,Hc);Wn(this,wh);Mn(this,wh,e=>{if(!ay&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){ft(this,Hc)||this.setEventListener(ft(this,wh))}onUnsubscribe(){var e;this.hasListeners()||((e=ft(this,Hc))==null||e.call(this),Mn(this,Hc,void 0))}setEventListener(e){var t;Mn(this,wh,e),(t=ft(this,Hc))==null||t.call(this),Mn(this,Hc,e(this.setOnline.bind(this)))}setOnline(e){ft(this,Sh)!==e&&(Mn(this,Sh,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return ft(this,Sh)}},Sh=new WeakMap,Hc=new WeakMap,wh=new WeakMap,vA),U0=new uU;function fU(){let n,e;const t=new Promise((i,s)=>{n=i,e=s});t.status="pending",t.catch(()=>{});function r(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{r({status:"fulfilled",value:i}),n(i)},t.reject=i=>{r({status:"rejected",reason:i}),e(i)},t}function dU(n){return Math.min(1e3*2**n,3e4)}function G2(n){return(n??"online")==="online"?U0.isOnline():!0}var V2=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function z_(n){return n instanceof V2}function W2(n){let e=!1,t=0,r=!1,i;const s=fU(),o=w=>{var x;r||(g(new V2(w)),(x=n.abort)==null||x.call(n))},a=()=>{e=!0},c=()=>{e=!1},u=()=>H2.isFocused()&&(n.networkMode==="always"||U0.isOnline())&&n.canRun(),d=()=>G2(n.networkMode)&&n.canRun(),m=w=>{var x;r||(r=!0,(x=n.onSuccess)==null||x.call(n,w),i==null||i(),s.resolve(w))},g=w=>{var x;r||(r=!0,(x=n.onError)==null||x.call(n,w),i==null||i(),s.reject(w))},y=()=>new Promise(w=>{var x;i=S=>{(r||u())&&w(S)},(x=n.onPause)==null||x.call(n)}).then(()=>{var w;i=void 0,r||(w=n.onContinue)==null||w.call(n)}),_=()=>{if(r)return;let w;const x=t===0?n.initialPromise:void 0;try{w=x??n.fn()}catch(S){w=Promise.reject(S)}Promise.resolve(w).then(m).catch(S=>{var D;if(r)return;const b=n.retry??(ay?0:3),T=n.retryDelay??dU,C=typeof T=="function"?T(t,S):T,P=b===!0||typeof b=="number"&&t<b||typeof b=="function"&&b(t,S);if(e||!P){g(S);return}t++,(D=n.onFail)==null||D.call(n,t,S),sU(C).then(()=>u()?void 0:y()).then(()=>{e?g(S):_()})})};return{promise:s,cancel:o,continue:()=>(i==null||i(),s),cancelRetry:a,continueRetry:c,canStart:d,start:()=>(d()?_():y().then(_),s)}}function hU(){let n=[],e=0,t=a=>{a()},r=a=>{a()},i=a=>setTimeout(a,0);const s=a=>{e?n.push(a):i(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&i(()=>{r(()=>{a.forEach(c=>{t(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{s(()=>{a(...c)})},schedule:s,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var ps=hU(),_f,yA,j2=(yA=class{constructor(){Wn(this,_f)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),nU(this.gcTime)&&Mn(this,_f,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(ay?1/0:5*60*1e3))}clearGcTimeout(){ft(this,_f)&&(clearTimeout(ft(this,_f)),Mn(this,_f,void 0))}},_f=new WeakMap,yA),Eh,Mh,Eo,qi,tg,xf,ua,kl,_A,pU=(_A=class extends j2{constructor(e){super();Wn(this,ua);Wn(this,Eh);Wn(this,Mh);Wn(this,Eo);Wn(this,qi);Wn(this,tg);Wn(this,xf);Mn(this,xf,!1),Mn(this,tg,e.defaultOptions),this.setOptions(e.options),this.observers=[],Mn(this,Eo,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Mn(this,Eh,gU(this.options)),this.state=e.state??ft(this,Eh),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=ft(this,qi))==null?void 0:e.promise}setOptions(e){this.options={...ft(this,tg),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ft(this,Eo).remove(this)}setData(e,t){const r=oU(this.state.data,e,this.options);return ji(this,ua,kl).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){ji(this,ua,kl).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,i;const t=(r=ft(this,qi))==null?void 0:r.promise;return(i=ft(this,qi))==null||i.cancel(e),t?t.then(la).catch(la):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ft(this,Eh))}isActive(){return this.observers.some(e=>iU(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===FS||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!rU(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=ft(this,qi))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=ft(this,qi))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),ft(this,Eo).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(ft(this,qi)&&(ft(this,xf)?ft(this,qi).cancel({revert:!0}):ft(this,qi).cancelRetry()),this.scheduleGc()),ft(this,Eo).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ji(this,ua,kl).call(this,{type:"invalidate"})}fetch(e,t){var c,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(ft(this,qi))return ft(this,qi).continueRetry(),ft(this,qi).promise}if(e&&this.setOptions(e),!this.options.queryFn){const m=this.observers.find(g=>g.options.queryFn);m&&this.setOptions(m.options)}const r=new AbortController,i=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(Mn(this,xf,!0),r.signal)})},s=()=>{const m=z2(this.options,t),g={queryKey:this.queryKey,meta:this.meta};return i(g),Mn(this,xf,!1),this.options.persister?this.options.persister(m,g,this):m(g)},o={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:s};i(o),(c=this.options.behavior)==null||c.onFetch(o,this),Mn(this,Mh,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=o.fetchOptions)==null?void 0:u.meta))&&ji(this,ua,kl).call(this,{type:"fetch",meta:(d=o.fetchOptions)==null?void 0:d.meta});const a=m=>{var g,y,_,w;z_(m)&&m.silent||ji(this,ua,kl).call(this,{type:"error",error:m}),z_(m)||((y=(g=ft(this,Eo).config).onError)==null||y.call(g,m,this),(w=(_=ft(this,Eo).config).onSettled)==null||w.call(_,this.state.data,m,this)),this.scheduleGc()};return Mn(this,qi,W2({initialPromise:t==null?void 0:t.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:m=>{var g,y,_,w;if(m===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(x){a(x);return}(y=(g=ft(this,Eo).config).onSuccess)==null||y.call(g,m,this),(w=(_=ft(this,Eo).config).onSettled)==null||w.call(_,m,this.state.error,this),this.scheduleGc()},onError:a,onFail:(m,g)=>{ji(this,ua,kl).call(this,{type:"failed",failureCount:m,error:g})},onPause:()=>{ji(this,ua,kl).call(this,{type:"pause"})},onContinue:()=>{ji(this,ua,kl).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),ft(this,qi).start()}},Eh=new WeakMap,Mh=new WeakMap,Eo=new WeakMap,qi=new WeakMap,tg=new WeakMap,xf=new WeakMap,ua=new WeakSet,kl=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...mU(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return z_(i)&&i.revert&&ft(this,Mh)?{...ft(this,Mh),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),ps.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),ft(this,Eo).notify({query:this,type:"updated",action:e})})},_A);function mU(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:G2(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function gU(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Ba,xA,vU=(xA=class extends oy{constructor(e={}){super();Wn(this,Ba);this.config=e,Mn(this,Ba,new Map)}build(e,t,r){const i=t.queryKey,s=t.queryHash??OS(i,t);let o=this.get(s);return o||(o=new pU({cache:this,queryKey:i,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){ft(this,Ba).has(e.queryHash)||(ft(this,Ba).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=ft(this,Ba).get(e.queryHash);t&&(e.destroy(),t===e&&ft(this,Ba).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ps.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ft(this,Ba).get(e)}getAll(){return[...ft(this,Ba).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>fM(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>fM(e,r)):t}notify(e){ps.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){ps.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ps.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ba=new WeakMap,xA),za,hs,Sf,Ha,Fc,SA,yU=(SA=class extends j2{constructor(e){super();Wn(this,Ha);Wn(this,za);Wn(this,hs);Wn(this,Sf);this.mutationId=e.mutationId,Mn(this,hs,e.mutationCache),Mn(this,za,[]),this.state=e.state||_U(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){ft(this,za).includes(e)||(ft(this,za).push(e),this.clearGcTimeout(),ft(this,hs).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Mn(this,za,ft(this,za).filter(t=>t!==e)),this.scheduleGc(),ft(this,hs).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){ft(this,za).length||(this.state.status==="pending"?this.scheduleGc():ft(this,hs).remove(this))}continue(){var e;return((e=ft(this,Sf))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,s,o,a,c,u,d,m,g,y,_,w,x,S,b,T,C,P,D,U;Mn(this,Sf,W2({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(F,I)=>{ji(this,Ha,Fc).call(this,{type:"failed",failureCount:F,error:I})},onPause:()=>{ji(this,Ha,Fc).call(this,{type:"pause"})},onContinue:()=>{ji(this,Ha,Fc).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ft(this,hs).canRun(this)}));const t=this.state.status==="pending",r=!ft(this,Sf).canStart();try{if(!t){ji(this,Ha,Fc).call(this,{type:"pending",variables:e,isPaused:r}),await((s=(i=ft(this,hs).config).onMutate)==null?void 0:s.call(i,e,this));const I=await((a=(o=this.options).onMutate)==null?void 0:a.call(o,e));I!==this.state.context&&ji(this,Ha,Fc).call(this,{type:"pending",context:I,variables:e,isPaused:r})}const F=await ft(this,Sf).start();return await((u=(c=ft(this,hs).config).onSuccess)==null?void 0:u.call(c,F,e,this.state.context,this)),await((m=(d=this.options).onSuccess)==null?void 0:m.call(d,F,e,this.state.context)),await((y=(g=ft(this,hs).config).onSettled)==null?void 0:y.call(g,F,null,this.state.variables,this.state.context,this)),await((w=(_=this.options).onSettled)==null?void 0:w.call(_,F,null,e,this.state.context)),ji(this,Ha,Fc).call(this,{type:"success",data:F}),F}catch(F){try{throw await((S=(x=ft(this,hs).config).onError)==null?void 0:S.call(x,F,e,this.state.context,this)),await((T=(b=this.options).onError)==null?void 0:T.call(b,F,e,this.state.context)),await((P=(C=ft(this,hs).config).onSettled)==null?void 0:P.call(C,void 0,F,this.state.variables,this.state.context,this)),await((U=(D=this.options).onSettled)==null?void 0:U.call(D,void 0,F,e,this.state.context)),F}finally{ji(this,Ha,Fc).call(this,{type:"error",error:F})}}finally{ft(this,hs).runNext(this)}}},za=new WeakMap,hs=new WeakMap,Sf=new WeakMap,Ha=new WeakSet,Fc=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),ps.batch(()=>{ft(this,za).forEach(r=>{r.onMutationUpdate(e)}),ft(this,hs).notify({mutation:this,type:"updated",action:e})})},SA);function _U(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Qs,ng,wA,xU=(wA=class extends oy{constructor(e={}){super();Wn(this,Qs);Wn(this,ng);this.config=e,Mn(this,Qs,new Map),Mn(this,ng,Date.now())}build(e,t,r){const i=new yU({mutationCache:this,mutationId:++fv(this,ng)._,options:e.defaultMutationOptions(t),state:r});return this.add(i),i}add(e){const t=vv(e),r=ft(this,Qs).get(t)??[];r.push(e),ft(this,Qs).set(t,r),this.notify({type:"added",mutation:e})}remove(e){var r;const t=vv(e);if(ft(this,Qs).has(t)){const i=(r=ft(this,Qs).get(t))==null?void 0:r.filter(s=>s!==e);i&&(i.length===0?ft(this,Qs).delete(t):ft(this,Qs).set(t,i))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const t=(r=ft(this,Qs).get(vv(e)))==null?void 0:r.find(i=>i.state.status==="pending");return!t||t===e}runNext(e){var r;const t=(r=ft(this,Qs).get(vv(e)))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(t==null?void 0:t.continue())??Promise.resolve()}clear(){ps.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...ft(this,Qs).values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(r=>dM(t,r))}findAll(e={}){return this.getAll().filter(t=>dM(e,t))}notify(e){ps.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return ps.batch(()=>Promise.all(e.map(t=>t.continue().catch(la))))}},Qs=new WeakMap,ng=new WeakMap,wA);function vv(n){var e;return((e=n.options.scope)==null?void 0:e.id)??String(n.mutationId)}function mM(n){return{onFetch:(e,t)=>{var d,m,g,y,_;const r=e.options,i=(g=(m=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:m.fetchMore)==null?void 0:g.direction,s=((y=e.state.data)==null?void 0:y.pages)||[],o=((_=e.state.data)==null?void 0:_.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const u=async()=>{let w=!1;const x=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(e.signal.aborted?w=!0:e.signal.addEventListener("abort",()=>{w=!0}),e.signal)})},S=z2(e.options,e.fetchOptions),b=async(T,C,P)=>{if(w)return Promise.reject();if(C==null&&T.pages.length)return Promise.resolve(T);const D={queryKey:e.queryKey,pageParam:C,direction:P?"backward":"forward",meta:e.options.meta};x(D);const U=await S(D),{maxPages:F}=e.options,I=P?lU:aU;return{pages:I(T.pages,U,F),pageParams:I(T.pageParams,C,F)}};if(i&&s.length){const T=i==="backward",C=T?SU:gM,P={pages:s,pageParams:o},D=C(r,P);a=await b(P,D,T)}else{const T=n??s.length;do{const C=c===0?o[0]??r.initialPageParam:gM(r,a);if(c>0&&C==null)break;a=await b(a,C),c++}while(c<T)}return a};e.options.persister?e.fetchFn=()=>{var w,x;return(x=(w=e.options).persister)==null?void 0:x.call(w,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=u}}}function gM(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function SU(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var Ir,Gc,Vc,Th,bh,Wc,Ah,Ch,EA,wU=(EA=class{constructor(n={}){Wn(this,Ir);Wn(this,Gc);Wn(this,Vc);Wn(this,Th);Wn(this,bh);Wn(this,Wc);Wn(this,Ah);Wn(this,Ch);Mn(this,Ir,n.queryCache||new vU),Mn(this,Gc,n.mutationCache||new xU),Mn(this,Vc,n.defaultOptions||{}),Mn(this,Th,new Map),Mn(this,bh,new Map),Mn(this,Wc,0)}mount(){fv(this,Wc)._++,ft(this,Wc)===1&&(Mn(this,Ah,H2.subscribe(async n=>{n&&(await this.resumePausedMutations(),ft(this,Ir).onFocus())})),Mn(this,Ch,U0.subscribe(async n=>{n&&(await this.resumePausedMutations(),ft(this,Ir).onOnline())})))}unmount(){var n,e;fv(this,Wc)._--,ft(this,Wc)===0&&((n=ft(this,Ah))==null||n.call(this),Mn(this,Ah,void 0),(e=ft(this,Ch))==null||e.call(this),Mn(this,Ch,void 0))}isFetching(n){return ft(this,Ir).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return ft(this,Gc).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=ft(this,Ir).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.getQueryData(n.queryKey);if(e===void 0)return this.fetchQuery(n);{const t=this.defaultQueryOptions(n),r=ft(this,Ir).build(this,t);return n.revalidateIfStale&&r.isStaleByTime(uM(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(e)}}getQueriesData(n){return ft(this,Ir).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),i=ft(this,Ir).get(r.queryHash),s=i==null?void 0:i.state.data,o=tU(e,s);if(o!==void 0)return ft(this,Ir).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return ps.batch(()=>ft(this,Ir).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=ft(this,Ir).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=ft(this,Ir);ps.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=ft(this,Ir),r={type:"active",...n};return ps.batch(()=>(t.findAll(n).forEach(i=>{i.reset()}),this.refetchQueries(r,e)))}cancelQueries(n={},e={}){const t={revert:!0,...e},r=ps.batch(()=>ft(this,Ir).findAll(n).map(i=>i.cancel(t)));return Promise.all(r).then(la).catch(la)}invalidateQueries(n={},e={}){return ps.batch(()=>{if(ft(this,Ir).findAll(n).forEach(r=>{r.invalidate()}),n.refetchType==="none")return Promise.resolve();const t={...n,type:n.refetchType??n.type??"active"};return this.refetchQueries(t,e)})}refetchQueries(n={},e){const t={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=ps.batch(()=>ft(this,Ir).findAll(n).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,t);return t.throwOnError||(s=s.catch(la)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(la)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=ft(this,Ir).build(this,e);return t.isStaleByTime(uM(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(la).catch(la)}fetchInfiniteQuery(n){return n.behavior=mM(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(la).catch(la)}ensureInfiniteQueryData(n){return n.behavior=mM(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return U0.isOnline()?ft(this,Gc).resumePausedMutations():Promise.resolve()}getQueryCache(){return ft(this,Ir)}getMutationCache(){return ft(this,Gc)}getDefaultOptions(){return ft(this,Vc)}setDefaultOptions(n){Mn(this,Vc,n)}setQueryDefaults(n,e){ft(this,Th).set(Am(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...ft(this,Th).values()];let t={};return e.forEach(r=>{Cm(n,r.queryKey)&&(t={...t,...r.defaultOptions})}),t}setMutationDefaults(n,e){ft(this,bh).set(Am(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...ft(this,bh).values()];let t={};return e.forEach(r=>{Cm(n,r.mutationKey)&&(t={...t,...r.defaultOptions})}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...ft(this,Vc).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=OS(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===FS&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...ft(this,Vc).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){ft(this,Ir).clear(),ft(this,Gc).clear()}},Ir=new WeakMap,Gc=new WeakMap,Vc=new WeakMap,Th=new WeakMap,bh=new WeakMap,Wc=new WeakMap,Ah=new WeakMap,Ch=new WeakMap,EA),EU=X.createContext(void 0),MU=({client:n,children:e})=>(X.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),Ee.jsx(EU.Provider,{value:n,children:e}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function O0(){return O0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},O0.apply(this,arguments)}var jc;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(jc||(jc={}));const vM="popstate";function TU(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return c1("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Y2(i)}return AU(e,t,null,n)}function Ns(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function X2(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bU(){return Math.random().toString(36).substr(2,8)}function yM(n,e){return{usr:n.state,key:n.key,idx:e}}function c1(n,e,t,r){return t===void 0&&(t=null),O0({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?ly(e):e,{state:t,key:e&&e.key||r||bU()})}function Y2(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ly(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function AU(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=jc.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(O0({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function m(){a=jc.Pop;let x=d(),S=x==null?null:x-u;u=x,c&&c({action:a,location:w.location,delta:S})}function g(x,S){a=jc.Push;let b=c1(w.location,x,S);u=d()+1;let T=yM(b,u),C=w.createHref(b);try{o.pushState(T,"",C)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;i.location.assign(C)}s&&c&&c({action:a,location:w.location,delta:1})}function y(x,S){a=jc.Replace;let b=c1(w.location,x,S);u=d();let T=yM(b,u),C=w.createHref(b);o.replaceState(T,"",C),s&&c&&c({action:a,location:w.location,delta:0})}function _(x){let S=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof x=="string"?x:Y2(x);return b=b.replace(/ $/,"%20"),Ns(S,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,S)}let w={get action(){return a},get location(){return n(i,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(vM,m),c=x,()=>{i.removeEventListener(vM,m),c=null}},createHref(x){return e(i,x)},createURL:_,encodeLocation(x){let S=_(x);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:g,replace:y,go(x){return o.go(x)}};return w}var _M;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(_M||(_M={}));function CU(n,e,t){return t===void 0&&(t="/"),RU(n,e,t)}function RU(n,e,t,r){let i=typeof e=="string"?ly(e):e,s=Z2(i.pathname||"/",t);if(s==null)return null;let o=q2(n);PU(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let u=GU(s);a=BU(o[c],u)}return a}function q2(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,o,a)=>{let c={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(Ns(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=hh([r,c.relativePath]),d=t.concat(c);s.children&&s.children.length>0&&(Ns(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),q2(s.children,e,d,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:FU(u,s.index),routesMeta:d})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let c of K2(s.path))i(s,o,c)}),e}function K2(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=K2(r.join("/")),a=[];return a.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&a.push(...o),a.map(c=>n.startsWith("/")&&c===""?"/":c)}function PU(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:kU(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const LU=/^:[\w-]+$/,IU=3,NU=2,DU=1,UU=10,OU=-2,xM=n=>n==="*";function FU(n,e){let t=n.split("/"),r=t.length;return t.some(xM)&&(r+=OU),e&&(r+=NU),t.filter(i=>!xM(i)).reduce((i,s)=>i+(LU.test(s)?IU:s===""?DU:UU),r)}function kU(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function BU(n,e,t){let{routesMeta:r}=n,i={},s="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],u=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",m=zU({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),g=c.route;if(!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:hh([s,m.pathname]),pathnameBase:VU(hh([s,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(s=hh([s,m.pathnameBase]))}return o}function zU(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=HU(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,d,m)=>{let{paramName:g,isOptional:y}=d;if(g==="*"){let w=a[m]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const _=a[m];return y&&!_?u[g]=void 0:u[g]=(_||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:n}}function HU(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),X2(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function GU(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return X2(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Z2(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const hh=n=>n.join("/").replace(/\/\/+/g,"/"),VU=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/");function WU(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Q2=["post","put","patch","delete"];new Set(Q2);const jU=["get",...Q2];new Set(jU);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function F0(){return F0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},F0.apply(this,arguments)}const XU=X.createContext(null),YU=X.createContext(null),J2=X.createContext(null),cy=X.createContext(null),uy=X.createContext({outlet:null,matches:[],isDataRoute:!1}),$2=X.createContext(null);function kS(){return X.useContext(cy)!=null}function eC(){return kS()||Ns(!1),X.useContext(cy).location}function qU(n,e){return KU(n,e)}function KU(n,e,t,r){kS()||Ns(!1);let{navigator:i}=X.useContext(J2),{matches:s}=X.useContext(uy),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=eC(),d;if(e){var m;let x=typeof e=="string"?ly(e):e;c==="/"||(m=x.pathname)!=null&&m.startsWith(c)||Ns(!1),d=x}else d=u;let g=d.pathname||"/",y=g;if(c!=="/"){let x=c.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(x.length).join("/")}let _=CU(n,{pathname:y}),w=eO(_&&_.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:hh([c,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:hh([c,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,t,r);return e&&w?X.createElement(cy.Provider,{value:{location:F0({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:jc.Pop}},w):w}function ZU(){let n=iO(),e=WU(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return X.createElement(X.Fragment,null,X.createElement("h2",null,"Unexpected Application Error!"),X.createElement("h3",{style:{fontStyle:"italic"}},e),t?X.createElement("pre",{style:i},t):null,null)}const QU=X.createElement(ZU,null);class JU extends X.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?X.createElement(uy.Provider,{value:this.props.routeContext},X.createElement($2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $U(n){let{routeContext:e,match:t,children:r}=n,i=X.useContext(XU);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),X.createElement(uy.Provider,{value:e},r)}function eO(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(i=t)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);d>=0||Ns(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(t&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let m=o[d];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=d),m.route.id){let{loaderData:g,errors:y}=t,_=m.route.loader&&g[m.route.id]===void 0&&(!y||y[m.route.id]===void 0);if(m.route.lazy||_){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,m,g)=>{let y,_=!1,w=null,x=null;t&&(y=a&&m.route.id?a[m.route.id]:void 0,w=m.route.errorElement||QU,c&&(u<0&&g===0?(sO("route-fallback"),_=!0,x=null):u===g&&(_=!0,x=m.route.hydrateFallbackElement||null)));let S=e.concat(o.slice(0,g+1)),b=()=>{let T;return y?T=w:_?T=x:m.route.Component?T=X.createElement(m.route.Component,null):m.route.element?T=m.route.element:T=d,X.createElement($U,{match:m,routeContext:{outlet:d,matches:S,isDataRoute:t!=null},children:T})};return t&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?X.createElement(JU,{location:t.location,revalidation:t.revalidation,component:w,error:y,children:b(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):b()},null)}var tC=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(tC||{});function tO(n){let e=X.useContext(YU);return e||Ns(!1),e}function nO(n){let e=X.useContext(uy);return e||Ns(!1),e}function rO(n){let e=nO(),t=e.matches[e.matches.length-1];return t.route.id||Ns(!1),t.route.id}function iO(){var n;let e=X.useContext($2),t=tO(tC.UseRouteError),r=rO();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}const SM={};function sO(n,e,t){SM[n]||(SM[n]=!0)}function u1(n){Ns(!1)}function oO(n){let{basename:e="/",children:t=null,location:r,navigationType:i=jc.Pop,navigator:s,static:o=!1,future:a}=n;kS()&&Ns(!1);let c=e.replace(/^\/*/,"/"),u=X.useMemo(()=>({basename:c,navigator:s,static:o,future:F0({v7_relativeSplatPath:!1},a)}),[c,a,s,o]);typeof r=="string"&&(r=ly(r));let{pathname:d="/",search:m="",hash:g="",state:y=null,key:_="default"}=r,w=X.useMemo(()=>{let x=Z2(d,c);return x==null?null:{location:{pathname:x,search:m,hash:g,state:y,key:_},navigationType:i}},[c,d,m,g,y,_,i]);return w==null?null:X.createElement(J2.Provider,{value:u},X.createElement(cy.Provider,{children:t,value:w}))}function aO(n){let{children:e,location:t}=n;return qU(f1(e),t)}new Promise(()=>{});function f1(n,e){e===void 0&&(e=[]);let t=[];return X.Children.forEach(n,(r,i)=>{if(!X.isValidElement(r))return;let s=[...e,i];if(r.type===X.Fragment){t.push.apply(t,f1(r.props.children,s));return}r.type!==u1&&Ns(!1),!r.props.index||!r.props.children||Ns(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=f1(r.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const lO="6";try{window.__reactRouterVersion=lO}catch{}const cO="startTransition",wM=h3[cO];function uO(n){let{basename:e,children:t,future:r,window:i}=n,s=X.useRef();s.current==null&&(s.current=TU({window:i,v5Compat:!0}));let o=s.current,[a,c]=X.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=X.useCallback(m=>{u&&wM?wM(()=>c(m)):c(m)},[c,u]);return X.useLayoutEffect(()=>o.listen(d),[o,d]),X.createElement(oO,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:r})}var EM;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(EM||(EM={}));var MM;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(MM||(MM={}));/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const If="158",sf={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},of={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},nC=0,d1=1,rC=2,fO=3,iC=0,fy=1,pm=2,ca=3,Qa=0,ms=1,eo=2,dO=2,ja=0,wf=1,h1=2,p1=3,m1=4,sC=5,Bc=100,oC=101,aC=102,g1=103,v1=104,lC=200,cC=201,uC=202,fC=203,k0=204,B0=205,dC=206,hC=207,pC=208,mC=209,gC=210,vC=211,yC=212,_C=213,xC=214,SC=0,wC=1,EC=2,Rm=3,MC=4,TC=5,bC=6,AC=7,ig=0,CC=1,RC=2,Xa=0,PC=1,LC=2,IC=3,BS=4,NC=5,y1="attached",DC="detached",iu=300,Ja=301,su=302,Lh=303,Pm=304,Vh=306,ou=1e3,gr=1001,Ih=1002,Dr=1003,Lm=1004,hO=1004,ph=1005,pO=1005,Pn=1006,dy=1007,mO=1007,$a=1008,_1=1008,ro=1009,zS=1010,HS=1011,hy=1012,py=1013,Ga=1014,pi=1015,bi=1016,GS=1017,VS=1018,Kc=1020,UC=1021,di=1023,OC=1024,FC=1025,Zc=1026,Nf=1027,WS=1028,jS=1029,kC=1030,XS=1031,YS=1033,_0=33776,x0=33777,S0=33778,w0=33779,x1=35840,S1=35841,w1=35842,E1=35843,BC=36196,M1=37492,T1=37496,b1=37808,A1=37809,C1=37810,R1=37811,P1=37812,L1=37813,I1=37814,N1=37815,D1=37816,U1=37817,O1=37818,F1=37819,k1=37820,B1=37821,E0=36492,z1=36494,H1=36495,zC=36283,G1=36284,V1=36285,W1=36286,HC=2200,GC=2201,VC=2202,Nh=2300,Df=2301,M0=2302,ff=2400,df=2401,Im=2402,my=2500,qS=2501,WC=0,KS=1,z0=2,ZS=3e3,Qc=3001,jC=3200,QS=3201,fu=0,XC=1,to="",ti="srgb",so="srgb-linear",gy="display-p3",sg="display-p3-linear",Nm="linear",cr="srgb",Dm="rec709",Um="p3",gO=0,af=7680,vO=7681,yO=7682,_O=7683,xO=34055,SO=34056,wO=5386,EO=512,MO=513,TO=514,bO=515,AO=516,CO=517,RO=518,j1=519,YC=512,qC=513,KC=514,ZC=515,QC=516,JC=517,$C=518,eR=519,Om=35044,PO=35048,LO=35040,IO=35045,NO=35049,DO=35041,UO=35046,OO=35050,FO=35042,kO="100",X1="300 es",H0=1035,Va=2e3,Fm=2001;let ql=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}};const Xi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let TM=1234567;const Ef=Math.PI/180,Dh=180/Math.PI;function io(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Xi[n&255]+Xi[n>>8&255]+Xi[n>>16&255]+Xi[n>>24&255]+"-"+Xi[e&255]+Xi[e>>8&255]+"-"+Xi[e>>16&15|64]+Xi[e>>24&255]+"-"+Xi[t&63|128]+Xi[t>>8&255]+"-"+Xi[t>>16&255]+Xi[t>>24&255]+Xi[r&255]+Xi[r>>8&255]+Xi[r>>16&255]+Xi[r>>24&255]).toLowerCase()}function Ur(n,e,t){return Math.max(e,Math.min(t,n))}function JS(n,e){return(n%e+e)%e}function BO(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function zO(n,e,t){return n!==e?(t-n)/(e-n):0}function mm(n,e,t){return(1-t)*n+t*e}function HO(n,e,t,r){return mm(n,e,1-Math.exp(-t*r))}function GO(n,e=1){return e-Math.abs(JS(n,e*2)-e)}function VO(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function WO(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function jO(n,e){return n+Math.floor(Math.random()*(e-n+1))}function XO(n,e){return n+Math.random()*(e-n)}function YO(n){return n*(.5-Math.random())}function qO(n){n!==void 0&&(TM=n);let e=TM+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function KO(n){return n*Ef}function ZO(n){return n*Dh}function Y1(n){return(n&n-1)===0&&n!==0}function tR(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function G0(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function QO(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),c=o(t/2),u=s((e+r)/2),d=o((e+r)/2),m=s((e-r)/2),g=o((e-r)/2),y=s((r-e)/2),_=o((r-e)/2);switch(i){case"XYX":n.set(a*d,c*m,c*g,a*u);break;case"YZY":n.set(c*g,a*d,c*m,a*u);break;case"ZXZ":n.set(c*m,c*g,a*d,a*u);break;case"XZX":n.set(a*d,c*_,c*y,a*u);break;case"YXY":n.set(c*y,a*d,c*_,a*u);break;case"ZYZ":n.set(c*_,c*y,a*d,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Is(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Sn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const nR={DEG2RAD:Ef,RAD2DEG:Dh,generateUUID:io,clamp:Ur,euclideanModulo:JS,mapLinear:BO,inverseLerp:zO,lerp:mm,damp:HO,pingpong:GO,smoothstep:VO,smootherstep:WO,randInt:jO,randFloat:XO,randFloatSpread:YO,seededRandom:qO,degToRad:KO,radToDeg:ZO,isPowerOfTwo:Y1,ceilPowerOfTwo:tR,floorPowerOfTwo:G0,setQuaternionFromProperEuler:QO,normalize:Sn,denormalize:Is};class it{constructor(e=0,t=0){it.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Ur(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class xn{constructor(e,t,r,i,s,o,a,c,u){xn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,c,u)}set(e,t,r,i,s,o,a,c,u){const d=this.elements;return d[0]=e,d[1]=i,d[2]=a,d[3]=t,d[4]=s,d[5]=c,d[6]=r,d[7]=o,d[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],c=r[6],u=r[1],d=r[4],m=r[7],g=r[2],y=r[5],_=r[8],w=i[0],x=i[3],S=i[6],b=i[1],T=i[4],C=i[7],P=i[2],D=i[5],U=i[8];return s[0]=o*w+a*b+c*P,s[3]=o*x+a*T+c*D,s[6]=o*S+a*C+c*U,s[1]=u*w+d*b+m*P,s[4]=u*x+d*T+m*D,s[7]=u*S+d*C+m*U,s[2]=g*w+y*b+_*P,s[5]=g*x+y*T+_*D,s[8]=g*S+y*C+_*U,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],u=e[7],d=e[8];return t*o*d-t*a*u-r*s*d+r*a*c+i*s*u-i*o*c}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],u=e[7],d=e[8],m=d*o-a*u,g=a*c-d*s,y=u*s-o*c,_=t*m+r*g+i*y;if(_===0)return this.set(0,0,0,0,0,0,0,0,0);const w=1/_;return e[0]=m*w,e[1]=(i*u-d*r)*w,e[2]=(a*r-i*o)*w,e[3]=g*w,e[4]=(d*t-i*c)*w,e[5]=(i*s-a*t)*w,e[6]=y*w,e[7]=(r*c-u*t)*w,e[8]=(o*t-r*s)*w,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const c=Math.cos(s),u=Math.sin(s);return this.set(r*c,r*u,-r*(c*o+u*a)+o+e,-i*u,i*c,-i*(-u*o+c*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(H_.makeScale(e,t)),this}rotate(e){return this.premultiply(H_.makeRotation(-e)),this}translate(e,t){return this.premultiply(H_.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const H_=new xn;function rR(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const JO={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ah(n,e){return new JO[n](e)}function km(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function iR(){const n=km("canvas");return n.style.display="block",n}const bM={};function gm(n){n in bM||(bM[n]=!0,console.warn(n))}const AM=new xn().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),CM=new xn().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),yv={[so]:{transfer:Nm,primaries:Dm,toReference:n=>n,fromReference:n=>n},[ti]:{transfer:cr,primaries:Dm,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[sg]:{transfer:Nm,primaries:Um,toReference:n=>n.applyMatrix3(CM),fromReference:n=>n.applyMatrix3(AM)},[gy]:{transfer:cr,primaries:Um,toReference:n=>n.convertSRGBToLinear().applyMatrix3(CM),fromReference:n=>n.applyMatrix3(AM).convertLinearToSRGB()}},$O=new Set([so,sg]),Kn={enabled:!0,_workingColorSpace:so,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!$O.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=yv[e].toReference,i=yv[t].fromReference;return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return yv[n].primaries},getTransfer:function(n){return n===to?Nm:yv[n].transfer}};function mh(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function G_(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Ud;class $S{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Ud===void 0&&(Ud=km("canvas")),Ud.width=e.width,Ud.height=e.height;const r=Ud.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Ud}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=km("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=mh(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(mh(t[r]/255)*255):t[r]=mh(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let eF=0;class hf{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:eF++}),this.uuid=io(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(V_(i[o].image)):s.push(V_(i[o]))}else s=V_(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function V_(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?$S.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let tF=0;class jn extends ql{constructor(e=jn.DEFAULT_IMAGE,t=jn.DEFAULT_MAPPING,r=gr,i=gr,s=Pn,o=$a,a=di,c=ro,u=jn.DEFAULT_ANISOTROPY,d=to){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:tF++}),this.uuid=io(),this.name="",this.source=new hf(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=c,this.offset=new it(0,0),this.repeat=new it(1,1),this.center=new it(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new xn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof d=="string"?this.colorSpace=d:(gm("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=d===Qc?ti:to),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==iu)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ou:e.x=e.x-Math.floor(e.x);break;case gr:e.x=e.x<0?0:1;break;case Ih:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ou:e.y=e.y-Math.floor(e.y);break;case gr:e.y=e.y<0?0:1;break;case Ih:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return gm("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===ti?Qc:ZS}set encoding(e){gm("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Qc?ti:to}}jn.DEFAULT_IMAGE=null;jn.DEFAULT_MAPPING=iu;jn.DEFAULT_ANISOTROPY=1;class Hn{constructor(e=0,t=0,r=0,i=1){Hn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const c=e.elements,u=c[0],d=c[4],m=c[8],g=c[1],y=c[5],_=c[9],w=c[2],x=c[6],S=c[10];if(Math.abs(d-g)<.01&&Math.abs(m-w)<.01&&Math.abs(_-x)<.01){if(Math.abs(d+g)<.1&&Math.abs(m+w)<.1&&Math.abs(_+x)<.1&&Math.abs(u+y+S-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const T=(u+1)/2,C=(y+1)/2,P=(S+1)/2,D=(d+g)/4,U=(m+w)/4,F=(_+x)/4;return T>C&&T>P?T<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(T),i=D/r,s=U/r):C>P?C<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(C),r=D/i,s=F/i):P<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(P),r=U/s,i=F/s),this.set(r,i,s,t),this}let b=Math.sqrt((x-_)*(x-_)+(m-w)*(m-w)+(g-d)*(g-d));return Math.abs(b)<.001&&(b=1),this.x=(x-_)/b,this.y=(m-w)/b,this.z=(g-d)/b,this.w=Math.acos((u+y+S-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class sR extends ql{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Hn(0,0,e,t),this.scissorTest=!1,this.viewport=new Hn(0,0,e,t);const i={width:e,height:t,depth:1};r.encoding!==void 0&&(gm("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===Qc?ti:to),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Pn,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new jn(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new hf(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class oo extends sR{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class vy extends jn{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Dr,this.minFilter=Dr,this.wrapR=gr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class nF extends oo{constructor(e=1,t=1,r=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new vy(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class ew extends jn{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Dr,this.minFilter=Dr,this.wrapR=gr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class rF extends oo{constructor(e=1,t=1,r=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new ew(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class iF extends oo{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Ai{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let c=r[i+0],u=r[i+1],d=r[i+2],m=r[i+3];const g=s[o+0],y=s[o+1],_=s[o+2],w=s[o+3];if(a===0){e[t+0]=c,e[t+1]=u,e[t+2]=d,e[t+3]=m;return}if(a===1){e[t+0]=g,e[t+1]=y,e[t+2]=_,e[t+3]=w;return}if(m!==w||c!==g||u!==y||d!==_){let x=1-a;const S=c*g+u*y+d*_+m*w,b=S>=0?1:-1,T=1-S*S;if(T>Number.EPSILON){const P=Math.sqrt(T),D=Math.atan2(P,S*b);x=Math.sin(x*D)/P,a=Math.sin(a*D)/P}const C=a*b;if(c=c*x+g*C,u=u*x+y*C,d=d*x+_*C,m=m*x+w*C,x===1-a){const P=1/Math.sqrt(c*c+u*u+d*d+m*m);c*=P,u*=P,d*=P,m*=P}}e[t]=c,e[t+1]=u,e[t+2]=d,e[t+3]=m}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],c=r[i+1],u=r[i+2],d=r[i+3],m=s[o],g=s[o+1],y=s[o+2],_=s[o+3];return e[t]=a*_+d*m+c*y-u*g,e[t+1]=c*_+d*g+u*m-a*y,e[t+2]=u*_+d*y+a*g-c*m,e[t+3]=d*_-a*m-c*g-u*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,c=Math.sin,u=a(r/2),d=a(i/2),m=a(s/2),g=c(r/2),y=c(i/2),_=c(s/2);switch(o){case"XYZ":this._x=g*d*m+u*y*_,this._y=u*y*m-g*d*_,this._z=u*d*_+g*y*m,this._w=u*d*m-g*y*_;break;case"YXZ":this._x=g*d*m+u*y*_,this._y=u*y*m-g*d*_,this._z=u*d*_-g*y*m,this._w=u*d*m+g*y*_;break;case"ZXY":this._x=g*d*m-u*y*_,this._y=u*y*m+g*d*_,this._z=u*d*_+g*y*m,this._w=u*d*m-g*y*_;break;case"ZYX":this._x=g*d*m-u*y*_,this._y=u*y*m+g*d*_,this._z=u*d*_-g*y*m,this._w=u*d*m+g*y*_;break;case"YZX":this._x=g*d*m+u*y*_,this._y=u*y*m+g*d*_,this._z=u*d*_-g*y*m,this._w=u*d*m-g*y*_;break;case"XZY":this._x=g*d*m-u*y*_,this._y=u*y*m-g*d*_,this._z=u*d*_+g*y*m,this._w=u*d*m+g*y*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],c=t[9],u=t[2],d=t[6],m=t[10],g=r+a+m;if(g>0){const y=.5/Math.sqrt(g+1);this._w=.25/y,this._x=(d-c)*y,this._y=(s-u)*y,this._z=(o-i)*y}else if(r>a&&r>m){const y=2*Math.sqrt(1+r-a-m);this._w=(d-c)/y,this._x=.25*y,this._y=(i+o)/y,this._z=(s+u)/y}else if(a>m){const y=2*Math.sqrt(1+a-r-m);this._w=(s-u)/y,this._x=(i+o)/y,this._y=.25*y,this._z=(c+d)/y}else{const y=2*Math.sqrt(1+m-r-a);this._w=(o-i)/y,this._x=(s+u)/y,this._y=(c+d)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ur(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,c=t._y,u=t._z,d=t._w;return this._x=r*d+o*a+i*u-s*c,this._y=i*d+o*c+s*a-r*u,this._z=s*d+o*u+r*c-i*a,this._w=o*d-r*a-i*c-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const c=1-a*a;if(c<=Number.EPSILON){const y=1-t;return this._w=y*o+t*this._w,this._x=y*r+t*this._x,this._y=y*i+t*this._y,this._z=y*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(c),d=Math.atan2(u,a),m=Math.sin((1-t)*d)/u,g=Math.sin(t*d)/u;return this._w=o*m+this._w*g,this._x=r*m+this._x*g,this._y=i*m+this._y*g,this._z=s*m+this._z*g,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class oe{constructor(e=0,t=0,r=0){oe.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(RM.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(RM.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,c=e.w,u=2*(o*i-a*r),d=2*(a*t-s*i),m=2*(s*r-o*t);return this.x=t+c*u+o*m-a*d,this.y=r+c*d+a*u-s*m,this.z=i+c*m+s*d-o*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,c=t.z;return this.x=i*c-s*a,this.y=s*o-r*c,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return W_.copy(this).projectOnVector(e),this.sub(W_)}reflect(e){return this.sub(W_.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Ur(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const W_=new oe,RM=new Ai;class Us{constructor(e=new oe(1/0,1/0,1/0),t=new oe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(ra.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(ra.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=ra.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,ra):ra.fromBufferAttribute(s,o),ra.applyMatrix4(e.matrixWorld),this.expandByPoint(ra);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),_v.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),_v.copy(r.boundingBox)),_v.applyMatrix4(e.matrixWorld),this.union(_v)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ra),ra.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Wp),xv.subVectors(this.max,Wp),Od.subVectors(e.a,Wp),Fd.subVectors(e.b,Wp),kd.subVectors(e.c,Wp),Ac.subVectors(Fd,Od),Cc.subVectors(kd,Fd),Yu.subVectors(Od,kd);let t=[0,-Ac.z,Ac.y,0,-Cc.z,Cc.y,0,-Yu.z,Yu.y,Ac.z,0,-Ac.x,Cc.z,0,-Cc.x,Yu.z,0,-Yu.x,-Ac.y,Ac.x,0,-Cc.y,Cc.x,0,-Yu.y,Yu.x,0];return!j_(t,Od,Fd,kd,xv)||(t=[1,0,0,0,1,0,0,0,1],!j_(t,Od,Fd,kd,xv))?!1:(Sv.crossVectors(Ac,Cc),t=[Sv.x,Sv.y,Sv.z],j_(t,Od,Fd,kd,xv))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ra).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ra).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Il[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Il[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Il[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Il[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Il[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Il[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Il[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Il[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Il),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Il=[new oe,new oe,new oe,new oe,new oe,new oe,new oe,new oe],ra=new oe,_v=new Us,Od=new oe,Fd=new oe,kd=new oe,Ac=new oe,Cc=new oe,Yu=new oe,Wp=new oe,xv=new oe,Sv=new oe,qu=new oe;function j_(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){qu.fromArray(n,s);const a=i.x*Math.abs(qu.x)+i.y*Math.abs(qu.y)+i.z*Math.abs(qu.z),c=e.dot(qu),u=t.dot(qu),d=r.dot(qu);if(Math.max(-Math.max(c,u,d),Math.min(c,u,d))>a)return!1}return!0}const sF=new Us,jp=new oe,X_=new oe;class Os{constructor(e=new oe,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):sF.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;jp.subVectors(e,this.center);const t=jp.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(jp,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(X_.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(jp.copy(e.center).add(X_)),this.expandByPoint(jp.copy(e.center).sub(X_))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Nl=new oe,Y_=new oe,wv=new oe,Rc=new oe,q_=new oe,Ev=new oe,K_=new oe;let Hf=class{constructor(e=new oe,t=new oe(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Nl)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Nl.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Nl.copy(this.origin).addScaledVector(this.direction,t),Nl.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){Y_.copy(e).add(t).multiplyScalar(.5),wv.copy(t).sub(e).normalize(),Rc.copy(this.origin).sub(Y_);const s=e.distanceTo(t)*.5,o=-this.direction.dot(wv),a=Rc.dot(this.direction),c=-Rc.dot(wv),u=Rc.lengthSq(),d=Math.abs(1-o*o);let m,g,y,_;if(d>0)if(m=o*c-a,g=o*a-c,_=s*d,m>=0)if(g>=-_)if(g<=_){const w=1/d;m*=w,g*=w,y=m*(m+o*g+2*a)+g*(o*m+g+2*c)+u}else g=s,m=Math.max(0,-(o*g+a)),y=-m*m+g*(g+2*c)+u;else g=-s,m=Math.max(0,-(o*g+a)),y=-m*m+g*(g+2*c)+u;else g<=-_?(m=Math.max(0,-(-o*s+a)),g=m>0?-s:Math.min(Math.max(-s,-c),s),y=-m*m+g*(g+2*c)+u):g<=_?(m=0,g=Math.min(Math.max(-s,-c),s),y=g*(g+2*c)+u):(m=Math.max(0,-(o*s+a)),g=m>0?s:Math.min(Math.max(-s,-c),s),y=-m*m+g*(g+2*c)+u);else g=o>0?-s:s,m=Math.max(0,-(o*g+a)),y=-m*m+g*(g+2*c)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,m),i&&i.copy(Y_).addScaledVector(wv,g),y}intersectSphere(e,t){Nl.subVectors(e.center,this.origin);const r=Nl.dot(this.direction),i=Nl.dot(Nl)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,c=r+o;return c<0?null:a<0?this.at(c,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,c;const u=1/this.direction.x,d=1/this.direction.y,m=1/this.direction.z,g=this.origin;return u>=0?(r=(e.min.x-g.x)*u,i=(e.max.x-g.x)*u):(r=(e.max.x-g.x)*u,i=(e.min.x-g.x)*u),d>=0?(s=(e.min.y-g.y)*d,o=(e.max.y-g.y)*d):(s=(e.max.y-g.y)*d,o=(e.min.y-g.y)*d),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),m>=0?(a=(e.min.z-g.z)*m,c=(e.max.z-g.z)*m):(a=(e.max.z-g.z)*m,c=(e.min.z-g.z)*m),r>c||a>i)||((a>r||r!==r)&&(r=a),(c<i||i!==i)&&(i=c),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Nl)!==null}intersectTriangle(e,t,r,i,s){q_.subVectors(t,e),Ev.subVectors(r,e),K_.crossVectors(q_,Ev);let o=this.direction.dot(K_),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Rc.subVectors(this.origin,e);const c=a*this.direction.dot(Ev.crossVectors(Rc,Ev));if(c<0)return null;const u=a*this.direction.dot(q_.cross(Rc));if(u<0||c+u>o)return null;const d=-a*Rc.dot(K_);return d<0?null:this.at(d/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}};class sn{constructor(e,t,r,i,s,o,a,c,u,d,m,g,y,_,w,x){sn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,c,u,d,m,g,y,_,w,x)}set(e,t,r,i,s,o,a,c,u,d,m,g,y,_,w,x){const S=this.elements;return S[0]=e,S[4]=t,S[8]=r,S[12]=i,S[1]=s,S[5]=o,S[9]=a,S[13]=c,S[2]=u,S[6]=d,S[10]=m,S[14]=g,S[3]=y,S[7]=_,S[11]=w,S[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new sn().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Bd.setFromMatrixColumn(e,0).length(),s=1/Bd.setFromMatrixColumn(e,1).length(),o=1/Bd.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),c=Math.cos(i),u=Math.sin(i),d=Math.cos(s),m=Math.sin(s);if(e.order==="XYZ"){const g=o*d,y=o*m,_=a*d,w=a*m;t[0]=c*d,t[4]=-c*m,t[8]=u,t[1]=y+_*u,t[5]=g-w*u,t[9]=-a*c,t[2]=w-g*u,t[6]=_+y*u,t[10]=o*c}else if(e.order==="YXZ"){const g=c*d,y=c*m,_=u*d,w=u*m;t[0]=g+w*a,t[4]=_*a-y,t[8]=o*u,t[1]=o*m,t[5]=o*d,t[9]=-a,t[2]=y*a-_,t[6]=w+g*a,t[10]=o*c}else if(e.order==="ZXY"){const g=c*d,y=c*m,_=u*d,w=u*m;t[0]=g-w*a,t[4]=-o*m,t[8]=_+y*a,t[1]=y+_*a,t[5]=o*d,t[9]=w-g*a,t[2]=-o*u,t[6]=a,t[10]=o*c}else if(e.order==="ZYX"){const g=o*d,y=o*m,_=a*d,w=a*m;t[0]=c*d,t[4]=_*u-y,t[8]=g*u+w,t[1]=c*m,t[5]=w*u+g,t[9]=y*u-_,t[2]=-u,t[6]=a*c,t[10]=o*c}else if(e.order==="YZX"){const g=o*c,y=o*u,_=a*c,w=a*u;t[0]=c*d,t[4]=w-g*m,t[8]=_*m+y,t[1]=m,t[5]=o*d,t[9]=-a*d,t[2]=-u*d,t[6]=y*m+_,t[10]=g-w*m}else if(e.order==="XZY"){const g=o*c,y=o*u,_=a*c,w=a*u;t[0]=c*d,t[4]=-m,t[8]=u*d,t[1]=g*m+w,t[5]=o*d,t[9]=y*m-_,t[2]=_*m-y,t[6]=a*d,t[10]=w*m+g}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(oF,e,aF)}lookAt(e,t,r){const i=this.elements;return Ks.subVectors(e,t),Ks.lengthSq()===0&&(Ks.z=1),Ks.normalize(),Pc.crossVectors(r,Ks),Pc.lengthSq()===0&&(Math.abs(r.z)===1?Ks.x+=1e-4:Ks.z+=1e-4,Ks.normalize(),Pc.crossVectors(r,Ks)),Pc.normalize(),Mv.crossVectors(Ks,Pc),i[0]=Pc.x,i[4]=Mv.x,i[8]=Ks.x,i[1]=Pc.y,i[5]=Mv.y,i[9]=Ks.y,i[2]=Pc.z,i[6]=Mv.z,i[10]=Ks.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],c=r[8],u=r[12],d=r[1],m=r[5],g=r[9],y=r[13],_=r[2],w=r[6],x=r[10],S=r[14],b=r[3],T=r[7],C=r[11],P=r[15],D=i[0],U=i[4],F=i[8],I=i[12],k=i[1],Q=i[5],j=i[9],$=i[13],H=i[2],ie=i[6],re=i[10],ue=i[14],G=i[3],K=i[7],W=i[11],L=i[15];return s[0]=o*D+a*k+c*H+u*G,s[4]=o*U+a*Q+c*ie+u*K,s[8]=o*F+a*j+c*re+u*W,s[12]=o*I+a*$+c*ue+u*L,s[1]=d*D+m*k+g*H+y*G,s[5]=d*U+m*Q+g*ie+y*K,s[9]=d*F+m*j+g*re+y*W,s[13]=d*I+m*$+g*ue+y*L,s[2]=_*D+w*k+x*H+S*G,s[6]=_*U+w*Q+x*ie+S*K,s[10]=_*F+w*j+x*re+S*W,s[14]=_*I+w*$+x*ue+S*L,s[3]=b*D+T*k+C*H+P*G,s[7]=b*U+T*Q+C*ie+P*K,s[11]=b*F+T*j+C*re+P*W,s[15]=b*I+T*$+C*ue+P*L,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],c=e[9],u=e[13],d=e[2],m=e[6],g=e[10],y=e[14],_=e[3],w=e[7],x=e[11],S=e[15];return _*(+s*c*m-i*u*m-s*a*g+r*u*g+i*a*y-r*c*y)+w*(+t*c*y-t*u*g+s*o*g-i*o*y+i*u*d-s*c*d)+x*(+t*u*m-t*a*y-s*o*m+r*o*y+s*a*d-r*u*d)+S*(-i*a*d-t*c*m+t*a*g+i*o*m-r*o*g+r*c*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],u=e[7],d=e[8],m=e[9],g=e[10],y=e[11],_=e[12],w=e[13],x=e[14],S=e[15],b=m*x*u-w*g*u+w*c*y-a*x*y-m*c*S+a*g*S,T=_*g*u-d*x*u-_*c*y+o*x*y+d*c*S-o*g*S,C=d*w*u-_*m*u+_*a*y-o*w*y-d*a*S+o*m*S,P=_*m*c-d*w*c-_*a*g+o*w*g+d*a*x-o*m*x,D=t*b+r*T+i*C+s*P;if(D===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const U=1/D;return e[0]=b*U,e[1]=(w*g*s-m*x*s-w*i*y+r*x*y+m*i*S-r*g*S)*U,e[2]=(a*x*s-w*c*s+w*i*u-r*x*u-a*i*S+r*c*S)*U,e[3]=(m*c*s-a*g*s-m*i*u+r*g*u+a*i*y-r*c*y)*U,e[4]=T*U,e[5]=(d*x*s-_*g*s+_*i*y-t*x*y-d*i*S+t*g*S)*U,e[6]=(_*c*s-o*x*s-_*i*u+t*x*u+o*i*S-t*c*S)*U,e[7]=(o*g*s-d*c*s+d*i*u-t*g*u-o*i*y+t*c*y)*U,e[8]=C*U,e[9]=(_*m*s-d*w*s-_*r*y+t*w*y+d*r*S-t*m*S)*U,e[10]=(o*w*s-_*a*s+_*r*u-t*w*u-o*r*S+t*a*S)*U,e[11]=(d*a*s-o*m*s-d*r*u+t*m*u+o*r*y-t*a*y)*U,e[12]=P*U,e[13]=(d*w*i-_*m*i+_*r*g-t*w*g-d*r*x+t*m*x)*U,e[14]=(_*a*i-o*w*i-_*r*c+t*w*c+o*r*x-t*a*x)*U,e[15]=(o*m*i-d*a*i+d*r*c-t*m*c-o*r*g+t*a*g)*U,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,c=e.z,u=s*o,d=s*a;return this.set(u*o+r,u*a-i*c,u*c+i*a,0,u*a+i*c,d*a+r,d*c-i*o,0,u*c-i*a,d*c+i*o,s*c*c+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,c=t._w,u=s+s,d=o+o,m=a+a,g=s*u,y=s*d,_=s*m,w=o*d,x=o*m,S=a*m,b=c*u,T=c*d,C=c*m,P=r.x,D=r.y,U=r.z;return i[0]=(1-(w+S))*P,i[1]=(y+C)*P,i[2]=(_-T)*P,i[3]=0,i[4]=(y-C)*D,i[5]=(1-(g+S))*D,i[6]=(x+b)*D,i[7]=0,i[8]=(_+T)*U,i[9]=(x-b)*U,i[10]=(1-(g+w))*U,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=Bd.set(i[0],i[1],i[2]).length();const o=Bd.set(i[4],i[5],i[6]).length(),a=Bd.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],ia.copy(this);const u=1/s,d=1/o,m=1/a;return ia.elements[0]*=u,ia.elements[1]*=u,ia.elements[2]*=u,ia.elements[4]*=d,ia.elements[5]*=d,ia.elements[6]*=d,ia.elements[8]*=m,ia.elements[9]*=m,ia.elements[10]*=m,t.setFromRotationMatrix(ia),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o,a=Va){const c=this.elements,u=2*s/(t-e),d=2*s/(r-i),m=(t+e)/(t-e),g=(r+i)/(r-i);let y,_;if(a===Va)y=-(o+s)/(o-s),_=-2*o*s/(o-s);else if(a===Fm)y=-o/(o-s),_=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return c[0]=u,c[4]=0,c[8]=m,c[12]=0,c[1]=0,c[5]=d,c[9]=g,c[13]=0,c[2]=0,c[6]=0,c[10]=y,c[14]=_,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,r,i,s,o,a=Va){const c=this.elements,u=1/(t-e),d=1/(r-i),m=1/(o-s),g=(t+e)*u,y=(r+i)*d;let _,w;if(a===Va)_=(o+s)*m,w=-2*m;else if(a===Fm)_=s*m,w=-1*m;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return c[0]=2*u,c[4]=0,c[8]=0,c[12]=-g,c[1]=0,c[5]=2*d,c[9]=0,c[13]=-y,c[2]=0,c[6]=0,c[10]=w,c[14]=-_,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const Bd=new oe,ia=new sn,oF=new oe(0,0,0),aF=new oe(1,1,1),Pc=new oe,Mv=new oe,Ks=new oe,PM=new sn,LM=new Ai;class og{constructor(e=0,t=0,r=0,i=og.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],c=i[1],u=i[5],d=i[9],m=i[2],g=i[6],y=i[10];switch(t){case"XYZ":this._y=Math.asin(Ur(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-d,y),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(g,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Ur(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(a,y),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-m,s),this._z=0);break;case"ZXY":this._x=Math.asin(Ur(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-m,y),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-Ur(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(g,y),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(Ur(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-m,s)):(this._x=0,this._y=Math.atan2(a,y));break;case"XZY":this._z=Math.asin(-Ur(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(g,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-d,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return PM.makeRotationFromQuaternion(e),this.setFromRotationMatrix(PM,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return LM.setFromEuler(this),this.setFromQuaternion(LM,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}og.DEFAULT_ORDER="XYZ";class Mf{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let lF=0;const IM=new oe,zd=new Ai,Dl=new sn,Tv=new oe,Xp=new oe,cF=new oe,uF=new Ai,NM=new oe(1,0,0),DM=new oe(0,1,0),UM=new oe(0,0,1),fF={type:"added"},dF={type:"removed"};class Ln extends ql{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:lF++}),this.uuid=io(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ln.DEFAULT_UP.clone();const e=new oe,t=new og,r=new Ai,i=new oe(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new sn},normalMatrix:{value:new xn}}),this.matrix=new sn,this.matrixWorld=new sn,this.matrixAutoUpdate=Ln.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Ln.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Mf,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return zd.setFromAxisAngle(e,t),this.quaternion.multiply(zd),this}rotateOnWorldAxis(e,t){return zd.setFromAxisAngle(e,t),this.quaternion.premultiply(zd),this}rotateX(e){return this.rotateOnAxis(NM,e)}rotateY(e){return this.rotateOnAxis(DM,e)}rotateZ(e){return this.rotateOnAxis(UM,e)}translateOnAxis(e,t){return IM.copy(e).applyQuaternion(this.quaternion),this.position.add(IM.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(NM,e)}translateY(e){return this.translateOnAxis(DM,e)}translateZ(e){return this.translateOnAxis(UM,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Dl.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Tv.copy(e):Tv.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Xp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Dl.lookAt(Xp,Tv,this.up):Dl.lookAt(Tv,Xp,this.up),this.quaternion.setFromRotationMatrix(Dl),i&&(Dl.extractRotation(i.matrixWorld),zd.setFromRotationMatrix(Dl),this.quaternion.premultiply(zd.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(fF)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(dF)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Dl.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Dl.multiply(e.parent.matrixWorld)),e.applyMatrix4(Dl),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t){let r=[];this[e]===t&&r.push(this);for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectsByProperty(e,t);o.length>0&&(r=r.concat(o))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Xp,e,cF),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Xp,uF,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const s=t[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(a,c){return a[c.uuid]===void 0&&(a[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const c=a.shapes;if(Array.isArray(c))for(let u=0,d=c.length;u<d;u++){const m=c[u];s(e.shapes,m)}else s(e.shapes,c)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let c=0,u=this.material.length;c<u;c++)a.push(s(e.materials,this.material[c]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const c=this.animations[a];i.animations.push(s(e.animations,c))}}if(t){const a=o(e.geometries),c=o(e.materials),u=o(e.textures),d=o(e.images),m=o(e.shapes),g=o(e.skeletons),y=o(e.animations),_=o(e.nodes);a.length>0&&(r.geometries=a),c.length>0&&(r.materials=c),u.length>0&&(r.textures=u),d.length>0&&(r.images=d),m.length>0&&(r.shapes=m),g.length>0&&(r.skeletons=g),y.length>0&&(r.animations=y),_.length>0&&(r.nodes=_)}return r.object=i,r;function o(a){const c=[];for(const u in a){const d=a[u];delete d.metadata,c.push(d)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Ln.DEFAULT_UP=new oe(0,1,0);Ln.DEFAULT_MATRIX_AUTO_UPDATE=!0;Ln.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const sa=new oe,Ul=new oe,Z_=new oe,Ol=new oe,Hd=new oe,Gd=new oe,OM=new oe,Q_=new oe,J_=new oe,$_=new oe;let bv=!1;class Ls{constructor(e=new oe,t=new oe,r=new oe){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),sa.subVectors(e,t),i.cross(sa);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){sa.subVectors(i,t),Ul.subVectors(r,t),Z_.subVectors(e,t);const o=sa.dot(sa),a=sa.dot(Ul),c=sa.dot(Z_),u=Ul.dot(Ul),d=Ul.dot(Z_),m=o*u-a*a;if(m===0)return s.set(-2,-1,-1);const g=1/m,y=(u*c-a*d)*g,_=(o*d-a*c)*g;return s.set(1-y-_,_,y)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Ol),Ol.x>=0&&Ol.y>=0&&Ol.x+Ol.y<=1}static getUV(e,t,r,i,s,o,a,c){return bv===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),bv=!0),this.getInterpolation(e,t,r,i,s,o,a,c)}static getInterpolation(e,t,r,i,s,o,a,c){return this.getBarycoord(e,t,r,i,Ol),c.setScalar(0),c.addScaledVector(s,Ol.x),c.addScaledVector(o,Ol.y),c.addScaledVector(a,Ol.z),c}static isFrontFacing(e,t,r,i){return sa.subVectors(r,t),Ul.subVectors(e,t),sa.cross(Ul).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return sa.subVectors(this.c,this.b),Ul.subVectors(this.a,this.b),sa.cross(Ul).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ls.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ls.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,s){return bv===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),bv=!0),Ls.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}getInterpolation(e,t,r,i,s){return Ls.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return Ls.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ls.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;Hd.subVectors(i,r),Gd.subVectors(s,r),Q_.subVectors(e,r);const c=Hd.dot(Q_),u=Gd.dot(Q_);if(c<=0&&u<=0)return t.copy(r);J_.subVectors(e,i);const d=Hd.dot(J_),m=Gd.dot(J_);if(d>=0&&m<=d)return t.copy(i);const g=c*m-d*u;if(g<=0&&c>=0&&d<=0)return o=c/(c-d),t.copy(r).addScaledVector(Hd,o);$_.subVectors(e,s);const y=Hd.dot($_),_=Gd.dot($_);if(_>=0&&y<=_)return t.copy(s);const w=y*u-c*_;if(w<=0&&u>=0&&_<=0)return a=u/(u-_),t.copy(r).addScaledVector(Gd,a);const x=d*_-y*m;if(x<=0&&m-d>=0&&y-_>=0)return OM.subVectors(s,i),a=(m-d)/(m-d+(y-_)),t.copy(i).addScaledVector(OM,a);const S=1/(x+w+g);return o=w*S,a=g*S,t.copy(r).addScaledVector(Hd,o).addScaledVector(Gd,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const oR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Lc={h:0,s:0,l:0},Av={h:0,s:0,l:0};function ex(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Rt{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ti){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Kn.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Kn.workingColorSpace){return this.r=e,this.g=t,this.b=r,Kn.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Kn.workingColorSpace){if(e=JS(e,1),t=Ur(t,0,1),r=Ur(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=ex(o,s,e+1/3),this.g=ex(o,s,e),this.b=ex(o,s,e-1/3)}return Kn.toWorkingColorSpace(this,i),this}setStyle(e,t=ti){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=ti){const r=oR[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=mh(e.r),this.g=mh(e.g),this.b=mh(e.b),this}copyLinearToSRGB(e){return this.r=G_(e.r),this.g=G_(e.g),this.b=G_(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ti){return Kn.fromWorkingColorSpace(Yi.copy(this),e),Math.round(Ur(Yi.r*255,0,255))*65536+Math.round(Ur(Yi.g*255,0,255))*256+Math.round(Ur(Yi.b*255,0,255))}getHexString(e=ti){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Kn.workingColorSpace){Kn.fromWorkingColorSpace(Yi.copy(this),t);const r=Yi.r,i=Yi.g,s=Yi.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let c,u;const d=(a+o)/2;if(a===o)c=0,u=0;else{const m=o-a;switch(u=d<=.5?m/(o+a):m/(2-o-a),o){case r:c=(i-s)/m+(i<s?6:0);break;case i:c=(s-r)/m+2;break;case s:c=(r-i)/m+4;break}c/=6}return e.h=c,e.s=u,e.l=d,e}getRGB(e,t=Kn.workingColorSpace){return Kn.fromWorkingColorSpace(Yi.copy(this),t),e.r=Yi.r,e.g=Yi.g,e.b=Yi.b,e}getStyle(e=ti){Kn.fromWorkingColorSpace(Yi.copy(this),e);const t=Yi.r,r=Yi.g,i=Yi.b;return e!==ti?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(Lc),this.setHSL(Lc.h+e,Lc.s+t,Lc.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Lc),e.getHSL(Av);const r=mm(Lc.h,Av.h,t),i=mm(Lc.s,Av.s,t),s=mm(Lc.l,Av.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Yi=new Rt;Rt.NAMES=oR;let hF=0;class mi extends ql{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:hF++}),this.uuid=io(),this.name="",this.type="Material",this.blending=wf,this.side=Qa,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=k0,this.blendDst=B0,this.blendEquation=Bc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Rt(0,0,0),this.blendAlpha=0,this.depthFunc=Rm,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=j1,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=af,this.stencilZFail=af,this.stencilZPass=af,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==wf&&(r.blending=this.blending),this.side!==Qa&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==k0&&(r.blendSrc=this.blendSrc),this.blendDst!==B0&&(r.blendDst=this.blendDst),this.blendEquation!==Bc&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Rm&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==j1&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==af&&(r.stencilFail=this.stencilFail),this.stencilZFail!==af&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==af&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const c=s[a];delete c.metadata,o.push(c)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Ki extends mi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Rt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ig,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Vl=pF();function pF(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let c=0;c<256;++c){const u=c-127;u<-27?(r[c]=0,r[c|256]=32768,i[c]=24,i[c|256]=24):u<-14?(r[c]=1024>>-u-14,r[c|256]=1024>>-u-14|32768,i[c]=-u-1,i[c|256]=-u-1):u<=15?(r[c]=u+15<<10,r[c|256]=u+15<<10|32768,i[c]=13,i[c|256]=13):u<128?(r[c]=31744,r[c|256]=64512,i[c]=24,i[c|256]=24):(r[c]=31744,r[c|256]=64512,i[c]=13,i[c|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let c=1;c<1024;++c){let u=c<<13,d=0;for(;(u&8388608)===0;)u<<=1,d-=8388608;u&=-8388609,d+=947912704,s[c]=u|d}for(let c=1024;c<2048;++c)s[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)o[c]=c<<23;o[31]=1199570944,o[32]=2147483648;for(let c=33;c<63;++c)o[c]=2147483648+(c-32<<23);o[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(a[c]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function Ps(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Ur(n,-65504,65504),Vl.floatView[0]=n;const e=Vl.uint32View[0],t=e>>23&511;return Vl.baseTable[t]+((e&8388607)>>Vl.shiftTable[t])}function cm(n){const e=n>>10;return Vl.uint32View[0]=Vl.mantissaTable[Vl.offsetTable[e]+(n&1023)]+Vl.exponentTable[e],Vl.floatView[0]}const pf={toHalfFloat:Ps,fromHalfFloat:cm},ei=new oe,Cv=new it;class Xn{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=Om,this.updateRange={offset:0,count:-1},this.gpuType=pi,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)Cv.fromBufferAttribute(this,t),Cv.applyMatrix3(e),this.setXY(t,Cv.x,Cv.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)ei.fromBufferAttribute(this,t),ei.applyMatrix3(e),this.setXYZ(t,ei.x,ei.y,ei.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)ei.fromBufferAttribute(this,t),ei.applyMatrix4(e),this.setXYZ(t,ei.x,ei.y,ei.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)ei.fromBufferAttribute(this,t),ei.applyNormalMatrix(e),this.setXYZ(t,ei.x,ei.y,ei.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)ei.fromBufferAttribute(this,t),ei.transformDirection(e),this.setXYZ(t,ei.x,ei.y,ei.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=Is(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Sn(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Is(t,this.array)),t}setX(e,t){return this.normalized&&(t=Sn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Is(t,this.array)),t}setY(e,t){return this.normalized&&(t=Sn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Is(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Sn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Is(t,this.array)),t}setW(e,t){return this.normalized&&(t=Sn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Sn(t,this.array),r=Sn(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Sn(t,this.array),r=Sn(r,this.array),i=Sn(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Sn(t,this.array),r=Sn(r,this.array),i=Sn(i,this.array),s=Sn(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Om&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class mF extends Xn{constructor(e,t,r){super(new Int8Array(e),t,r)}}class gF extends Xn{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class vF extends Xn{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class yF extends Xn{constructor(e,t,r){super(new Int16Array(e),t,r)}}class tw extends Xn{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class _F extends Xn{constructor(e,t,r){super(new Int32Array(e),t,r)}}class nw extends Xn{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class xF extends Xn{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=cm(this.array[e*this.itemSize]);return this.normalized&&(t=Is(t,this.array)),t}setX(e,t){return this.normalized&&(t=Sn(t,this.array)),this.array[e*this.itemSize]=Ps(t),this}getY(e){let t=cm(this.array[e*this.itemSize+1]);return this.normalized&&(t=Is(t,this.array)),t}setY(e,t){return this.normalized&&(t=Sn(t,this.array)),this.array[e*this.itemSize+1]=Ps(t),this}getZ(e){let t=cm(this.array[e*this.itemSize+2]);return this.normalized&&(t=Is(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Sn(t,this.array)),this.array[e*this.itemSize+2]=Ps(t),this}getW(e){let t=cm(this.array[e*this.itemSize+3]);return this.normalized&&(t=Is(t,this.array)),t}setW(e,t){return this.normalized&&(t=Sn(t,this.array)),this.array[e*this.itemSize+3]=Ps(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Sn(t,this.array),r=Sn(r,this.array)),this.array[e+0]=Ps(t),this.array[e+1]=Ps(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Sn(t,this.array),r=Sn(r,this.array),i=Sn(i,this.array)),this.array[e+0]=Ps(t),this.array[e+1]=Ps(r),this.array[e+2]=Ps(i),this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Sn(t,this.array),r=Sn(r,this.array),i=Sn(i,this.array),s=Sn(s,this.array)),this.array[e+0]=Ps(t),this.array[e+1]=Ps(r),this.array[e+2]=Ps(i),this.array[e+3]=Ps(s),this}}class Vt extends Xn{constructor(e,t,r){super(new Float32Array(e),t,r)}}class SF extends Xn{constructor(e,t,r){super(new Float64Array(e),t,r)}}let wF=0;const So=new sn,tx=new Ln,Vd=new oe,Zs=new Us,Yp=new Us,Ti=new oe;class En extends ql{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:wF++}),this.uuid=io(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(rR(e)?nw:tw)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new xn().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return So.makeRotationFromQuaternion(e),this.applyMatrix4(So),this}rotateX(e){return So.makeRotationX(e),this.applyMatrix4(So),this}rotateY(e){return So.makeRotationY(e),this.applyMatrix4(So),this}rotateZ(e){return So.makeRotationZ(e),this.applyMatrix4(So),this}translate(e,t,r){return So.makeTranslation(e,t,r),this.applyMatrix4(So),this}scale(e,t,r){return So.makeScale(e,t,r),this.applyMatrix4(So),this}lookAt(e){return tx.lookAt(e),tx.updateMatrix(),this.applyMatrix4(tx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Vd).negate(),this.translate(Vd.x,Vd.y,Vd.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Vt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Us);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new oe(-1/0,-1/0,-1/0),new oe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];Zs.setFromBufferAttribute(s),this.morphTargetsRelative?(Ti.addVectors(this.boundingBox.min,Zs.min),this.boundingBox.expandByPoint(Ti),Ti.addVectors(this.boundingBox.max,Zs.max),this.boundingBox.expandByPoint(Ti)):(this.boundingBox.expandByPoint(Zs.min),this.boundingBox.expandByPoint(Zs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Os);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new oe,1/0);return}if(e){const r=this.boundingSphere.center;if(Zs.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Yp.setFromBufferAttribute(a),this.morphTargetsRelative?(Ti.addVectors(Zs.min,Yp.min),Zs.expandByPoint(Ti),Ti.addVectors(Zs.max,Yp.max),Zs.expandByPoint(Ti)):(Zs.expandByPoint(Yp.min),Zs.expandByPoint(Yp.max))}Zs.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)Ti.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(Ti));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],c=this.morphTargetsRelative;for(let u=0,d=a.count;u<d;u++)Ti.fromBufferAttribute(a,u),c&&(Vd.fromBufferAttribute(e,u),Ti.add(Vd)),i=Math.max(i,r.distanceToSquared(Ti))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Xn(new Float32Array(4*a),4));const c=this.getAttribute("tangent").array,u=[],d=[];for(let k=0;k<a;k++)u[k]=new oe,d[k]=new oe;const m=new oe,g=new oe,y=new oe,_=new it,w=new it,x=new it,S=new oe,b=new oe;function T(k,Q,j){m.fromArray(i,k*3),g.fromArray(i,Q*3),y.fromArray(i,j*3),_.fromArray(o,k*2),w.fromArray(o,Q*2),x.fromArray(o,j*2),g.sub(m),y.sub(m),w.sub(_),x.sub(_);const $=1/(w.x*x.y-x.x*w.y);isFinite($)&&(S.copy(g).multiplyScalar(x.y).addScaledVector(y,-w.y).multiplyScalar($),b.copy(y).multiplyScalar(w.x).addScaledVector(g,-x.x).multiplyScalar($),u[k].add(S),u[Q].add(S),u[j].add(S),d[k].add(b),d[Q].add(b),d[j].add(b))}let C=this.groups;C.length===0&&(C=[{start:0,count:r.length}]);for(let k=0,Q=C.length;k<Q;++k){const j=C[k],$=j.start,H=j.count;for(let ie=$,re=$+H;ie<re;ie+=3)T(r[ie+0],r[ie+1],r[ie+2])}const P=new oe,D=new oe,U=new oe,F=new oe;function I(k){U.fromArray(s,k*3),F.copy(U);const Q=u[k];P.copy(Q),P.sub(U.multiplyScalar(U.dot(Q))).normalize(),D.crossVectors(F,Q);const $=D.dot(d[k])<0?-1:1;c[k*4]=P.x,c[k*4+1]=P.y,c[k*4+2]=P.z,c[k*4+3]=$}for(let k=0,Q=C.length;k<Q;++k){const j=C[k],$=j.start,H=j.count;for(let ie=$,re=$+H;ie<re;ie+=3)I(r[ie+0]),I(r[ie+1]),I(r[ie+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Xn(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let g=0,y=r.count;g<y;g++)r.setXYZ(g,0,0,0);const i=new oe,s=new oe,o=new oe,a=new oe,c=new oe,u=new oe,d=new oe,m=new oe;if(e)for(let g=0,y=e.count;g<y;g+=3){const _=e.getX(g+0),w=e.getX(g+1),x=e.getX(g+2);i.fromBufferAttribute(t,_),s.fromBufferAttribute(t,w),o.fromBufferAttribute(t,x),d.subVectors(o,s),m.subVectors(i,s),d.cross(m),a.fromBufferAttribute(r,_),c.fromBufferAttribute(r,w),u.fromBufferAttribute(r,x),a.add(d),c.add(d),u.add(d),r.setXYZ(_,a.x,a.y,a.z),r.setXYZ(w,c.x,c.y,c.z),r.setXYZ(x,u.x,u.y,u.z)}else for(let g=0,y=t.count;g<y;g+=3)i.fromBufferAttribute(t,g+0),s.fromBufferAttribute(t,g+1),o.fromBufferAttribute(t,g+2),d.subVectors(o,s),m.subVectors(i,s),d.cross(m),r.setXYZ(g+0,d.x,d.y,d.z),r.setXYZ(g+1,d.x,d.y,d.z),r.setXYZ(g+2,d.x,d.y,d.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Ti.fromBufferAttribute(e,t),Ti.normalize(),e.setXYZ(t,Ti.x,Ti.y,Ti.z)}toNonIndexed(){function e(a,c){const u=a.array,d=a.itemSize,m=a.normalized,g=new u.constructor(c.length*d);let y=0,_=0;for(let w=0,x=c.length;w<x;w++){a.isInterleavedBufferAttribute?y=c[w]*a.data.stride+a.offset:y=c[w]*d;for(let S=0;S<d;S++)g[_++]=u[y++]}return new Xn(g,d,m)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new En,r=this.index.array,i=this.attributes;for(const a in i){const c=i[a],u=e(c,r);t.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const c=[],u=s[a];for(let d=0,m=u.length;d<m;d++){const g=u[d],y=e(g,r);c.push(y)}t.morphAttributes[a]=c}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,c=o.length;a<c;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const u in c)c[u]!==void 0&&(e[u]=c[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const c in r){const u=r[c];e.data.attributes[c]=u.toJSON(e.data)}const i={};let s=!1;for(const c in this.morphAttributes){const u=this.morphAttributes[c],d=[];for(let m=0,g=u.length;m<g;m++){const y=u[m];d.push(y.toJSON(e.data))}d.length>0&&(i[c]=d,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const u in i){const d=i[u];this.setAttribute(u,d.clone(t))}const s=e.morphAttributes;for(const u in s){const d=[],m=s[u];for(let g=0,y=m.length;g<y;g++)d.push(m[g].clone(t));this.morphAttributes[u]=d}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,d=o.length;u<d;u++){const m=o[u];this.addGroup(m.start,m.count,m.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const FM=new sn,Ku=new Hf,Rv=new Os,kM=new oe,Wd=new oe,jd=new oe,Xd=new oe,nx=new oe,Pv=new oe,Lv=new it,Iv=new it,Nv=new it,BM=new oe,zM=new oe,HM=new oe,Dv=new oe,Uv=new oe;class ir extends Ln{constructor(e=new En,t=new Ki){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){Pv.set(0,0,0);for(let c=0,u=s.length;c<u;c++){const d=a[c],m=s[c];d!==0&&(nx.fromBufferAttribute(m,e),o?Pv.addScaledVector(nx,d):Pv.addScaledVector(nx.sub(t),d))}t.add(Pv)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),Rv.copy(r.boundingSphere),Rv.applyMatrix4(s),Ku.copy(e.ray).recast(e.near),!(Rv.containsPoint(Ku.origin)===!1&&(Ku.intersectSphere(Rv,kM)===null||Ku.origin.distanceToSquared(kM)>(e.far-e.near)**2))&&(FM.copy(s).invert(),Ku.copy(e.ray).applyMatrix4(FM),!(r.boundingBox!==null&&Ku.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,Ku)))}_computeIntersections(e,t,r){let i;const s=this.geometry,o=this.material,a=s.index,c=s.attributes.position,u=s.attributes.uv,d=s.attributes.uv1,m=s.attributes.normal,g=s.groups,y=s.drawRange;if(a!==null)if(Array.isArray(o))for(let _=0,w=g.length;_<w;_++){const x=g[_],S=o[x.materialIndex],b=Math.max(x.start,y.start),T=Math.min(a.count,Math.min(x.start+x.count,y.start+y.count));for(let C=b,P=T;C<P;C+=3){const D=a.getX(C),U=a.getX(C+1),F=a.getX(C+2);i=Ov(this,S,e,r,u,d,m,D,U,F),i&&(i.faceIndex=Math.floor(C/3),i.face.materialIndex=x.materialIndex,t.push(i))}}else{const _=Math.max(0,y.start),w=Math.min(a.count,y.start+y.count);for(let x=_,S=w;x<S;x+=3){const b=a.getX(x),T=a.getX(x+1),C=a.getX(x+2);i=Ov(this,o,e,r,u,d,m,b,T,C),i&&(i.faceIndex=Math.floor(x/3),t.push(i))}}else if(c!==void 0)if(Array.isArray(o))for(let _=0,w=g.length;_<w;_++){const x=g[_],S=o[x.materialIndex],b=Math.max(x.start,y.start),T=Math.min(c.count,Math.min(x.start+x.count,y.start+y.count));for(let C=b,P=T;C<P;C+=3){const D=C,U=C+1,F=C+2;i=Ov(this,S,e,r,u,d,m,D,U,F),i&&(i.faceIndex=Math.floor(C/3),i.face.materialIndex=x.materialIndex,t.push(i))}}else{const _=Math.max(0,y.start),w=Math.min(c.count,y.start+y.count);for(let x=_,S=w;x<S;x+=3){const b=x,T=x+1,C=x+2;i=Ov(this,o,e,r,u,d,m,b,T,C),i&&(i.faceIndex=Math.floor(x/3),t.push(i))}}}}function EF(n,e,t,r,i,s,o,a){let c;if(e.side===ms?c=r.intersectTriangle(o,s,i,!0,a):c=r.intersectTriangle(i,s,o,e.side===Qa,a),c===null)return null;Uv.copy(a),Uv.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(Uv);return u<t.near||u>t.far?null:{distance:u,point:Uv.clone(),object:n}}function Ov(n,e,t,r,i,s,o,a,c,u){n.getVertexPosition(a,Wd),n.getVertexPosition(c,jd),n.getVertexPosition(u,Xd);const d=EF(n,e,t,r,Wd,jd,Xd,Dv);if(d){i&&(Lv.fromBufferAttribute(i,a),Iv.fromBufferAttribute(i,c),Nv.fromBufferAttribute(i,u),d.uv=Ls.getInterpolation(Dv,Wd,jd,Xd,Lv,Iv,Nv,new it)),s&&(Lv.fromBufferAttribute(s,a),Iv.fromBufferAttribute(s,c),Nv.fromBufferAttribute(s,u),d.uv1=Ls.getInterpolation(Dv,Wd,jd,Xd,Lv,Iv,Nv,new it),d.uv2=d.uv1),o&&(BM.fromBufferAttribute(o,a),zM.fromBufferAttribute(o,c),HM.fromBufferAttribute(o,u),d.normal=Ls.getInterpolation(Dv,Wd,jd,Xd,BM,zM,HM,new oe),d.normal.dot(r.direction)>0&&d.normal.multiplyScalar(-1));const m={a,b:c,c:u,normal:new oe,materialIndex:0};Ls.getNormal(Wd,jd,Xd,m.normal),d.face=m}return d}class Gf extends En{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const c=[],u=[],d=[],m=[];let g=0,y=0;_("z","y","x",-1,-1,r,t,e,o,s,0),_("z","y","x",1,-1,r,t,-e,o,s,1),_("x","z","y",1,1,e,r,t,i,o,2),_("x","z","y",1,-1,e,r,-t,i,o,3),_("x","y","z",1,-1,e,t,r,i,s,4),_("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(c),this.setAttribute("position",new Vt(u,3)),this.setAttribute("normal",new Vt(d,3)),this.setAttribute("uv",new Vt(m,2));function _(w,x,S,b,T,C,P,D,U,F,I){const k=C/U,Q=P/F,j=C/2,$=P/2,H=D/2,ie=U+1,re=F+1;let ue=0,G=0;const K=new oe;for(let W=0;W<re;W++){const L=W*Q-$;for(let B=0;B<ie;B++){const ne=B*k-j;K[w]=ne*b,K[x]=L*T,K[S]=H,u.push(K.x,K.y,K.z),K[w]=0,K[x]=0,K[S]=D>0?1:-1,d.push(K.x,K.y,K.z),m.push(B/U),m.push(1-W/F),ue+=1}}for(let W=0;W<F;W++)for(let L=0;L<U;L++){const B=g+L+ie*W,ne=g+L+ie*(W+1),ae=g+(L+1)+ie*(W+1),de=g+(L+1)+ie*W;c.push(B,ne,de),c.push(ne,ae,de),G+=6}a.addGroup(y,G,I),y+=G,g+=ue}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gf(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Uh(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function ds(n){const e={};for(let t=0;t<n.length;t++){const r=Uh(n[t]);for(const i in r)e[i]=r[i]}return e}function MF(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function aR(n){return n.getRenderTarget()===null?n.outputColorSpace:Kn.workingColorSpace}const rw={clone:Uh,merge:ds};var TF=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,bF=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ao extends mi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=TF,this.fragmentShader=bF,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Uh(e.uniforms),this.uniformsGroups=MF(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class ag extends Ln{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new sn,this.projectionMatrix=new sn,this.projectionMatrixInverse=new sn,this.coordinateSystem=Va}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Or extends ag{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Dh*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Ef*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Dh*2*Math.atan(Math.tan(Ef*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Ef*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const c=o.fullWidth,u=o.fullHeight;s+=o.offsetX*i/c,t-=o.offsetY*r/u,i*=o.width/c,r*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Yd=-90,qd=1;class lR extends Ln{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Or(Yd,qd,e,t);i.layers=this.layers,this.add(i);const s=new Or(Yd,qd,e,t);s.layers=this.layers,this.add(s);const o=new Or(Yd,qd,e,t);o.layers=this.layers,this.add(o);const a=new Or(Yd,qd,e,t);a.layers=this.layers,this.add(a);const c=new Or(Yd,qd,e,t);c.layers=this.layers,this.add(c);const u=new Or(Yd,qd,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,a,c]=t;for(const u of t)this.remove(u);if(e===Va)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===Fm)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,c,u,d]=this.children,m=e.getRenderTarget(),g=e.getActiveCubeFace(),y=e.getActiveMipmapLevel(),_=e.xr.enabled;e.xr.enabled=!1;const w=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,s),e.setRenderTarget(r,1,i),e.render(t,o),e.setRenderTarget(r,2,i),e.render(t,a),e.setRenderTarget(r,3,i),e.render(t,c),e.setRenderTarget(r,4,i),e.render(t,u),r.texture.generateMipmaps=w,e.setRenderTarget(r,5,i),e.render(t,d),e.setRenderTarget(m,g,y),e.xr.enabled=_,r.texture.needsPMREMUpdate=!0}}class lg extends jn{constructor(e,t,r,i,s,o,a,c,u,d){e=e!==void 0?e:[],t=t!==void 0?t:Ja,super(e,t,r,i,s,o,a,c,u,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class iw extends oo{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];t.encoding!==void 0&&(gm("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Qc?ti:to),this.texture=new lg(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Pn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Gf(5,5,5),s=new ao({name:"CubemapFromEquirect",uniforms:Uh(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:ms,blending:ja});s.uniforms.tEquirect.value=t;const o=new ir(i,s),a=t.minFilter;return t.minFilter===$a&&(t.minFilter=Pn),new lR(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}const rx=new oe,AF=new oe,CF=new xn;class Hl{constructor(e=new oe(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=rx.subVectors(r,t).cross(AF.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(rx),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||CF.getNormalMatrix(e),i=this.coplanarPoint(rx).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Zu=new Os,Fv=new oe;class yy{constructor(e=new Hl,t=new Hl,r=new Hl,i=new Hl,s=new Hl,o=new Hl){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=Va){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],c=i[3],u=i[4],d=i[5],m=i[6],g=i[7],y=i[8],_=i[9],w=i[10],x=i[11],S=i[12],b=i[13],T=i[14],C=i[15];if(r[0].setComponents(c-s,g-u,x-y,C-S).normalize(),r[1].setComponents(c+s,g+u,x+y,C+S).normalize(),r[2].setComponents(c+o,g+d,x+_,C+b).normalize(),r[3].setComponents(c-o,g-d,x-_,C-b).normalize(),r[4].setComponents(c-a,g-m,x-w,C-T).normalize(),t===Va)r[5].setComponents(c+a,g+m,x+w,C+T).normalize();else if(t===Fm)r[5].setComponents(a,m,w,T).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Zu.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Zu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Zu)}intersectsSprite(e){return Zu.center.set(0,0,0),Zu.radius=.7071067811865476,Zu.applyMatrix4(e.matrixWorld),this.intersectsSphere(Zu)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(Fv.x=i.normal.x>0?e.max.x:e.min.x,Fv.y=i.normal.y>0?e.max.y:e.min.y,Fv.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Fv)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function cR(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function RF(n,e){const t=e.isWebGL2,r=new WeakMap;function i(u,d){const m=u.array,g=u.usage,y=n.createBuffer();n.bindBuffer(d,y),n.bufferData(d,m,g),u.onUploadCallback();let _;if(m instanceof Float32Array)_=n.FLOAT;else if(m instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(t)_=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else _=n.UNSIGNED_SHORT;else if(m instanceof Int16Array)_=n.SHORT;else if(m instanceof Uint32Array)_=n.UNSIGNED_INT;else if(m instanceof Int32Array)_=n.INT;else if(m instanceof Int8Array)_=n.BYTE;else if(m instanceof Uint8Array)_=n.UNSIGNED_BYTE;else if(m instanceof Uint8ClampedArray)_=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+m);return{buffer:y,type:_,bytesPerElement:m.BYTES_PER_ELEMENT,version:u.version}}function s(u,d,m){const g=d.array,y=d.updateRange;n.bindBuffer(m,u),y.count===-1?n.bufferSubData(m,0,g):(t?n.bufferSubData(m,y.offset*g.BYTES_PER_ELEMENT,g,y.offset,y.count):n.bufferSubData(m,y.offset*g.BYTES_PER_ELEMENT,g.subarray(y.offset,y.offset+y.count)),y.count=-1),d.onUploadCallback()}function o(u){return u.isInterleavedBufferAttribute&&(u=u.data),r.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);const d=r.get(u);d&&(n.deleteBuffer(d.buffer),r.delete(u))}function c(u,d){if(u.isGLBufferAttribute){const g=r.get(u);(!g||g.version<u.version)&&r.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const m=r.get(u);m===void 0?r.set(u,i(u,d)):m.version<u.version&&(s(m.buffer,u,d),m.version=u.version)}return{get:o,remove:a,update:c}}class nl extends En{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),c=Math.floor(i),u=a+1,d=c+1,m=e/a,g=t/c,y=[],_=[],w=[],x=[];for(let S=0;S<d;S++){const b=S*g-o;for(let T=0;T<u;T++){const C=T*m-s;_.push(C,-b,0),w.push(0,0,1),x.push(T/a),x.push(1-S/c)}}for(let S=0;S<c;S++)for(let b=0;b<a;b++){const T=b+u*S,C=b+u*(S+1),P=b+1+u*(S+1),D=b+1+u*S;y.push(T,C,D),y.push(C,P,D)}this.setIndex(y),this.setAttribute("position",new Vt(_,3)),this.setAttribute("normal",new Vt(w,3)),this.setAttribute("uv",new Vt(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nl(e.width,e.height,e.widthSegments,e.heightSegments)}}var PF=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,LF=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,IF=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,NF=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,DF=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,UF=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,OF=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,FF=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,kF=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,BF=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,zF=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,HF=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,GF=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,VF=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,WF=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,jF=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,XF=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,YF=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,qF=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,KF=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,ZF=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,QF=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,JF=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,$F=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,ek=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,tk=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,nk=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,rk=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,ik="gl_FragColor = linearToOutputTexel( gl_FragColor );",sk=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,ok=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,ak=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,lk=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,ck=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,uk=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fk=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,dk=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,hk=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,pk=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,mk=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,gk=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,vk=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,yk=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,_k=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,xk=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Sk=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,wk=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Ek=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Mk=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Tk=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,bk=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,Ak=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Ck=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Rk=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Pk=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Lk=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Ik=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Nk=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Dk=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Uk=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Ok=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Fk=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,kk=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Bk=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,zk=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Hk=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Gk=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Vk=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Wk=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,jk=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Xk=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Yk=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,qk=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Kk=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Zk=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Qk=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Jk=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,$k=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,e4=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,t4=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,n4=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,r4=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,i4=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,s4=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,o4=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,a4=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,l4=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,c4=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,u4=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,f4=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,d4=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,h4=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,p4=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,m4=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,g4=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,v4=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,y4=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,_4=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,x4=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,S4=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,w4=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,E4=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,M4=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,T4=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,b4=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const A4=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,C4=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,R4=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,P4=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,L4=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,I4=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,N4=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,D4=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,U4=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,O4=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,F4=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,k4=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,B4=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,z4=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,H4=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,G4=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,V4=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,W4=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,j4=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,X4=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Y4=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,q4=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,K4=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Z4=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Q4=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,J4=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,eB=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tB=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,nB=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,rB=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,iB=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,sB=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,oB=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,yn={alphahash_fragment:PF,alphahash_pars_fragment:LF,alphamap_fragment:IF,alphamap_pars_fragment:NF,alphatest_fragment:DF,alphatest_pars_fragment:UF,aomap_fragment:OF,aomap_pars_fragment:FF,begin_vertex:kF,beginnormal_vertex:BF,bsdfs:zF,iridescence_fragment:HF,bumpmap_pars_fragment:GF,clipping_planes_fragment:VF,clipping_planes_pars_fragment:WF,clipping_planes_pars_vertex:jF,clipping_planes_vertex:XF,color_fragment:YF,color_pars_fragment:qF,color_pars_vertex:KF,color_vertex:ZF,common:QF,cube_uv_reflection_fragment:JF,defaultnormal_vertex:$F,displacementmap_pars_vertex:ek,displacementmap_vertex:tk,emissivemap_fragment:nk,emissivemap_pars_fragment:rk,colorspace_fragment:ik,colorspace_pars_fragment:sk,envmap_fragment:ok,envmap_common_pars_fragment:ak,envmap_pars_fragment:lk,envmap_pars_vertex:ck,envmap_physical_pars_fragment:Sk,envmap_vertex:uk,fog_vertex:fk,fog_pars_vertex:dk,fog_fragment:hk,fog_pars_fragment:pk,gradientmap_pars_fragment:mk,lightmap_fragment:gk,lightmap_pars_fragment:vk,lights_lambert_fragment:yk,lights_lambert_pars_fragment:_k,lights_pars_begin:xk,lights_toon_fragment:wk,lights_toon_pars_fragment:Ek,lights_phong_fragment:Mk,lights_phong_pars_fragment:Tk,lights_physical_fragment:bk,lights_physical_pars_fragment:Ak,lights_fragment_begin:Ck,lights_fragment_maps:Rk,lights_fragment_end:Pk,logdepthbuf_fragment:Lk,logdepthbuf_pars_fragment:Ik,logdepthbuf_pars_vertex:Nk,logdepthbuf_vertex:Dk,map_fragment:Uk,map_pars_fragment:Ok,map_particle_fragment:Fk,map_particle_pars_fragment:kk,metalnessmap_fragment:Bk,metalnessmap_pars_fragment:zk,morphcolor_vertex:Hk,morphnormal_vertex:Gk,morphtarget_pars_vertex:Vk,morphtarget_vertex:Wk,normal_fragment_begin:jk,normal_fragment_maps:Xk,normal_pars_fragment:Yk,normal_pars_vertex:qk,normal_vertex:Kk,normalmap_pars_fragment:Zk,clearcoat_normal_fragment_begin:Qk,clearcoat_normal_fragment_maps:Jk,clearcoat_pars_fragment:$k,iridescence_pars_fragment:e4,opaque_fragment:t4,packing:n4,premultiplied_alpha_fragment:r4,project_vertex:i4,dithering_fragment:s4,dithering_pars_fragment:o4,roughnessmap_fragment:a4,roughnessmap_pars_fragment:l4,shadowmap_pars_fragment:c4,shadowmap_pars_vertex:u4,shadowmap_vertex:f4,shadowmask_pars_fragment:d4,skinbase_vertex:h4,skinning_pars_vertex:p4,skinning_vertex:m4,skinnormal_vertex:g4,specularmap_fragment:v4,specularmap_pars_fragment:y4,tonemapping_fragment:_4,tonemapping_pars_fragment:x4,transmission_fragment:S4,transmission_pars_fragment:w4,uv_pars_fragment:E4,uv_pars_vertex:M4,uv_vertex:T4,worldpos_vertex:b4,background_vert:A4,background_frag:C4,backgroundCube_vert:R4,backgroundCube_frag:P4,cube_vert:L4,cube_frag:I4,depth_vert:N4,depth_frag:D4,distanceRGBA_vert:U4,distanceRGBA_frag:O4,equirect_vert:F4,equirect_frag:k4,linedashed_vert:B4,linedashed_frag:z4,meshbasic_vert:H4,meshbasic_frag:G4,meshlambert_vert:V4,meshlambert_frag:W4,meshmatcap_vert:j4,meshmatcap_frag:X4,meshnormal_vert:Y4,meshnormal_frag:q4,meshphong_vert:K4,meshphong_frag:Z4,meshphysical_vert:Q4,meshphysical_frag:J4,meshtoon_vert:$4,meshtoon_frag:eB,points_vert:tB,points_frag:nB,shadow_vert:rB,shadow_frag:iB,sprite_vert:sB,sprite_frag:oB},Pt={common:{diffuse:{value:new Rt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new xn},alphaMap:{value:null},alphaMapTransform:{value:new xn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new xn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new xn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new xn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new xn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new xn},normalScale:{value:new it(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new xn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new xn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new xn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new xn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Rt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Rt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new xn},alphaTest:{value:0},uvTransform:{value:new xn}},sprite:{diffuse:{value:new Rt(16777215)},opacity:{value:1},center:{value:new it(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new xn},alphaMap:{value:null},alphaMapTransform:{value:new xn},alphaTest:{value:0}}},fa={basic:{uniforms:ds([Pt.common,Pt.specularmap,Pt.envmap,Pt.aomap,Pt.lightmap,Pt.fog]),vertexShader:yn.meshbasic_vert,fragmentShader:yn.meshbasic_frag},lambert:{uniforms:ds([Pt.common,Pt.specularmap,Pt.envmap,Pt.aomap,Pt.lightmap,Pt.emissivemap,Pt.bumpmap,Pt.normalmap,Pt.displacementmap,Pt.fog,Pt.lights,{emissive:{value:new Rt(0)}}]),vertexShader:yn.meshlambert_vert,fragmentShader:yn.meshlambert_frag},phong:{uniforms:ds([Pt.common,Pt.specularmap,Pt.envmap,Pt.aomap,Pt.lightmap,Pt.emissivemap,Pt.bumpmap,Pt.normalmap,Pt.displacementmap,Pt.fog,Pt.lights,{emissive:{value:new Rt(0)},specular:{value:new Rt(1118481)},shininess:{value:30}}]),vertexShader:yn.meshphong_vert,fragmentShader:yn.meshphong_frag},standard:{uniforms:ds([Pt.common,Pt.envmap,Pt.aomap,Pt.lightmap,Pt.emissivemap,Pt.bumpmap,Pt.normalmap,Pt.displacementmap,Pt.roughnessmap,Pt.metalnessmap,Pt.fog,Pt.lights,{emissive:{value:new Rt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:yn.meshphysical_vert,fragmentShader:yn.meshphysical_frag},toon:{uniforms:ds([Pt.common,Pt.aomap,Pt.lightmap,Pt.emissivemap,Pt.bumpmap,Pt.normalmap,Pt.displacementmap,Pt.gradientmap,Pt.fog,Pt.lights,{emissive:{value:new Rt(0)}}]),vertexShader:yn.meshtoon_vert,fragmentShader:yn.meshtoon_frag},matcap:{uniforms:ds([Pt.common,Pt.bumpmap,Pt.normalmap,Pt.displacementmap,Pt.fog,{matcap:{value:null}}]),vertexShader:yn.meshmatcap_vert,fragmentShader:yn.meshmatcap_frag},points:{uniforms:ds([Pt.points,Pt.fog]),vertexShader:yn.points_vert,fragmentShader:yn.points_frag},dashed:{uniforms:ds([Pt.common,Pt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:yn.linedashed_vert,fragmentShader:yn.linedashed_frag},depth:{uniforms:ds([Pt.common,Pt.displacementmap]),vertexShader:yn.depth_vert,fragmentShader:yn.depth_frag},normal:{uniforms:ds([Pt.common,Pt.bumpmap,Pt.normalmap,Pt.displacementmap,{opacity:{value:1}}]),vertexShader:yn.meshnormal_vert,fragmentShader:yn.meshnormal_frag},sprite:{uniforms:ds([Pt.sprite,Pt.fog]),vertexShader:yn.sprite_vert,fragmentShader:yn.sprite_frag},background:{uniforms:{uvTransform:{value:new xn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:yn.background_vert,fragmentShader:yn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:yn.backgroundCube_vert,fragmentShader:yn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:yn.cube_vert,fragmentShader:yn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:yn.equirect_vert,fragmentShader:yn.equirect_frag},distanceRGBA:{uniforms:ds([Pt.common,Pt.displacementmap,{referencePosition:{value:new oe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:yn.distanceRGBA_vert,fragmentShader:yn.distanceRGBA_frag},shadow:{uniforms:ds([Pt.lights,Pt.fog,{color:{value:new Rt(0)},opacity:{value:1}}]),vertexShader:yn.shadow_vert,fragmentShader:yn.shadow_frag}};fa.physical={uniforms:ds([fa.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new xn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new xn},clearcoatNormalScale:{value:new it(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new xn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new xn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new xn},sheen:{value:0},sheenColor:{value:new Rt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new xn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new xn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new xn},transmissionSamplerSize:{value:new it},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new xn},attenuationDistance:{value:0},attenuationColor:{value:new Rt(0)},specularColor:{value:new Rt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new xn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new xn},anisotropyVector:{value:new it},anisotropyMap:{value:null},anisotropyMapTransform:{value:new xn}}]),vertexShader:yn.meshphysical_vert,fragmentShader:yn.meshphysical_frag};const kv={r:0,b:0,g:0};function aB(n,e,t,r,i,s,o){const a=new Rt(0);let c=s===!0?0:1,u,d,m=null,g=0,y=null;function _(x,S){let b=!1,T=S.isScene===!0?S.background:null;T&&T.isTexture&&(T=(S.backgroundBlurriness>0?t:e).get(T)),T===null?w(a,c):T&&T.isColor&&(w(T,1),b=!0);const C=n.xr.getEnvironmentBlendMode();C==="additive"?r.buffers.color.setClear(0,0,0,1,o):C==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(n.autoClear||b)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),T&&(T.isCubeTexture||T.mapping===Vh)?(d===void 0&&(d=new ir(new Gf(1,1,1),new ao({name:"BackgroundCubeMaterial",uniforms:Uh(fa.backgroundCube.uniforms),vertexShader:fa.backgroundCube.vertexShader,fragmentShader:fa.backgroundCube.fragmentShader,side:ms,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(P,D,U){this.matrixWorld.copyPosition(U.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(d)),d.material.uniforms.envMap.value=T,d.material.uniforms.flipEnvMap.value=T.isCubeTexture&&T.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=S.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,d.material.toneMapped=Kn.getTransfer(T.colorSpace)!==cr,(m!==T||g!==T.version||y!==n.toneMapping)&&(d.material.needsUpdate=!0,m=T,g=T.version,y=n.toneMapping),d.layers.enableAll(),x.unshift(d,d.geometry,d.material,0,0,null)):T&&T.isTexture&&(u===void 0&&(u=new ir(new nl(2,2),new ao({name:"BackgroundMaterial",uniforms:Uh(fa.background.uniforms),vertexShader:fa.background.vertexShader,fragmentShader:fa.background.fragmentShader,side:Qa,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=T,u.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,u.material.toneMapped=Kn.getTransfer(T.colorSpace)!==cr,T.matrixAutoUpdate===!0&&T.updateMatrix(),u.material.uniforms.uvTransform.value.copy(T.matrix),(m!==T||g!==T.version||y!==n.toneMapping)&&(u.material.needsUpdate=!0,m=T,g=T.version,y=n.toneMapping),u.layers.enableAll(),x.unshift(u,u.geometry,u.material,0,0,null))}function w(x,S){x.getRGB(kv,aR(n)),r.buffers.color.setClear(kv.r,kv.g,kv.b,S,o)}return{getClearColor:function(){return a},setClearColor:function(x,S=1){a.set(x),c=S,w(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(x){c=x,w(a,c)},render:_}}function lB(n,e,t,r){const i=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},c=x(null);let u=c,d=!1;function m(H,ie,re,ue,G){let K=!1;if(o){const W=w(ue,re,ie);u!==W&&(u=W,y(u.object)),K=S(H,ue,re,G),K&&b(H,ue,re,G)}else{const W=ie.wireframe===!0;(u.geometry!==ue.id||u.program!==re.id||u.wireframe!==W)&&(u.geometry=ue.id,u.program=re.id,u.wireframe=W,K=!0)}G!==null&&t.update(G,n.ELEMENT_ARRAY_BUFFER),(K||d)&&(d=!1,F(H,ie,re,ue),G!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(G).buffer))}function g(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function y(H){return r.isWebGL2?n.bindVertexArray(H):s.bindVertexArrayOES(H)}function _(H){return r.isWebGL2?n.deleteVertexArray(H):s.deleteVertexArrayOES(H)}function w(H,ie,re){const ue=re.wireframe===!0;let G=a[H.id];G===void 0&&(G={},a[H.id]=G);let K=G[ie.id];K===void 0&&(K={},G[ie.id]=K);let W=K[ue];return W===void 0&&(W=x(g()),K[ue]=W),W}function x(H){const ie=[],re=[],ue=[];for(let G=0;G<i;G++)ie[G]=0,re[G]=0,ue[G]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ie,enabledAttributes:re,attributeDivisors:ue,object:H,attributes:{},index:null}}function S(H,ie,re,ue){const G=u.attributes,K=ie.attributes;let W=0;const L=re.getAttributes();for(const B in L)if(L[B].location>=0){const ae=G[B];let de=K[B];if(de===void 0&&(B==="instanceMatrix"&&H.instanceMatrix&&(de=H.instanceMatrix),B==="instanceColor"&&H.instanceColor&&(de=H.instanceColor)),ae===void 0||ae.attribute!==de||de&&ae.data!==de.data)return!0;W++}return u.attributesNum!==W||u.index!==ue}function b(H,ie,re,ue){const G={},K=ie.attributes;let W=0;const L=re.getAttributes();for(const B in L)if(L[B].location>=0){let ae=K[B];ae===void 0&&(B==="instanceMatrix"&&H.instanceMatrix&&(ae=H.instanceMatrix),B==="instanceColor"&&H.instanceColor&&(ae=H.instanceColor));const de={};de.attribute=ae,ae&&ae.data&&(de.data=ae.data),G[B]=de,W++}u.attributes=G,u.attributesNum=W,u.index=ue}function T(){const H=u.newAttributes;for(let ie=0,re=H.length;ie<re;ie++)H[ie]=0}function C(H){P(H,0)}function P(H,ie){const re=u.newAttributes,ue=u.enabledAttributes,G=u.attributeDivisors;re[H]=1,ue[H]===0&&(n.enableVertexAttribArray(H),ue[H]=1),G[H]!==ie&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](H,ie),G[H]=ie)}function D(){const H=u.newAttributes,ie=u.enabledAttributes;for(let re=0,ue=ie.length;re<ue;re++)ie[re]!==H[re]&&(n.disableVertexAttribArray(re),ie[re]=0)}function U(H,ie,re,ue,G,K,W){W===!0?n.vertexAttribIPointer(H,ie,re,G,K):n.vertexAttribPointer(H,ie,re,ue,G,K)}function F(H,ie,re,ue){if(r.isWebGL2===!1&&(H.isInstancedMesh||ue.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;T();const G=ue.attributes,K=re.getAttributes(),W=ie.defaultAttributeValues;for(const L in K){const B=K[L];if(B.location>=0){let ne=G[L];if(ne===void 0&&(L==="instanceMatrix"&&H.instanceMatrix&&(ne=H.instanceMatrix),L==="instanceColor"&&H.instanceColor&&(ne=H.instanceColor)),ne!==void 0){const ae=ne.normalized,de=ne.itemSize,pe=t.get(ne);if(pe===void 0)continue;const xe=pe.buffer,Me=pe.type,Xe=pe.bytesPerElement,ot=r.isWebGL2===!0&&(Me===n.INT||Me===n.UNSIGNED_INT||ne.gpuType===py);if(ne.isInterleavedBufferAttribute){const He=ne.data,te=He.stride,Ye=ne.offset;if(He.isInstancedInterleavedBuffer){for(let Re=0;Re<B.locationSize;Re++)P(B.location+Re,He.meshPerAttribute);H.isInstancedMesh!==!0&&ue._maxInstanceCount===void 0&&(ue._maxInstanceCount=He.meshPerAttribute*He.count)}else for(let Re=0;Re<B.locationSize;Re++)C(B.location+Re);n.bindBuffer(n.ARRAY_BUFFER,xe);for(let Re=0;Re<B.locationSize;Re++)U(B.location+Re,de/B.locationSize,Me,ae,te*Xe,(Ye+de/B.locationSize*Re)*Xe,ot)}else{if(ne.isInstancedBufferAttribute){for(let He=0;He<B.locationSize;He++)P(B.location+He,ne.meshPerAttribute);H.isInstancedMesh!==!0&&ue._maxInstanceCount===void 0&&(ue._maxInstanceCount=ne.meshPerAttribute*ne.count)}else for(let He=0;He<B.locationSize;He++)C(B.location+He);n.bindBuffer(n.ARRAY_BUFFER,xe);for(let He=0;He<B.locationSize;He++)U(B.location+He,de/B.locationSize,Me,ae,de*Xe,de/B.locationSize*He*Xe,ot)}}else if(W!==void 0){const ae=W[L];if(ae!==void 0)switch(ae.length){case 2:n.vertexAttrib2fv(B.location,ae);break;case 3:n.vertexAttrib3fv(B.location,ae);break;case 4:n.vertexAttrib4fv(B.location,ae);break;default:n.vertexAttrib1fv(B.location,ae)}}}}D()}function I(){j();for(const H in a){const ie=a[H];for(const re in ie){const ue=ie[re];for(const G in ue)_(ue[G].object),delete ue[G];delete ie[re]}delete a[H]}}function k(H){if(a[H.id]===void 0)return;const ie=a[H.id];for(const re in ie){const ue=ie[re];for(const G in ue)_(ue[G].object),delete ue[G];delete ie[re]}delete a[H.id]}function Q(H){for(const ie in a){const re=a[ie];if(re[H.id]===void 0)continue;const ue=re[H.id];for(const G in ue)_(ue[G].object),delete ue[G];delete re[H.id]}}function j(){$(),d=!0,u!==c&&(u=c,y(u.object))}function $(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:m,reset:j,resetDefaultState:$,dispose:I,releaseStatesOfGeometry:k,releaseStatesOfProgram:Q,initAttributes:T,enableAttribute:C,disableUnusedAttributes:D}}function cB(n,e,t,r){const i=r.isWebGL2;let s;function o(u){s=u}function a(u,d){n.drawArrays(s,u,d),t.update(d,s,1)}function c(u,d,m){if(m===0)return;let g,y;if(i)g=n,y="drawArraysInstanced";else if(g=e.get("ANGLE_instanced_arrays"),y="drawArraysInstancedANGLE",g===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}g[y](s,u,d,m),t.update(d,s,m)}this.setMode=o,this.render=a,this.renderInstances=c}function uB(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const U=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(U.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(U){if(U==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";U="mediump"}return U==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const c=s(a);c!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",c,"instead."),a=c);const u=o||e.has("WEBGL_draw_buffers"),d=t.logarithmicDepthBuffer===!0,m=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),g=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),y=n.getParameter(n.MAX_TEXTURE_SIZE),_=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),w=n.getParameter(n.MAX_VERTEX_ATTRIBS),x=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),S=n.getParameter(n.MAX_VARYING_VECTORS),b=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),T=g>0,C=o||e.has("OES_texture_float"),P=T&&C,D=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:d,maxTextures:m,maxVertexTextures:g,maxTextureSize:y,maxCubemapSize:_,maxAttributes:w,maxVertexUniforms:x,maxVaryings:S,maxFragmentUniforms:b,vertexTextures:T,floatFragmentTextures:C,floatVertexTextures:P,maxSamples:D}}function fB(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new Hl,a=new xn,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(m,g){const y=m.length!==0||g||r!==0||i;return i=g,r=m.length,y},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(m,g){t=d(m,g,0)},this.setState=function(m,g,y){const _=m.clippingPlanes,w=m.clipIntersection,x=m.clipShadows,S=n.get(m);if(!i||_===null||_.length===0||s&&!x)s?d(null):u();else{const b=s?0:r,T=b*4;let C=S.clippingState||null;c.value=C,C=d(_,g,T,y);for(let P=0;P!==T;++P)C[P]=t[P];S.clippingState=C,this.numIntersection=w?this.numPlanes:0,this.numPlanes+=b}};function u(){c.value!==t&&(c.value=t,c.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function d(m,g,y,_){const w=m!==null?m.length:0;let x=null;if(w!==0){if(x=c.value,_!==!0||x===null){const S=y+w*4,b=g.matrixWorldInverse;a.getNormalMatrix(b),(x===null||x.length<S)&&(x=new Float32Array(S));for(let T=0,C=y;T!==w;++T,C+=4)o.copy(m[T]).applyMatrix4(b,a),o.normal.toArray(x,C),x[C+3]=o.constant}c.value=x,c.needsUpdate=!0}return e.numPlanes=w,e.numIntersection=0,x}}function dB(n){let e=new WeakMap;function t(o,a){return a===Lh?o.mapping=Ja:a===Pm&&(o.mapping=su),o}function r(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===Lh||a===Pm)if(e.has(o)){const c=e.get(o).texture;return t(c,o.mapping)}else{const c=o.image;if(c&&c.height>0){const u=new iw(c.height/2);return u.fromEquirectangularTexture(n,o),e.set(o,u),o.addEventListener("dispose",i),t(u.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const c=e.get(a);c!==void 0&&(e.delete(a),c.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class Ya extends ag{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,c=i-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=d*this.view.offsetY,c=a-d*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const lh=4,GM=[.125,.215,.35,.446,.526,.582],cf=20,ix=new Ya,VM=new Rt;let sx=null,ox=0,ax=0;const lf=(1+Math.sqrt(5))/2,Kd=1/lf,WM=[new oe(1,1,1),new oe(-1,1,1),new oe(1,1,-1),new oe(-1,1,-1),new oe(0,lf,Kd),new oe(0,lf,-Kd),new oe(Kd,0,lf),new oe(-Kd,0,lf),new oe(lf,Kd,0),new oe(-lf,Kd,0)];class q1{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){sx=this._renderer.getRenderTarget(),ox=this._renderer.getActiveCubeFace(),ax=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=YM(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=XM(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(sx,ox,ax),e.scissorTest=!1,Bv(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Ja||e.mapping===su?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),sx=this._renderer.getRenderTarget(),ox=this._renderer.getActiveCubeFace(),ax=this._renderer.getActiveMipmapLevel();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:Pn,minFilter:Pn,generateMipmaps:!1,type:bi,format:di,colorSpace:so,depthBuffer:!1},i=jM(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=jM(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=hB(s)),this._blurMaterial=pB(s,e,t)}return i}_compileMaterial(e){const t=new ir(this._lodPlanes[0],e);this._renderer.compile(t,ix)}_sceneToCubeUV(e,t,r,i){const a=new Or(90,1,t,r),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,m=d.autoClear,g=d.toneMapping;d.getClearColor(VM),d.toneMapping=Xa,d.autoClear=!1;const y=new Ki({name:"PMREM.Background",side:ms,depthWrite:!1,depthTest:!1}),_=new ir(new Gf,y);let w=!1;const x=e.background;x?x.isColor&&(y.color.copy(x),e.background=null,w=!0):(y.color.copy(VM),w=!0);for(let S=0;S<6;S++){const b=S%3;b===0?(a.up.set(0,c[S],0),a.lookAt(u[S],0,0)):b===1?(a.up.set(0,0,c[S]),a.lookAt(0,u[S],0)):(a.up.set(0,c[S],0),a.lookAt(0,0,u[S]));const T=this._cubeSize;Bv(i,b*T,S>2?T:0,T,T),d.setRenderTarget(i),w&&d.render(_,a),d.render(e,a)}_.geometry.dispose(),_.material.dispose(),d.toneMapping=g,d.autoClear=m,e.background=x}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===Ja||e.mapping===su;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=YM()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=XM());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new ir(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const c=this._cubeSize;Bv(t,0,0,3*c,2*c),r.setRenderTarget(t),r.render(o,ix)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=WM[(i-1)%WM.length];this._blur(e,i-1,i,s,o)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const c=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,m=new ir(this._lodPlanes[i],u),g=u.uniforms,y=this._sizeLods[r]-1,_=isFinite(s)?Math.PI/(2*y):2*Math.PI/(2*cf-1),w=s/_,x=isFinite(s)?1+Math.floor(d*w):cf;x>cf&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${cf}`);const S=[];let b=0;for(let U=0;U<cf;++U){const F=U/w,I=Math.exp(-F*F/2);S.push(I),U===0?b+=I:U<x&&(b+=2*I)}for(let U=0;U<S.length;U++)S[U]=S[U]/b;g.envMap.value=e.texture,g.samples.value=x,g.weights.value=S,g.latitudinal.value=o==="latitudinal",a&&(g.poleAxis.value=a);const{_lodMax:T}=this;g.dTheta.value=_,g.mipInt.value=T-r;const C=this._sizeLods[i],P=3*C*(i>T-lh?i-T+lh:0),D=4*(this._cubeSize-C);Bv(t,P,D,3*C,2*C),c.setRenderTarget(t),c.render(m,ix)}}function hB(n){const e=[],t=[],r=[];let i=n;const s=n-lh+1+GM.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let c=1/a;o>n-lh?c=GM[o-n+lh-1]:o===0&&(c=0),r.push(c);const u=1/(a-2),d=-u,m=1+u,g=[d,d,m,d,m,m,d,d,m,m,d,m],y=6,_=6,w=3,x=2,S=1,b=new Float32Array(w*_*y),T=new Float32Array(x*_*y),C=new Float32Array(S*_*y);for(let D=0;D<y;D++){const U=D%3*2/3-1,F=D>2?0:-1,I=[U,F,0,U+2/3,F,0,U+2/3,F+1,0,U,F,0,U+2/3,F+1,0,U,F+1,0];b.set(I,w*_*D),T.set(g,x*_*D);const k=[D,D,D,D,D,D];C.set(k,S*_*D)}const P=new En;P.setAttribute("position",new Xn(b,w)),P.setAttribute("uv",new Xn(T,x)),P.setAttribute("faceIndex",new Xn(C,S)),e.push(P),i>lh&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function jM(n,e,t){const r=new oo(n,e,t);return r.texture.mapping=Vh,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Bv(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function pB(n,e,t){const r=new Float32Array(cf),i=new oe(0,1,0);return new ao({name:"SphericalGaussianBlur",defines:{n:cf,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:sw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ja,depthTest:!1,depthWrite:!1})}function XM(){return new ao({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:sw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ja,depthTest:!1,depthWrite:!1})}function YM(){return new ao({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:sw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ja,depthTest:!1,depthWrite:!1})}function sw(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function mB(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const c=a.mapping,u=c===Lh||c===Pm,d=c===Ja||c===su;if(u||d)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let m=e.get(a);return t===null&&(t=new q1(n)),m=u?t.fromEquirectangular(a,m):t.fromCubemap(a,m),e.set(a,m),m.texture}else{if(e.has(a))return e.get(a).texture;{const m=a.image;if(u&&m&&m.height>0||d&&m&&i(m)){t===null&&(t=new q1(n));const g=u?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,g),a.addEventListener("dispose",s),g.texture}else return null}}}return a}function i(a){let c=0;const u=6;for(let d=0;d<u;d++)a[d]!==void 0&&c++;return c===u}function s(a){const c=a.target;c.removeEventListener("dispose",s);const u=e.get(c);u!==void 0&&(e.delete(c),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function gB(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function vB(n,e,t,r){const i={},s=new WeakMap;function o(m){const g=m.target;g.index!==null&&e.remove(g.index);for(const _ in g.attributes)e.remove(g.attributes[_]);for(const _ in g.morphAttributes){const w=g.morphAttributes[_];for(let x=0,S=w.length;x<S;x++)e.remove(w[x])}g.removeEventListener("dispose",o),delete i[g.id];const y=s.get(g);y&&(e.remove(y),s.delete(g)),r.releaseStatesOfGeometry(g),g.isInstancedBufferGeometry===!0&&delete g._maxInstanceCount,t.memory.geometries--}function a(m,g){return i[g.id]===!0||(g.addEventListener("dispose",o),i[g.id]=!0,t.memory.geometries++),g}function c(m){const g=m.attributes;for(const _ in g)e.update(g[_],n.ARRAY_BUFFER);const y=m.morphAttributes;for(const _ in y){const w=y[_];for(let x=0,S=w.length;x<S;x++)e.update(w[x],n.ARRAY_BUFFER)}}function u(m){const g=[],y=m.index,_=m.attributes.position;let w=0;if(y!==null){const b=y.array;w=y.version;for(let T=0,C=b.length;T<C;T+=3){const P=b[T+0],D=b[T+1],U=b[T+2];g.push(P,D,D,U,U,P)}}else if(_!==void 0){const b=_.array;w=_.version;for(let T=0,C=b.length/3-1;T<C;T+=3){const P=T+0,D=T+1,U=T+2;g.push(P,D,D,U,U,P)}}else return;const x=new(rR(g)?nw:tw)(g,1);x.version=w;const S=s.get(m);S&&e.remove(S),s.set(m,x)}function d(m){const g=s.get(m);if(g){const y=m.index;y!==null&&g.version<y.version&&u(m)}else u(m);return s.get(m)}return{get:a,update:c,getWireframeAttribute:d}}function yB(n,e,t,r){const i=r.isWebGL2;let s;function o(g){s=g}let a,c;function u(g){a=g.type,c=g.bytesPerElement}function d(g,y){n.drawElements(s,y,a,g*c),t.update(y,s,1)}function m(g,y,_){if(_===0)return;let w,x;if(i)w=n,x="drawElementsInstanced";else if(w=e.get("ANGLE_instanced_arrays"),x="drawElementsInstancedANGLE",w===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}w[x](s,y,a,g*c,_),t.update(y,s,_)}this.setMode=o,this.setIndex=u,this.render=d,this.renderInstances=m}function _B(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function xB(n,e){return n[0]-e[0]}function SB(n,e){return Math.abs(e[1])-Math.abs(n[1])}function wB(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,o=new Hn,a=[];for(let u=0;u<8;u++)a[u]=[u,0];function c(u,d,m){const g=u.morphTargetInfluences;if(e.isWebGL2===!0){const _=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,w=_!==void 0?_.length:0;let x=s.get(d);if(x===void 0||x.count!==w){let ie=function(){$.dispose(),s.delete(d),d.removeEventListener("dispose",ie)};var y=ie;x!==void 0&&x.texture.dispose();const T=d.morphAttributes.position!==void 0,C=d.morphAttributes.normal!==void 0,P=d.morphAttributes.color!==void 0,D=d.morphAttributes.position||[],U=d.morphAttributes.normal||[],F=d.morphAttributes.color||[];let I=0;T===!0&&(I=1),C===!0&&(I=2),P===!0&&(I=3);let k=d.attributes.position.count*I,Q=1;k>e.maxTextureSize&&(Q=Math.ceil(k/e.maxTextureSize),k=e.maxTextureSize);const j=new Float32Array(k*Q*4*w),$=new vy(j,k,Q,w);$.type=pi,$.needsUpdate=!0;const H=I*4;for(let re=0;re<w;re++){const ue=D[re],G=U[re],K=F[re],W=k*Q*4*re;for(let L=0;L<ue.count;L++){const B=L*H;T===!0&&(o.fromBufferAttribute(ue,L),j[W+B+0]=o.x,j[W+B+1]=o.y,j[W+B+2]=o.z,j[W+B+3]=0),C===!0&&(o.fromBufferAttribute(G,L),j[W+B+4]=o.x,j[W+B+5]=o.y,j[W+B+6]=o.z,j[W+B+7]=0),P===!0&&(o.fromBufferAttribute(K,L),j[W+B+8]=o.x,j[W+B+9]=o.y,j[W+B+10]=o.z,j[W+B+11]=K.itemSize===4?o.w:1)}}x={count:w,texture:$,size:new it(k,Q)},s.set(d,x),d.addEventListener("dispose",ie)}let S=0;for(let T=0;T<g.length;T++)S+=g[T];const b=d.morphTargetsRelative?1:1-S;m.getUniforms().setValue(n,"morphTargetBaseInfluence",b),m.getUniforms().setValue(n,"morphTargetInfluences",g),m.getUniforms().setValue(n,"morphTargetsTexture",x.texture,t),m.getUniforms().setValue(n,"morphTargetsTextureSize",x.size)}else{const _=g===void 0?0:g.length;let w=r[d.id];if(w===void 0||w.length!==_){w=[];for(let C=0;C<_;C++)w[C]=[C,0];r[d.id]=w}for(let C=0;C<_;C++){const P=w[C];P[0]=C,P[1]=g[C]}w.sort(SB);for(let C=0;C<8;C++)C<_&&w[C][1]?(a[C][0]=w[C][0],a[C][1]=w[C][1]):(a[C][0]=Number.MAX_SAFE_INTEGER,a[C][1]=0);a.sort(xB);const x=d.morphAttributes.position,S=d.morphAttributes.normal;let b=0;for(let C=0;C<8;C++){const P=a[C],D=P[0],U=P[1];D!==Number.MAX_SAFE_INTEGER&&U?(x&&d.getAttribute("morphTarget"+C)!==x[D]&&d.setAttribute("morphTarget"+C,x[D]),S&&d.getAttribute("morphNormal"+C)!==S[D]&&d.setAttribute("morphNormal"+C,S[D]),i[C]=U,b+=U):(x&&d.hasAttribute("morphTarget"+C)===!0&&d.deleteAttribute("morphTarget"+C),S&&d.hasAttribute("morphNormal"+C)===!0&&d.deleteAttribute("morphNormal"+C),i[C]=0)}const T=d.morphTargetsRelative?1:1-b;m.getUniforms().setValue(n,"morphTargetBaseInfluence",T),m.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:c}}function EB(n,e,t,r){let i=new WeakMap;function s(c){const u=r.render.frame,d=c.geometry,m=e.get(c,d);if(i.get(m)!==u&&(e.update(m),i.set(m,u)),c.isInstancedMesh&&(c.hasEventListener("dispose",a)===!1&&c.addEventListener("dispose",a),i.get(c)!==u&&(t.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,n.ARRAY_BUFFER),i.set(c,u))),c.isSkinnedMesh){const g=c.skeleton;i.get(g)!==u&&(g.update(),i.set(g,u))}return m}function o(){i=new WeakMap}function a(c){const u=c.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:o}}const uR=new jn,fR=new vy,dR=new ew,hR=new lg,qM=[],KM=[],ZM=new Float32Array(16),QM=new Float32Array(9),JM=new Float32Array(4);function Wh(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=qM[i];if(s===void 0&&(s=new Float32Array(i),qM[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function gi(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function vi(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function _y(n,e){let t=KM[e];t===void 0&&(t=new Int32Array(e),KM[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function MB(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function TB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(gi(t,e))return;n.uniform2fv(this.addr,e),vi(t,e)}}function bB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(gi(t,e))return;n.uniform3fv(this.addr,e),vi(t,e)}}function AB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(gi(t,e))return;n.uniform4fv(this.addr,e),vi(t,e)}}function CB(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(gi(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),vi(t,e)}else{if(gi(t,r))return;JM.set(r),n.uniformMatrix2fv(this.addr,!1,JM),vi(t,r)}}function RB(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(gi(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),vi(t,e)}else{if(gi(t,r))return;QM.set(r),n.uniformMatrix3fv(this.addr,!1,QM),vi(t,r)}}function PB(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(gi(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),vi(t,e)}else{if(gi(t,r))return;ZM.set(r),n.uniformMatrix4fv(this.addr,!1,ZM),vi(t,r)}}function LB(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function IB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(gi(t,e))return;n.uniform2iv(this.addr,e),vi(t,e)}}function NB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(gi(t,e))return;n.uniform3iv(this.addr,e),vi(t,e)}}function DB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(gi(t,e))return;n.uniform4iv(this.addr,e),vi(t,e)}}function UB(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function OB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(gi(t,e))return;n.uniform2uiv(this.addr,e),vi(t,e)}}function FB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(gi(t,e))return;n.uniform3uiv(this.addr,e),vi(t,e)}}function kB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(gi(t,e))return;n.uniform4uiv(this.addr,e),vi(t,e)}}function BB(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2D(e||uR,i)}function zB(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||dR,i)}function HB(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||hR,i)}function GB(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||fR,i)}function VB(n){switch(n){case 5126:return MB;case 35664:return TB;case 35665:return bB;case 35666:return AB;case 35674:return CB;case 35675:return RB;case 35676:return PB;case 5124:case 35670:return LB;case 35667:case 35671:return IB;case 35668:case 35672:return NB;case 35669:case 35673:return DB;case 5125:return UB;case 36294:return OB;case 36295:return FB;case 36296:return kB;case 35678:case 36198:case 36298:case 36306:case 35682:return BB;case 35679:case 36299:case 36307:return zB;case 35680:case 36300:case 36308:case 36293:return HB;case 36289:case 36303:case 36311:case 36292:return GB}}function WB(n,e){n.uniform1fv(this.addr,e)}function jB(n,e){const t=Wh(e,this.size,2);n.uniform2fv(this.addr,t)}function XB(n,e){const t=Wh(e,this.size,3);n.uniform3fv(this.addr,t)}function YB(n,e){const t=Wh(e,this.size,4);n.uniform4fv(this.addr,t)}function qB(n,e){const t=Wh(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function KB(n,e){const t=Wh(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function ZB(n,e){const t=Wh(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function QB(n,e){n.uniform1iv(this.addr,e)}function JB(n,e){n.uniform2iv(this.addr,e)}function $B(n,e){n.uniform3iv(this.addr,e)}function ez(n,e){n.uniform4iv(this.addr,e)}function tz(n,e){n.uniform1uiv(this.addr,e)}function nz(n,e){n.uniform2uiv(this.addr,e)}function rz(n,e){n.uniform3uiv(this.addr,e)}function iz(n,e){n.uniform4uiv(this.addr,e)}function sz(n,e,t){const r=this.cache,i=e.length,s=_y(t,i);gi(r,s)||(n.uniform1iv(this.addr,s),vi(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||uR,s[o])}function oz(n,e,t){const r=this.cache,i=e.length,s=_y(t,i);gi(r,s)||(n.uniform1iv(this.addr,s),vi(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||dR,s[o])}function az(n,e,t){const r=this.cache,i=e.length,s=_y(t,i);gi(r,s)||(n.uniform1iv(this.addr,s),vi(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||hR,s[o])}function lz(n,e,t){const r=this.cache,i=e.length,s=_y(t,i);gi(r,s)||(n.uniform1iv(this.addr,s),vi(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||fR,s[o])}function cz(n){switch(n){case 5126:return WB;case 35664:return jB;case 35665:return XB;case 35666:return YB;case 35674:return qB;case 35675:return KB;case 35676:return ZB;case 5124:case 35670:return QB;case 35667:case 35671:return JB;case 35668:case 35672:return $B;case 35669:case 35673:return ez;case 5125:return tz;case 36294:return nz;case 36295:return rz;case 36296:return iz;case 35678:case 36198:case 36298:case 36306:case 35682:return sz;case 35679:case 36299:case 36307:return oz;case 35680:case 36300:case 36308:case 36293:return az;case 36289:case 36303:case 36311:case 36292:return lz}}class uz{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=VB(t.type)}}class fz{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=cz(t.type)}}class dz{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const lx=/(\w+)(\])?(\[|\.)?/g;function $M(n,e){n.seq.push(e),n.map[e.id]=e}function hz(n,e,t){const r=n.name,i=r.length;for(lx.lastIndex=0;;){const s=lx.exec(r),o=lx.lastIndex;let a=s[1];const c=s[2]==="]",u=s[3];if(c&&(a=a|0),u===void 0||u==="["&&o+2===i){$M(t,u===void 0?new uz(a,n,e):new fz(a,n,e));break}else{let m=t.map[a];m===void 0&&(m=new dz(a),$M(t,m)),t=m}}}class T0{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);hz(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],c=r[a.id];c.needsUpdate!==!1&&a.setValue(e,c.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function eT(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const pz=37297;let mz=0;function gz(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}function vz(n){const e=Kn.getPrimaries(Kn.workingColorSpace),t=Kn.getPrimaries(n);let r;switch(e===t?r="":e===Um&&t===Dm?r="LinearDisplayP3ToLinearSRGB":e===Dm&&t===Um&&(r="LinearSRGBToLinearDisplayP3"),n){case so:case sg:return[r,"LinearTransferOETF"];case ti:case gy:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[r,"LinearTransferOETF"]}}function tT(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+gz(n.getShaderSource(e),o)}else return i}function yz(n,e){const t=vz(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function _z(n,e){let t;switch(e){case PC:t="Linear";break;case LC:t="Reinhard";break;case IC:t="OptimizedCineon";break;case BS:t="ACESFilmic";break;case NC:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function xz(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(um).join(`
`)}function Sz(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function wz(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function um(n){return n!==""}function nT(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function rT(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Ez=/^[ \t]*#include +<([\w\d./]+)>/gm;function K1(n){return n.replace(Ez,Tz)}const Mz=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function Tz(n,e){let t=yn[e];if(t===void 0){const r=Mz.get(e);if(r!==void 0)t=yn[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return K1(t)}const bz=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function iT(n){return n.replace(bz,Az)}function Az(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function sT(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Cz(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===fy?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===pm?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===ca&&(e="SHADOWMAP_TYPE_VSM"),e}function Rz(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Ja:case su:e="ENVMAP_TYPE_CUBE";break;case Vh:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Pz(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case su:e="ENVMAP_MODE_REFRACTION";break}return e}function Lz(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case ig:e="ENVMAP_BLENDING_MULTIPLY";break;case CC:e="ENVMAP_BLENDING_MIX";break;case RC:e="ENVMAP_BLENDING_ADD";break}return e}function Iz(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function Nz(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const c=Cz(t),u=Rz(t),d=Pz(t),m=Lz(t),g=Iz(t),y=t.isWebGL2?"":xz(t),_=Sz(s),w=i.createProgram();let x,S,b=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(x=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(um).join(`
`),x.length>0&&(x+=`
`),S=[y,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(um).join(`
`),S.length>0&&(S+=`
`)):(x=[sT(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(um).join(`
`),S=[y,sT(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",t.envMap?"#define "+m:"",g?"#define CUBEUV_TEXEL_WIDTH "+g.texelWidth:"",g?"#define CUBEUV_TEXEL_HEIGHT "+g.texelHeight:"",g?"#define CUBEUV_MAX_MIP "+g.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Xa?"#define TONE_MAPPING":"",t.toneMapping!==Xa?yn.tonemapping_pars_fragment:"",t.toneMapping!==Xa?_z("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",yn.colorspace_pars_fragment,yz("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(um).join(`
`)),o=K1(o),o=nT(o,t),o=rT(o,t),a=K1(a),a=nT(a,t),a=rT(a,t),o=iT(o),a=iT(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(b=`#version 300 es
`,x=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,S=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===X1?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===X1?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);const T=b+x+o,C=b+S+a,P=eT(i,i.VERTEX_SHADER,T),D=eT(i,i.FRAGMENT_SHADER,C);i.attachShader(w,P),i.attachShader(w,D),t.index0AttributeName!==void 0?i.bindAttribLocation(w,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(w,0,"position"),i.linkProgram(w);function U(Q){if(n.debug.checkShaderErrors){const j=i.getProgramInfoLog(w).trim(),$=i.getShaderInfoLog(P).trim(),H=i.getShaderInfoLog(D).trim();let ie=!0,re=!0;if(i.getProgramParameter(w,i.LINK_STATUS)===!1)if(ie=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,w,P,D);else{const ue=tT(i,P,"vertex"),G=tT(i,D,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(w,i.VALIDATE_STATUS)+`

Program Info Log: `+j+`
`+ue+`
`+G)}else j!==""?console.warn("THREE.WebGLProgram: Program Info Log:",j):($===""||H==="")&&(re=!1);re&&(Q.diagnostics={runnable:ie,programLog:j,vertexShader:{log:$,prefix:x},fragmentShader:{log:H,prefix:S}})}i.deleteShader(P),i.deleteShader(D),F=new T0(i,w),I=wz(i,w)}let F;this.getUniforms=function(){return F===void 0&&U(this),F};let I;this.getAttributes=function(){return I===void 0&&U(this),I};let k=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return k===!1&&(k=i.getProgramParameter(w,pz)),k},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(w),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=mz++,this.cacheKey=e,this.usedTimes=1,this.program=w,this.vertexShader=P,this.fragmentShader=D,this}let Dz=0;class Uz{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new Oz(e),t.set(e,r)),r}}class Oz{constructor(e){this.id=Dz++,this.code=e,this.usedTimes=0}}function Fz(n,e,t,r,i,s,o){const a=new Mf,c=new Uz,u=[],d=i.isWebGL2,m=i.logarithmicDepthBuffer,g=i.vertexTextures;let y=i.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function w(I){return I===0?"uv":`uv${I}`}function x(I,k,Q,j,$){const H=j.fog,ie=$.geometry,re=I.isMeshStandardMaterial?j.environment:null,ue=(I.isMeshStandardMaterial?t:e).get(I.envMap||re),G=ue&&ue.mapping===Vh?ue.image.height:null,K=_[I.type];I.precision!==null&&(y=i.getMaxPrecision(I.precision),y!==I.precision&&console.warn("THREE.WebGLProgram.getParameters:",I.precision,"not supported, using",y,"instead."));const W=ie.morphAttributes.position||ie.morphAttributes.normal||ie.morphAttributes.color,L=W!==void 0?W.length:0;let B=0;ie.morphAttributes.position!==void 0&&(B=1),ie.morphAttributes.normal!==void 0&&(B=2),ie.morphAttributes.color!==void 0&&(B=3);let ne,ae,de,pe;if(K){const Wt=fa[K];ne=Wt.vertexShader,ae=Wt.fragmentShader}else ne=I.vertexShader,ae=I.fragmentShader,c.update(I),de=c.getVertexShaderID(I),pe=c.getFragmentShaderID(I);const xe=n.getRenderTarget(),Me=$.isInstancedMesh===!0,Xe=!!I.map,ot=!!I.matcap,He=!!ue,te=!!I.aoMap,Ye=!!I.lightMap,Re=!!I.bumpMap,je=!!I.normalMap,Ne=!!I.displacementMap,ct=!!I.emissiveMap,Fe=!!I.metalnessMap,qe=!!I.roughnessMap,nt=I.anisotropy>0,Ue=I.clearcoat>0,_t=I.iridescence>0,J=I.sheen>0,q=I.transmission>0,ye=nt&&!!I.anisotropyMap,tt=Ue&&!!I.clearcoatMap,Le=Ue&&!!I.clearcoatNormalMap,We=Ue&&!!I.clearcoatRoughnessMap,st=_t&&!!I.iridescenceMap,et=_t&&!!I.iridescenceThicknessMap,lt=J&&!!I.sheenColorMap,Mt=J&&!!I.sheenRoughnessMap,xt=!!I.specularMap,Ge=!!I.specularColorMap,mt=!!I.specularIntensityMap,ce=q&&!!I.transmissionMap,Ie=q&&!!I.thicknessMap,Pe=!!I.gradientMap,ke=!!I.alphaMap,Te=I.alphaTest>0,he=!!I.alphaHash,ut=!!I.extensions,rt=!!ie.attributes.uv1,De=!!ie.attributes.uv2,at=!!ie.attributes.uv3;let St=Xa;return I.toneMapped&&(xe===null||xe.isXRRenderTarget===!0)&&(St=n.toneMapping),{isWebGL2:d,shaderID:K,shaderType:I.type,shaderName:I.name,vertexShader:ne,fragmentShader:ae,defines:I.defines,customVertexShaderID:de,customFragmentShaderID:pe,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:y,instancing:Me,instancingColor:Me&&$.instanceColor!==null,supportsVertexTextures:g,outputColorSpace:xe===null?n.outputColorSpace:xe.isXRRenderTarget===!0?xe.texture.colorSpace:so,map:Xe,matcap:ot,envMap:He,envMapMode:He&&ue.mapping,envMapCubeUVHeight:G,aoMap:te,lightMap:Ye,bumpMap:Re,normalMap:je,displacementMap:g&&Ne,emissiveMap:ct,normalMapObjectSpace:je&&I.normalMapType===XC,normalMapTangentSpace:je&&I.normalMapType===fu,metalnessMap:Fe,roughnessMap:qe,anisotropy:nt,anisotropyMap:ye,clearcoat:Ue,clearcoatMap:tt,clearcoatNormalMap:Le,clearcoatRoughnessMap:We,iridescence:_t,iridescenceMap:st,iridescenceThicknessMap:et,sheen:J,sheenColorMap:lt,sheenRoughnessMap:Mt,specularMap:xt,specularColorMap:Ge,specularIntensityMap:mt,transmission:q,transmissionMap:ce,thicknessMap:Ie,gradientMap:Pe,opaque:I.transparent===!1&&I.blending===wf,alphaMap:ke,alphaTest:Te,alphaHash:he,combine:I.combine,mapUv:Xe&&w(I.map.channel),aoMapUv:te&&w(I.aoMap.channel),lightMapUv:Ye&&w(I.lightMap.channel),bumpMapUv:Re&&w(I.bumpMap.channel),normalMapUv:je&&w(I.normalMap.channel),displacementMapUv:Ne&&w(I.displacementMap.channel),emissiveMapUv:ct&&w(I.emissiveMap.channel),metalnessMapUv:Fe&&w(I.metalnessMap.channel),roughnessMapUv:qe&&w(I.roughnessMap.channel),anisotropyMapUv:ye&&w(I.anisotropyMap.channel),clearcoatMapUv:tt&&w(I.clearcoatMap.channel),clearcoatNormalMapUv:Le&&w(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:We&&w(I.clearcoatRoughnessMap.channel),iridescenceMapUv:st&&w(I.iridescenceMap.channel),iridescenceThicknessMapUv:et&&w(I.iridescenceThicknessMap.channel),sheenColorMapUv:lt&&w(I.sheenColorMap.channel),sheenRoughnessMapUv:Mt&&w(I.sheenRoughnessMap.channel),specularMapUv:xt&&w(I.specularMap.channel),specularColorMapUv:Ge&&w(I.specularColorMap.channel),specularIntensityMapUv:mt&&w(I.specularIntensityMap.channel),transmissionMapUv:ce&&w(I.transmissionMap.channel),thicknessMapUv:Ie&&w(I.thicknessMap.channel),alphaMapUv:ke&&w(I.alphaMap.channel),vertexTangents:!!ie.attributes.tangent&&(je||nt),vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!ie.attributes.color&&ie.attributes.color.itemSize===4,vertexUv1s:rt,vertexUv2s:De,vertexUv3s:at,pointsUvs:$.isPoints===!0&&!!ie.attributes.uv&&(Xe||ke),fog:!!H,useFog:I.fog===!0,fogExp2:H&&H.isFogExp2,flatShading:I.flatShading===!0,sizeAttenuation:I.sizeAttenuation===!0,logarithmicDepthBuffer:m,skinning:$.isSkinnedMesh===!0,morphTargets:ie.morphAttributes.position!==void 0,morphNormals:ie.morphAttributes.normal!==void 0,morphColors:ie.morphAttributes.color!==void 0,morphTargetsCount:L,morphTextureStride:B,numDirLights:k.directional.length,numPointLights:k.point.length,numSpotLights:k.spot.length,numSpotLightMaps:k.spotLightMap.length,numRectAreaLights:k.rectArea.length,numHemiLights:k.hemi.length,numDirLightShadows:k.directionalShadowMap.length,numPointLightShadows:k.pointShadowMap.length,numSpotLightShadows:k.spotShadowMap.length,numSpotLightShadowsWithMaps:k.numSpotLightShadowsWithMaps,numLightProbes:k.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:I.dithering,shadowMapEnabled:n.shadowMap.enabled&&Q.length>0,shadowMapType:n.shadowMap.type,toneMapping:St,useLegacyLights:n._useLegacyLights,decodeVideoTexture:Xe&&I.map.isVideoTexture===!0&&Kn.getTransfer(I.map.colorSpace)===cr,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===eo,flipSided:I.side===ms,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionDerivatives:ut&&I.extensions.derivatives===!0,extensionFragDepth:ut&&I.extensions.fragDepth===!0,extensionDrawBuffers:ut&&I.extensions.drawBuffers===!0,extensionShaderTextureLOD:ut&&I.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:d||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:I.customProgramCacheKey()}}function S(I){const k=[];if(I.shaderID?k.push(I.shaderID):(k.push(I.customVertexShaderID),k.push(I.customFragmentShaderID)),I.defines!==void 0)for(const Q in I.defines)k.push(Q),k.push(I.defines[Q]);return I.isRawShaderMaterial===!1&&(b(k,I),T(k,I),k.push(n.outputColorSpace)),k.push(I.customProgramCacheKey),k.join()}function b(I,k){I.push(k.precision),I.push(k.outputColorSpace),I.push(k.envMapMode),I.push(k.envMapCubeUVHeight),I.push(k.mapUv),I.push(k.alphaMapUv),I.push(k.lightMapUv),I.push(k.aoMapUv),I.push(k.bumpMapUv),I.push(k.normalMapUv),I.push(k.displacementMapUv),I.push(k.emissiveMapUv),I.push(k.metalnessMapUv),I.push(k.roughnessMapUv),I.push(k.anisotropyMapUv),I.push(k.clearcoatMapUv),I.push(k.clearcoatNormalMapUv),I.push(k.clearcoatRoughnessMapUv),I.push(k.iridescenceMapUv),I.push(k.iridescenceThicknessMapUv),I.push(k.sheenColorMapUv),I.push(k.sheenRoughnessMapUv),I.push(k.specularMapUv),I.push(k.specularColorMapUv),I.push(k.specularIntensityMapUv),I.push(k.transmissionMapUv),I.push(k.thicknessMapUv),I.push(k.combine),I.push(k.fogExp2),I.push(k.sizeAttenuation),I.push(k.morphTargetsCount),I.push(k.morphAttributeCount),I.push(k.numDirLights),I.push(k.numPointLights),I.push(k.numSpotLights),I.push(k.numSpotLightMaps),I.push(k.numHemiLights),I.push(k.numRectAreaLights),I.push(k.numDirLightShadows),I.push(k.numPointLightShadows),I.push(k.numSpotLightShadows),I.push(k.numSpotLightShadowsWithMaps),I.push(k.numLightProbes),I.push(k.shadowMapType),I.push(k.toneMapping),I.push(k.numClippingPlanes),I.push(k.numClipIntersection),I.push(k.depthPacking)}function T(I,k){a.disableAll(),k.isWebGL2&&a.enable(0),k.supportsVertexTextures&&a.enable(1),k.instancing&&a.enable(2),k.instancingColor&&a.enable(3),k.matcap&&a.enable(4),k.envMap&&a.enable(5),k.normalMapObjectSpace&&a.enable(6),k.normalMapTangentSpace&&a.enable(7),k.clearcoat&&a.enable(8),k.iridescence&&a.enable(9),k.alphaTest&&a.enable(10),k.vertexColors&&a.enable(11),k.vertexAlphas&&a.enable(12),k.vertexUv1s&&a.enable(13),k.vertexUv2s&&a.enable(14),k.vertexUv3s&&a.enable(15),k.vertexTangents&&a.enable(16),k.anisotropy&&a.enable(17),k.alphaHash&&a.enable(18),I.push(a.mask),a.disableAll(),k.fog&&a.enable(0),k.useFog&&a.enable(1),k.flatShading&&a.enable(2),k.logarithmicDepthBuffer&&a.enable(3),k.skinning&&a.enable(4),k.morphTargets&&a.enable(5),k.morphNormals&&a.enable(6),k.morphColors&&a.enable(7),k.premultipliedAlpha&&a.enable(8),k.shadowMapEnabled&&a.enable(9),k.useLegacyLights&&a.enable(10),k.doubleSided&&a.enable(11),k.flipSided&&a.enable(12),k.useDepthPacking&&a.enable(13),k.dithering&&a.enable(14),k.transmission&&a.enable(15),k.sheen&&a.enable(16),k.opaque&&a.enable(17),k.pointsUvs&&a.enable(18),k.decodeVideoTexture&&a.enable(19),I.push(a.mask)}function C(I){const k=_[I.type];let Q;if(k){const j=fa[k];Q=rw.clone(j.uniforms)}else Q=I.uniforms;return Q}function P(I,k){let Q;for(let j=0,$=u.length;j<$;j++){const H=u[j];if(H.cacheKey===k){Q=H,++Q.usedTimes;break}}return Q===void 0&&(Q=new Nz(n,k,I,s),u.push(Q)),Q}function D(I){if(--I.usedTimes===0){const k=u.indexOf(I);u[k]=u[u.length-1],u.pop(),I.destroy()}}function U(I){c.remove(I)}function F(){c.dispose()}return{getParameters:x,getProgramCacheKey:S,getUniforms:C,acquireProgram:P,releaseProgram:D,releaseShaderCache:U,programs:u,dispose:F}}function kz(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function r(s,o,a){n.get(s)[o]=a}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function Bz(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function oT(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function aT(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(m,g,y,_,w,x){let S=n[e];return S===void 0?(S={id:m.id,object:m,geometry:g,material:y,groupOrder:_,renderOrder:m.renderOrder,z:w,group:x},n[e]=S):(S.id=m.id,S.object=m,S.geometry=g,S.material=y,S.groupOrder=_,S.renderOrder=m.renderOrder,S.z=w,S.group=x),e++,S}function a(m,g,y,_,w,x){const S=o(m,g,y,_,w,x);y.transmission>0?r.push(S):y.transparent===!0?i.push(S):t.push(S)}function c(m,g,y,_,w,x){const S=o(m,g,y,_,w,x);y.transmission>0?r.unshift(S):y.transparent===!0?i.unshift(S):t.unshift(S)}function u(m,g){t.length>1&&t.sort(m||Bz),r.length>1&&r.sort(g||oT),i.length>1&&i.sort(g||oT)}function d(){for(let m=e,g=n.length;m<g;m++){const y=n[m];if(y.id===null)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:c,finish:d,sort:u}}function zz(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new aT,n.set(r,[o])):i>=s.length?(o=new aT,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function Hz(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new oe,color:new Rt};break;case"SpotLight":t={position:new oe,direction:new oe,color:new Rt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new oe,color:new Rt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new oe,skyColor:new Rt,groundColor:new Rt};break;case"RectAreaLight":t={color:new Rt,position:new oe,halfWidth:new oe,halfHeight:new oe};break}return n[e.id]=t,t}}}function Gz(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new it};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new it};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new it,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let Vz=0;function Wz(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function jz(n,e){const t=new Hz,r=Gz(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let d=0;d<9;d++)i.probe.push(new oe);const s=new oe,o=new sn,a=new sn;function c(d,m){let g=0,y=0,_=0;for(let j=0;j<9;j++)i.probe[j].set(0,0,0);let w=0,x=0,S=0,b=0,T=0,C=0,P=0,D=0,U=0,F=0,I=0;d.sort(Wz);const k=m===!0?Math.PI:1;for(let j=0,$=d.length;j<$;j++){const H=d[j],ie=H.color,re=H.intensity,ue=H.distance,G=H.shadow&&H.shadow.map?H.shadow.map.texture:null;if(H.isAmbientLight)g+=ie.r*re*k,y+=ie.g*re*k,_+=ie.b*re*k;else if(H.isLightProbe){for(let K=0;K<9;K++)i.probe[K].addScaledVector(H.sh.coefficients[K],re);I++}else if(H.isDirectionalLight){const K=t.get(H);if(K.color.copy(H.color).multiplyScalar(H.intensity*k),H.castShadow){const W=H.shadow,L=r.get(H);L.shadowBias=W.bias,L.shadowNormalBias=W.normalBias,L.shadowRadius=W.radius,L.shadowMapSize=W.mapSize,i.directionalShadow[w]=L,i.directionalShadowMap[w]=G,i.directionalShadowMatrix[w]=H.shadow.matrix,C++}i.directional[w]=K,w++}else if(H.isSpotLight){const K=t.get(H);K.position.setFromMatrixPosition(H.matrixWorld),K.color.copy(ie).multiplyScalar(re*k),K.distance=ue,K.coneCos=Math.cos(H.angle),K.penumbraCos=Math.cos(H.angle*(1-H.penumbra)),K.decay=H.decay,i.spot[S]=K;const W=H.shadow;if(H.map&&(i.spotLightMap[U]=H.map,U++,W.updateMatrices(H),H.castShadow&&F++),i.spotLightMatrix[S]=W.matrix,H.castShadow){const L=r.get(H);L.shadowBias=W.bias,L.shadowNormalBias=W.normalBias,L.shadowRadius=W.radius,L.shadowMapSize=W.mapSize,i.spotShadow[S]=L,i.spotShadowMap[S]=G,D++}S++}else if(H.isRectAreaLight){const K=t.get(H);K.color.copy(ie).multiplyScalar(re),K.halfWidth.set(H.width*.5,0,0),K.halfHeight.set(0,H.height*.5,0),i.rectArea[b]=K,b++}else if(H.isPointLight){const K=t.get(H);if(K.color.copy(H.color).multiplyScalar(H.intensity*k),K.distance=H.distance,K.decay=H.decay,H.castShadow){const W=H.shadow,L=r.get(H);L.shadowBias=W.bias,L.shadowNormalBias=W.normalBias,L.shadowRadius=W.radius,L.shadowMapSize=W.mapSize,L.shadowCameraNear=W.camera.near,L.shadowCameraFar=W.camera.far,i.pointShadow[x]=L,i.pointShadowMap[x]=G,i.pointShadowMatrix[x]=H.shadow.matrix,P++}i.point[x]=K,x++}else if(H.isHemisphereLight){const K=t.get(H);K.skyColor.copy(H.color).multiplyScalar(re*k),K.groundColor.copy(H.groundColor).multiplyScalar(re*k),i.hemi[T]=K,T++}}b>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Pt.LTC_FLOAT_1,i.rectAreaLTC2=Pt.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Pt.LTC_HALF_1,i.rectAreaLTC2=Pt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=g,i.ambient[1]=y,i.ambient[2]=_;const Q=i.hash;(Q.directionalLength!==w||Q.pointLength!==x||Q.spotLength!==S||Q.rectAreaLength!==b||Q.hemiLength!==T||Q.numDirectionalShadows!==C||Q.numPointShadows!==P||Q.numSpotShadows!==D||Q.numSpotMaps!==U||Q.numLightProbes!==I)&&(i.directional.length=w,i.spot.length=S,i.rectArea.length=b,i.point.length=x,i.hemi.length=T,i.directionalShadow.length=C,i.directionalShadowMap.length=C,i.pointShadow.length=P,i.pointShadowMap.length=P,i.spotShadow.length=D,i.spotShadowMap.length=D,i.directionalShadowMatrix.length=C,i.pointShadowMatrix.length=P,i.spotLightMatrix.length=D+U-F,i.spotLightMap.length=U,i.numSpotLightShadowsWithMaps=F,i.numLightProbes=I,Q.directionalLength=w,Q.pointLength=x,Q.spotLength=S,Q.rectAreaLength=b,Q.hemiLength=T,Q.numDirectionalShadows=C,Q.numPointShadows=P,Q.numSpotShadows=D,Q.numSpotMaps=U,Q.numLightProbes=I,i.version=Vz++)}function u(d,m){let g=0,y=0,_=0,w=0,x=0;const S=m.matrixWorldInverse;for(let b=0,T=d.length;b<T;b++){const C=d[b];if(C.isDirectionalLight){const P=i.directional[g];P.direction.setFromMatrixPosition(C.matrixWorld),s.setFromMatrixPosition(C.target.matrixWorld),P.direction.sub(s),P.direction.transformDirection(S),g++}else if(C.isSpotLight){const P=i.spot[_];P.position.setFromMatrixPosition(C.matrixWorld),P.position.applyMatrix4(S),P.direction.setFromMatrixPosition(C.matrixWorld),s.setFromMatrixPosition(C.target.matrixWorld),P.direction.sub(s),P.direction.transformDirection(S),_++}else if(C.isRectAreaLight){const P=i.rectArea[w];P.position.setFromMatrixPosition(C.matrixWorld),P.position.applyMatrix4(S),a.identity(),o.copy(C.matrixWorld),o.premultiply(S),a.extractRotation(o),P.halfWidth.set(C.width*.5,0,0),P.halfHeight.set(0,C.height*.5,0),P.halfWidth.applyMatrix4(a),P.halfHeight.applyMatrix4(a),w++}else if(C.isPointLight){const P=i.point[y];P.position.setFromMatrixPosition(C.matrixWorld),P.position.applyMatrix4(S),y++}else if(C.isHemisphereLight){const P=i.hemi[x];P.direction.setFromMatrixPosition(C.matrixWorld),P.direction.transformDirection(S),x++}}}return{setup:c,setupView:u,state:i}}function lT(n,e){const t=new jz(n,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(m){r.push(m)}function a(m){i.push(m)}function c(m){t.setup(r,m)}function u(m){t.setupView(r,m)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:c,setupLightsView:u,pushLight:o,pushShadow:a}}function Xz(n,e){let t=new WeakMap;function r(s,o=0){const a=t.get(s);let c;return a===void 0?(c=new lT(n,e),t.set(s,[c])):o>=a.length?(c=new lT(n,e),a.push(c)):c=a[o],c}function i(){t=new WeakMap}return{get:r,dispose:i}}class xy extends mi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=jC,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Sy extends mi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Yz=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,qz=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Kz(n,e,t){let r=new yy;const i=new it,s=new it,o=new Hn,a=new xy({depthPacking:QS}),c=new Sy,u={},d=t.maxTextureSize,m={[Qa]:ms,[ms]:Qa,[eo]:eo},g=new ao({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new it},radius:{value:4}},vertexShader:Yz,fragmentShader:qz}),y=g.clone();y.defines.HORIZONTAL_PASS=1;const _=new En;_.setAttribute("position",new Xn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const w=new ir(_,g),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=fy;let S=this.type;this.render=function(P,D,U){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||P.length===0)return;const F=n.getRenderTarget(),I=n.getActiveCubeFace(),k=n.getActiveMipmapLevel(),Q=n.state;Q.setBlending(ja),Q.buffers.color.setClear(1,1,1,1),Q.buffers.depth.setTest(!0),Q.setScissorTest(!1);const j=S!==ca&&this.type===ca,$=S===ca&&this.type!==ca;for(let H=0,ie=P.length;H<ie;H++){const re=P[H],ue=re.shadow;if(ue===void 0){console.warn("THREE.WebGLShadowMap:",re,"has no shadow.");continue}if(ue.autoUpdate===!1&&ue.needsUpdate===!1)continue;i.copy(ue.mapSize);const G=ue.getFrameExtents();if(i.multiply(G),s.copy(ue.mapSize),(i.x>d||i.y>d)&&(i.x>d&&(s.x=Math.floor(d/G.x),i.x=s.x*G.x,ue.mapSize.x=s.x),i.y>d&&(s.y=Math.floor(d/G.y),i.y=s.y*G.y,ue.mapSize.y=s.y)),ue.map===null||j===!0||$===!0){const W=this.type!==ca?{minFilter:Dr,magFilter:Dr}:{};ue.map!==null&&ue.map.dispose(),ue.map=new oo(i.x,i.y,W),ue.map.texture.name=re.name+".shadowMap",ue.camera.updateProjectionMatrix()}n.setRenderTarget(ue.map),n.clear();const K=ue.getViewportCount();for(let W=0;W<K;W++){const L=ue.getViewport(W);o.set(s.x*L.x,s.y*L.y,s.x*L.z,s.y*L.w),Q.viewport(o),ue.updateMatrices(re,W),r=ue.getFrustum(),C(D,U,ue.camera,re,this.type)}ue.isPointLightShadow!==!0&&this.type===ca&&b(ue,U),ue.needsUpdate=!1}S=this.type,x.needsUpdate=!1,n.setRenderTarget(F,I,k)};function b(P,D){const U=e.update(w);g.defines.VSM_SAMPLES!==P.blurSamples&&(g.defines.VSM_SAMPLES=P.blurSamples,y.defines.VSM_SAMPLES=P.blurSamples,g.needsUpdate=!0,y.needsUpdate=!0),P.mapPass===null&&(P.mapPass=new oo(i.x,i.y)),g.uniforms.shadow_pass.value=P.map.texture,g.uniforms.resolution.value=P.mapSize,g.uniforms.radius.value=P.radius,n.setRenderTarget(P.mapPass),n.clear(),n.renderBufferDirect(D,null,U,g,w,null),y.uniforms.shadow_pass.value=P.mapPass.texture,y.uniforms.resolution.value=P.mapSize,y.uniforms.radius.value=P.radius,n.setRenderTarget(P.map),n.clear(),n.renderBufferDirect(D,null,U,y,w,null)}function T(P,D,U,F){let I=null;const k=U.isPointLight===!0?P.customDistanceMaterial:P.customDepthMaterial;if(k!==void 0)I=k;else if(I=U.isPointLight===!0?c:a,n.localClippingEnabled&&D.clipShadows===!0&&Array.isArray(D.clippingPlanes)&&D.clippingPlanes.length!==0||D.displacementMap&&D.displacementScale!==0||D.alphaMap&&D.alphaTest>0||D.map&&D.alphaTest>0){const Q=I.uuid,j=D.uuid;let $=u[Q];$===void 0&&($={},u[Q]=$);let H=$[j];H===void 0&&(H=I.clone(),$[j]=H),I=H}if(I.visible=D.visible,I.wireframe=D.wireframe,F===ca?I.side=D.shadowSide!==null?D.shadowSide:D.side:I.side=D.shadowSide!==null?D.shadowSide:m[D.side],I.alphaMap=D.alphaMap,I.alphaTest=D.alphaTest,I.map=D.map,I.clipShadows=D.clipShadows,I.clippingPlanes=D.clippingPlanes,I.clipIntersection=D.clipIntersection,I.displacementMap=D.displacementMap,I.displacementScale=D.displacementScale,I.displacementBias=D.displacementBias,I.wireframeLinewidth=D.wireframeLinewidth,I.linewidth=D.linewidth,U.isPointLight===!0&&I.isMeshDistanceMaterial===!0){const Q=n.properties.get(I);Q.light=U}return I}function C(P,D,U,F,I){if(P.visible===!1)return;if(P.layers.test(D.layers)&&(P.isMesh||P.isLine||P.isPoints)&&(P.castShadow||P.receiveShadow&&I===ca)&&(!P.frustumCulled||r.intersectsObject(P))){P.modelViewMatrix.multiplyMatrices(U.matrixWorldInverse,P.matrixWorld);const j=e.update(P),$=P.material;if(Array.isArray($)){const H=j.groups;for(let ie=0,re=H.length;ie<re;ie++){const ue=H[ie],G=$[ue.materialIndex];if(G&&G.visible){const K=T(P,G,F,I);n.renderBufferDirect(U,null,j,K,P,ue)}}}else if($.visible){const H=T(P,$,F,I);n.renderBufferDirect(U,null,j,H,P,null)}}const Q=P.children;for(let j=0,$=Q.length;j<$;j++)C(Q[j],D,U,F,I)}}function Zz(n,e,t){const r=t.isWebGL2;function i(){let he=!1;const ut=new Hn;let rt=null;const De=new Hn(0,0,0,0);return{setMask:function(at){rt!==at&&!he&&(n.colorMask(at,at,at,at),rt=at)},setLocked:function(at){he=at},setClear:function(at,St,Et,Wt,gn){gn===!0&&(at*=Wt,St*=Wt,Et*=Wt),ut.set(at,St,Et,Wt),De.equals(ut)===!1&&(n.clearColor(at,St,Et,Wt),De.copy(ut))},reset:function(){he=!1,rt=null,De.set(-1,0,0,0)}}}function s(){let he=!1,ut=null,rt=null,De=null;return{setTest:function(at){at?Xe(n.DEPTH_TEST):ot(n.DEPTH_TEST)},setMask:function(at){ut!==at&&!he&&(n.depthMask(at),ut=at)},setFunc:function(at){if(rt!==at){switch(at){case SC:n.depthFunc(n.NEVER);break;case wC:n.depthFunc(n.ALWAYS);break;case EC:n.depthFunc(n.LESS);break;case Rm:n.depthFunc(n.LEQUAL);break;case MC:n.depthFunc(n.EQUAL);break;case TC:n.depthFunc(n.GEQUAL);break;case bC:n.depthFunc(n.GREATER);break;case AC:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}rt=at}},setLocked:function(at){he=at},setClear:function(at){De!==at&&(n.clearDepth(at),De=at)},reset:function(){he=!1,ut=null,rt=null,De=null}}}function o(){let he=!1,ut=null,rt=null,De=null,at=null,St=null,Et=null,Wt=null,gn=null;return{setTest:function(Yt){he||(Yt?Xe(n.STENCIL_TEST):ot(n.STENCIL_TEST))},setMask:function(Yt){ut!==Yt&&!he&&(n.stencilMask(Yt),ut=Yt)},setFunc:function(Yt,pn,kn){(rt!==Yt||De!==pn||at!==kn)&&(n.stencilFunc(Yt,pn,kn),rt=Yt,De=pn,at=kn)},setOp:function(Yt,pn,kn){(St!==Yt||Et!==pn||Wt!==kn)&&(n.stencilOp(Yt,pn,kn),St=Yt,Et=pn,Wt=kn)},setLocked:function(Yt){he=Yt},setClear:function(Yt){gn!==Yt&&(n.clearStencil(Yt),gn=Yt)},reset:function(){he=!1,ut=null,rt=null,De=null,at=null,St=null,Et=null,Wt=null,gn=null}}}const a=new i,c=new s,u=new o,d=new WeakMap,m=new WeakMap;let g={},y={},_=new WeakMap,w=[],x=null,S=!1,b=null,T=null,C=null,P=null,D=null,U=null,F=null,I=new Rt(0,0,0),k=0,Q=!1,j=null,$=null,H=null,ie=null,re=null;const ue=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let G=!1,K=0;const W=n.getParameter(n.VERSION);W.indexOf("WebGL")!==-1?(K=parseFloat(/^WebGL (\d)/.exec(W)[1]),G=K>=1):W.indexOf("OpenGL ES")!==-1&&(K=parseFloat(/^OpenGL ES (\d)/.exec(W)[1]),G=K>=2);let L=null,B={};const ne=n.getParameter(n.SCISSOR_BOX),ae=n.getParameter(n.VIEWPORT),de=new Hn().fromArray(ne),pe=new Hn().fromArray(ae);function xe(he,ut,rt,De){const at=new Uint8Array(4),St=n.createTexture();n.bindTexture(he,St),n.texParameteri(he,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(he,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Et=0;Et<rt;Et++)r&&(he===n.TEXTURE_3D||he===n.TEXTURE_2D_ARRAY)?n.texImage3D(ut,0,n.RGBA,1,1,De,0,n.RGBA,n.UNSIGNED_BYTE,at):n.texImage2D(ut+Et,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,at);return St}const Me={};Me[n.TEXTURE_2D]=xe(n.TEXTURE_2D,n.TEXTURE_2D,1),Me[n.TEXTURE_CUBE_MAP]=xe(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(Me[n.TEXTURE_2D_ARRAY]=xe(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Me[n.TEXTURE_3D]=xe(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),c.setClear(1),u.setClear(0),Xe(n.DEPTH_TEST),c.setFunc(Rm),Fe(!1),qe(d1),Xe(n.CULL_FACE),Ne(ja);function Xe(he){g[he]!==!0&&(n.enable(he),g[he]=!0)}function ot(he){g[he]!==!1&&(n.disable(he),g[he]=!1)}function He(he,ut){return y[he]!==ut?(n.bindFramebuffer(he,ut),y[he]=ut,r&&(he===n.DRAW_FRAMEBUFFER&&(y[n.FRAMEBUFFER]=ut),he===n.FRAMEBUFFER&&(y[n.DRAW_FRAMEBUFFER]=ut)),!0):!1}function te(he,ut){let rt=w,De=!1;if(he)if(rt=_.get(ut),rt===void 0&&(rt=[],_.set(ut,rt)),he.isWebGLMultipleRenderTargets){const at=he.texture;if(rt.length!==at.length||rt[0]!==n.COLOR_ATTACHMENT0){for(let St=0,Et=at.length;St<Et;St++)rt[St]=n.COLOR_ATTACHMENT0+St;rt.length=at.length,De=!0}}else rt[0]!==n.COLOR_ATTACHMENT0&&(rt[0]=n.COLOR_ATTACHMENT0,De=!0);else rt[0]!==n.BACK&&(rt[0]=n.BACK,De=!0);De&&(t.isWebGL2?n.drawBuffers(rt):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(rt))}function Ye(he){return x!==he?(n.useProgram(he),x=he,!0):!1}const Re={[Bc]:n.FUNC_ADD,[oC]:n.FUNC_SUBTRACT,[aC]:n.FUNC_REVERSE_SUBTRACT};if(r)Re[g1]=n.MIN,Re[v1]=n.MAX;else{const he=e.get("EXT_blend_minmax");he!==null&&(Re[g1]=he.MIN_EXT,Re[v1]=he.MAX_EXT)}const je={[lC]:n.ZERO,[cC]:n.ONE,[uC]:n.SRC_COLOR,[k0]:n.SRC_ALPHA,[gC]:n.SRC_ALPHA_SATURATE,[pC]:n.DST_COLOR,[dC]:n.DST_ALPHA,[fC]:n.ONE_MINUS_SRC_COLOR,[B0]:n.ONE_MINUS_SRC_ALPHA,[mC]:n.ONE_MINUS_DST_COLOR,[hC]:n.ONE_MINUS_DST_ALPHA,[vC]:n.CONSTANT_COLOR,[yC]:n.ONE_MINUS_CONSTANT_COLOR,[_C]:n.CONSTANT_ALPHA,[xC]:n.ONE_MINUS_CONSTANT_ALPHA};function Ne(he,ut,rt,De,at,St,Et,Wt,gn,Yt){if(he===ja){S===!0&&(ot(n.BLEND),S=!1);return}if(S===!1&&(Xe(n.BLEND),S=!0),he!==sC){if(he!==b||Yt!==Q){if((T!==Bc||D!==Bc)&&(n.blendEquation(n.FUNC_ADD),T=Bc,D=Bc),Yt)switch(he){case wf:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case h1:n.blendFunc(n.ONE,n.ONE);break;case p1:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case m1:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",he);break}else switch(he){case wf:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case h1:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case p1:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case m1:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",he);break}C=null,P=null,U=null,F=null,I.set(0,0,0),k=0,b=he,Q=Yt}return}at=at||ut,St=St||rt,Et=Et||De,(ut!==T||at!==D)&&(n.blendEquationSeparate(Re[ut],Re[at]),T=ut,D=at),(rt!==C||De!==P||St!==U||Et!==F)&&(n.blendFuncSeparate(je[rt],je[De],je[St],je[Et]),C=rt,P=De,U=St,F=Et),(Wt.equals(I)===!1||gn!==k)&&(n.blendColor(Wt.r,Wt.g,Wt.b,gn),I.copy(Wt),k=gn),b=he,Q=!1}function ct(he,ut){he.side===eo?ot(n.CULL_FACE):Xe(n.CULL_FACE);let rt=he.side===ms;ut&&(rt=!rt),Fe(rt),he.blending===wf&&he.transparent===!1?Ne(ja):Ne(he.blending,he.blendEquation,he.blendSrc,he.blendDst,he.blendEquationAlpha,he.blendSrcAlpha,he.blendDstAlpha,he.blendColor,he.blendAlpha,he.premultipliedAlpha),c.setFunc(he.depthFunc),c.setTest(he.depthTest),c.setMask(he.depthWrite),a.setMask(he.colorWrite);const De=he.stencilWrite;u.setTest(De),De&&(u.setMask(he.stencilWriteMask),u.setFunc(he.stencilFunc,he.stencilRef,he.stencilFuncMask),u.setOp(he.stencilFail,he.stencilZFail,he.stencilZPass)),Ue(he.polygonOffset,he.polygonOffsetFactor,he.polygonOffsetUnits),he.alphaToCoverage===!0?Xe(n.SAMPLE_ALPHA_TO_COVERAGE):ot(n.SAMPLE_ALPHA_TO_COVERAGE)}function Fe(he){j!==he&&(he?n.frontFace(n.CW):n.frontFace(n.CCW),j=he)}function qe(he){he!==nC?(Xe(n.CULL_FACE),he!==$&&(he===d1?n.cullFace(n.BACK):he===rC?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):ot(n.CULL_FACE),$=he}function nt(he){he!==H&&(G&&n.lineWidth(he),H=he)}function Ue(he,ut,rt){he?(Xe(n.POLYGON_OFFSET_FILL),(ie!==ut||re!==rt)&&(n.polygonOffset(ut,rt),ie=ut,re=rt)):ot(n.POLYGON_OFFSET_FILL)}function _t(he){he?Xe(n.SCISSOR_TEST):ot(n.SCISSOR_TEST)}function J(he){he===void 0&&(he=n.TEXTURE0+ue-1),L!==he&&(n.activeTexture(he),L=he)}function q(he,ut,rt){rt===void 0&&(L===null?rt=n.TEXTURE0+ue-1:rt=L);let De=B[rt];De===void 0&&(De={type:void 0,texture:void 0},B[rt]=De),(De.type!==he||De.texture!==ut)&&(L!==rt&&(n.activeTexture(rt),L=rt),n.bindTexture(he,ut||Me[he]),De.type=he,De.texture=ut)}function ye(){const he=B[L];he!==void 0&&he.type!==void 0&&(n.bindTexture(he.type,null),he.type=void 0,he.texture=void 0)}function tt(){try{n.compressedTexImage2D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Le(){try{n.compressedTexImage3D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function We(){try{n.texSubImage2D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function st(){try{n.texSubImage3D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function et(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function lt(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Mt(){try{n.texStorage2D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function xt(){try{n.texStorage3D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Ge(){try{n.texImage2D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function mt(){try{n.texImage3D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function ce(he){de.equals(he)===!1&&(n.scissor(he.x,he.y,he.z,he.w),de.copy(he))}function Ie(he){pe.equals(he)===!1&&(n.viewport(he.x,he.y,he.z,he.w),pe.copy(he))}function Pe(he,ut){let rt=m.get(ut);rt===void 0&&(rt=new WeakMap,m.set(ut,rt));let De=rt.get(he);De===void 0&&(De=n.getUniformBlockIndex(ut,he.name),rt.set(he,De))}function ke(he,ut){const De=m.get(ut).get(he);d.get(ut)!==De&&(n.uniformBlockBinding(ut,De,he.__bindingPointIndex),d.set(ut,De))}function Te(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),r===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),g={},L=null,B={},y={},_=new WeakMap,w=[],x=null,S=!1,b=null,T=null,C=null,P=null,D=null,U=null,F=null,I=new Rt(0,0,0),k=0,Q=!1,j=null,$=null,H=null,ie=null,re=null,de.set(0,0,n.canvas.width,n.canvas.height),pe.set(0,0,n.canvas.width,n.canvas.height),a.reset(),c.reset(),u.reset()}return{buffers:{color:a,depth:c,stencil:u},enable:Xe,disable:ot,bindFramebuffer:He,drawBuffers:te,useProgram:Ye,setBlending:Ne,setMaterial:ct,setFlipSided:Fe,setCullFace:qe,setLineWidth:nt,setPolygonOffset:Ue,setScissorTest:_t,activeTexture:J,bindTexture:q,unbindTexture:ye,compressedTexImage2D:tt,compressedTexImage3D:Le,texImage2D:Ge,texImage3D:mt,updateUBOMapping:Pe,uniformBlockBinding:ke,texStorage2D:Mt,texStorage3D:xt,texSubImage2D:We,texSubImage3D:st,compressedTexSubImage2D:et,compressedTexSubImage3D:lt,scissor:ce,viewport:Ie,reset:Te}}function Qz(n,e,t,r,i,s,o){const a=i.isWebGL2,c=i.maxTextures,u=i.maxCubemapSize,d=i.maxTextureSize,m=i.maxSamples,g=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,y=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),_=new WeakMap;let w;const x=new WeakMap;let S=!1;try{S=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(J,q){return S?new OffscreenCanvas(J,q):km("canvas")}function T(J,q,ye,tt){let Le=1;if((J.width>tt||J.height>tt)&&(Le=tt/Math.max(J.width,J.height)),Le<1||q===!0)if(typeof HTMLImageElement<"u"&&J instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&J instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&J instanceof ImageBitmap){const We=q?G0:Math.floor,st=We(Le*J.width),et=We(Le*J.height);w===void 0&&(w=b(st,et));const lt=ye?b(st,et):w;return lt.width=st,lt.height=et,lt.getContext("2d").drawImage(J,0,0,st,et),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+J.width+"x"+J.height+") to ("+st+"x"+et+")."),lt}else return"data"in J&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+J.width+"x"+J.height+")."),J;return J}function C(J){return Y1(J.width)&&Y1(J.height)}function P(J){return a?!1:J.wrapS!==gr||J.wrapT!==gr||J.minFilter!==Dr&&J.minFilter!==Pn}function D(J,q){return J.generateMipmaps&&q&&J.minFilter!==Dr&&J.minFilter!==Pn}function U(J){n.generateMipmap(J)}function F(J,q,ye,tt,Le=!1){if(a===!1)return q;if(J!==null){if(n[J]!==void 0)return n[J];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+J+"'")}let We=q;if(q===n.RED&&(ye===n.FLOAT&&(We=n.R32F),ye===n.HALF_FLOAT&&(We=n.R16F),ye===n.UNSIGNED_BYTE&&(We=n.R8)),q===n.RED_INTEGER&&(ye===n.UNSIGNED_BYTE&&(We=n.R8UI),ye===n.UNSIGNED_SHORT&&(We=n.R16UI),ye===n.UNSIGNED_INT&&(We=n.R32UI),ye===n.BYTE&&(We=n.R8I),ye===n.SHORT&&(We=n.R16I),ye===n.INT&&(We=n.R32I)),q===n.RG&&(ye===n.FLOAT&&(We=n.RG32F),ye===n.HALF_FLOAT&&(We=n.RG16F),ye===n.UNSIGNED_BYTE&&(We=n.RG8)),q===n.RGBA){const st=Le?Nm:Kn.getTransfer(tt);ye===n.FLOAT&&(We=n.RGBA32F),ye===n.HALF_FLOAT&&(We=n.RGBA16F),ye===n.UNSIGNED_BYTE&&(We=st===cr?n.SRGB8_ALPHA8:n.RGBA8),ye===n.UNSIGNED_SHORT_4_4_4_4&&(We=n.RGBA4),ye===n.UNSIGNED_SHORT_5_5_5_1&&(We=n.RGB5_A1)}return(We===n.R16F||We===n.R32F||We===n.RG16F||We===n.RG32F||We===n.RGBA16F||We===n.RGBA32F)&&e.get("EXT_color_buffer_float"),We}function I(J,q,ye){return D(J,ye)===!0||J.isFramebufferTexture&&J.minFilter!==Dr&&J.minFilter!==Pn?Math.log2(Math.max(q.width,q.height))+1:J.mipmaps!==void 0&&J.mipmaps.length>0?J.mipmaps.length:J.isCompressedTexture&&Array.isArray(J.image)?q.mipmaps.length:1}function k(J){return J===Dr||J===Lm||J===ph?n.NEAREST:n.LINEAR}function Q(J){const q=J.target;q.removeEventListener("dispose",Q),$(q),q.isVideoTexture&&_.delete(q)}function j(J){const q=J.target;q.removeEventListener("dispose",j),ie(q)}function $(J){const q=r.get(J);if(q.__webglInit===void 0)return;const ye=J.source,tt=x.get(ye);if(tt){const Le=tt[q.__cacheKey];Le.usedTimes--,Le.usedTimes===0&&H(J),Object.keys(tt).length===0&&x.delete(ye)}r.remove(J)}function H(J){const q=r.get(J);n.deleteTexture(q.__webglTexture);const ye=J.source,tt=x.get(ye);delete tt[q.__cacheKey],o.memory.textures--}function ie(J){const q=J.texture,ye=r.get(J),tt=r.get(q);if(tt.__webglTexture!==void 0&&(n.deleteTexture(tt.__webglTexture),o.memory.textures--),J.depthTexture&&J.depthTexture.dispose(),J.isWebGLCubeRenderTarget)for(let Le=0;Le<6;Le++){if(Array.isArray(ye.__webglFramebuffer[Le]))for(let We=0;We<ye.__webglFramebuffer[Le].length;We++)n.deleteFramebuffer(ye.__webglFramebuffer[Le][We]);else n.deleteFramebuffer(ye.__webglFramebuffer[Le]);ye.__webglDepthbuffer&&n.deleteRenderbuffer(ye.__webglDepthbuffer[Le])}else{if(Array.isArray(ye.__webglFramebuffer))for(let Le=0;Le<ye.__webglFramebuffer.length;Le++)n.deleteFramebuffer(ye.__webglFramebuffer[Le]);else n.deleteFramebuffer(ye.__webglFramebuffer);if(ye.__webglDepthbuffer&&n.deleteRenderbuffer(ye.__webglDepthbuffer),ye.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ye.__webglMultisampledFramebuffer),ye.__webglColorRenderbuffer)for(let Le=0;Le<ye.__webglColorRenderbuffer.length;Le++)ye.__webglColorRenderbuffer[Le]&&n.deleteRenderbuffer(ye.__webglColorRenderbuffer[Le]);ye.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ye.__webglDepthRenderbuffer)}if(J.isWebGLMultipleRenderTargets)for(let Le=0,We=q.length;Le<We;Le++){const st=r.get(q[Le]);st.__webglTexture&&(n.deleteTexture(st.__webglTexture),o.memory.textures--),r.remove(q[Le])}r.remove(q),r.remove(J)}let re=0;function ue(){re=0}function G(){const J=re;return J>=c&&console.warn("THREE.WebGLTextures: Trying to use "+J+" texture units while this GPU supports only "+c),re+=1,J}function K(J){const q=[];return q.push(J.wrapS),q.push(J.wrapT),q.push(J.wrapR||0),q.push(J.magFilter),q.push(J.minFilter),q.push(J.anisotropy),q.push(J.internalFormat),q.push(J.format),q.push(J.type),q.push(J.generateMipmaps),q.push(J.premultiplyAlpha),q.push(J.flipY),q.push(J.unpackAlignment),q.push(J.colorSpace),q.join()}function W(J,q){const ye=r.get(J);if(J.isVideoTexture&&Ue(J),J.isRenderTargetTexture===!1&&J.version>0&&ye.__version!==J.version){const tt=J.image;if(tt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(tt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Xe(ye,J,q);return}}t.bindTexture(n.TEXTURE_2D,ye.__webglTexture,n.TEXTURE0+q)}function L(J,q){const ye=r.get(J);if(J.version>0&&ye.__version!==J.version){Xe(ye,J,q);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ye.__webglTexture,n.TEXTURE0+q)}function B(J,q){const ye=r.get(J);if(J.version>0&&ye.__version!==J.version){Xe(ye,J,q);return}t.bindTexture(n.TEXTURE_3D,ye.__webglTexture,n.TEXTURE0+q)}function ne(J,q){const ye=r.get(J);if(J.version>0&&ye.__version!==J.version){ot(ye,J,q);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ye.__webglTexture,n.TEXTURE0+q)}const ae={[ou]:n.REPEAT,[gr]:n.CLAMP_TO_EDGE,[Ih]:n.MIRRORED_REPEAT},de={[Dr]:n.NEAREST,[Lm]:n.NEAREST_MIPMAP_NEAREST,[ph]:n.NEAREST_MIPMAP_LINEAR,[Pn]:n.LINEAR,[dy]:n.LINEAR_MIPMAP_NEAREST,[$a]:n.LINEAR_MIPMAP_LINEAR},pe={[YC]:n.NEVER,[eR]:n.ALWAYS,[qC]:n.LESS,[ZC]:n.LEQUAL,[KC]:n.EQUAL,[$C]:n.GEQUAL,[QC]:n.GREATER,[JC]:n.NOTEQUAL};function xe(J,q,ye){if(ye?(n.texParameteri(J,n.TEXTURE_WRAP_S,ae[q.wrapS]),n.texParameteri(J,n.TEXTURE_WRAP_T,ae[q.wrapT]),(J===n.TEXTURE_3D||J===n.TEXTURE_2D_ARRAY)&&n.texParameteri(J,n.TEXTURE_WRAP_R,ae[q.wrapR]),n.texParameteri(J,n.TEXTURE_MAG_FILTER,de[q.magFilter]),n.texParameteri(J,n.TEXTURE_MIN_FILTER,de[q.minFilter])):(n.texParameteri(J,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(J,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(J===n.TEXTURE_3D||J===n.TEXTURE_2D_ARRAY)&&n.texParameteri(J,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(q.wrapS!==gr||q.wrapT!==gr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(J,n.TEXTURE_MAG_FILTER,k(q.magFilter)),n.texParameteri(J,n.TEXTURE_MIN_FILTER,k(q.minFilter)),q.minFilter!==Dr&&q.minFilter!==Pn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),q.compareFunction&&(n.texParameteri(J,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(J,n.TEXTURE_COMPARE_FUNC,pe[q.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const tt=e.get("EXT_texture_filter_anisotropic");if(q.magFilter===Dr||q.minFilter!==ph&&q.minFilter!==$a||q.type===pi&&e.has("OES_texture_float_linear")===!1||a===!1&&q.type===bi&&e.has("OES_texture_half_float_linear")===!1)return;(q.anisotropy>1||r.get(q).__currentAnisotropy)&&(n.texParameterf(J,tt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(q.anisotropy,i.getMaxAnisotropy())),r.get(q).__currentAnisotropy=q.anisotropy)}}function Me(J,q){let ye=!1;J.__webglInit===void 0&&(J.__webglInit=!0,q.addEventListener("dispose",Q));const tt=q.source;let Le=x.get(tt);Le===void 0&&(Le={},x.set(tt,Le));const We=K(q);if(We!==J.__cacheKey){Le[We]===void 0&&(Le[We]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ye=!0),Le[We].usedTimes++;const st=Le[J.__cacheKey];st!==void 0&&(Le[J.__cacheKey].usedTimes--,st.usedTimes===0&&H(q)),J.__cacheKey=We,J.__webglTexture=Le[We].texture}return ye}function Xe(J,q,ye){let tt=n.TEXTURE_2D;(q.isDataArrayTexture||q.isCompressedArrayTexture)&&(tt=n.TEXTURE_2D_ARRAY),q.isData3DTexture&&(tt=n.TEXTURE_3D);const Le=Me(J,q),We=q.source;t.bindTexture(tt,J.__webglTexture,n.TEXTURE0+ye);const st=r.get(We);if(We.version!==st.__version||Le===!0){t.activeTexture(n.TEXTURE0+ye);const et=Kn.getPrimaries(Kn.workingColorSpace),lt=q.colorSpace===to?null:Kn.getPrimaries(q.colorSpace),Mt=q.colorSpace===to||et===lt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,q.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,q.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Mt);const xt=P(q)&&C(q.image)===!1;let Ge=T(q.image,xt,!1,d);Ge=_t(q,Ge);const mt=C(Ge)||a,ce=s.convert(q.format,q.colorSpace);let Ie=s.convert(q.type),Pe=F(q.internalFormat,ce,Ie,q.colorSpace,q.isVideoTexture);xe(tt,q,mt);let ke;const Te=q.mipmaps,he=a&&q.isVideoTexture!==!0,ut=st.__version===void 0||Le===!0,rt=I(q,Ge,mt);if(q.isDepthTexture)Pe=n.DEPTH_COMPONENT,a?q.type===pi?Pe=n.DEPTH_COMPONENT32F:q.type===Ga?Pe=n.DEPTH_COMPONENT24:q.type===Kc?Pe=n.DEPTH24_STENCIL8:Pe=n.DEPTH_COMPONENT16:q.type===pi&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),q.format===Zc&&Pe===n.DEPTH_COMPONENT&&q.type!==hy&&q.type!==Ga&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),q.type=Ga,Ie=s.convert(q.type)),q.format===Nf&&Pe===n.DEPTH_COMPONENT&&(Pe=n.DEPTH_STENCIL,q.type!==Kc&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),q.type=Kc,Ie=s.convert(q.type))),ut&&(he?t.texStorage2D(n.TEXTURE_2D,1,Pe,Ge.width,Ge.height):t.texImage2D(n.TEXTURE_2D,0,Pe,Ge.width,Ge.height,0,ce,Ie,null));else if(q.isDataTexture)if(Te.length>0&&mt){he&&ut&&t.texStorage2D(n.TEXTURE_2D,rt,Pe,Te[0].width,Te[0].height);for(let De=0,at=Te.length;De<at;De++)ke=Te[De],he?t.texSubImage2D(n.TEXTURE_2D,De,0,0,ke.width,ke.height,ce,Ie,ke.data):t.texImage2D(n.TEXTURE_2D,De,Pe,ke.width,ke.height,0,ce,Ie,ke.data);q.generateMipmaps=!1}else he?(ut&&t.texStorage2D(n.TEXTURE_2D,rt,Pe,Ge.width,Ge.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ge.width,Ge.height,ce,Ie,Ge.data)):t.texImage2D(n.TEXTURE_2D,0,Pe,Ge.width,Ge.height,0,ce,Ie,Ge.data);else if(q.isCompressedTexture)if(q.isCompressedArrayTexture){he&&ut&&t.texStorage3D(n.TEXTURE_2D_ARRAY,rt,Pe,Te[0].width,Te[0].height,Ge.depth);for(let De=0,at=Te.length;De<at;De++)ke=Te[De],q.format!==di?ce!==null?he?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,De,0,0,0,ke.width,ke.height,Ge.depth,ce,ke.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,De,Pe,ke.width,ke.height,Ge.depth,0,ke.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):he?t.texSubImage3D(n.TEXTURE_2D_ARRAY,De,0,0,0,ke.width,ke.height,Ge.depth,ce,Ie,ke.data):t.texImage3D(n.TEXTURE_2D_ARRAY,De,Pe,ke.width,ke.height,Ge.depth,0,ce,Ie,ke.data)}else{he&&ut&&t.texStorage2D(n.TEXTURE_2D,rt,Pe,Te[0].width,Te[0].height);for(let De=0,at=Te.length;De<at;De++)ke=Te[De],q.format!==di?ce!==null?he?t.compressedTexSubImage2D(n.TEXTURE_2D,De,0,0,ke.width,ke.height,ce,ke.data):t.compressedTexImage2D(n.TEXTURE_2D,De,Pe,ke.width,ke.height,0,ke.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):he?t.texSubImage2D(n.TEXTURE_2D,De,0,0,ke.width,ke.height,ce,Ie,ke.data):t.texImage2D(n.TEXTURE_2D,De,Pe,ke.width,ke.height,0,ce,Ie,ke.data)}else if(q.isDataArrayTexture)he?(ut&&t.texStorage3D(n.TEXTURE_2D_ARRAY,rt,Pe,Ge.width,Ge.height,Ge.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ge.width,Ge.height,Ge.depth,ce,Ie,Ge.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,Pe,Ge.width,Ge.height,Ge.depth,0,ce,Ie,Ge.data);else if(q.isData3DTexture)he?(ut&&t.texStorage3D(n.TEXTURE_3D,rt,Pe,Ge.width,Ge.height,Ge.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ge.width,Ge.height,Ge.depth,ce,Ie,Ge.data)):t.texImage3D(n.TEXTURE_3D,0,Pe,Ge.width,Ge.height,Ge.depth,0,ce,Ie,Ge.data);else if(q.isFramebufferTexture){if(ut)if(he)t.texStorage2D(n.TEXTURE_2D,rt,Pe,Ge.width,Ge.height);else{let De=Ge.width,at=Ge.height;for(let St=0;St<rt;St++)t.texImage2D(n.TEXTURE_2D,St,Pe,De,at,0,ce,Ie,null),De>>=1,at>>=1}}else if(Te.length>0&&mt){he&&ut&&t.texStorage2D(n.TEXTURE_2D,rt,Pe,Te[0].width,Te[0].height);for(let De=0,at=Te.length;De<at;De++)ke=Te[De],he?t.texSubImage2D(n.TEXTURE_2D,De,0,0,ce,Ie,ke):t.texImage2D(n.TEXTURE_2D,De,Pe,ce,Ie,ke);q.generateMipmaps=!1}else he?(ut&&t.texStorage2D(n.TEXTURE_2D,rt,Pe,Ge.width,Ge.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,ce,Ie,Ge)):t.texImage2D(n.TEXTURE_2D,0,Pe,ce,Ie,Ge);D(q,mt)&&U(tt),st.__version=We.version,q.onUpdate&&q.onUpdate(q)}J.__version=q.version}function ot(J,q,ye){if(q.image.length!==6)return;const tt=Me(J,q),Le=q.source;t.bindTexture(n.TEXTURE_CUBE_MAP,J.__webglTexture,n.TEXTURE0+ye);const We=r.get(Le);if(Le.version!==We.__version||tt===!0){t.activeTexture(n.TEXTURE0+ye);const st=Kn.getPrimaries(Kn.workingColorSpace),et=q.colorSpace===to?null:Kn.getPrimaries(q.colorSpace),lt=q.colorSpace===to||st===et?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,q.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,q.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,lt);const Mt=q.isCompressedTexture||q.image[0].isCompressedTexture,xt=q.image[0]&&q.image[0].isDataTexture,Ge=[];for(let De=0;De<6;De++)!Mt&&!xt?Ge[De]=T(q.image[De],!1,!0,u):Ge[De]=xt?q.image[De].image:q.image[De],Ge[De]=_t(q,Ge[De]);const mt=Ge[0],ce=C(mt)||a,Ie=s.convert(q.format,q.colorSpace),Pe=s.convert(q.type),ke=F(q.internalFormat,Ie,Pe,q.colorSpace),Te=a&&q.isVideoTexture!==!0,he=We.__version===void 0||tt===!0;let ut=I(q,mt,ce);xe(n.TEXTURE_CUBE_MAP,q,ce);let rt;if(Mt){Te&&he&&t.texStorage2D(n.TEXTURE_CUBE_MAP,ut,ke,mt.width,mt.height);for(let De=0;De<6;De++){rt=Ge[De].mipmaps;for(let at=0;at<rt.length;at++){const St=rt[at];q.format!==di?Ie!==null?Te?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+De,at,0,0,St.width,St.height,Ie,St.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+De,at,ke,St.width,St.height,0,St.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Te?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+De,at,0,0,St.width,St.height,Ie,Pe,St.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+De,at,ke,St.width,St.height,0,Ie,Pe,St.data)}}}else{rt=q.mipmaps,Te&&he&&(rt.length>0&&ut++,t.texStorage2D(n.TEXTURE_CUBE_MAP,ut,ke,Ge[0].width,Ge[0].height));for(let De=0;De<6;De++)if(xt){Te?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+De,0,0,0,Ge[De].width,Ge[De].height,Ie,Pe,Ge[De].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+De,0,ke,Ge[De].width,Ge[De].height,0,Ie,Pe,Ge[De].data);for(let at=0;at<rt.length;at++){const Et=rt[at].image[De].image;Te?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+De,at+1,0,0,Et.width,Et.height,Ie,Pe,Et.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+De,at+1,ke,Et.width,Et.height,0,Ie,Pe,Et.data)}}else{Te?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+De,0,0,0,Ie,Pe,Ge[De]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+De,0,ke,Ie,Pe,Ge[De]);for(let at=0;at<rt.length;at++){const St=rt[at];Te?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+De,at+1,0,0,Ie,Pe,St.image[De]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+De,at+1,ke,Ie,Pe,St.image[De])}}}D(q,ce)&&U(n.TEXTURE_CUBE_MAP),We.__version=Le.version,q.onUpdate&&q.onUpdate(q)}J.__version=q.version}function He(J,q,ye,tt,Le,We){const st=s.convert(ye.format,ye.colorSpace),et=s.convert(ye.type),lt=F(ye.internalFormat,st,et,ye.colorSpace);if(!r.get(q).__hasExternalTextures){const xt=Math.max(1,q.width>>We),Ge=Math.max(1,q.height>>We);Le===n.TEXTURE_3D||Le===n.TEXTURE_2D_ARRAY?t.texImage3D(Le,We,lt,xt,Ge,q.depth,0,st,et,null):t.texImage2D(Le,We,lt,xt,Ge,0,st,et,null)}t.bindFramebuffer(n.FRAMEBUFFER,J),nt(q)?g.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,tt,Le,r.get(ye).__webglTexture,0,qe(q)):(Le===n.TEXTURE_2D||Le>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Le<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,tt,Le,r.get(ye).__webglTexture,We),t.bindFramebuffer(n.FRAMEBUFFER,null)}function te(J,q,ye){if(n.bindRenderbuffer(n.RENDERBUFFER,J),q.depthBuffer&&!q.stencilBuffer){let tt=a===!0?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(ye||nt(q)){const Le=q.depthTexture;Le&&Le.isDepthTexture&&(Le.type===pi?tt=n.DEPTH_COMPONENT32F:Le.type===Ga&&(tt=n.DEPTH_COMPONENT24));const We=qe(q);nt(q)?g.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,We,tt,q.width,q.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,We,tt,q.width,q.height)}else n.renderbufferStorage(n.RENDERBUFFER,tt,q.width,q.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,J)}else if(q.depthBuffer&&q.stencilBuffer){const tt=qe(q);ye&&nt(q)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,tt,n.DEPTH24_STENCIL8,q.width,q.height):nt(q)?g.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,tt,n.DEPTH24_STENCIL8,q.width,q.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,q.width,q.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,J)}else{const tt=q.isWebGLMultipleRenderTargets===!0?q.texture:[q.texture];for(let Le=0;Le<tt.length;Le++){const We=tt[Le],st=s.convert(We.format,We.colorSpace),et=s.convert(We.type),lt=F(We.internalFormat,st,et,We.colorSpace),Mt=qe(q);ye&&nt(q)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Mt,lt,q.width,q.height):nt(q)?g.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Mt,lt,q.width,q.height):n.renderbufferStorage(n.RENDERBUFFER,lt,q.width,q.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ye(J,q){if(q&&q.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,J),!(q.depthTexture&&q.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(q.depthTexture).__webglTexture||q.depthTexture.image.width!==q.width||q.depthTexture.image.height!==q.height)&&(q.depthTexture.image.width=q.width,q.depthTexture.image.height=q.height,q.depthTexture.needsUpdate=!0),W(q.depthTexture,0);const tt=r.get(q.depthTexture).__webglTexture,Le=qe(q);if(q.depthTexture.format===Zc)nt(q)?g.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,tt,0,Le):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,tt,0);else if(q.depthTexture.format===Nf)nt(q)?g.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,tt,0,Le):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,tt,0);else throw new Error("Unknown depthTexture format")}function Re(J){const q=r.get(J),ye=J.isWebGLCubeRenderTarget===!0;if(J.depthTexture&&!q.__autoAllocateDepthBuffer){if(ye)throw new Error("target.depthTexture not supported in Cube render targets");Ye(q.__webglFramebuffer,J)}else if(ye){q.__webglDepthbuffer=[];for(let tt=0;tt<6;tt++)t.bindFramebuffer(n.FRAMEBUFFER,q.__webglFramebuffer[tt]),q.__webglDepthbuffer[tt]=n.createRenderbuffer(),te(q.__webglDepthbuffer[tt],J,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,q.__webglFramebuffer),q.__webglDepthbuffer=n.createRenderbuffer(),te(q.__webglDepthbuffer,J,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function je(J,q,ye){const tt=r.get(J);q!==void 0&&He(tt.__webglFramebuffer,J,J.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ye!==void 0&&Re(J)}function Ne(J){const q=J.texture,ye=r.get(J),tt=r.get(q);J.addEventListener("dispose",j),J.isWebGLMultipleRenderTargets!==!0&&(tt.__webglTexture===void 0&&(tt.__webglTexture=n.createTexture()),tt.__version=q.version,o.memory.textures++);const Le=J.isWebGLCubeRenderTarget===!0,We=J.isWebGLMultipleRenderTargets===!0,st=C(J)||a;if(Le){ye.__webglFramebuffer=[];for(let et=0;et<6;et++)if(a&&q.mipmaps&&q.mipmaps.length>0){ye.__webglFramebuffer[et]=[];for(let lt=0;lt<q.mipmaps.length;lt++)ye.__webglFramebuffer[et][lt]=n.createFramebuffer()}else ye.__webglFramebuffer[et]=n.createFramebuffer()}else{if(a&&q.mipmaps&&q.mipmaps.length>0){ye.__webglFramebuffer=[];for(let et=0;et<q.mipmaps.length;et++)ye.__webglFramebuffer[et]=n.createFramebuffer()}else ye.__webglFramebuffer=n.createFramebuffer();if(We)if(i.drawBuffers){const et=J.texture;for(let lt=0,Mt=et.length;lt<Mt;lt++){const xt=r.get(et[lt]);xt.__webglTexture===void 0&&(xt.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&J.samples>0&&nt(J)===!1){const et=We?q:[q];ye.__webglMultisampledFramebuffer=n.createFramebuffer(),ye.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ye.__webglMultisampledFramebuffer);for(let lt=0;lt<et.length;lt++){const Mt=et[lt];ye.__webglColorRenderbuffer[lt]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ye.__webglColorRenderbuffer[lt]);const xt=s.convert(Mt.format,Mt.colorSpace),Ge=s.convert(Mt.type),mt=F(Mt.internalFormat,xt,Ge,Mt.colorSpace,J.isXRRenderTarget===!0),ce=qe(J);n.renderbufferStorageMultisample(n.RENDERBUFFER,ce,mt,J.width,J.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+lt,n.RENDERBUFFER,ye.__webglColorRenderbuffer[lt])}n.bindRenderbuffer(n.RENDERBUFFER,null),J.depthBuffer&&(ye.__webglDepthRenderbuffer=n.createRenderbuffer(),te(ye.__webglDepthRenderbuffer,J,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Le){t.bindTexture(n.TEXTURE_CUBE_MAP,tt.__webglTexture),xe(n.TEXTURE_CUBE_MAP,q,st);for(let et=0;et<6;et++)if(a&&q.mipmaps&&q.mipmaps.length>0)for(let lt=0;lt<q.mipmaps.length;lt++)He(ye.__webglFramebuffer[et][lt],J,q,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+et,lt);else He(ye.__webglFramebuffer[et],J,q,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+et,0);D(q,st)&&U(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(We){const et=J.texture;for(let lt=0,Mt=et.length;lt<Mt;lt++){const xt=et[lt],Ge=r.get(xt);t.bindTexture(n.TEXTURE_2D,Ge.__webglTexture),xe(n.TEXTURE_2D,xt,st),He(ye.__webglFramebuffer,J,xt,n.COLOR_ATTACHMENT0+lt,n.TEXTURE_2D,0),D(xt,st)&&U(n.TEXTURE_2D)}t.unbindTexture()}else{let et=n.TEXTURE_2D;if((J.isWebGL3DRenderTarget||J.isWebGLArrayRenderTarget)&&(a?et=J.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(et,tt.__webglTexture),xe(et,q,st),a&&q.mipmaps&&q.mipmaps.length>0)for(let lt=0;lt<q.mipmaps.length;lt++)He(ye.__webglFramebuffer[lt],J,q,n.COLOR_ATTACHMENT0,et,lt);else He(ye.__webglFramebuffer,J,q,n.COLOR_ATTACHMENT0,et,0);D(q,st)&&U(et),t.unbindTexture()}J.depthBuffer&&Re(J)}function ct(J){const q=C(J)||a,ye=J.isWebGLMultipleRenderTargets===!0?J.texture:[J.texture];for(let tt=0,Le=ye.length;tt<Le;tt++){const We=ye[tt];if(D(We,q)){const st=J.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,et=r.get(We).__webglTexture;t.bindTexture(st,et),U(st),t.unbindTexture()}}}function Fe(J){if(a&&J.samples>0&&nt(J)===!1){const q=J.isWebGLMultipleRenderTargets?J.texture:[J.texture],ye=J.width,tt=J.height;let Le=n.COLOR_BUFFER_BIT;const We=[],st=J.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,et=r.get(J),lt=J.isWebGLMultipleRenderTargets===!0;if(lt)for(let Mt=0;Mt<q.length;Mt++)t.bindFramebuffer(n.FRAMEBUFFER,et.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Mt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,et.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Mt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,et.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,et.__webglFramebuffer);for(let Mt=0;Mt<q.length;Mt++){We.push(n.COLOR_ATTACHMENT0+Mt),J.depthBuffer&&We.push(st);const xt=et.__ignoreDepthValues!==void 0?et.__ignoreDepthValues:!1;if(xt===!1&&(J.depthBuffer&&(Le|=n.DEPTH_BUFFER_BIT),J.stencilBuffer&&(Le|=n.STENCIL_BUFFER_BIT)),lt&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,et.__webglColorRenderbuffer[Mt]),xt===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[st]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[st])),lt){const Ge=r.get(q[Mt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ge,0)}n.blitFramebuffer(0,0,ye,tt,0,0,ye,tt,Le,n.NEAREST),y&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,We)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),lt)for(let Mt=0;Mt<q.length;Mt++){t.bindFramebuffer(n.FRAMEBUFFER,et.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Mt,n.RENDERBUFFER,et.__webglColorRenderbuffer[Mt]);const xt=r.get(q[Mt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,et.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Mt,n.TEXTURE_2D,xt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,et.__webglMultisampledFramebuffer)}}function qe(J){return Math.min(m,J.samples)}function nt(J){const q=r.get(J);return a&&J.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&q.__useRenderToTexture!==!1}function Ue(J){const q=o.render.frame;_.get(J)!==q&&(_.set(J,q),J.update())}function _t(J,q){const ye=J.colorSpace,tt=J.format,Le=J.type;return J.isCompressedTexture===!0||J.isVideoTexture===!0||J.format===H0||ye!==so&&ye!==to&&(Kn.getTransfer(ye)===cr?a===!1?e.has("EXT_sRGB")===!0&&tt===di?(J.format=H0,J.minFilter=Pn,J.generateMipmaps=!1):q=$S.sRGBToLinear(q):(tt!==di||Le!==ro)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ye)),q}this.allocateTextureUnit=G,this.resetTextureUnits=ue,this.setTexture2D=W,this.setTexture2DArray=L,this.setTexture3D=B,this.setTextureCube=ne,this.rebindTextures=je,this.setupRenderTarget=Ne,this.updateRenderTargetMipmap=ct,this.updateMultisampleRenderTarget=Fe,this.setupDepthRenderbuffer=Re,this.setupFrameBufferTexture=He,this.useMultisampledRTT=nt}function pR(n,e,t){const r=t.isWebGL2;function i(s,o=to){let a;const c=Kn.getTransfer(o);if(s===ro)return n.UNSIGNED_BYTE;if(s===GS)return n.UNSIGNED_SHORT_4_4_4_4;if(s===VS)return n.UNSIGNED_SHORT_5_5_5_1;if(s===zS)return n.BYTE;if(s===HS)return n.SHORT;if(s===hy)return n.UNSIGNED_SHORT;if(s===py)return n.INT;if(s===Ga)return n.UNSIGNED_INT;if(s===pi)return n.FLOAT;if(s===bi)return r?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===UC)return n.ALPHA;if(s===di)return n.RGBA;if(s===OC)return n.LUMINANCE;if(s===FC)return n.LUMINANCE_ALPHA;if(s===Zc)return n.DEPTH_COMPONENT;if(s===Nf)return n.DEPTH_STENCIL;if(s===H0)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===WS)return n.RED;if(s===jS)return n.RED_INTEGER;if(s===kC)return n.RG;if(s===XS)return n.RG_INTEGER;if(s===YS)return n.RGBA_INTEGER;if(s===_0||s===x0||s===S0||s===w0)if(c===cr)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===_0)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===x0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===S0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===w0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===_0)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===x0)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===S0)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===w0)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===x1||s===S1||s===w1||s===E1)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===x1)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===S1)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===w1)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===E1)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===BC)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===M1||s===T1)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===M1)return c===cr?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===T1)return c===cr?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===b1||s===A1||s===C1||s===R1||s===P1||s===L1||s===I1||s===N1||s===D1||s===U1||s===O1||s===F1||s===k1||s===B1)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===b1)return c===cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===A1)return c===cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===C1)return c===cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===R1)return c===cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===P1)return c===cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===L1)return c===cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===I1)return c===cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===N1)return c===cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===D1)return c===cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===U1)return c===cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===O1)return c===cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===F1)return c===cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===k1)return c===cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===B1)return c===cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===E0||s===z1||s===H1)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===E0)return c===cr?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===z1)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===H1)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===zC||s===G1||s===V1||s===W1)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===E0)return a.COMPRESSED_RED_RGTC1_EXT;if(s===G1)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===V1)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===W1)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Kc?r?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:i}}class mR extends Or{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Co extends Ln{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Jz={type:"move"};class cx{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Co,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Co,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new oe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new oe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Co,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new oe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new oe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,c=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const w of e.hand.values()){const x=t.getJointPose(w,r),S=this._getHandJoint(u,w);x!==null&&(S.matrix.fromArray(x.transform.matrix),S.matrix.decompose(S.position,S.rotation,S.scale),S.matrixWorldNeedsUpdate=!0,S.jointRadius=x.radius),S.visible=x!==null}const d=u.joints["index-finger-tip"],m=u.joints["thumb-tip"],g=d.position.distanceTo(m.position),y=.02,_=.005;u.inputState.pinching&&g>y+_?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&g<=y-_&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Jz)))}return a!==null&&(a.visible=i!==null),c!==null&&(c.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new Co;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class gR extends jn{constructor(e,t,r,i,s,o,a,c,u,d){if(d=d!==void 0?d:Zc,d!==Zc&&d!==Nf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&d===Zc&&(r=Ga),r===void 0&&d===Nf&&(r=Kc),super(null,i,s,o,a,c,d,r,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Dr,this.minFilter=c!==void 0?c:Dr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class $z extends ql{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",c=1,u=null,d=null,m=null,g=null,y=null,_=null;const w=t.getContextAttributes();let x=null,S=null;const b=[],T=[],C=new Or;C.layers.enable(1),C.viewport=new Hn;const P=new Or;P.layers.enable(2),P.viewport=new Hn;const D=[C,P],U=new mR;U.layers.enable(1),U.layers.enable(2);let F=null,I=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(L){let B=b[L];return B===void 0&&(B=new cx,b[L]=B),B.getTargetRaySpace()},this.getControllerGrip=function(L){let B=b[L];return B===void 0&&(B=new cx,b[L]=B),B.getGripSpace()},this.getHand=function(L){let B=b[L];return B===void 0&&(B=new cx,b[L]=B),B.getHandSpace()};function k(L){const B=T.indexOf(L.inputSource);if(B===-1)return;const ne=b[B];ne!==void 0&&(ne.update(L.inputSource,L.frame,u||o),ne.dispatchEvent({type:L.type,data:L.inputSource}))}function Q(){i.removeEventListener("select",k),i.removeEventListener("selectstart",k),i.removeEventListener("selectend",k),i.removeEventListener("squeeze",k),i.removeEventListener("squeezestart",k),i.removeEventListener("squeezeend",k),i.removeEventListener("end",Q),i.removeEventListener("inputsourceschange",j);for(let L=0;L<b.length;L++){const B=T[L];B!==null&&(T[L]=null,b[L].disconnect(B))}F=null,I=null,e.setRenderTarget(x),y=null,g=null,m=null,i=null,S=null,W.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(L){s=L,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(L){a=L,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(L){u=L},this.getBaseLayer=function(){return g!==null?g:y},this.getBinding=function(){return m},this.getFrame=function(){return _},this.getSession=function(){return i},this.setSession=async function(L){if(i=L,i!==null){if(x=e.getRenderTarget(),i.addEventListener("select",k),i.addEventListener("selectstart",k),i.addEventListener("selectend",k),i.addEventListener("squeeze",k),i.addEventListener("squeezestart",k),i.addEventListener("squeezeend",k),i.addEventListener("end",Q),i.addEventListener("inputsourceschange",j),w.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const B={antialias:i.renderState.layers===void 0?w.antialias:!0,alpha:!0,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:s};y=new XRWebGLLayer(i,t,B),i.updateRenderState({baseLayer:y}),S=new oo(y.framebufferWidth,y.framebufferHeight,{format:di,type:ro,colorSpace:e.outputColorSpace,stencilBuffer:w.stencil})}else{let B=null,ne=null,ae=null;w.depth&&(ae=w.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,B=w.stencil?Nf:Zc,ne=w.stencil?Kc:Ga);const de={colorFormat:t.RGBA8,depthFormat:ae,scaleFactor:s};m=new XRWebGLBinding(i,t),g=m.createProjectionLayer(de),i.updateRenderState({layers:[g]}),S=new oo(g.textureWidth,g.textureHeight,{format:di,type:ro,depthTexture:new gR(g.textureWidth,g.textureHeight,ne,void 0,void 0,void 0,void 0,void 0,void 0,B),stencilBuffer:w.stencil,colorSpace:e.outputColorSpace,samples:w.antialias?4:0});const pe=e.properties.get(S);pe.__ignoreDepthValues=g.ignoreDepthValues}S.isXRRenderTarget=!0,this.setFoveation(c),u=null,o=await i.requestReferenceSpace(a),W.setContext(i),W.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function j(L){for(let B=0;B<L.removed.length;B++){const ne=L.removed[B],ae=T.indexOf(ne);ae>=0&&(T[ae]=null,b[ae].disconnect(ne))}for(let B=0;B<L.added.length;B++){const ne=L.added[B];let ae=T.indexOf(ne);if(ae===-1){for(let pe=0;pe<b.length;pe++)if(pe>=T.length){T.push(ne),ae=pe;break}else if(T[pe]===null){T[pe]=ne,ae=pe;break}if(ae===-1)break}const de=b[ae];de&&de.connect(ne)}}const $=new oe,H=new oe;function ie(L,B,ne){$.setFromMatrixPosition(B.matrixWorld),H.setFromMatrixPosition(ne.matrixWorld);const ae=$.distanceTo(H),de=B.projectionMatrix.elements,pe=ne.projectionMatrix.elements,xe=de[14]/(de[10]-1),Me=de[14]/(de[10]+1),Xe=(de[9]+1)/de[5],ot=(de[9]-1)/de[5],He=(de[8]-1)/de[0],te=(pe[8]+1)/pe[0],Ye=xe*He,Re=xe*te,je=ae/(-He+te),Ne=je*-He;B.matrixWorld.decompose(L.position,L.quaternion,L.scale),L.translateX(Ne),L.translateZ(je),L.matrixWorld.compose(L.position,L.quaternion,L.scale),L.matrixWorldInverse.copy(L.matrixWorld).invert();const ct=xe+je,Fe=Me+je,qe=Ye-Ne,nt=Re+(ae-Ne),Ue=Xe*Me/Fe*ct,_t=ot*Me/Fe*ct;L.projectionMatrix.makePerspective(qe,nt,Ue,_t,ct,Fe),L.projectionMatrixInverse.copy(L.projectionMatrix).invert()}function re(L,B){B===null?L.matrixWorld.copy(L.matrix):L.matrixWorld.multiplyMatrices(B.matrixWorld,L.matrix),L.matrixWorldInverse.copy(L.matrixWorld).invert()}this.updateCamera=function(L){if(i===null)return;U.near=P.near=C.near=L.near,U.far=P.far=C.far=L.far,(F!==U.near||I!==U.far)&&(i.updateRenderState({depthNear:U.near,depthFar:U.far}),F=U.near,I=U.far);const B=L.parent,ne=U.cameras;re(U,B);for(let ae=0;ae<ne.length;ae++)re(ne[ae],B);ne.length===2?ie(U,C,P):U.projectionMatrix.copy(C.projectionMatrix),ue(L,U,B)};function ue(L,B,ne){ne===null?L.matrix.copy(B.matrixWorld):(L.matrix.copy(ne.matrixWorld),L.matrix.invert(),L.matrix.multiply(B.matrixWorld)),L.matrix.decompose(L.position,L.quaternion,L.scale),L.updateMatrixWorld(!0),L.projectionMatrix.copy(B.projectionMatrix),L.projectionMatrixInverse.copy(B.projectionMatrixInverse),L.isPerspectiveCamera&&(L.fov=Dh*2*Math.atan(1/L.projectionMatrix.elements[5]),L.zoom=1)}this.getCamera=function(){return U},this.getFoveation=function(){if(!(g===null&&y===null))return c},this.setFoveation=function(L){c=L,g!==null&&(g.fixedFoveation=L),y!==null&&y.fixedFoveation!==void 0&&(y.fixedFoveation=L)};let G=null;function K(L,B){if(d=B.getViewerPose(u||o),_=B,d!==null){const ne=d.views;y!==null&&(e.setRenderTargetFramebuffer(S,y.framebuffer),e.setRenderTarget(S));let ae=!1;ne.length!==U.cameras.length&&(U.cameras.length=0,ae=!0);for(let de=0;de<ne.length;de++){const pe=ne[de];let xe=null;if(y!==null)xe=y.getViewport(pe);else{const Xe=m.getViewSubImage(g,pe);xe=Xe.viewport,de===0&&(e.setRenderTargetTextures(S,Xe.colorTexture,g.ignoreDepthValues?void 0:Xe.depthStencilTexture),e.setRenderTarget(S))}let Me=D[de];Me===void 0&&(Me=new Or,Me.layers.enable(de),Me.viewport=new Hn,D[de]=Me),Me.matrix.fromArray(pe.transform.matrix),Me.matrix.decompose(Me.position,Me.quaternion,Me.scale),Me.projectionMatrix.fromArray(pe.projectionMatrix),Me.projectionMatrixInverse.copy(Me.projectionMatrix).invert(),Me.viewport.set(xe.x,xe.y,xe.width,xe.height),de===0&&(U.matrix.copy(Me.matrix),U.matrix.decompose(U.position,U.quaternion,U.scale)),ae===!0&&U.cameras.push(Me)}}for(let ne=0;ne<b.length;ne++){const ae=T[ne],de=b[ne];ae!==null&&de!==void 0&&de.update(ae,B,u||o)}G&&G(L,B),B.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:B}),_=null}const W=new cR;W.setAnimationLoop(K),this.setAnimationLoop=function(L){G=L},this.dispose=function(){}}}function e5(n,e){function t(x,S){x.matrixAutoUpdate===!0&&x.updateMatrix(),S.value.copy(x.matrix)}function r(x,S){S.color.getRGB(x.fogColor.value,aR(n)),S.isFog?(x.fogNear.value=S.near,x.fogFar.value=S.far):S.isFogExp2&&(x.fogDensity.value=S.density)}function i(x,S,b,T,C){S.isMeshBasicMaterial||S.isMeshLambertMaterial?s(x,S):S.isMeshToonMaterial?(s(x,S),m(x,S)):S.isMeshPhongMaterial?(s(x,S),d(x,S)):S.isMeshStandardMaterial?(s(x,S),g(x,S),S.isMeshPhysicalMaterial&&y(x,S,C)):S.isMeshMatcapMaterial?(s(x,S),_(x,S)):S.isMeshDepthMaterial?s(x,S):S.isMeshDistanceMaterial?(s(x,S),w(x,S)):S.isMeshNormalMaterial?s(x,S):S.isLineBasicMaterial?(o(x,S),S.isLineDashedMaterial&&a(x,S)):S.isPointsMaterial?c(x,S,b,T):S.isSpriteMaterial?u(x,S):S.isShadowMaterial?(x.color.value.copy(S.color),x.opacity.value=S.opacity):S.isShaderMaterial&&(S.uniformsNeedUpdate=!1)}function s(x,S){x.opacity.value=S.opacity,S.color&&x.diffuse.value.copy(S.color),S.emissive&&x.emissive.value.copy(S.emissive).multiplyScalar(S.emissiveIntensity),S.map&&(x.map.value=S.map,t(S.map,x.mapTransform)),S.alphaMap&&(x.alphaMap.value=S.alphaMap,t(S.alphaMap,x.alphaMapTransform)),S.bumpMap&&(x.bumpMap.value=S.bumpMap,t(S.bumpMap,x.bumpMapTransform),x.bumpScale.value=S.bumpScale,S.side===ms&&(x.bumpScale.value*=-1)),S.normalMap&&(x.normalMap.value=S.normalMap,t(S.normalMap,x.normalMapTransform),x.normalScale.value.copy(S.normalScale),S.side===ms&&x.normalScale.value.negate()),S.displacementMap&&(x.displacementMap.value=S.displacementMap,t(S.displacementMap,x.displacementMapTransform),x.displacementScale.value=S.displacementScale,x.displacementBias.value=S.displacementBias),S.emissiveMap&&(x.emissiveMap.value=S.emissiveMap,t(S.emissiveMap,x.emissiveMapTransform)),S.specularMap&&(x.specularMap.value=S.specularMap,t(S.specularMap,x.specularMapTransform)),S.alphaTest>0&&(x.alphaTest.value=S.alphaTest);const b=e.get(S).envMap;if(b&&(x.envMap.value=b,x.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=S.reflectivity,x.ior.value=S.ior,x.refractionRatio.value=S.refractionRatio),S.lightMap){x.lightMap.value=S.lightMap;const T=n._useLegacyLights===!0?Math.PI:1;x.lightMapIntensity.value=S.lightMapIntensity*T,t(S.lightMap,x.lightMapTransform)}S.aoMap&&(x.aoMap.value=S.aoMap,x.aoMapIntensity.value=S.aoMapIntensity,t(S.aoMap,x.aoMapTransform))}function o(x,S){x.diffuse.value.copy(S.color),x.opacity.value=S.opacity,S.map&&(x.map.value=S.map,t(S.map,x.mapTransform))}function a(x,S){x.dashSize.value=S.dashSize,x.totalSize.value=S.dashSize+S.gapSize,x.scale.value=S.scale}function c(x,S,b,T){x.diffuse.value.copy(S.color),x.opacity.value=S.opacity,x.size.value=S.size*b,x.scale.value=T*.5,S.map&&(x.map.value=S.map,t(S.map,x.uvTransform)),S.alphaMap&&(x.alphaMap.value=S.alphaMap,t(S.alphaMap,x.alphaMapTransform)),S.alphaTest>0&&(x.alphaTest.value=S.alphaTest)}function u(x,S){x.diffuse.value.copy(S.color),x.opacity.value=S.opacity,x.rotation.value=S.rotation,S.map&&(x.map.value=S.map,t(S.map,x.mapTransform)),S.alphaMap&&(x.alphaMap.value=S.alphaMap,t(S.alphaMap,x.alphaMapTransform)),S.alphaTest>0&&(x.alphaTest.value=S.alphaTest)}function d(x,S){x.specular.value.copy(S.specular),x.shininess.value=Math.max(S.shininess,1e-4)}function m(x,S){S.gradientMap&&(x.gradientMap.value=S.gradientMap)}function g(x,S){x.metalness.value=S.metalness,S.metalnessMap&&(x.metalnessMap.value=S.metalnessMap,t(S.metalnessMap,x.metalnessMapTransform)),x.roughness.value=S.roughness,S.roughnessMap&&(x.roughnessMap.value=S.roughnessMap,t(S.roughnessMap,x.roughnessMapTransform)),e.get(S).envMap&&(x.envMapIntensity.value=S.envMapIntensity)}function y(x,S,b){x.ior.value=S.ior,S.sheen>0&&(x.sheenColor.value.copy(S.sheenColor).multiplyScalar(S.sheen),x.sheenRoughness.value=S.sheenRoughness,S.sheenColorMap&&(x.sheenColorMap.value=S.sheenColorMap,t(S.sheenColorMap,x.sheenColorMapTransform)),S.sheenRoughnessMap&&(x.sheenRoughnessMap.value=S.sheenRoughnessMap,t(S.sheenRoughnessMap,x.sheenRoughnessMapTransform))),S.clearcoat>0&&(x.clearcoat.value=S.clearcoat,x.clearcoatRoughness.value=S.clearcoatRoughness,S.clearcoatMap&&(x.clearcoatMap.value=S.clearcoatMap,t(S.clearcoatMap,x.clearcoatMapTransform)),S.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=S.clearcoatRoughnessMap,t(S.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),S.clearcoatNormalMap&&(x.clearcoatNormalMap.value=S.clearcoatNormalMap,t(S.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(S.clearcoatNormalScale),S.side===ms&&x.clearcoatNormalScale.value.negate())),S.iridescence>0&&(x.iridescence.value=S.iridescence,x.iridescenceIOR.value=S.iridescenceIOR,x.iridescenceThicknessMinimum.value=S.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=S.iridescenceThicknessRange[1],S.iridescenceMap&&(x.iridescenceMap.value=S.iridescenceMap,t(S.iridescenceMap,x.iridescenceMapTransform)),S.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=S.iridescenceThicknessMap,t(S.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),S.transmission>0&&(x.transmission.value=S.transmission,x.transmissionSamplerMap.value=b.texture,x.transmissionSamplerSize.value.set(b.width,b.height),S.transmissionMap&&(x.transmissionMap.value=S.transmissionMap,t(S.transmissionMap,x.transmissionMapTransform)),x.thickness.value=S.thickness,S.thicknessMap&&(x.thicknessMap.value=S.thicknessMap,t(S.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=S.attenuationDistance,x.attenuationColor.value.copy(S.attenuationColor)),S.anisotropy>0&&(x.anisotropyVector.value.set(S.anisotropy*Math.cos(S.anisotropyRotation),S.anisotropy*Math.sin(S.anisotropyRotation)),S.anisotropyMap&&(x.anisotropyMap.value=S.anisotropyMap,t(S.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=S.specularIntensity,x.specularColor.value.copy(S.specularColor),S.specularColorMap&&(x.specularColorMap.value=S.specularColorMap,t(S.specularColorMap,x.specularColorMapTransform)),S.specularIntensityMap&&(x.specularIntensityMap.value=S.specularIntensityMap,t(S.specularIntensityMap,x.specularIntensityMapTransform))}function _(x,S){S.matcap&&(x.matcap.value=S.matcap)}function w(x,S){const b=e.get(S).light;x.referencePosition.value.setFromMatrixPosition(b.matrixWorld),x.nearDistance.value=b.shadow.camera.near,x.farDistance.value=b.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function t5(n,e,t,r){let i={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function c(b,T){const C=T.program;r.uniformBlockBinding(b,C)}function u(b,T){let C=i[b.id];C===void 0&&(_(b),C=d(b),i[b.id]=C,b.addEventListener("dispose",x));const P=T.program;r.updateUBOMapping(b,P);const D=e.render.frame;s[b.id]!==D&&(g(b),s[b.id]=D)}function d(b){const T=m();b.__bindingPointIndex=T;const C=n.createBuffer(),P=b.__size,D=b.usage;return n.bindBuffer(n.UNIFORM_BUFFER,C),n.bufferData(n.UNIFORM_BUFFER,P,D),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,T,C),C}function m(){for(let b=0;b<a;b++)if(o.indexOf(b)===-1)return o.push(b),b;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function g(b){const T=i[b.id],C=b.uniforms,P=b.__cache;n.bindBuffer(n.UNIFORM_BUFFER,T);for(let D=0,U=C.length;D<U;D++){const F=C[D];if(y(F,D,P)===!0){const I=F.__offset,k=Array.isArray(F.value)?F.value:[F.value];let Q=0;for(let j=0;j<k.length;j++){const $=k[j],H=w($);typeof $=="number"?(F.__data[0]=$,n.bufferSubData(n.UNIFORM_BUFFER,I+Q,F.__data)):$.isMatrix3?(F.__data[0]=$.elements[0],F.__data[1]=$.elements[1],F.__data[2]=$.elements[2],F.__data[3]=$.elements[0],F.__data[4]=$.elements[3],F.__data[5]=$.elements[4],F.__data[6]=$.elements[5],F.__data[7]=$.elements[0],F.__data[8]=$.elements[6],F.__data[9]=$.elements[7],F.__data[10]=$.elements[8],F.__data[11]=$.elements[0]):($.toArray(F.__data,Q),Q+=H.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,I,F.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function y(b,T,C){const P=b.value;if(C[T]===void 0){if(typeof P=="number")C[T]=P;else{const D=Array.isArray(P)?P:[P],U=[];for(let F=0;F<D.length;F++)U.push(D[F].clone());C[T]=U}return!0}else if(typeof P=="number"){if(C[T]!==P)return C[T]=P,!0}else{const D=Array.isArray(C[T])?C[T]:[C[T]],U=Array.isArray(P)?P:[P];for(let F=0;F<D.length;F++){const I=D[F];if(I.equals(U[F])===!1)return I.copy(U[F]),!0}}return!1}function _(b){const T=b.uniforms;let C=0;const P=16;let D=0;for(let U=0,F=T.length;U<F;U++){const I=T[U],k={boundary:0,storage:0},Q=Array.isArray(I.value)?I.value:[I.value];for(let j=0,$=Q.length;j<$;j++){const H=Q[j],ie=w(H);k.boundary+=ie.boundary,k.storage+=ie.storage}if(I.__data=new Float32Array(k.storage/Float32Array.BYTES_PER_ELEMENT),I.__offset=C,U>0){D=C%P;const j=P-D;D!==0&&j-k.boundary<0&&(C+=P-D,I.__offset=C)}C+=k.storage}return D=C%P,D>0&&(C+=P-D),b.__size=C,b.__cache={},this}function w(b){const T={boundary:0,storage:0};return typeof b=="number"?(T.boundary=4,T.storage=4):b.isVector2?(T.boundary=8,T.storage=8):b.isVector3||b.isColor?(T.boundary=16,T.storage=12):b.isVector4?(T.boundary=16,T.storage=16):b.isMatrix3?(T.boundary=48,T.storage=48):b.isMatrix4?(T.boundary=64,T.storage=64):b.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",b),T}function x(b){const T=b.target;T.removeEventListener("dispose",x);const C=o.indexOf(T.__bindingPointIndex);o.splice(C,1),n.deleteBuffer(i[T.id]),delete i[T.id],delete s[T.id]}function S(){for(const b in i)n.deleteBuffer(i[b]);o=[],i={},s={}}return{bind:c,update:u,dispose:S}}class wy{constructor(e={}){const{canvas:t=iR(),context:r=null,depth:i=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:u=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:m=!1}=e;this.isWebGLRenderer=!0;let g;r!==null?g=r.getContextAttributes().alpha:g=o;const y=new Uint32Array(4),_=new Int32Array(4);let w=null,x=null;const S=[],b=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=ti,this._useLegacyLights=!1,this.toneMapping=Xa,this.toneMappingExposure=1;const T=this;let C=!1,P=0,D=0,U=null,F=-1,I=null;const k=new Hn,Q=new Hn;let j=null;const $=new Rt(0);let H=0,ie=t.width,re=t.height,ue=1,G=null,K=null;const W=new Hn(0,0,ie,re),L=new Hn(0,0,ie,re);let B=!1;const ne=new yy;let ae=!1,de=!1,pe=null;const xe=new sn,Me=new it,Xe=new oe,ot={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function He(){return U===null?ue:1}let te=r;function Ye(V,se){for(let le=0;le<V.length;le++){const ve=V[le],ge=t.getContext(ve,se);if(ge!==null)return ge}return null}try{const V={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:c,preserveDrawingBuffer:u,powerPreference:d,failIfMajorPerformanceCaveat:m};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${If}`),t.addEventListener("webglcontextlost",Te,!1),t.addEventListener("webglcontextrestored",he,!1),t.addEventListener("webglcontextcreationerror",ut,!1),te===null){const se=["webgl2","webgl","experimental-webgl"];if(T.isWebGL1Renderer===!0&&se.shift(),te=Ye(se,V),te===null)throw Ye(se)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&te instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),te.getShaderPrecisionFormat===void 0&&(te.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(V){throw console.error("THREE.WebGLRenderer: "+V.message),V}let Re,je,Ne,ct,Fe,qe,nt,Ue,_t,J,q,ye,tt,Le,We,st,et,lt,Mt,xt,Ge,mt,ce,Ie;function Pe(){Re=new gB(te),je=new uB(te,Re,e),Re.init(je),mt=new pR(te,Re,je),Ne=new Zz(te,Re,je),ct=new _B(te),Fe=new kz,qe=new Qz(te,Re,Ne,Fe,je,mt,ct),nt=new dB(T),Ue=new mB(T),_t=new RF(te,je),ce=new lB(te,Re,_t,je),J=new vB(te,_t,ct,ce),q=new EB(te,J,_t,ct),Mt=new wB(te,je,qe),st=new fB(Fe),ye=new Fz(T,nt,Ue,Re,je,ce,st),tt=new e5(T,Fe),Le=new zz,We=new Xz(Re,je),lt=new aB(T,nt,Ue,Ne,q,g,c),et=new Kz(T,q,je),Ie=new t5(te,ct,je,Ne),xt=new cB(te,Re,ct,je),Ge=new yB(te,Re,ct,je),ct.programs=ye.programs,T.capabilities=je,T.extensions=Re,T.properties=Fe,T.renderLists=Le,T.shadowMap=et,T.state=Ne,T.info=ct}Pe();const ke=new $z(T,te);this.xr=ke,this.getContext=function(){return te},this.getContextAttributes=function(){return te.getContextAttributes()},this.forceContextLoss=function(){const V=Re.get("WEBGL_lose_context");V&&V.loseContext()},this.forceContextRestore=function(){const V=Re.get("WEBGL_lose_context");V&&V.restoreContext()},this.getPixelRatio=function(){return ue},this.setPixelRatio=function(V){V!==void 0&&(ue=V,this.setSize(ie,re,!1))},this.getSize=function(V){return V.set(ie,re)},this.setSize=function(V,se,le=!0){if(ke.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ie=V,re=se,t.width=Math.floor(V*ue),t.height=Math.floor(se*ue),le===!0&&(t.style.width=V+"px",t.style.height=se+"px"),this.setViewport(0,0,V,se)},this.getDrawingBufferSize=function(V){return V.set(ie*ue,re*ue).floor()},this.setDrawingBufferSize=function(V,se,le){ie=V,re=se,ue=le,t.width=Math.floor(V*le),t.height=Math.floor(se*le),this.setViewport(0,0,V,se)},this.getCurrentViewport=function(V){return V.copy(k)},this.getViewport=function(V){return V.copy(W)},this.setViewport=function(V,se,le,ve){V.isVector4?W.set(V.x,V.y,V.z,V.w):W.set(V,se,le,ve),Ne.viewport(k.copy(W).multiplyScalar(ue).floor())},this.getScissor=function(V){return V.copy(L)},this.setScissor=function(V,se,le,ve){V.isVector4?L.set(V.x,V.y,V.z,V.w):L.set(V,se,le,ve),Ne.scissor(Q.copy(L).multiplyScalar(ue).floor())},this.getScissorTest=function(){return B},this.setScissorTest=function(V){Ne.setScissorTest(B=V)},this.setOpaqueSort=function(V){G=V},this.setTransparentSort=function(V){K=V},this.getClearColor=function(V){return V.copy(lt.getClearColor())},this.setClearColor=function(){lt.setClearColor.apply(lt,arguments)},this.getClearAlpha=function(){return lt.getClearAlpha()},this.setClearAlpha=function(){lt.setClearAlpha.apply(lt,arguments)},this.clear=function(V=!0,se=!0,le=!0){let ve=0;if(V){let ge=!1;if(U!==null){const Be=U.texture.format;ge=Be===YS||Be===XS||Be===jS}if(ge){const Be=U.texture.type,Ze=Be===ro||Be===Ga||Be===hy||Be===Kc||Be===GS||Be===VS,Je=lt.getClearColor(),Se=lt.getClearAlpha(),Lt=Je.r,dt=Je.g,ht=Je.b;Ze?(y[0]=Lt,y[1]=dt,y[2]=ht,y[3]=Se,te.clearBufferuiv(te.COLOR,0,y)):(_[0]=Lt,_[1]=dt,_[2]=ht,_[3]=Se,te.clearBufferiv(te.COLOR,0,_))}else ve|=te.COLOR_BUFFER_BIT}se&&(ve|=te.DEPTH_BUFFER_BIT),le&&(ve|=te.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),te.clear(ve)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Te,!1),t.removeEventListener("webglcontextrestored",he,!1),t.removeEventListener("webglcontextcreationerror",ut,!1),Le.dispose(),We.dispose(),Fe.dispose(),nt.dispose(),Ue.dispose(),q.dispose(),ce.dispose(),Ie.dispose(),ye.dispose(),ke.dispose(),ke.removeEventListener("sessionstart",gn),ke.removeEventListener("sessionend",Yt),pe&&(pe.dispose(),pe=null),pn.stop()};function Te(V){V.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),C=!0}function he(){console.log("THREE.WebGLRenderer: Context Restored."),C=!1;const V=ct.autoReset,se=et.enabled,le=et.autoUpdate,ve=et.needsUpdate,ge=et.type;Pe(),ct.autoReset=V,et.enabled=se,et.autoUpdate=le,et.needsUpdate=ve,et.type=ge}function ut(V){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",V.statusMessage)}function rt(V){const se=V.target;se.removeEventListener("dispose",rt),De(se)}function De(V){at(V),Fe.remove(V)}function at(V){const se=Fe.get(V).programs;se!==void 0&&(se.forEach(function(le){ye.releaseProgram(le)}),V.isShaderMaterial&&ye.releaseShaderCache(V))}this.renderBufferDirect=function(V,se,le,ve,ge,Be){se===null&&(se=ot);const Ze=ge.isMesh&&ge.matrixWorld.determinant()<0,Je=Y(V,se,le,ve,ge);Ne.setMaterial(ve,Ze);let Se=le.index,Lt=1;if(ve.wireframe===!0){if(Se=J.getWireframeAttribute(le),Se===void 0)return;Lt=2}const dt=le.drawRange,ht=le.attributes.position;let It=dt.start*Lt,Ht=(dt.start+dt.count)*Lt;Be!==null&&(It=Math.max(It,Be.start*Lt),Ht=Math.min(Ht,(Be.start+Be.count)*Lt)),Se!==null?(It=Math.max(It,0),Ht=Math.min(Ht,Se.count)):ht!=null&&(It=Math.max(It,0),Ht=Math.min(Ht,ht.count));const jt=Ht-It;if(jt<0||jt===1/0)return;ce.setup(ge,ve,Je,le,Se);let Zt,Tt=xt;if(Se!==null&&(Zt=_t.get(Se),Tt=Ge,Tt.setIndex(Zt)),ge.isMesh)ve.wireframe===!0?(Ne.setLineWidth(ve.wireframeLinewidth*He()),Tt.setMode(te.LINES)):Tt.setMode(te.TRIANGLES);else if(ge.isLine){let bt=ve.linewidth;bt===void 0&&(bt=1),Ne.setLineWidth(bt*He()),ge.isLineSegments?Tt.setMode(te.LINES):ge.isLineLoop?Tt.setMode(te.LINE_LOOP):Tt.setMode(te.LINE_STRIP)}else ge.isPoints?Tt.setMode(te.POINTS):ge.isSprite&&Tt.setMode(te.TRIANGLES);if(ge.isInstancedMesh)Tt.renderInstances(It,jt,ge.count);else if(le.isInstancedBufferGeometry){const bt=le._maxInstanceCount!==void 0?le._maxInstanceCount:1/0,Kt=Math.min(le.instanceCount,bt);Tt.renderInstances(It,jt,Kt)}else Tt.render(It,jt)};function St(V,se,le){V.transparent===!0&&V.side===eo&&V.forceSinglePass===!1?(V.side=ms,V.needsUpdate=!0,qt(V,se,le),V.side=Qa,V.needsUpdate=!0,qt(V,se,le),V.side=eo):qt(V,se,le)}this.compile=function(V,se,le=null){le===null&&(le=V),x=We.get(le),x.init(),b.push(x),le.traverseVisible(function(ge){ge.isLight&&ge.layers.test(se.layers)&&(x.pushLight(ge),ge.castShadow&&x.pushShadow(ge))}),V!==le&&V.traverseVisible(function(ge){ge.isLight&&ge.layers.test(se.layers)&&(x.pushLight(ge),ge.castShadow&&x.pushShadow(ge))}),x.setupLights(T._useLegacyLights);const ve=new Set;return V.traverse(function(ge){const Be=ge.material;if(Be)if(Array.isArray(Be))for(let Ze=0;Ze<Be.length;Ze++){const Je=Be[Ze];St(Je,le,ge),ve.add(Je)}else St(Be,le,ge),ve.add(Be)}),b.pop(),x=null,ve},this.compileAsync=function(V,se,le=null){const ve=this.compile(V,se,le);return new Promise(ge=>{function Be(){if(ve.forEach(function(Ze){Fe.get(Ze).currentProgram.isReady()&&ve.delete(Ze)}),ve.size===0){ge(V);return}setTimeout(Be,10)}Re.get("KHR_parallel_shader_compile")!==null?Be():setTimeout(Be,10)})};let Et=null;function Wt(V){Et&&Et(V)}function gn(){pn.stop()}function Yt(){pn.start()}const pn=new cR;pn.setAnimationLoop(Wt),typeof self<"u"&&pn.setContext(self),this.setAnimationLoop=function(V){Et=V,ke.setAnimationLoop(V),V===null?pn.stop():pn.start()},ke.addEventListener("sessionstart",gn),ke.addEventListener("sessionend",Yt),this.render=function(V,se){if(se!==void 0&&se.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(C===!0)return;V.matrixWorldAutoUpdate===!0&&V.updateMatrixWorld(),se.parent===null&&se.matrixWorldAutoUpdate===!0&&se.updateMatrixWorld(),ke.enabled===!0&&ke.isPresenting===!0&&(ke.cameraAutoUpdate===!0&&ke.updateCamera(se),se=ke.getCamera()),V.isScene===!0&&V.onBeforeRender(T,V,se,U),x=We.get(V,b.length),x.init(),b.push(x),xe.multiplyMatrices(se.projectionMatrix,se.matrixWorldInverse),ne.setFromProjectionMatrix(xe),de=this.localClippingEnabled,ae=st.init(this.clippingPlanes,de),w=Le.get(V,S.length),w.init(),S.push(w),kn(V,se,0,T.sortObjects),w.finish(),T.sortObjects===!0&&w.sort(G,K),this.info.render.frame++,ae===!0&&st.beginShadows();const le=x.state.shadowsArray;if(et.render(le,V,se),ae===!0&&st.endShadows(),this.info.autoReset===!0&&this.info.reset(),lt.render(w,V),x.setupLights(T._useLegacyLights),se.isArrayCamera){const ve=se.cameras;for(let ge=0,Be=ve.length;ge<Be;ge++){const Ze=ve[ge];Fr(w,V,Ze,Ze.viewport)}}else Fr(w,V,se);U!==null&&(qe.updateMultisampleRenderTarget(U),qe.updateRenderTargetMipmap(U)),V.isScene===!0&&V.onAfterRender(T,V,se),ce.resetDefaultState(),F=-1,I=null,b.pop(),b.length>0?x=b[b.length-1]:x=null,S.pop(),S.length>0?w=S[S.length-1]:w=null};function kn(V,se,le,ve){if(V.visible===!1)return;if(V.layers.test(se.layers)){if(V.isGroup)le=V.renderOrder;else if(V.isLOD)V.autoUpdate===!0&&V.update(se);else if(V.isLight)x.pushLight(V),V.castShadow&&x.pushShadow(V);else if(V.isSprite){if(!V.frustumCulled||ne.intersectsSprite(V)){ve&&Xe.setFromMatrixPosition(V.matrixWorld).applyMatrix4(xe);const Ze=q.update(V),Je=V.material;Je.visible&&w.push(V,Ze,Je,le,Xe.z,null)}}else if((V.isMesh||V.isLine||V.isPoints)&&(!V.frustumCulled||ne.intersectsObject(V))){const Ze=q.update(V),Je=V.material;if(ve&&(V.boundingSphere!==void 0?(V.boundingSphere===null&&V.computeBoundingSphere(),Xe.copy(V.boundingSphere.center)):(Ze.boundingSphere===null&&Ze.computeBoundingSphere(),Xe.copy(Ze.boundingSphere.center)),Xe.applyMatrix4(V.matrixWorld).applyMatrix4(xe)),Array.isArray(Je)){const Se=Ze.groups;for(let Lt=0,dt=Se.length;Lt<dt;Lt++){const ht=Se[Lt],It=Je[ht.materialIndex];It&&It.visible&&w.push(V,Ze,It,le,Xe.z,ht)}}else Je.visible&&w.push(V,Ze,Je,le,Xe.z,null)}}const Be=V.children;for(let Ze=0,Je=Be.length;Ze<Je;Ze++)kn(Be[Ze],se,le,ve)}function Fr(V,se,le,ve){const ge=V.opaque,Be=V.transmissive,Ze=V.transparent;x.setupLightsView(le),ae===!0&&st.setGlobalState(T.clippingPlanes,le),Be.length>0&&Sr(ge,Be,se,le),ve&&Ne.viewport(k.copy(ve)),ge.length>0&&sr(ge,se,le),Be.length>0&&sr(Be,se,le),Ze.length>0&&sr(Ze,se,le),Ne.buffers.depth.setTest(!0),Ne.buffers.depth.setMask(!0),Ne.buffers.color.setMask(!0),Ne.setPolygonOffset(!1)}function Sr(V,se,le,ve){if((le.isScene===!0?le.overrideMaterial:null)!==null)return;const Be=je.isWebGL2;pe===null&&(pe=new oo(1,1,{generateMipmaps:!0,type:Re.has("EXT_color_buffer_half_float")?bi:ro,minFilter:$a,samples:Be?4:0})),T.getDrawingBufferSize(Me),Be?pe.setSize(Me.x,Me.y):pe.setSize(G0(Me.x),G0(Me.y));const Ze=T.getRenderTarget();T.setRenderTarget(pe),T.getClearColor($),H=T.getClearAlpha(),H<1&&T.setClearColor(16777215,.5),T.clear();const Je=T.toneMapping;T.toneMapping=Xa,sr(V,le,ve),qe.updateMultisampleRenderTarget(pe),qe.updateRenderTargetMipmap(pe);let Se=!1;for(let Lt=0,dt=se.length;Lt<dt;Lt++){const ht=se[Lt],It=ht.object,Ht=ht.geometry,jt=ht.material,Zt=ht.group;if(jt.side===eo&&It.layers.test(ve.layers)){const Tt=jt.side;jt.side=ms,jt.needsUpdate=!0,$n(It,le,ve,Ht,jt,Zt),jt.side=Tt,jt.needsUpdate=!0,Se=!0}}Se===!0&&(qe.updateMultisampleRenderTarget(pe),qe.updateRenderTargetMipmap(pe)),T.setRenderTarget(Ze),T.setClearColor($,H),T.toneMapping=Je}function sr(V,se,le){const ve=se.isScene===!0?se.overrideMaterial:null;for(let ge=0,Be=V.length;ge<Be;ge++){const Ze=V[ge],Je=Ze.object,Se=Ze.geometry,Lt=ve===null?Ze.material:ve,dt=Ze.group;Je.layers.test(le.layers)&&$n(Je,se,le,Se,Lt,dt)}}function $n(V,se,le,ve,ge,Be){V.onBeforeRender(T,se,le,ve,ge,Be),V.modelViewMatrix.multiplyMatrices(le.matrixWorldInverse,V.matrixWorld),V.normalMatrix.getNormalMatrix(V.modelViewMatrix),ge.onBeforeRender(T,se,le,ve,V,Be),ge.transparent===!0&&ge.side===eo&&ge.forceSinglePass===!1?(ge.side=ms,ge.needsUpdate=!0,T.renderBufferDirect(le,se,ve,ge,V,Be),ge.side=Qa,ge.needsUpdate=!0,T.renderBufferDirect(le,se,ve,ge,V,Be),ge.side=eo):T.renderBufferDirect(le,se,ve,ge,V,Be),V.onAfterRender(T,se,le,ve,ge,Be)}function qt(V,se,le){se.isScene!==!0&&(se=ot);const ve=Fe.get(V),ge=x.state.lights,Be=x.state.shadowsArray,Ze=ge.state.version,Je=ye.getParameters(V,ge.state,Be,se,le),Se=ye.getProgramCacheKey(Je);let Lt=ve.programs;ve.environment=V.isMeshStandardMaterial?se.environment:null,ve.fog=se.fog,ve.envMap=(V.isMeshStandardMaterial?Ue:nt).get(V.envMap||ve.environment),Lt===void 0&&(V.addEventListener("dispose",rt),Lt=new Map,ve.programs=Lt);let dt=Lt.get(Se);if(dt!==void 0){if(ve.currentProgram===dt&&ve.lightsStateVersion===Ze)return Fi(V,Je),dt}else Je.uniforms=ye.getUniforms(V),V.onBuild(le,Je,T),V.onBeforeCompile(Je,T),dt=ye.acquireProgram(Je,Se),Lt.set(Se,dt),ve.uniforms=Je.uniforms;const ht=ve.uniforms;return(!V.isShaderMaterial&&!V.isRawShaderMaterial||V.clipping===!0)&&(ht.clippingPlanes=st.uniform),Fi(V,Je),ve.needsLights=_e(V),ve.lightsStateVersion=Ze,ve.needsLights&&(ht.ambientLightColor.value=ge.state.ambient,ht.lightProbe.value=ge.state.probe,ht.directionalLights.value=ge.state.directional,ht.directionalLightShadows.value=ge.state.directionalShadow,ht.spotLights.value=ge.state.spot,ht.spotLightShadows.value=ge.state.spotShadow,ht.rectAreaLights.value=ge.state.rectArea,ht.ltc_1.value=ge.state.rectAreaLTC1,ht.ltc_2.value=ge.state.rectAreaLTC2,ht.pointLights.value=ge.state.point,ht.pointLightShadows.value=ge.state.pointShadow,ht.hemisphereLights.value=ge.state.hemi,ht.directionalShadowMap.value=ge.state.directionalShadowMap,ht.directionalShadowMatrix.value=ge.state.directionalShadowMatrix,ht.spotShadowMap.value=ge.state.spotShadowMap,ht.spotLightMatrix.value=ge.state.spotLightMatrix,ht.spotLightMap.value=ge.state.spotLightMap,ht.pointShadowMap.value=ge.state.pointShadowMap,ht.pointShadowMatrix.value=ge.state.pointShadowMatrix),ve.currentProgram=dt,ve.uniformsList=null,dt}function fr(V){if(V.uniformsList===null){const se=V.currentProgram.getUniforms();V.uniformsList=T0.seqWithValue(se.seq,V.uniforms)}return V.uniformsList}function Fi(V,se){const le=Fe.get(V);le.outputColorSpace=se.outputColorSpace,le.instancing=se.instancing,le.instancingColor=se.instancingColor,le.skinning=se.skinning,le.morphTargets=se.morphTargets,le.morphNormals=se.morphNormals,le.morphColors=se.morphColors,le.morphTargetsCount=se.morphTargetsCount,le.numClippingPlanes=se.numClippingPlanes,le.numIntersection=se.numClipIntersection,le.vertexAlphas=se.vertexAlphas,le.vertexTangents=se.vertexTangents,le.toneMapping=se.toneMapping}function Y(V,se,le,ve,ge){se.isScene!==!0&&(se=ot),qe.resetTextureUnits();const Be=se.fog,Ze=ve.isMeshStandardMaterial?se.environment:null,Je=U===null?T.outputColorSpace:U.isXRRenderTarget===!0?U.texture.colorSpace:so,Se=(ve.isMeshStandardMaterial?Ue:nt).get(ve.envMap||Ze),Lt=ve.vertexColors===!0&&!!le.attributes.color&&le.attributes.color.itemSize===4,dt=!!le.attributes.tangent&&(!!ve.normalMap||ve.anisotropy>0),ht=!!le.morphAttributes.position,It=!!le.morphAttributes.normal,Ht=!!le.morphAttributes.color;let jt=Xa;ve.toneMapped&&(U===null||U.isXRRenderTarget===!0)&&(jt=T.toneMapping);const Zt=le.morphAttributes.position||le.morphAttributes.normal||le.morphAttributes.color,Tt=Zt!==void 0?Zt.length:0,bt=Fe.get(ve),Kt=x.state.lights;if(ae===!0&&(de===!0||V!==I)){const on=V===I&&ve.id===F;st.setState(ve,V,on)}let $t=!1;ve.version===bt.__version?(bt.needsLights&&bt.lightsStateVersion!==Kt.state.version||bt.outputColorSpace!==Je||ge.isInstancedMesh&&bt.instancing===!1||!ge.isInstancedMesh&&bt.instancing===!0||ge.isSkinnedMesh&&bt.skinning===!1||!ge.isSkinnedMesh&&bt.skinning===!0||ge.isInstancedMesh&&bt.instancingColor===!0&&ge.instanceColor===null||ge.isInstancedMesh&&bt.instancingColor===!1&&ge.instanceColor!==null||bt.envMap!==Se||ve.fog===!0&&bt.fog!==Be||bt.numClippingPlanes!==void 0&&(bt.numClippingPlanes!==st.numPlanes||bt.numIntersection!==st.numIntersection)||bt.vertexAlphas!==Lt||bt.vertexTangents!==dt||bt.morphTargets!==ht||bt.morphNormals!==It||bt.morphColors!==Ht||bt.toneMapping!==jt||je.isWebGL2===!0&&bt.morphTargetsCount!==Tt)&&($t=!0):($t=!0,bt.__version=ve.version);let Qt=bt.currentProgram;$t===!0&&(Qt=qt(ve,se,ge));let In=!1,Un=!1,On=!1;const un=Qt.getUniforms(),an=bt.uniforms;if(Ne.useProgram(Qt.program)&&(In=!0,Un=!0,On=!0),ve.id!==F&&(F=ve.id,Un=!0),In||I!==V){un.setValue(te,"projectionMatrix",V.projectionMatrix),un.setValue(te,"viewMatrix",V.matrixWorldInverse);const on=un.map.cameraPosition;on!==void 0&&on.setValue(te,Xe.setFromMatrixPosition(V.matrixWorld)),je.logarithmicDepthBuffer&&un.setValue(te,"logDepthBufFC",2/(Math.log(V.far+1)/Math.LN2)),(ve.isMeshPhongMaterial||ve.isMeshToonMaterial||ve.isMeshLambertMaterial||ve.isMeshBasicMaterial||ve.isMeshStandardMaterial||ve.isShaderMaterial)&&un.setValue(te,"isOrthographic",V.isOrthographicCamera===!0),I!==V&&(I=V,Un=!0,On=!0)}if(ge.isSkinnedMesh){un.setOptional(te,ge,"bindMatrix"),un.setOptional(te,ge,"bindMatrixInverse");const on=ge.skeleton;on&&(je.floatVertexTextures?(on.boneTexture===null&&on.computeBoneTexture(),un.setValue(te,"boneTexture",on.boneTexture,qe),un.setValue(te,"boneTextureSize",on.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Yn=le.morphAttributes;if((Yn.position!==void 0||Yn.normal!==void 0||Yn.color!==void 0&&je.isWebGL2===!0)&&Mt.update(ge,le,Qt),(Un||bt.receiveShadow!==ge.receiveShadow)&&(bt.receiveShadow=ge.receiveShadow,un.setValue(te,"receiveShadow",ge.receiveShadow)),ve.isMeshGouraudMaterial&&ve.envMap!==null&&(an.envMap.value=Se,an.flipEnvMap.value=Se.isCubeTexture&&Se.isRenderTargetTexture===!1?-1:1),Un&&(un.setValue(te,"toneMappingExposure",T.toneMappingExposure),bt.needsLights&&ee(an,On),Be&&ve.fog===!0&&tt.refreshFogUniforms(an,Be),tt.refreshMaterialUniforms(an,ve,ue,re,pe),T0.upload(te,fr(bt),an,qe)),ve.isShaderMaterial&&ve.uniformsNeedUpdate===!0&&(T0.upload(te,fr(bt),an,qe),ve.uniformsNeedUpdate=!1),ve.isSpriteMaterial&&un.setValue(te,"center",ge.center),un.setValue(te,"modelViewMatrix",ge.modelViewMatrix),un.setValue(te,"normalMatrix",ge.normalMatrix),un.setValue(te,"modelMatrix",ge.matrixWorld),ve.isShaderMaterial||ve.isRawShaderMaterial){const on=ve.uniformsGroups;for(let rn=0,zn=on.length;rn<zn;rn++)if(je.isWebGL2){const kr=on[rn];Ie.update(kr,Qt),Ie.bind(kr,Qt)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Qt}function ee(V,se){V.ambientLightColor.needsUpdate=se,V.lightProbe.needsUpdate=se,V.directionalLights.needsUpdate=se,V.directionalLightShadows.needsUpdate=se,V.pointLights.needsUpdate=se,V.pointLightShadows.needsUpdate=se,V.spotLights.needsUpdate=se,V.spotLightShadows.needsUpdate=se,V.rectAreaLights.needsUpdate=se,V.hemisphereLights.needsUpdate=se}function _e(V){return V.isMeshLambertMaterial||V.isMeshToonMaterial||V.isMeshPhongMaterial||V.isMeshStandardMaterial||V.isShadowMaterial||V.isShaderMaterial&&V.lights===!0}this.getActiveCubeFace=function(){return P},this.getActiveMipmapLevel=function(){return D},this.getRenderTarget=function(){return U},this.setRenderTargetTextures=function(V,se,le){Fe.get(V.texture).__webglTexture=se,Fe.get(V.depthTexture).__webglTexture=le;const ve=Fe.get(V);ve.__hasExternalTextures=!0,ve.__hasExternalTextures&&(ve.__autoAllocateDepthBuffer=le===void 0,ve.__autoAllocateDepthBuffer||Re.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ve.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(V,se){const le=Fe.get(V);le.__webglFramebuffer=se,le.__useDefaultFramebuffer=se===void 0},this.setRenderTarget=function(V,se=0,le=0){U=V,P=se,D=le;let ve=!0,ge=null,Be=!1,Ze=!1;if(V){const Se=Fe.get(V);Se.__useDefaultFramebuffer!==void 0?(Ne.bindFramebuffer(te.FRAMEBUFFER,null),ve=!1):Se.__webglFramebuffer===void 0?qe.setupRenderTarget(V):Se.__hasExternalTextures&&qe.rebindTextures(V,Fe.get(V.texture).__webglTexture,Fe.get(V.depthTexture).__webglTexture);const Lt=V.texture;(Lt.isData3DTexture||Lt.isDataArrayTexture||Lt.isCompressedArrayTexture)&&(Ze=!0);const dt=Fe.get(V).__webglFramebuffer;V.isWebGLCubeRenderTarget?(Array.isArray(dt[se])?ge=dt[se][le]:ge=dt[se],Be=!0):je.isWebGL2&&V.samples>0&&qe.useMultisampledRTT(V)===!1?ge=Fe.get(V).__webglMultisampledFramebuffer:Array.isArray(dt)?ge=dt[le]:ge=dt,k.copy(V.viewport),Q.copy(V.scissor),j=V.scissorTest}else k.copy(W).multiplyScalar(ue).floor(),Q.copy(L).multiplyScalar(ue).floor(),j=B;if(Ne.bindFramebuffer(te.FRAMEBUFFER,ge)&&je.drawBuffers&&ve&&Ne.drawBuffers(V,ge),Ne.viewport(k),Ne.scissor(Q),Ne.setScissorTest(j),Be){const Se=Fe.get(V.texture);te.framebufferTexture2D(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_CUBE_MAP_POSITIVE_X+se,Se.__webglTexture,le)}else if(Ze){const Se=Fe.get(V.texture),Lt=se||0;te.framebufferTextureLayer(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,Se.__webglTexture,le||0,Lt)}F=-1},this.readRenderTargetPixels=function(V,se,le,ve,ge,Be,Ze){if(!(V&&V.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Je=Fe.get(V).__webglFramebuffer;if(V.isWebGLCubeRenderTarget&&Ze!==void 0&&(Je=Je[Ze]),Je){Ne.bindFramebuffer(te.FRAMEBUFFER,Je);try{const Se=V.texture,Lt=Se.format,dt=Se.type;if(Lt!==di&&mt.convert(Lt)!==te.getParameter(te.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const ht=dt===bi&&(Re.has("EXT_color_buffer_half_float")||je.isWebGL2&&Re.has("EXT_color_buffer_float"));if(dt!==ro&&mt.convert(dt)!==te.getParameter(te.IMPLEMENTATION_COLOR_READ_TYPE)&&!(dt===pi&&(je.isWebGL2||Re.has("OES_texture_float")||Re.has("WEBGL_color_buffer_float")))&&!ht){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}se>=0&&se<=V.width-ve&&le>=0&&le<=V.height-ge&&te.readPixels(se,le,ve,ge,mt.convert(Lt),mt.convert(dt),Be)}finally{const Se=U!==null?Fe.get(U).__webglFramebuffer:null;Ne.bindFramebuffer(te.FRAMEBUFFER,Se)}}},this.copyFramebufferToTexture=function(V,se,le=0){const ve=Math.pow(2,-le),ge=Math.floor(se.image.width*ve),Be=Math.floor(se.image.height*ve);qe.setTexture2D(se,0),te.copyTexSubImage2D(te.TEXTURE_2D,le,0,0,V.x,V.y,ge,Be),Ne.unbindTexture()},this.copyTextureToTexture=function(V,se,le,ve=0){const ge=se.image.width,Be=se.image.height,Ze=mt.convert(le.format),Je=mt.convert(le.type);qe.setTexture2D(le,0),te.pixelStorei(te.UNPACK_FLIP_Y_WEBGL,le.flipY),te.pixelStorei(te.UNPACK_PREMULTIPLY_ALPHA_WEBGL,le.premultiplyAlpha),te.pixelStorei(te.UNPACK_ALIGNMENT,le.unpackAlignment),se.isDataTexture?te.texSubImage2D(te.TEXTURE_2D,ve,V.x,V.y,ge,Be,Ze,Je,se.image.data):se.isCompressedTexture?te.compressedTexSubImage2D(te.TEXTURE_2D,ve,V.x,V.y,se.mipmaps[0].width,se.mipmaps[0].height,Ze,se.mipmaps[0].data):te.texSubImage2D(te.TEXTURE_2D,ve,V.x,V.y,Ze,Je,se.image),ve===0&&le.generateMipmaps&&te.generateMipmap(te.TEXTURE_2D),Ne.unbindTexture()},this.copyTextureToTexture3D=function(V,se,le,ve,ge=0){if(T.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Be=V.max.x-V.min.x+1,Ze=V.max.y-V.min.y+1,Je=V.max.z-V.min.z+1,Se=mt.convert(ve.format),Lt=mt.convert(ve.type);let dt;if(ve.isData3DTexture)qe.setTexture3D(ve,0),dt=te.TEXTURE_3D;else if(ve.isDataArrayTexture)qe.setTexture2DArray(ve,0),dt=te.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}te.pixelStorei(te.UNPACK_FLIP_Y_WEBGL,ve.flipY),te.pixelStorei(te.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ve.premultiplyAlpha),te.pixelStorei(te.UNPACK_ALIGNMENT,ve.unpackAlignment);const ht=te.getParameter(te.UNPACK_ROW_LENGTH),It=te.getParameter(te.UNPACK_IMAGE_HEIGHT),Ht=te.getParameter(te.UNPACK_SKIP_PIXELS),jt=te.getParameter(te.UNPACK_SKIP_ROWS),Zt=te.getParameter(te.UNPACK_SKIP_IMAGES),Tt=le.isCompressedTexture?le.mipmaps[0]:le.image;te.pixelStorei(te.UNPACK_ROW_LENGTH,Tt.width),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,Tt.height),te.pixelStorei(te.UNPACK_SKIP_PIXELS,V.min.x),te.pixelStorei(te.UNPACK_SKIP_ROWS,V.min.y),te.pixelStorei(te.UNPACK_SKIP_IMAGES,V.min.z),le.isDataTexture||le.isData3DTexture?te.texSubImage3D(dt,ge,se.x,se.y,se.z,Be,Ze,Je,Se,Lt,Tt.data):le.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),te.compressedTexSubImage3D(dt,ge,se.x,se.y,se.z,Be,Ze,Je,Se,Tt.data)):te.texSubImage3D(dt,ge,se.x,se.y,se.z,Be,Ze,Je,Se,Lt,Tt),te.pixelStorei(te.UNPACK_ROW_LENGTH,ht),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,It),te.pixelStorei(te.UNPACK_SKIP_PIXELS,Ht),te.pixelStorei(te.UNPACK_SKIP_ROWS,jt),te.pixelStorei(te.UNPACK_SKIP_IMAGES,Zt),ge===0&&ve.generateMipmaps&&te.generateMipmap(dt),Ne.unbindTexture()},this.initTexture=function(V){V.isCubeTexture?qe.setTextureCube(V,0):V.isData3DTexture?qe.setTexture3D(V,0):V.isDataArrayTexture||V.isCompressedArrayTexture?qe.setTexture2DArray(V,0):qe.setTexture2D(V,0),Ne.unbindTexture()},this.resetState=function(){P=0,D=0,U=null,Ne.reset(),ce.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Va}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===gy?"display-p3":"srgb",t.unpackColorSpace=Kn.workingColorSpace===sg?"display-p3":"srgb"}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===ti?Qc:ZS}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Qc?ti:so}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class vR extends wy{}vR.prototype.isWebGL1Renderer=!0;class Ey{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Rt(e),this.density=t}clone(){return new Ey(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class My{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new Rt(e),this.near=t,this.far=r}clone(){return new My(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class cg extends Ln{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class ug{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Om,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=io()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=io()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=io()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const fs=new oe;class au{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)fs.fromBufferAttribute(this,t),fs.applyMatrix4(e),this.setXYZ(t,fs.x,fs.y,fs.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)fs.fromBufferAttribute(this,t),fs.applyNormalMatrix(e),this.setXYZ(t,fs.x,fs.y,fs.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)fs.fromBufferAttribute(this,t),fs.transformDirection(e),this.setXYZ(t,fs.x,fs.y,fs.z);return this}setX(e,t){return this.normalized&&(t=Sn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Sn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Sn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Sn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Is(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Is(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Is(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Is(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Sn(t,this.array),r=Sn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Sn(t,this.array),r=Sn(r,this.array),i=Sn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Sn(t,this.array),r=Sn(r,this.array),i=Sn(i,this.array),s=Sn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Xn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new au(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class ow extends mi{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Rt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Zd;const qp=new oe,Qd=new oe,Jd=new oe,$d=new it,Kp=new it,yR=new sn,zv=new oe,Zp=new oe,Hv=new oe,cT=new it,ux=new it,uT=new it;class _R extends Ln{constructor(e=new ow){if(super(),this.isSprite=!0,this.type="Sprite",Zd===void 0){Zd=new En;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new ug(t,5);Zd.setIndex([0,1,2,0,2,3]),Zd.setAttribute("position",new au(r,3,0,!1)),Zd.setAttribute("uv",new au(r,2,3,!1))}this.geometry=Zd,this.material=e,this.center=new it(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Qd.setFromMatrixScale(this.matrixWorld),yR.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Jd.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Qd.multiplyScalar(-Jd.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;Gv(zv.set(-.5,-.5,0),Jd,o,Qd,i,s),Gv(Zp.set(.5,-.5,0),Jd,o,Qd,i,s),Gv(Hv.set(.5,.5,0),Jd,o,Qd,i,s),cT.set(0,0),ux.set(1,0),uT.set(1,1);let a=e.ray.intersectTriangle(zv,Zp,Hv,!1,qp);if(a===null&&(Gv(Zp.set(-.5,.5,0),Jd,o,Qd,i,s),ux.set(0,1),a=e.ray.intersectTriangle(zv,Hv,Zp,!1,qp),a===null))return;const c=e.ray.origin.distanceTo(qp);c<e.near||c>e.far||t.push({distance:c,point:qp.clone(),uv:Ls.getInterpolation(qp,zv,Zp,Hv,cT,ux,uT,new it),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Gv(n,e,t,r,i,s){$d.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(Kp.x=s*$d.x-i*$d.y,Kp.y=i*$d.x+s*$d.y):Kp.copy($d),n.copy(e),n.x+=Kp.x,n.y+=Kp.y,n.applyMatrix4(yR)}const Vv=new oe,fT=new oe;class xR extends Ln{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){Vv.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Vv);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Vv.setFromMatrixPosition(e.matrixWorld),fT.setFromMatrixPosition(this.matrixWorld);const r=Vv.distanceTo(fT)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),r>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const dT=new oe,hT=new Hn,pT=new Hn,n5=new oe,mT=new sn,Wv=new oe,fx=new Os,gT=new sn,dx=new Hf;class aw extends ir{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=y1,this.bindMatrix=new sn,this.bindMatrixInverse=new sn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Us),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Wv),this.boundingBox.expandByPoint(Wv)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Os),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Wv),this.boundingSphere.expandByPoint(Wv)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),fx.copy(this.boundingSphere),fx.applyMatrix4(i),e.ray.intersectsSphere(fx)!==!1&&(gT.copy(i).invert(),dx.copy(e.ray).applyMatrix4(gT),!(this.boundingBox!==null&&dx.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,dx)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Hn,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===y1?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===DC?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;hT.fromBufferAttribute(i.attributes.skinIndex,e),pT.fromBufferAttribute(i.attributes.skinWeight,e),dT.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=pT.getComponent(s);if(o!==0){const a=hT.getComponent(s);mT.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(n5.copy(dT).applyMatrix4(mT),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class Ty extends Ln{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Tf extends jn{constructor(e=null,t=1,r=1,i,s,o,a,c,u=Dr,d=Dr,m,g){super(null,o,a,c,u,d,i,s,m,g),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const vT=new sn,r5=new sn;class fg{constructor(e=[],t=[]){this.uuid=io(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new sn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new sn;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:r5;vT.multiplyMatrices(a,t[s]),vT.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new fg(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=tR(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Tf(t,e,e,di,pi);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Ty),this.bones.push(o),this.boneInverses.push(new sn().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class lu extends Xn{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const eh=new sn,yT=new sn,jv=[],_T=new Us,i5=new sn,Qp=new ir,Jp=new Os;class lw extends ir{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new lu(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,i5)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Us),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,eh),_T.copy(e.boundingBox).applyMatrix4(eh),this.boundingBox.union(_T)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Os),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,eh),Jp.copy(e.boundingSphere).applyMatrix4(eh),this.boundingSphere.union(Jp)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(Qp.geometry=this.geometry,Qp.material=this.material,Qp.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Jp.copy(this.boundingSphere),Jp.applyMatrix4(r),e.ray.intersectsSphere(Jp)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,eh),yT.multiplyMatrices(r,eh),Qp.matrixWorld=yT,Qp.raycast(e,jv);for(let o=0,a=jv.length;o<a;o++){const c=jv[o];c.instanceId=s,c.object=this,t.push(c)}jv.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new lu(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Zi extends mi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Rt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const xT=new oe,ST=new oe,wT=new sn,hx=new Hf,Xv=new Os;class Yl extends Ln{constructor(e=new En,t=new Zi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)xT.fromBufferAttribute(t,i-1),ST.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=xT.distanceTo(ST);e.setAttribute("lineDistance",new Vt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Xv.copy(r.boundingSphere),Xv.applyMatrix4(i),Xv.radius+=s,e.ray.intersectsSphere(Xv)===!1)return;wT.copy(i).invert(),hx.copy(e.ray).applyMatrix4(wT);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,u=new oe,d=new oe,m=new oe,g=new oe,y=this.isLineSegments?2:1,_=r.index,x=r.attributes.position;if(_!==null){const S=Math.max(0,o.start),b=Math.min(_.count,o.start+o.count);for(let T=S,C=b-1;T<C;T+=y){const P=_.getX(T),D=_.getX(T+1);if(u.fromBufferAttribute(x,P),d.fromBufferAttribute(x,D),hx.distanceSqToSegment(u,d,g,m)>c)continue;g.applyMatrix4(this.matrixWorld);const F=e.ray.origin.distanceTo(g);F<e.near||F>e.far||t.push({distance:F,point:m.clone().applyMatrix4(this.matrixWorld),index:T,face:null,faceIndex:null,object:this})}}else{const S=Math.max(0,o.start),b=Math.min(x.count,o.start+o.count);for(let T=S,C=b-1;T<C;T+=y){if(u.fromBufferAttribute(x,T),d.fromBufferAttribute(x,T+1),hx.distanceSqToSegment(u,d,g,m)>c)continue;g.applyMatrix4(this.matrixWorld);const D=e.ray.origin.distanceTo(g);D<e.near||D>e.far||t.push({distance:D,point:m.clone().applyMatrix4(this.matrixWorld),index:T,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const ET=new oe,MT=new oe;class va extends Yl{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)ET.fromBufferAttribute(t,i),MT.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+ET.distanceTo(MT);e.setAttribute("lineDistance",new Vt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class cw extends Yl{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class by extends mi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Rt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const TT=new sn,Z1=new Hf,Yv=new Os,qv=new oe;class uw extends Ln{constructor(e=new En,t=new by){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Yv.copy(r.boundingSphere),Yv.applyMatrix4(i),Yv.radius+=s,e.ray.intersectsSphere(Yv)===!1)return;TT.copy(i).invert(),Z1.copy(e.ray).applyMatrix4(TT);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,u=r.index,m=r.attributes.position;if(u!==null){const g=Math.max(0,o.start),y=Math.min(u.count,o.start+o.count);for(let _=g,w=y;_<w;_++){const x=u.getX(_);qv.fromBufferAttribute(m,x),bT(qv,x,c,i,e,t,this)}}else{const g=Math.max(0,o.start),y=Math.min(m.count,o.start+o.count);for(let _=g,w=y;_<w;_++)qv.fromBufferAttribute(m,_),bT(qv,_,c,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function bT(n,e,t,r,i,s,o){const a=Z1.distanceSqToPoint(n);if(a<t){const c=new oe;Z1.closestPointToPoint(n,c),c.applyMatrix4(r);const u=i.ray.origin.distanceTo(c);if(u<i.near||u>i.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:c,index:e,face:null,object:o})}}class s5 extends jn{constructor(e,t,r,i,s,o,a,c,u){super(e,t,r,i,s,o,a,c,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Pn,this.magFilter=s!==void 0?s:Pn,this.generateMipmaps=!1;const d=this;function m(){d.needsUpdate=!0,e.requestVideoFrameCallback(m)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(m)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class o5 extends jn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Dr,this.minFilter=Dr,this.generateMipmaps=!1,this.needsUpdate=!0}}class Ay extends jn{constructor(e,t,r,i,s,o,a,c,u,d,m,g){super(null,o,a,c,u,d,i,s,m,g),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class a5 extends Ay{constructor(e,t,r,i,s,o){super(e,t,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=gr}}class l5 extends Ay{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,Ja),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class c5 extends jn{constructor(e,t,r,i,s,o,a,c,u){super(e,t,r,i,s,o,a,c,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class ya{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,c=s-1,u;for(;a<=c;)if(i=Math.floor(a+(c-a)/2),u=r[i]-o,u<0)a=i+1;else if(u>0)c=i-1;else{c=i;break}if(i=c,r[i]===o)return i/(s-1);const d=r[i],g=r[i+1]-d,y=(o-d)/g;return(i+y)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),c=t||(o.isVector2?new it:new oe);return c.copy(a).sub(o).normalize(),c}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new oe,i=[],s=[],o=[],a=new oe,c=new sn;for(let y=0;y<=e;y++){const _=y/e;i[y]=this.getTangentAt(_,new oe)}s[0]=new oe,o[0]=new oe;let u=Number.MAX_VALUE;const d=Math.abs(i[0].x),m=Math.abs(i[0].y),g=Math.abs(i[0].z);d<=u&&(u=d,r.set(1,0,0)),m<=u&&(u=m,r.set(0,1,0)),g<=u&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let y=1;y<=e;y++){if(s[y]=s[y-1].clone(),o[y]=o[y-1].clone(),a.crossVectors(i[y-1],i[y]),a.length()>Number.EPSILON){a.normalize();const _=Math.acos(Ur(i[y-1].dot(i[y]),-1,1));s[y].applyMatrix4(c.makeRotationAxis(a,_))}o[y].crossVectors(i[y],s[y])}if(t===!0){let y=Math.acos(Ur(s[0].dot(s[e]),-1,1));y/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(y=-y);for(let _=1;_<=e;_++)s[_].applyMatrix4(c.makeRotationAxis(i[_],y*_)),o[_].crossVectors(i[_],s[_])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Cy extends ya{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=c}getPoint(e,t){const r=t||new it,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const d=Math.cos(this.aRotation),m=Math.sin(this.aRotation),g=c-this.aX,y=u-this.aY;c=g*d-y*m+this.aX,u=g*m+y*d+this.aY}return r.set(c,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class SR extends Cy{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function fw(){let n=0,e=0,t=0,r=0;function i(s,o,a,c){n=s,e=a,t=-3*s+3*o-2*a-c,r=2*s-2*o+a+c}return{initCatmullRom:function(s,o,a,c,u){i(o,a,u*(a-s),u*(c-o))},initNonuniformCatmullRom:function(s,o,a,c,u,d,m){let g=(o-s)/u-(a-s)/(u+d)+(a-o)/d,y=(a-o)/d-(c-o)/(d+m)+(c-a)/m;g*=d,y*=d,i(o,a,g,y)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const Kv=new oe,px=new fw,mx=new fw,gx=new fw;class wR extends ya{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new oe){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),c=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:c===0&&a===s-1&&(a=s-2,c=1);let u,d;this.closed||a>0?u=i[(a-1)%s]:(Kv.subVectors(i[0],i[1]).add(i[0]),u=Kv);const m=i[a%s],g=i[(a+1)%s];if(this.closed||a+2<s?d=i[(a+2)%s]:(Kv.subVectors(i[s-1],i[s-2]).add(i[s-1]),d=Kv),this.curveType==="centripetal"||this.curveType==="chordal"){const y=this.curveType==="chordal"?.5:.25;let _=Math.pow(u.distanceToSquared(m),y),w=Math.pow(m.distanceToSquared(g),y),x=Math.pow(g.distanceToSquared(d),y);w<1e-4&&(w=1),_<1e-4&&(_=w),x<1e-4&&(x=w),px.initNonuniformCatmullRom(u.x,m.x,g.x,d.x,_,w,x),mx.initNonuniformCatmullRom(u.y,m.y,g.y,d.y,_,w,x),gx.initNonuniformCatmullRom(u.z,m.z,g.z,d.z,_,w,x)}else this.curveType==="catmullrom"&&(px.initCatmullRom(u.x,m.x,g.x,d.x,this.tension),mx.initCatmullRom(u.y,m.y,g.y,d.y,this.tension),gx.initCatmullRom(u.z,m.z,g.z,d.z,this.tension));return r.set(px.calc(c),mx.calc(c),gx.calc(c)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new oe().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function AT(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,c=n*a;return(2*t-2*r+s+o)*c+(-3*t+3*r-2*s-o)*a+s*n+t}function u5(n,e){const t=1-n;return t*t*e}function f5(n,e){return 2*(1-n)*n*e}function d5(n,e){return n*n*e}function vm(n,e,t,r){return u5(n,e)+f5(n,t)+d5(n,r)}function h5(n,e){const t=1-n;return t*t*t*e}function p5(n,e){const t=1-n;return 3*t*t*n*e}function m5(n,e){return 3*(1-n)*n*n*e}function g5(n,e){return n*n*n*e}function ym(n,e,t,r,i){return h5(n,e)+p5(n,t)+m5(n,r)+g5(n,i)}class dw extends ya{constructor(e=new it,t=new it,r=new it,i=new it){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new it){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(ym(e,i.x,s.x,o.x,a.x),ym(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class ER extends ya{constructor(e=new oe,t=new oe,r=new oe,i=new oe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new oe){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(ym(e,i.x,s.x,o.x,a.x),ym(e,i.y,s.y,o.y,a.y),ym(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class hw extends ya{constructor(e=new it,t=new it){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new it){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new it){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class MR extends ya{constructor(e=new oe,t=new oe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new oe){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new oe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class pw extends ya{constructor(e=new it,t=new it,r=new it){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new it){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(vm(e,i.x,s.x,o.x),vm(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class mw extends ya{constructor(e=new oe,t=new oe,r=new oe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new oe){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(vm(e,i.x,s.x,o.x),vm(e,i.y,s.y,o.y),vm(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class gw extends ya{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new it){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,c=i[o===0?o:o-1],u=i[o],d=i[o>i.length-2?i.length-1:o+1],m=i[o>i.length-3?i.length-1:o+2];return r.set(AT(a,c.x,u.x,d.x,m.x),AT(a,c.y,u.y,d.y,m.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new it().fromArray(i))}return this}}var V0=Object.freeze({__proto__:null,ArcCurve:SR,CatmullRomCurve3:wR,CubicBezierCurve:dw,CubicBezierCurve3:ER,EllipseCurve:Cy,LineCurve:hw,LineCurve3:MR,QuadraticBezierCurve:pw,QuadraticBezierCurve3:mw,SplineCurve:gw});class TR extends ya{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new V0[r](t,e))}return this}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],c=a.getLength(),u=c===0?0:1-o/c;return a.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,c=o.getPoints(a);for(let u=0;u<c.length;u++){const d=c[u];r&&r.equals(d)||(t.push(d),r=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new V0[i.type]().fromJSON(i))}return this}}class Bm extends TR{constructor(e){super(),this.type="Path",this.currentPoint=new it,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new hw(this.currentPoint.clone(),new it(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new pw(this.currentPoint.clone(),new it(e,t),new it(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new dw(this.currentPoint.clone(),new it(e,t),new it(r,i),new it(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new gw(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+a,t+c,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,c){const u=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+u,t+d,r,i,s,o,a,c),this}absellipse(e,t,r,i,s,o,a,c){const u=new Cy(e,t,r,i,s,o,a,c);if(this.curves.length>0){const m=u.getPoint(0);m.equals(this.currentPoint)||this.lineTo(m.x,m.y)}this.curves.push(u);const d=u.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class dg extends En{constructor(e=[new it(0,-.5),new it(.5,0),new it(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=Ur(i,0,Math.PI*2);const s=[],o=[],a=[],c=[],u=[],d=1/t,m=new oe,g=new it,y=new oe,_=new oe,w=new oe;let x=0,S=0;for(let b=0;b<=e.length-1;b++)switch(b){case 0:x=e[b+1].x-e[b].x,S=e[b+1].y-e[b].y,y.x=S*1,y.y=-x,y.z=S*0,w.copy(y),y.normalize(),c.push(y.x,y.y,y.z);break;case e.length-1:c.push(w.x,w.y,w.z);break;default:x=e[b+1].x-e[b].x,S=e[b+1].y-e[b].y,y.x=S*1,y.y=-x,y.z=S*0,_.copy(y),y.x+=w.x,y.y+=w.y,y.z+=w.z,y.normalize(),c.push(y.x,y.y,y.z),w.copy(_)}for(let b=0;b<=t;b++){const T=r+b*d*i,C=Math.sin(T),P=Math.cos(T);for(let D=0;D<=e.length-1;D++){m.x=e[D].x*C,m.y=e[D].y,m.z=e[D].x*P,o.push(m.x,m.y,m.z),g.x=b/t,g.y=D/(e.length-1),a.push(g.x,g.y);const U=c[3*D+0]*C,F=c[3*D+1],I=c[3*D+0]*P;u.push(U,F,I)}}for(let b=0;b<t;b++)for(let T=0;T<e.length-1;T++){const C=T+b*e.length,P=C,D=C+e.length,U=C+e.length+1,F=C+1;s.push(P,D,F),s.push(U,F,D)}this.setIndex(s),this.setAttribute("position",new Vt(o,3)),this.setAttribute("uv",new Vt(a,2)),this.setAttribute("normal",new Vt(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dg(e.points,e.segments,e.phiStart,e.phiLength)}}class Ry extends dg{constructor(e=1,t=1,r=4,i=8){const s=new Bm;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new Ry(e.radius,e.length,e.capSegments,e.radialSegments)}}class Py extends En{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],c=[],u=new oe,d=new it;o.push(0,0,0),a.push(0,0,1),c.push(.5,.5);for(let m=0,g=3;m<=t;m++,g+=3){const y=r+m/t*i;u.x=e*Math.cos(y),u.y=e*Math.sin(y),o.push(u.x,u.y,u.z),a.push(0,0,1),d.x=(o[g]/e+1)/2,d.y=(o[g+1]/e+1)/2,c.push(d.x,d.y)}for(let m=1;m<=t;m++)s.push(m,m+1,0);this.setIndex(s),this.setAttribute("position",new Vt(o,3)),this.setAttribute("normal",new Vt(a,3)),this.setAttribute("uv",new Vt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Py(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class jh extends En{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:c};const u=this;i=Math.floor(i),s=Math.floor(s);const d=[],m=[],g=[],y=[];let _=0;const w=[],x=r/2;let S=0;b(),o===!1&&(e>0&&T(!0),t>0&&T(!1)),this.setIndex(d),this.setAttribute("position",new Vt(m,3)),this.setAttribute("normal",new Vt(g,3)),this.setAttribute("uv",new Vt(y,2));function b(){const C=new oe,P=new oe;let D=0;const U=(t-e)/r;for(let F=0;F<=s;F++){const I=[],k=F/s,Q=k*(t-e)+e;for(let j=0;j<=i;j++){const $=j/i,H=$*c+a,ie=Math.sin(H),re=Math.cos(H);P.x=Q*ie,P.y=-k*r+x,P.z=Q*re,m.push(P.x,P.y,P.z),C.set(ie,U,re).normalize(),g.push(C.x,C.y,C.z),y.push($,1-k),I.push(_++)}w.push(I)}for(let F=0;F<i;F++)for(let I=0;I<s;I++){const k=w[I][F],Q=w[I+1][F],j=w[I+1][F+1],$=w[I][F+1];d.push(k,Q,$),d.push(Q,j,$),D+=6}u.addGroup(S,D,0),S+=D}function T(C){const P=_,D=new it,U=new oe;let F=0;const I=C===!0?e:t,k=C===!0?1:-1;for(let j=1;j<=i;j++)m.push(0,x*k,0),g.push(0,k,0),y.push(.5,.5),_++;const Q=_;for(let j=0;j<=i;j++){const H=j/i*c+a,ie=Math.cos(H),re=Math.sin(H);U.x=I*re,U.y=x*k,U.z=I*ie,m.push(U.x,U.y,U.z),g.push(0,k,0),D.x=ie*.5+.5,D.y=re*.5*k+.5,y.push(D.x,D.y),_++}for(let j=0;j<i;j++){const $=P+j,H=Q+j;C===!0?d.push(H,H+1,$):d.push(H+1,H,$),F+=3}u.addGroup(S,F,C===!0?1:2),S+=F}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jh(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ly extends jh{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Ly(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class du extends En{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),u(r),d(),this.setAttribute("position",new Vt(s,3)),this.setAttribute("normal",new Vt(s.slice(),3)),this.setAttribute("uv",new Vt(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(b){const T=new oe,C=new oe,P=new oe;for(let D=0;D<t.length;D+=3)y(t[D+0],T),y(t[D+1],C),y(t[D+2],P),c(T,C,P,b)}function c(b,T,C,P){const D=P+1,U=[];for(let F=0;F<=D;F++){U[F]=[];const I=b.clone().lerp(C,F/D),k=T.clone().lerp(C,F/D),Q=D-F;for(let j=0;j<=Q;j++)j===0&&F===D?U[F][j]=I:U[F][j]=I.clone().lerp(k,j/Q)}for(let F=0;F<D;F++)for(let I=0;I<2*(D-F)-1;I++){const k=Math.floor(I/2);I%2===0?(g(U[F][k+1]),g(U[F+1][k]),g(U[F][k])):(g(U[F][k+1]),g(U[F+1][k+1]),g(U[F+1][k]))}}function u(b){const T=new oe;for(let C=0;C<s.length;C+=3)T.x=s[C+0],T.y=s[C+1],T.z=s[C+2],T.normalize().multiplyScalar(b),s[C+0]=T.x,s[C+1]=T.y,s[C+2]=T.z}function d(){const b=new oe;for(let T=0;T<s.length;T+=3){b.x=s[T+0],b.y=s[T+1],b.z=s[T+2];const C=x(b)/2/Math.PI+.5,P=S(b)/Math.PI+.5;o.push(C,1-P)}_(),m()}function m(){for(let b=0;b<o.length;b+=6){const T=o[b+0],C=o[b+2],P=o[b+4],D=Math.max(T,C,P),U=Math.min(T,C,P);D>.9&&U<.1&&(T<.2&&(o[b+0]+=1),C<.2&&(o[b+2]+=1),P<.2&&(o[b+4]+=1))}}function g(b){s.push(b.x,b.y,b.z)}function y(b,T){const C=b*3;T.x=e[C+0],T.y=e[C+1],T.z=e[C+2]}function _(){const b=new oe,T=new oe,C=new oe,P=new oe,D=new it,U=new it,F=new it;for(let I=0,k=0;I<s.length;I+=9,k+=6){b.set(s[I+0],s[I+1],s[I+2]),T.set(s[I+3],s[I+4],s[I+5]),C.set(s[I+6],s[I+7],s[I+8]),D.set(o[k+0],o[k+1]),U.set(o[k+2],o[k+3]),F.set(o[k+4],o[k+5]),P.copy(b).add(T).add(C).divideScalar(3);const Q=x(P);w(D,k+0,b,Q),w(U,k+2,T,Q),w(F,k+4,C,Q)}}function w(b,T,C,P){P<0&&b.x===1&&(o[T]=b.x-1),C.x===0&&C.z===0&&(o[T]=P/2/Math.PI+.5)}function x(b){return Math.atan2(b.z,-b.x)}function S(b){return Math.atan2(-b.y,Math.sqrt(b.x*b.x+b.z*b.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new du(e.vertices,e.indices,e.radius,e.details)}}class Iy extends du{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Iy(e.radius,e.detail)}}const Zv=new oe,Qv=new oe,vx=new oe,Jv=new Ls;class bR extends En{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(Ef*t),o=e.getIndex(),a=e.getAttribute("position"),c=o?o.count:a.count,u=[0,0,0],d=["a","b","c"],m=new Array(3),g={},y=[];for(let _=0;_<c;_+=3){o?(u[0]=o.getX(_),u[1]=o.getX(_+1),u[2]=o.getX(_+2)):(u[0]=_,u[1]=_+1,u[2]=_+2);const{a:w,b:x,c:S}=Jv;if(w.fromBufferAttribute(a,u[0]),x.fromBufferAttribute(a,u[1]),S.fromBufferAttribute(a,u[2]),Jv.getNormal(vx),m[0]=`${Math.round(w.x*i)},${Math.round(w.y*i)},${Math.round(w.z*i)}`,m[1]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,m[2]=`${Math.round(S.x*i)},${Math.round(S.y*i)},${Math.round(S.z*i)}`,!(m[0]===m[1]||m[1]===m[2]||m[2]===m[0]))for(let b=0;b<3;b++){const T=(b+1)%3,C=m[b],P=m[T],D=Jv[d[b]],U=Jv[d[T]],F=`${C}_${P}`,I=`${P}_${C}`;I in g&&g[I]?(vx.dot(g[I].normal)<=s&&(y.push(D.x,D.y,D.z),y.push(U.x,U.y,U.z)),g[I]=null):F in g||(g[F]={index0:u[b],index1:u[T],normal:vx.clone()})}}for(const _ in g)if(g[_]){const{index0:w,index1:x}=g[_];Zv.fromBufferAttribute(a,w),Qv.fromBufferAttribute(a,x),y.push(Zv.x,Zv.y,Zv.z),y.push(Qv.x,Qv.y,Qv.z)}this.setAttribute("position",new Vt(y,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class bf extends Bm{constructor(e){super(e),this.uuid=io(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new Bm().fromJSON(i))}return this}}const v5={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=AR(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,c,u,d,m,g,y;if(r&&(s=w5(n,e,s,t)),n.length>80*t){a=u=n[0],c=d=n[1];for(let _=t;_<i;_+=t)m=n[_],g=n[_+1],m<a&&(a=m),g<c&&(c=g),m>u&&(u=m),g>d&&(d=g);y=Math.max(u-a,d-c),y=y!==0?32767/y:0}return zm(s,o,t,a,c,y,0),o}};function AR(n,e,t,r,i){let s,o;if(i===N5(n,e,t,r)>0)for(s=e;s<t;s+=r)o=CT(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=CT(s,n[s],n[s+1],o);return o&&Ny(o,o.next)&&(Gm(o),o=o.next),o}function Uf(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(Ny(t,t.next)||br(t.prev,t,t.next)===0)){if(Gm(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function zm(n,e,t,r,i,s,o){if(!n)return;!o&&s&&A5(n,r,i,s);let a=n,c,u;for(;n.prev!==n.next;){if(c=n.prev,u=n.next,s?_5(n,r,i,s):y5(n)){e.push(c.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),Gm(n),n=u.next,a=u.next;continue}if(n=u,n===a){o?o===1?(n=x5(Uf(n),e,t),zm(n,e,t,r,i,s,2)):o===2&&S5(n,e,t,r,i,s):zm(Uf(n),e,t,r,i,s,1);break}}}function y5(n){const e=n.prev,t=n,r=n.next;if(br(e,t,r)>=0)return!1;const i=e.x,s=t.x,o=r.x,a=e.y,c=t.y,u=r.y,d=i<s?i<o?i:o:s<o?s:o,m=a<c?a<u?a:u:c<u?c:u,g=i>s?i>o?i:o:s>o?s:o,y=a>c?a>u?a:u:c>u?c:u;let _=r.next;for(;_!==e;){if(_.x>=d&&_.x<=g&&_.y>=m&&_.y<=y&&ch(i,a,s,c,o,u,_.x,_.y)&&br(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function _5(n,e,t,r){const i=n.prev,s=n,o=n.next;if(br(i,s,o)>=0)return!1;const a=i.x,c=s.x,u=o.x,d=i.y,m=s.y,g=o.y,y=a<c?a<u?a:u:c<u?c:u,_=d<m?d<g?d:g:m<g?m:g,w=a>c?a>u?a:u:c>u?c:u,x=d>m?d>g?d:g:m>g?m:g,S=Q1(y,_,e,t,r),b=Q1(w,x,e,t,r);let T=n.prevZ,C=n.nextZ;for(;T&&T.z>=S&&C&&C.z<=b;){if(T.x>=y&&T.x<=w&&T.y>=_&&T.y<=x&&T!==i&&T!==o&&ch(a,d,c,m,u,g,T.x,T.y)&&br(T.prev,T,T.next)>=0||(T=T.prevZ,C.x>=y&&C.x<=w&&C.y>=_&&C.y<=x&&C!==i&&C!==o&&ch(a,d,c,m,u,g,C.x,C.y)&&br(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;T&&T.z>=S;){if(T.x>=y&&T.x<=w&&T.y>=_&&T.y<=x&&T!==i&&T!==o&&ch(a,d,c,m,u,g,T.x,T.y)&&br(T.prev,T,T.next)>=0)return!1;T=T.prevZ}for(;C&&C.z<=b;){if(C.x>=y&&C.x<=w&&C.y>=_&&C.y<=x&&C!==i&&C!==o&&ch(a,d,c,m,u,g,C.x,C.y)&&br(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function x5(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!Ny(i,s)&&CR(i,r,r.next,s)&&Hm(i,s)&&Hm(s,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(s.i/t|0),Gm(r),Gm(r.next),r=n=s),r=r.next}while(r!==n);return Uf(r)}function S5(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&P5(o,a)){let c=RR(o,a);o=Uf(o,o.next),c=Uf(c,c.next),zm(o,e,t,r,i,s,0),zm(c,e,t,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function w5(n,e,t,r){const i=[];let s,o,a,c,u;for(s=0,o=e.length;s<o;s++)a=e[s]*r,c=s<o-1?e[s+1]*r:n.length,u=AR(n,a,c,r,!1),u===u.next&&(u.steiner=!0),i.push(R5(u));for(i.sort(E5),s=0;s<i.length;s++)t=M5(i[s],t);return t}function E5(n,e){return n.x-e.x}function M5(n,e){const t=T5(n,e);if(!t)return e;const r=RR(t,n);return Uf(r,r.next),Uf(t,t.next)}function T5(n,e){let t=e,r=-1/0,i;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const g=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(g<=s&&g>r&&(r=g,i=t.x<t.next.x?t:t.next,g===s))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,c=i.x,u=i.y;let d=1/0,m;t=i;do s>=t.x&&t.x>=c&&s!==t.x&&ch(o<u?s:r,o,c,u,o<u?r:s,o,t.x,t.y)&&(m=Math.abs(o-t.y)/(s-t.x),Hm(t,n)&&(m<d||m===d&&(t.x>i.x||t.x===i.x&&b5(i,t)))&&(i=t,d=m)),t=t.next;while(t!==a);return i}function b5(n,e){return br(n.prev,n,e.prev)<0&&br(e.next,n,n.next)<0}function A5(n,e,t,r){let i=n;do i.z===0&&(i.z=Q1(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,C5(i)}function C5(n){let e,t,r,i,s,o,a,c,u=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<u&&(a++,r=r.nextZ,!!r);e++);for(c=u;a>0||c>0&&r;)a!==0&&(c===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,c--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,u*=2}while(o>1);return n}function Q1(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function R5(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function ch(n,e,t,r,i,s,o,a){return(i-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(r-a)}function P5(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!L5(n,e)&&(Hm(n,e)&&Hm(e,n)&&I5(n,e)&&(br(n.prev,n,e.prev)||br(n,e.prev,e))||Ny(n,e)&&br(n.prev,n,n.next)>0&&br(e.prev,e,e.next)>0)}function br(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Ny(n,e){return n.x===e.x&&n.y===e.y}function CR(n,e,t,r){const i=e0(br(n,e,t)),s=e0(br(n,e,r)),o=e0(br(t,r,n)),a=e0(br(t,r,e));return!!(i!==s&&o!==a||i===0&&$v(n,t,e)||s===0&&$v(n,r,e)||o===0&&$v(t,n,r)||a===0&&$v(t,e,r))}function $v(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function e0(n){return n>0?1:n<0?-1:0}function L5(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&CR(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Hm(n,e){return br(n.prev,n,n.next)<0?br(n,e,n.next)>=0&&br(n,n.prev,e)>=0:br(n,e,n.prev)<0||br(n,n.next,e)<0}function I5(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function RR(n,e){const t=new J1(n.i,n.x,n.y),r=new J1(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function CT(n,e,t,r){const i=new J1(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Gm(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function J1(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function N5(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class qa{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return qa.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];RT(e),PT(r,e);let o=e.length;t.forEach(RT);for(let c=0;c<t.length;c++)i.push(o),o+=t[c].length,PT(r,t[c]);const a=v5.triangulate(r,i);for(let c=0;c<a.length;c+=3)s.push(a.slice(c,c+3));return s}}function RT(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function PT(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Dy extends En{constructor(e=new bf([new it(.5,.5),new it(-.5,.5),new it(-.5,-.5),new it(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,c=e.length;a<c;a++){const u=e[a];o(u)}this.setAttribute("position",new Vt(i,3)),this.setAttribute("uv",new Vt(s,2)),this.computeVertexNormals();function o(a){const c=[],u=t.curveSegments!==void 0?t.curveSegments:12,d=t.steps!==void 0?t.steps:1,m=t.depth!==void 0?t.depth:1;let g=t.bevelEnabled!==void 0?t.bevelEnabled:!0,y=t.bevelThickness!==void 0?t.bevelThickness:.2,_=t.bevelSize!==void 0?t.bevelSize:y-.1,w=t.bevelOffset!==void 0?t.bevelOffset:0,x=t.bevelSegments!==void 0?t.bevelSegments:3;const S=t.extrudePath,b=t.UVGenerator!==void 0?t.UVGenerator:D5;let T,C=!1,P,D,U,F;S&&(T=S.getSpacedPoints(d),C=!0,g=!1,P=S.computeFrenetFrames(d,!1),D=new oe,U=new oe,F=new oe),g||(x=0,y=0,_=0,w=0);const I=a.extractPoints(u);let k=I.shape;const Q=I.holes;if(!qa.isClockWise(k)){k=k.reverse();for(let te=0,Ye=Q.length;te<Ye;te++){const Re=Q[te];qa.isClockWise(Re)&&(Q[te]=Re.reverse())}}const $=qa.triangulateShape(k,Q),H=k;for(let te=0,Ye=Q.length;te<Ye;te++){const Re=Q[te];k=k.concat(Re)}function ie(te,Ye,Re){return Ye||console.error("THREE.ExtrudeGeometry: vec does not exist"),te.clone().addScaledVector(Ye,Re)}const re=k.length,ue=$.length;function G(te,Ye,Re){let je,Ne,ct;const Fe=te.x-Ye.x,qe=te.y-Ye.y,nt=Re.x-te.x,Ue=Re.y-te.y,_t=Fe*Fe+qe*qe,J=Fe*Ue-qe*nt;if(Math.abs(J)>Number.EPSILON){const q=Math.sqrt(_t),ye=Math.sqrt(nt*nt+Ue*Ue),tt=Ye.x-qe/q,Le=Ye.y+Fe/q,We=Re.x-Ue/ye,st=Re.y+nt/ye,et=((We-tt)*Ue-(st-Le)*nt)/(Fe*Ue-qe*nt);je=tt+Fe*et-te.x,Ne=Le+qe*et-te.y;const lt=je*je+Ne*Ne;if(lt<=2)return new it(je,Ne);ct=Math.sqrt(lt/2)}else{let q=!1;Fe>Number.EPSILON?nt>Number.EPSILON&&(q=!0):Fe<-Number.EPSILON?nt<-Number.EPSILON&&(q=!0):Math.sign(qe)===Math.sign(Ue)&&(q=!0),q?(je=-qe,Ne=Fe,ct=Math.sqrt(_t)):(je=Fe,Ne=qe,ct=Math.sqrt(_t/2))}return new it(je/ct,Ne/ct)}const K=[];for(let te=0,Ye=H.length,Re=Ye-1,je=te+1;te<Ye;te++,Re++,je++)Re===Ye&&(Re=0),je===Ye&&(je=0),K[te]=G(H[te],H[Re],H[je]);const W=[];let L,B=K.concat();for(let te=0,Ye=Q.length;te<Ye;te++){const Re=Q[te];L=[];for(let je=0,Ne=Re.length,ct=Ne-1,Fe=je+1;je<Ne;je++,ct++,Fe++)ct===Ne&&(ct=0),Fe===Ne&&(Fe=0),L[je]=G(Re[je],Re[ct],Re[Fe]);W.push(L),B=B.concat(L)}for(let te=0;te<x;te++){const Ye=te/x,Re=y*Math.cos(Ye*Math.PI/2),je=_*Math.sin(Ye*Math.PI/2)+w;for(let Ne=0,ct=H.length;Ne<ct;Ne++){const Fe=ie(H[Ne],K[Ne],je);xe(Fe.x,Fe.y,-Re)}for(let Ne=0,ct=Q.length;Ne<ct;Ne++){const Fe=Q[Ne];L=W[Ne];for(let qe=0,nt=Fe.length;qe<nt;qe++){const Ue=ie(Fe[qe],L[qe],je);xe(Ue.x,Ue.y,-Re)}}}const ne=_+w;for(let te=0;te<re;te++){const Ye=g?ie(k[te],B[te],ne):k[te];C?(U.copy(P.normals[0]).multiplyScalar(Ye.x),D.copy(P.binormals[0]).multiplyScalar(Ye.y),F.copy(T[0]).add(U).add(D),xe(F.x,F.y,F.z)):xe(Ye.x,Ye.y,0)}for(let te=1;te<=d;te++)for(let Ye=0;Ye<re;Ye++){const Re=g?ie(k[Ye],B[Ye],ne):k[Ye];C?(U.copy(P.normals[te]).multiplyScalar(Re.x),D.copy(P.binormals[te]).multiplyScalar(Re.y),F.copy(T[te]).add(U).add(D),xe(F.x,F.y,F.z)):xe(Re.x,Re.y,m/d*te)}for(let te=x-1;te>=0;te--){const Ye=te/x,Re=y*Math.cos(Ye*Math.PI/2),je=_*Math.sin(Ye*Math.PI/2)+w;for(let Ne=0,ct=H.length;Ne<ct;Ne++){const Fe=ie(H[Ne],K[Ne],je);xe(Fe.x,Fe.y,m+Re)}for(let Ne=0,ct=Q.length;Ne<ct;Ne++){const Fe=Q[Ne];L=W[Ne];for(let qe=0,nt=Fe.length;qe<nt;qe++){const Ue=ie(Fe[qe],L[qe],je);C?xe(Ue.x,Ue.y+T[d-1].y,T[d-1].x+Re):xe(Ue.x,Ue.y,m+Re)}}}ae(),de();function ae(){const te=i.length/3;if(g){let Ye=0,Re=re*Ye;for(let je=0;je<ue;je++){const Ne=$[je];Me(Ne[2]+Re,Ne[1]+Re,Ne[0]+Re)}Ye=d+x*2,Re=re*Ye;for(let je=0;je<ue;je++){const Ne=$[je];Me(Ne[0]+Re,Ne[1]+Re,Ne[2]+Re)}}else{for(let Ye=0;Ye<ue;Ye++){const Re=$[Ye];Me(Re[2],Re[1],Re[0])}for(let Ye=0;Ye<ue;Ye++){const Re=$[Ye];Me(Re[0]+re*d,Re[1]+re*d,Re[2]+re*d)}}r.addGroup(te,i.length/3-te,0)}function de(){const te=i.length/3;let Ye=0;pe(H,Ye),Ye+=H.length;for(let Re=0,je=Q.length;Re<je;Re++){const Ne=Q[Re];pe(Ne,Ye),Ye+=Ne.length}r.addGroup(te,i.length/3-te,1)}function pe(te,Ye){let Re=te.length;for(;--Re>=0;){const je=Re;let Ne=Re-1;Ne<0&&(Ne=te.length-1);for(let ct=0,Fe=d+x*2;ct<Fe;ct++){const qe=re*ct,nt=re*(ct+1),Ue=Ye+je+qe,_t=Ye+Ne+qe,J=Ye+Ne+nt,q=Ye+je+nt;Xe(Ue,_t,J,q)}}}function xe(te,Ye,Re){c.push(te),c.push(Ye),c.push(Re)}function Me(te,Ye,Re){ot(te),ot(Ye),ot(Re);const je=i.length/3,Ne=b.generateTopUV(r,i,je-3,je-2,je-1);He(Ne[0]),He(Ne[1]),He(Ne[2])}function Xe(te,Ye,Re,je){ot(te),ot(Ye),ot(je),ot(Ye),ot(Re),ot(je);const Ne=i.length/3,ct=b.generateSideWallUV(r,i,Ne-6,Ne-3,Ne-2,Ne-1);He(ct[0]),He(ct[1]),He(ct[3]),He(ct[1]),He(ct[2]),He(ct[3])}function ot(te){i.push(c[te*3+0]),i.push(c[te*3+1]),i.push(c[te*3+2])}function He(te){s.push(te.x),s.push(te.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return U5(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new V0[i.type]().fromJSON(i)),new Dy(r,e.options)}}const D5={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],c=e[r*3+1],u=e[i*3],d=e[i*3+1];return[new it(s,o),new it(a,c),new it(u,d)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],c=e[t*3+2],u=e[r*3],d=e[r*3+1],m=e[r*3+2],g=e[i*3],y=e[i*3+1],_=e[i*3+2],w=e[s*3],x=e[s*3+1],S=e[s*3+2];return Math.abs(a-d)<Math.abs(o-u)?[new it(o,1-c),new it(u,1-m),new it(g,1-_),new it(w,1-S)]:[new it(a,1-c),new it(d,1-m),new it(y,1-_),new it(x,1-S)]}};function U5(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class hg extends du{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new hg(e.radius,e.detail)}}class pg extends du{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new pg(e.radius,e.detail)}}class Uy extends En{constructor(e=.5,t=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],c=[],u=[],d=[];let m=e;const g=(t-e)/i,y=new oe,_=new it;for(let w=0;w<=i;w++){for(let x=0;x<=r;x++){const S=s+x/r*o;y.x=m*Math.cos(S),y.y=m*Math.sin(S),c.push(y.x,y.y,y.z),u.push(0,0,1),_.x=(y.x/t+1)/2,_.y=(y.y/t+1)/2,d.push(_.x,_.y)}m+=g}for(let w=0;w<i;w++){const x=w*(r+1);for(let S=0;S<r;S++){const b=S+x,T=b,C=b+r+1,P=b+r+2,D=b+1;a.push(T,C,D),a.push(C,P,D)}}this.setIndex(a),this.setAttribute("position",new Vt(c,3)),this.setAttribute("normal",new Vt(u,3)),this.setAttribute("uv",new Vt(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Uy(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Oy extends En{constructor(e=new bf([new it(0,.5),new it(-.5,-.5),new it(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,c=0;if(Array.isArray(e)===!1)u(e);else for(let d=0;d<e.length;d++)u(e[d]),this.addGroup(a,c,d),a+=c,c=0;this.setIndex(r),this.setAttribute("position",new Vt(i,3)),this.setAttribute("normal",new Vt(s,3)),this.setAttribute("uv",new Vt(o,2));function u(d){const m=i.length/3,g=d.extractPoints(t);let y=g.shape;const _=g.holes;qa.isClockWise(y)===!1&&(y=y.reverse());for(let x=0,S=_.length;x<S;x++){const b=_[x];qa.isClockWise(b)===!0&&(_[x]=b.reverse())}const w=qa.triangulateShape(y,_);for(let x=0,S=_.length;x<S;x++){const b=_[x];y=y.concat(b)}for(let x=0,S=y.length;x<S;x++){const b=y[x];i.push(b.x,b.y,0),s.push(0,0,1),o.push(b.x,b.y)}for(let x=0,S=w.length;x<S;x++){const b=w[x],T=b[0]+m,C=b[1]+m,P=b[2]+m;r.push(T,C,P),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return O5(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new Oy(r,e.curveSegments)}}function O5(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class Xh extends En{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const c=Math.min(o+a,Math.PI);let u=0;const d=[],m=new oe,g=new oe,y=[],_=[],w=[],x=[];for(let S=0;S<=r;S++){const b=[],T=S/r;let C=0;S===0&&o===0?C=.5/t:S===r&&c===Math.PI&&(C=-.5/t);for(let P=0;P<=t;P++){const D=P/t;m.x=-e*Math.cos(i+D*s)*Math.sin(o+T*a),m.y=e*Math.cos(o+T*a),m.z=e*Math.sin(i+D*s)*Math.sin(o+T*a),_.push(m.x,m.y,m.z),g.copy(m).normalize(),w.push(g.x,g.y,g.z),x.push(D+C,1-T),b.push(u++)}d.push(b)}for(let S=0;S<r;S++)for(let b=0;b<t;b++){const T=d[S][b+1],C=d[S][b],P=d[S+1][b],D=d[S+1][b+1];(S!==0||o>0)&&y.push(T,C,D),(S!==r-1||c<Math.PI)&&y.push(C,P,D)}this.setIndex(y),this.setAttribute("position",new Vt(_,3)),this.setAttribute("normal",new Vt(w,3)),this.setAttribute("uv",new Vt(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xh(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Fy extends du{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Fy(e.radius,e.detail)}}class ky extends En{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],c=[],u=[],d=new oe,m=new oe,g=new oe;for(let y=0;y<=r;y++)for(let _=0;_<=i;_++){const w=_/i*s,x=y/r*Math.PI*2;m.x=(e+t*Math.cos(x))*Math.cos(w),m.y=(e+t*Math.cos(x))*Math.sin(w),m.z=t*Math.sin(x),a.push(m.x,m.y,m.z),d.x=e*Math.cos(w),d.y=e*Math.sin(w),g.subVectors(m,d).normalize(),c.push(g.x,g.y,g.z),u.push(_/i),u.push(y/r)}for(let y=1;y<=r;y++)for(let _=1;_<=i;_++){const w=(i+1)*y+_-1,x=(i+1)*(y-1)+_-1,S=(i+1)*(y-1)+_,b=(i+1)*y+_;o.push(w,x,b),o.push(x,S,b)}this.setIndex(o),this.setAttribute("position",new Vt(a,3)),this.setAttribute("normal",new Vt(c,3)),this.setAttribute("uv",new Vt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ky(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class By extends En{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],c=[],u=[],d=[],m=new oe,g=new oe,y=new oe,_=new oe,w=new oe,x=new oe,S=new oe;for(let T=0;T<=r;++T){const C=T/r*s*Math.PI*2;b(C,s,o,e,y),b(C+.01,s,o,e,_),x.subVectors(_,y),S.addVectors(_,y),w.crossVectors(x,S),S.crossVectors(w,x),w.normalize(),S.normalize();for(let P=0;P<=i;++P){const D=P/i*Math.PI*2,U=-t*Math.cos(D),F=t*Math.sin(D);m.x=y.x+(U*S.x+F*w.x),m.y=y.y+(U*S.y+F*w.y),m.z=y.z+(U*S.z+F*w.z),c.push(m.x,m.y,m.z),g.subVectors(m,y).normalize(),u.push(g.x,g.y,g.z),d.push(T/r),d.push(P/i)}}for(let T=1;T<=r;T++)for(let C=1;C<=i;C++){const P=(i+1)*(T-1)+(C-1),D=(i+1)*T+(C-1),U=(i+1)*T+C,F=(i+1)*(T-1)+C;a.push(P,D,F),a.push(D,U,F)}this.setIndex(a),this.setAttribute("position",new Vt(c,3)),this.setAttribute("normal",new Vt(u,3)),this.setAttribute("uv",new Vt(d,2));function b(T,C,P,D,U){const F=Math.cos(T),I=Math.sin(T),k=P/C*T,Q=Math.cos(k);U.x=D*(2+Q)*.5*F,U.y=D*(2+Q)*I*.5,U.z=D*Math.sin(k)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new By(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class zy extends En{constructor(e=new mw(new oe(-1,-1,0),new oe(-1,1,0),new oe(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new oe,c=new oe,u=new it;let d=new oe;const m=[],g=[],y=[],_=[];w(),this.setIndex(_),this.setAttribute("position",new Vt(m,3)),this.setAttribute("normal",new Vt(g,3)),this.setAttribute("uv",new Vt(y,2));function w(){for(let T=0;T<t;T++)x(T);x(s===!1?t:0),b(),S()}function x(T){d=e.getPointAt(T/t,d);const C=o.normals[T],P=o.binormals[T];for(let D=0;D<=i;D++){const U=D/i*Math.PI*2,F=Math.sin(U),I=-Math.cos(U);c.x=I*C.x+F*P.x,c.y=I*C.y+F*P.y,c.z=I*C.z+F*P.z,c.normalize(),g.push(c.x,c.y,c.z),a.x=d.x+r*c.x,a.y=d.y+r*c.y,a.z=d.z+r*c.z,m.push(a.x,a.y,a.z)}}function S(){for(let T=1;T<=t;T++)for(let C=1;C<=i;C++){const P=(i+1)*(T-1)+(C-1),D=(i+1)*T+(C-1),U=(i+1)*T+C,F=(i+1)*(T-1)+C;_.push(P,D,F),_.push(D,U,F)}}function b(){for(let T=0;T<=t;T++)for(let C=0;C<=i;C++)u.x=T/t,u.y=C/i,y.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new zy(new V0[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class PR extends En{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new oe,s=new oe;if(e.index!==null){const o=e.attributes.position,a=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,d=c.length;u<d;++u){const m=c[u],g=m.start,y=m.count;for(let _=g,w=g+y;_<w;_+=3)for(let x=0;x<3;x++){const S=a.getX(_+x),b=a.getX(_+(x+1)%3);i.fromBufferAttribute(o,S),s.fromBufferAttribute(o,b),LT(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,c=o.count/3;a<c;a++)for(let u=0;u<3;u++){const d=3*a+u,m=3*a+(u+1)%3;i.fromBufferAttribute(o,d),s.fromBufferAttribute(o,m),LT(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Vt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function LT(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var IT=Object.freeze({__proto__:null,BoxGeometry:Gf,CapsuleGeometry:Ry,CircleGeometry:Py,ConeGeometry:Ly,CylinderGeometry:jh,DodecahedronGeometry:Iy,EdgesGeometry:bR,ExtrudeGeometry:Dy,IcosahedronGeometry:hg,LatheGeometry:dg,OctahedronGeometry:pg,PlaneGeometry:nl,PolyhedronGeometry:du,RingGeometry:Uy,ShapeGeometry:Oy,SphereGeometry:Xh,TetrahedronGeometry:Fy,TorusGeometry:ky,TorusKnotGeometry:By,TubeGeometry:zy,WireframeGeometry:PR});class LR extends mi{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Rt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class IR extends ao{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class mg extends mi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Rt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fu,this.normalScale=new it(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Po extends mg{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new it(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ur(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Rt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Rt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Rt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class NR extends mi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Rt(16777215),this.specular=new Rt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fu,this.normalScale=new it(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ig,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class DR extends mi{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Rt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fu,this.normalScale=new it(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class UR extends mi{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fu,this.normalScale=new it(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class OR extends mi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Rt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fu,this.normalScale=new it(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ig,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class FR extends mi{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Rt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fu,this.normalScale=new it(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class kR extends Zi{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function mf(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function BR(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function zR(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function $1(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let c=0;c!==e;++c)i[o++]=n[a+c]}return i}function vw(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function F5(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let c=0;c<s.tracks.length;++c){const u=s.tracks[c],d=u.getValueSize(),m=[],g=[];for(let y=0;y<u.times.length;++y){const _=u.times[y]*i;if(!(_<t||_>=r)){m.push(u.times[y]);for(let w=0;w<d;++w)g.push(u.values[y*d+w])}}m.length!==0&&(u.times=mf(m,u.times.constructor),u.values=mf(g,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let c=0;c<s.tracks.length;++c)a>s.tracks[c].times[0]&&(a=s.tracks[c].times[0]);for(let c=0;c<s.tracks.length;++c)s.tracks[c].shift(-1*a);return s.resetDuration(),s}function k5(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],c=a.ValueTypeName;if(c==="bool"||c==="string")continue;const u=n.tracks.find(function(S){return S.name===a.name&&S.ValueTypeName===c});if(u===void 0)continue;let d=0;const m=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=m/3);let g=0;const y=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=y/3);const _=a.times.length-1;let w;if(s<=a.times[0]){const S=d,b=m-d;w=a.values.slice(S,b)}else if(s>=a.times[_]){const S=_*m+d,b=S+m-d;w=a.values.slice(S,b)}else{const S=a.createInterpolant(),b=d,T=m-d;S.evaluate(s),w=S.resultBuffer.slice(b,T)}c==="quaternion"&&new Ai().fromArray(w).normalize().conjugate().toArray(w);const x=u.times.length;for(let S=0;S<x;++S){const b=S*y+g;if(c==="quaternion")Ai.multiplyQuaternionsFlat(u.values,b,w,0,u.values,b);else{const T=y-g*2;for(let C=0;C<T;++C)u.values[b+C]-=w[C]}}}return n.blendMode=qS,n}const B5={convertArray:mf,isTypedArray:BR,getKeyframeOrder:zR,sortedArray:$1,flattenJSON:vw,subclip:F5,makeClipAdditive:k5};class Yh{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let c=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===c)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class HR extends Yh{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ff,endingEnd:ff}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],c=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case df:s=e,a=2*t-r;break;case Im:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(c===void 0)switch(this.getSettings_().endingEnd){case df:o=e,c=2*r-t;break;case Im:o=1,c=r+i[1]-i[0];break;default:o=e-1,c=t}const u=(r-t)*.5,d=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(c-r),this._offsetPrev=s*d,this._offsetNext=o*d}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,u=c-a,d=this._offsetPrev,m=this._offsetNext,g=this._weightPrev,y=this._weightNext,_=(r-t)/(i-t),w=_*_,x=w*_,S=-g*x+2*g*w-g*_,b=(1+g)*x+(-1.5-2*g)*w+(-.5+g)*_+1,T=(-1-y)*x+(1.5+y)*w+.5*_,C=y*x-y*w;for(let P=0;P!==a;++P)s[P]=S*o[d+P]+b*o[u+P]+T*o[c+P]+C*o[m+P];return s}}class yw extends Yh{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,u=c-a,d=(r-t)/(i-t),m=1-d;for(let g=0;g!==a;++g)s[g]=o[u+g]*m+o[c+g]*d;return s}}class GR extends Yh{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class _a{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=mf(t,this.TimeBufferType),this.values=mf(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:mf(e.times,Array),values:mf(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new GR(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new yw(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new HR(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Nh:t=this.InterpolantFactoryMethodDiscrete;break;case Df:t=this.InterpolantFactoryMethodLinear;break;case M0:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Nh;case this.InterpolantFactoryMethodLinear:return Df;case this.InterpolantFactoryMethodSmooth:return M0}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const c=r[a];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(o!==null&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,o),e=!1;break}o=c}if(i!==void 0&&BR(i))for(let a=0,c=i.length;a!==c;++a){const u=i[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===M0,s=e.length-1;let o=1;for(let a=1;a<s;++a){let c=!1;const u=e[a],d=e[a+1];if(u!==d&&(a!==1||u!==e[0]))if(i)c=!0;else{const m=a*r,g=m-r,y=m+r;for(let _=0;_!==r;++_){const w=t[m+_];if(w!==t[g+_]||w!==t[y+_]){c=!0;break}}}if(c){if(a!==o){e[o]=e[a];const m=a*r,g=o*r;for(let y=0;y!==r;++y)t[g+y]=t[m+y]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,c=o*r,u=0;u!==r;++u)t[c+u]=t[a+u];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}_a.prototype.TimeBufferType=Float32Array;_a.prototype.ValueBufferType=Float32Array;_a.prototype.DefaultInterpolation=Df;class Vf extends _a{}Vf.prototype.ValueTypeName="bool";Vf.prototype.ValueBufferType=Array;Vf.prototype.DefaultInterpolation=Nh;Vf.prototype.InterpolantFactoryMethodLinear=void 0;Vf.prototype.InterpolantFactoryMethodSmooth=void 0;class _w extends _a{}_w.prototype.ValueTypeName="color";class Of extends _a{}Of.prototype.ValueTypeName="number";class VR extends Yh{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=(r-t)/(i-t);let u=e*a;for(let d=u+a;u!==d;u+=4)Ai.slerpFlat(s,0,o,u-a,o,u,c);return s}}class cu extends _a{InterpolantFactoryMethodLinear(e){return new VR(this.times,this.values,this.getValueSize(),e)}}cu.prototype.ValueTypeName="quaternion";cu.prototype.DefaultInterpolation=Df;cu.prototype.InterpolantFactoryMethodSmooth=void 0;class Wf extends _a{}Wf.prototype.ValueTypeName="string";Wf.prototype.ValueBufferType=Array;Wf.prototype.DefaultInterpolation=Nh;Wf.prototype.InterpolantFactoryMethodLinear=void 0;Wf.prototype.InterpolantFactoryMethodSmooth=void 0;class Ff extends _a{}Ff.prototype.ValueTypeName="vector";class Oh{constructor(e,t=-1,r,i=my){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=io(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(H5(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(_a.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let c=[],u=[];c.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const d=zR(c);c=$1(c,1,d),u=$1(u,1,d),!i&&c[0]===0&&(c.push(s),u.push(u[0])),o.push(new Of(".morphTargetInfluences["+t[a].name+"]",c,u).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,c=e.length;a<c;a++){const u=e[a],d=u.name.match(s);if(d&&d.length>1){const m=d[1];let g=i[m];g||(i[m]=g=[]),g.push(u)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(m,g,y,_,w){if(y.length!==0){const x=[],S=[];vw(y,x,S,_),x.length!==0&&w.push(new m(g,x,S))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let c=e.length||-1;const u=e.hierarchy||[];for(let m=0;m<u.length;m++){const g=u[m].keys;if(!(!g||g.length===0))if(g[0].morphTargets){const y={};let _;for(_=0;_<g.length;_++)if(g[_].morphTargets)for(let w=0;w<g[_].morphTargets.length;w++)y[g[_].morphTargets[w]]=-1;for(const w in y){const x=[],S=[];for(let b=0;b!==g[_].morphTargets.length;++b){const T=g[_];x.push(T.time),S.push(T.morphTarget===w?1:0)}i.push(new Of(".morphTargetInfluence["+w+"]",x,S))}c=y.length*o}else{const y=".bones["+t[m].name+"]";r(Ff,y+".position",g,"pos",i),r(cu,y+".quaternion",g,"rot",i),r(Ff,y+".scale",g,"scl",i)}}return i.length===0?null:new this(s,c,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function z5(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Of;case"vector":case"vector2":case"vector3":case"vector4":return Ff;case"color":return _w;case"quaternion":return cu;case"bool":case"boolean":return Vf;case"string":return Wf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function H5(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=z5(n.type);if(n.times===void 0){const t=[],r=[];vw(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const kf={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Hy{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,c;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(d){a++,s===!1&&i.onStart!==void 0&&i.onStart(d,o,a),s=!0},this.itemEnd=function(d){o++,i.onProgress!==void 0&&i.onProgress(d,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(d){i.onError!==void 0&&i.onError(d)},this.resolveURL=function(d){return c?c(d):d},this.setURLModifier=function(d){return c=d,this},this.addHandler=function(d,m){return u.push(d,m),this},this.removeHandler=function(d){const m=u.indexOf(d);return m!==-1&&u.splice(m,2),this},this.getHandler=function(d){for(let m=0,g=u.length;m<g;m+=2){const y=u[m],_=u[m+1];if(y.global&&(y.lastIndex=0),y.test(d))return _}return null}}}const WR=new Hy;let Qi=class{constructor(e){this.manager=e!==void 0?e:WR,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};Qi.DEFAULT_MATERIAL_NAME="__DEFAULT";const Fl={};class G5 extends Error{constructor(e,t){super(e),this.response=t}}class gs extends Qi{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=kf.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Fl[e]!==void 0){Fl[e].push({onLoad:t,onProgress:r,onError:i});return}Fl[e]=[],Fl[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,c=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const d=Fl[e],m=u.body.getReader(),g=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),y=g?parseInt(g):0,_=y!==0;let w=0;const x=new ReadableStream({start(S){b();function b(){m.read().then(({done:T,value:C})=>{if(T)S.close();else{w+=C.byteLength;const P=new ProgressEvent("progress",{lengthComputable:_,loaded:w,total:y});for(let D=0,U=d.length;D<U;D++){const F=d[D];F.onProgress&&F.onProgress(P)}S.enqueue(C),b()}})}}});return new Response(x)}else throw new G5(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(c){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(d=>new DOMParser().parseFromString(d,a));case"json":return u.json();default:if(a===void 0)return u.text();{const m=/charset="?([^;"\s]*)"?/i.exec(a),g=m&&m[1]?m[1].toLowerCase():void 0,y=new TextDecoder(g);return u.arrayBuffer().then(_=>y.decode(_))}}}).then(u=>{kf.add(e,u);const d=Fl[e];delete Fl[e];for(let m=0,g=d.length;m<g;m++){const y=d[m];y.onLoad&&y.onLoad(u)}}).catch(u=>{const d=Fl[e];if(d===void 0)throw this.manager.itemError(e),u;delete Fl[e];for(let m=0,g=d.length;m<g;m++){const y=d[m];y.onError&&y.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class V5 extends Qi{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new gs(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=Oh.parse(e[r]);t.push(i)}return t}}class W5 extends Qi{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new Ay,c=new gs(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(s.withCredentials);let u=0;function d(m){c.load(e[m],function(g){const y=s.parse(g,!0);o[m]={width:y.width,height:y.height,format:y.format,mipmaps:y.mipmaps},u+=1,u===6&&(y.mipmapCount===1&&(a.minFilter=Pn),a.image=o,a.format=y.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let m=0,g=e.length;m<g;++m)d(m);else c.load(e,function(m){const g=s.parse(m,!0);if(g.isCubemap){const y=g.mipmaps.length/g.mipmapCount;for(let _=0;_<y;_++){o[_]={mipmaps:[]};for(let w=0;w<g.mipmapCount;w++)o[_].mipmaps.push(g.mipmaps[_*g.mipmapCount+w]),o[_].format=g.format,o[_].width=g.width,o[_].height=g.height}a.image=o}else a.image.width=g.width,a.image.height=g.height,a.mipmaps=g.mipmaps;g.mipmapCount===1&&(a.minFilter=Pn),a.format=g.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class Vm extends Qi{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=kf.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=km("img");function c(){d(),kf.add(e,this),t&&t(this),s.manager.itemEnd(e)}function u(m){d(),i&&i(m),s.manager.itemError(e),s.manager.itemEnd(e)}function d(){a.removeEventListener("load",c,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",c,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class jR extends Qi{constructor(e){super(e)}load(e,t,r,i){const s=new lg;s.colorSpace=ti;const o=new Vm(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function c(u){o.load(e[u],function(d){s.images[u]=d,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let u=0;u<e.length;++u)c(u);return s}}class xw extends Qi{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Tf,a=new gs(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(c){let u;try{u=s.parse(c)}catch(d){if(i!==void 0)i(d);else{console.error(d);return}}u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:gr,o.wrapT=u.wrapT!==void 0?u.wrapT:gr,o.magFilter=u.magFilter!==void 0?u.magFilter:Pn,o.minFilter=u.minFilter!==void 0?u.minFilter:Pn,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0?o.colorSpace=u.colorSpace:u.encoding!==void 0&&(o.encoding=u.encoding),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=$a),u.mipmapCount===1&&(o.minFilter=Pn),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,t&&t(o,u)},r,i),o}}class XR extends Qi{constructor(e){super(e)}load(e,t,r,i){const s=new jn,o=new Vm(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class hu extends Ln{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Rt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class YR extends hu{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Ln.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Rt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const yx=new sn,NT=new oe,DT=new oe;class Sw{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new it(512,512),this.map=null,this.mapPass=null,this.matrix=new sn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new yy,this._frameExtents=new it(1,1),this._viewportCount=1,this._viewports=[new Hn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;NT.setFromMatrixPosition(e.matrixWorld),t.position.copy(NT),DT.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(DT),t.updateMatrixWorld(),yx.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(yx),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(yx)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class j5 extends Sw{constructor(){super(new Or(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=Dh*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class ww extends hu{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Ln.DEFAULT_UP),this.updateMatrix(),this.target=new Ln,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new j5}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const UT=new sn,$p=new oe,_x=new oe;class X5 extends Sw{constructor(){super(new Or(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new it(4,2),this._viewportCount=6,this._viewports=[new Hn(2,1,1,1),new Hn(0,1,1,1),new Hn(3,1,1,1),new Hn(1,1,1,1),new Hn(3,0,1,1),new Hn(1,0,1,1)],this._cubeDirections=[new oe(1,0,0),new oe(-1,0,0),new oe(0,0,1),new oe(0,0,-1),new oe(0,1,0),new oe(0,-1,0)],this._cubeUps=[new oe(0,1,0),new oe(0,1,0),new oe(0,1,0),new oe(0,1,0),new oe(0,0,1),new oe(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),$p.setFromMatrixPosition(e.matrixWorld),r.position.copy($p),_x.copy(r.position),_x.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(_x),r.updateMatrixWorld(),i.makeTranslation(-$p.x,-$p.y,-$p.z),UT.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(UT)}}class Ew extends hu{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new X5}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Y5 extends Sw{constructor(){super(new Ya(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Mw extends hu{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Ln.DEFAULT_UP),this.updateMatrix(),this.target=new Ln,this.shadow=new Y5}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class qR extends hu{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class KR extends hu{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class ZR{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new oe)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class QR extends hu{constructor(e=new ZR,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Gy extends Qi{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new gs(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=Gy.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Rt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new Rt().setHex(o.value);break;case"v2":i.uniforms[s].value=new it().fromArray(o.value);break;case"v3":i.uniforms[s].value=new oe().fromArray(o.value);break;case"v4":i.uniforms[s].value=new Hn().fromArray(o.value);break;case"m3":i.uniforms[s].value=new xn().fromArray(o.value);break;case"m4":i.uniforms[s].value=new sn().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new it().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new it().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:LR,SpriteMaterial:ow,RawShaderMaterial:IR,ShaderMaterial:ao,PointsMaterial:by,MeshPhysicalMaterial:Po,MeshStandardMaterial:mg,MeshPhongMaterial:NR,MeshToonMaterial:DR,MeshNormalMaterial:UR,MeshLambertMaterial:OR,MeshDepthMaterial:xy,MeshDistanceMaterial:Sy,MeshBasicMaterial:Ki,MeshMatcapMaterial:FR,LineDashedMaterial:kR,LineBasicMaterial:Zi,Material:mi};return new t[e]}}class Jc{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Tw extends En{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class JR extends Qi{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new gs(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(y,_){if(t[_]!==void 0)return t[_];const x=y.interleavedBuffers[_],S=s(y,x.buffer),b=ah(x.type,S),T=new ug(b,x.stride);return T.uuid=x.uuid,t[_]=T,T}function s(y,_){if(r[_]!==void 0)return r[_];const x=y.arrayBuffers[_],S=new Uint32Array(x).buffer;return r[_]=S,S}const o=e.isInstancedBufferGeometry?new Tw:new En,a=e.data.index;if(a!==void 0){const y=ah(a.type,a.array);o.setIndex(new Xn(y,1))}const c=e.data.attributes;for(const y in c){const _=c[y];let w;if(_.isInterleavedBufferAttribute){const x=i(e.data,_.data);w=new au(x,_.itemSize,_.offset,_.normalized)}else{const x=ah(_.type,_.array),S=_.isInstancedBufferAttribute?lu:Xn;w=new S(x,_.itemSize,_.normalized)}_.name!==void 0&&(w.name=_.name),_.usage!==void 0&&w.setUsage(_.usage),_.updateRange!==void 0&&(w.updateRange.offset=_.updateRange.offset,w.updateRange.count=_.updateRange.count),o.setAttribute(y,w)}const u=e.data.morphAttributes;if(u)for(const y in u){const _=u[y],w=[];for(let x=0,S=_.length;x<S;x++){const b=_[x];let T;if(b.isInterleavedBufferAttribute){const C=i(e.data,b.data);T=new au(C,b.itemSize,b.offset,b.normalized)}else{const C=ah(b.type,b.array);T=new Xn(C,b.itemSize,b.normalized)}b.name!==void 0&&(T.name=b.name),w.push(T)}o.morphAttributes[y]=w}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const m=e.data.groups||e.data.drawcalls||e.data.offsets;if(m!==void 0)for(let y=0,_=m.length;y!==_;++y){const w=m[y];o.addGroup(w.start,w.count,w.materialIndex)}const g=e.data.boundingSphere;if(g!==void 0){const y=new oe;g.center!==void 0&&y.fromArray(g.center),o.boundingSphere=new Os(y,g.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class q5 extends Qi{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?Jc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new gs(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(c){let u=null;try{u=JSON.parse(c)}catch(m){i!==void 0&&i(m),console.error("THREE:ObjectLoader: Can't parse "+e+".",m.message);return}const d=u.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?Jc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new gs(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),c=a.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,o),c=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,c,a,r),d=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,d),t!==void 0){let m=!1;for(const g in o)if(o[g].data instanceof HTMLImageElement){m=!0;break}m===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,i,a,o,t),u=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,u),c}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new bf().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new fg().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new JR;for(let s=0,o=e.length;s<o;s++){let a;const c=e[s];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(c);break;default:c.type in IT?a=IT[c.type].fromJSON(c,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}a.uuid=c.uuid,c.name!==void 0&&(a.name=c.name),c.userData!==void 0&&(a.userData=c.userData),r[c.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new Gy;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const c=e[o];r[c.uuid]===void 0&&(r[c.uuid]=s.parse(c)),i[c.uuid]=r[c.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=Oh.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(c){return r.manager.itemStart(c),s.load(c,function(){r.manager.itemEnd(c)},void 0,function(){r.manager.itemError(c),r.manager.itemEnd(c)})}function a(c){if(typeof c=="string"){const u=c,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return o(d)}else return c.data?{data:ah(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new Hy(t);s=new Vm(c),s.setCrossOrigin(this.crossOrigin);for(let u=0,d=e.length;u<d;u++){const m=e[u],g=m.url;if(Array.isArray(g)){const y=[];for(let _=0,w=g.length;_<w;_++){const x=g[_],S=a(x);S!==null&&(S instanceof HTMLImageElement?y.push(S):y.push(new Tf(S.data,S.width,S.height)))}i[m.uuid]=new hf(y)}else{const y=a(m.url);i[m.uuid]=new hf(y)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(c)}else return o.data?{data:ah(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new Vm(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const c=e[o],u=c.url;if(Array.isArray(u)){const d=[];for(let m=0,g=u.length;m<g;m++){const y=u[m],_=await s(y);_!==null&&(_ instanceof HTMLImageElement?d.push(_):d.push(new Tf(_.data,_.width,_.height)))}r[c.uuid]=new hf(d)}else{const d=await s(c.url);r[c.uuid]=new hf(d)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const c=t[a.image],u=c.data;let d;Array.isArray(u)?(d=new lg,u.length===6&&(d.needsUpdate=!0)):(u&&u.data?d=new Tf:d=new jn,u&&(d.needsUpdate=!0)),d.source=c,d.uuid=a.uuid,a.name!==void 0&&(d.name=a.name),a.mapping!==void 0&&(d.mapping=r(a.mapping,K5)),a.channel!==void 0&&(d.channel=a.channel),a.offset!==void 0&&d.offset.fromArray(a.offset),a.repeat!==void 0&&d.repeat.fromArray(a.repeat),a.center!==void 0&&d.center.fromArray(a.center),a.rotation!==void 0&&(d.rotation=a.rotation),a.wrap!==void 0&&(d.wrapS=r(a.wrap[0],OT),d.wrapT=r(a.wrap[1],OT)),a.format!==void 0&&(d.format=a.format),a.internalFormat!==void 0&&(d.internalFormat=a.internalFormat),a.type!==void 0&&(d.type=a.type),a.colorSpace!==void 0&&(d.colorSpace=a.colorSpace),a.encoding!==void 0&&(d.encoding=a.encoding),a.minFilter!==void 0&&(d.minFilter=r(a.minFilter,FT)),a.magFilter!==void 0&&(d.magFilter=r(a.magFilter,FT)),a.anisotropy!==void 0&&(d.anisotropy=a.anisotropy),a.flipY!==void 0&&(d.flipY=a.flipY),a.generateMipmaps!==void 0&&(d.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(d.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(d.compareFunction=a.compareFunction),a.userData!==void 0&&(d.userData=a.userData),i[a.uuid]=d}return i}parseObject(e,t,r,i,s){let o;function a(g){return t[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",g),t[g]}function c(g){if(g!==void 0){if(Array.isArray(g)){const y=[];for(let _=0,w=g.length;_<w;_++){const x=g[_];r[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),y.push(r[x])}return y}return r[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",g),r[g]}}function u(g){return i[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",g),i[g]}let d,m;switch(e.type){case"Scene":o=new cg,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Rt(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new My(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Ey(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new Or(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Ya(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new qR(e.color,e.intensity);break;case"DirectionalLight":o=new Mw(e.color,e.intensity);break;case"PointLight":o=new Ew(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new KR(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new ww(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new YR(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new QR().fromJSON(e);break;case"SkinnedMesh":d=a(e.geometry),m=c(e.material),o=new aw(d,m),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":d=a(e.geometry),m=c(e.material),o=new ir(d,m);break;case"InstancedMesh":d=a(e.geometry),m=c(e.material);const g=e.count,y=e.instanceMatrix,_=e.instanceColor;o=new lw(d,m,g),o.instanceMatrix=new lu(new Float32Array(y.array),16),_!==void 0&&(o.instanceColor=new lu(new Float32Array(_.array),_.itemSize));break;case"LOD":o=new xR;break;case"Line":o=new Yl(a(e.geometry),c(e.material));break;case"LineLoop":o=new cw(a(e.geometry),c(e.material));break;case"LineSegments":o=new va(a(e.geometry),c(e.material));break;case"PointCloud":case"Points":o=new uw(a(e.geometry),c(e.material));break;case"Sprite":o=new _R(c(e.material));break;case"Group":o=new Co;break;case"Bone":o=new Ty;break;default:o=new Ln}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const g=e.children;for(let y=0;y<g.length;y++)o.add(this.parseObject(g[y],t,r,i,s))}if(e.animations!==void 0){const g=e.animations;for(let y=0;y<g.length;y++){const _=g[y];o.animations.push(s[_])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const g=e.levels;for(let y=0;y<g.length;y++){const _=g[y],w=o.getObjectByProperty("uuid",_.object);w!==void 0&&o.addLevel(w,_.distance,_.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const K5={UVMapping:iu,CubeReflectionMapping:Ja,CubeRefractionMapping:su,EquirectangularReflectionMapping:Lh,EquirectangularRefractionMapping:Pm,CubeUVReflectionMapping:Vh},OT={RepeatWrapping:ou,ClampToEdgeWrapping:gr,MirroredRepeatWrapping:Ih},FT={NearestFilter:Dr,NearestMipmapNearestFilter:Lm,NearestMipmapLinearFilter:ph,LinearFilter:Pn,LinearMipmapNearestFilter:dy,LinearMipmapLinearFilter:$a};class $R extends Qi{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=kf.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){kf.add(e,c),t&&t(c),s.manager.itemEnd(e)}).catch(function(c){i&&i(c),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let t0;class bw{static getContext(){return t0===void 0&&(t0=new(window.AudioContext||window.webkitAudioContext)),t0}static setContext(e){t0=e}}class Z5 extends Qi{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new gs(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){try{const u=c.slice(0);bw.getContext().decodeAudioData(u,function(m){t(m)},a)}catch(u){a(u)}},r,i);function a(c){i?i(c):console.error(c),s.manager.itemError(e)}}}const kT=new sn,BT=new sn,Qu=new sn;class Q5{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Or,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Or,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Qu.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(Ef*t.fov*.5)/t.zoom;let a,c;BT.elements[12]=-i,kT.elements[12]=i,a=-o*t.aspect+s,c=o*t.aspect+s,Qu.elements[0]=2*t.near/(c-a),Qu.elements[8]=(c+a)/(c-a),this.cameraL.projectionMatrix.copy(Qu),a=-o*t.aspect-s,c=o*t.aspect-s,Qu.elements[0]=2*t.near/(c-a),Qu.elements[8]=(c+a)/(c-a),this.cameraR.projectionMatrix.copy(Qu)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(BT),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(kT)}}class Aw{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=zT(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=zT();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function zT(){return(typeof performance>"u"?Date:performance).now()}const Ju=new oe,HT=new Ai,J5=new oe,$u=new oe;class $5 extends Ln{constructor(){super(),this.type="AudioListener",this.context=bw.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Aw}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ju,HT,J5),$u.set(0,0,-1).applyQuaternion(HT),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Ju.x,i),t.positionY.linearRampToValueAtTime(Ju.y,i),t.positionZ.linearRampToValueAtTime(Ju.z,i),t.forwardX.linearRampToValueAtTime($u.x,i),t.forwardY.linearRampToValueAtTime($u.y,i),t.forwardZ.linearRampToValueAtTime($u.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(Ju.x,Ju.y,Ju.z),t.setOrientation($u.x,$u.y,$u.z,r.x,r.y,r.z)}}class eP extends Ln{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const ef=new oe,GT=new Ai,eH=new oe,tf=new oe;class tH extends eP{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(ef,GT,eH),tf.set(0,0,1).applyQuaternion(GT);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(ef.x,r),t.positionY.linearRampToValueAtTime(ef.y,r),t.positionZ.linearRampToValueAtTime(ef.z,r),t.orientationX.linearRampToValueAtTime(tf.x,r),t.orientationY.linearRampToValueAtTime(tf.y,r),t.orientationZ.linearRampToValueAtTime(tf.z,r)}else t.setPosition(ef.x,ef.y,ef.z),t.setOrientation(tf.x,tf.y,tf.z)}}class nH{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class tP{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const c=t*this._origIndex;this._mixBufferRegion(r,i,c,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let c=t,u=t+t;c!==u;++c)if(r[c]!==r[c+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){Ai.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;Ai.multiplyQuaternionsFlat(e,o,e,t,e,r),Ai.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const c=t+a;e[c]=e[c]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const Cw="\\[\\]\\.:\\/",rH=new RegExp("["+Cw+"]","g"),Rw="[^"+Cw+"]",iH="[^"+Cw.replace("\\.","")+"]",sH=/((?:WC+[\/:])*)/.source.replace("WC",Rw),oH=/(WCOD+)?/.source.replace("WCOD",iH),aH=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Rw),lH=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Rw),cH=new RegExp("^"+sH+oH+aH+lH+"$"),uH=["material","materials","bones","map"];class fH{constructor(e,t,r){const i=r||Dn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class Dn{constructor(e,t,r){this.path=t,this.parsedPath=r||Dn.parseTrackName(t),this.node=Dn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new Dn.Composite(e,t,r):new Dn(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(rH,"")}static parseTrackName(e){const t=cH.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);uH.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const c=r(a.children);if(c)return c}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=Dn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===u){u=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[i];if(o===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}c=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(c=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Dn.Composite=fH;Dn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Dn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Dn.prototype.GetterByBindingType=[Dn.prototype._getValue_direct,Dn.prototype._getValue_array,Dn.prototype._getValue_arrayElement,Dn.prototype._getValue_toArray];Dn.prototype.SetterByBindingTypeAndVersioning=[[Dn.prototype._setValue_direct,Dn.prototype._setValue_direct_setNeedsUpdate,Dn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Dn.prototype._setValue_array,Dn.prototype._setValue_array_setNeedsUpdate,Dn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Dn.prototype._setValue_arrayElement,Dn.prototype._setValue_arrayElement_setNeedsUpdate,Dn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Dn.prototype._setValue_fromArray,Dn.prototype._setValue_fromArray_setNeedsUpdate,Dn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class dH{constructor(){this.isAnimationObjectGroup=!0,this.uuid=io(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,c=e.length,u=this.nCachedObjects_;for(let d=0,m=arguments.length;d!==m;++d){const g=arguments[d],y=g.uuid;let _=t[y];if(_===void 0){_=c++,t[y]=_,e.push(g);for(let w=0,x=o;w!==x;++w)s[w].push(new Dn(g,r[w],i[w]))}else if(_<u){a=e[_];const w=--u,x=e[w];t[x.uuid]=_,e[_]=x,t[y]=w,e[w]=g;for(let S=0,b=o;S!==b;++S){const T=s[S],C=T[w];let P=T[_];T[_]=C,P===void 0&&(P=new Dn(g,r[S],i[S])),T[w]=P}}else e[_]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const c=arguments[o],u=c.uuid,d=t[u];if(d!==void 0&&d>=s){const m=s++,g=e[m];t[g.uuid]=d,e[d]=g,t[u]=m,e[m]=c;for(let y=0,_=i;y!==_;++y){const w=r[y],x=w[m],S=w[d];w[d]=x,w[m]=S}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,c=arguments.length;a!==c;++a){const u=arguments[a],d=u.uuid,m=t[d];if(m!==void 0)if(delete t[d],m<s){const g=--s,y=e[g],_=--o,w=e[_];t[y.uuid]=m,e[m]=y,t[w.uuid]=g,e[g]=w,e.pop();for(let x=0,S=i;x!==S;++x){const b=r[x],T=b[g],C=b[_];b[m]=T,b[g]=C,b.pop()}}else{const g=--o,y=e[g];g>0&&(t[y.uuid]=m),e[m]=y,e.pop();for(let _=0,w=i;_!==w;++_){const x=r[_];x[m]=x[g],x.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,c=this._objects,u=c.length,d=this.nCachedObjects_,m=new Array(u);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(m);for(let g=d,y=c.length;g!==y;++g){const _=c[g];m[g]=new Dn(_,e,t)}return m}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,c=o[a],u=e[a];t[u]=r,o[r]=c,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class nP{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),c={endingStart:ff,endingEnd:ff};for(let u=0;u!==o;++u){const d=s[u].createInterpolant(null);a[u]=d,d.settings=c}this._interpolantSettings=c,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=GC,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const c=a.parameterPositions,u=a.sampleValues;return c[0]=s,c[1]=s+r,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const c=(e-s)*r;c<0||r===0?t=0:(this._startTime=null,t=r*c)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const c=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case qS:for(let d=0,m=c.length;d!==m;++d)c[d].evaluate(o),u[d].accumulateAdditive(a);break;case my:default:for(let d=0,m=c.length;d!==m;++d)c[d].evaluate(o),u[d].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===VC;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===HC){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=df,i.endingEnd=df):(e?i.endingStart=this.zeroSlopeAtStart?df:ff:i.endingStart=Im,t?i.endingEnd=this.zeroSlopeAtEnd?df:ff:i.endingEnd=Im)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,c=o.sampleValues;return a[0]=s,c[0]=t,a[1]=s+e,c[1]=r,this}}const hH=new Float32Array(1);class pH extends ql{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,c=r.uuid,u=this._bindingsByRootAndName;let d=u[c];d===void 0&&(d={},u[c]=d);for(let m=0;m!==s;++m){const g=i[m],y=g.name;let _=d[y];if(_!==void 0)++_.referenceCount,o[m]=_;else{if(_=o[m],_!==void 0){_._cacheIndex===null&&(++_.referenceCount,this._addInactiveBinding(_,c,y));continue}const w=t&&t._propertyBindings[m].binding.parsedPath;_=new tP(Dn.create(r,y,w),g.ValueTypeName,g.getValueSize()),++_.referenceCount,this._addInactiveBinding(_,c,y),o[m]=_}a[m].resultBuffer=_.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],c=a.knownActions,u=c[c.length-1],d=e._byClipCacheIndex;u._byClipCacheIndex=d,c[d]=u,c.pop(),e._byClipCacheIndex=null;const m=a.actionByRoot,g=(e._localRoot||this._root).uuid;delete m[g],c.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],c=t[t.length-1],u=e._cacheIndex;c._cacheIndex=u,t[u]=c,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new yw(new Float32Array(2),new Float32Array(2),1,hH),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?Oh.findByName(i,e):e;const a=o!==null?o.uuid:e,c=this._actionsByClip[a];let u=null;if(r===void 0&&(o!==null?r=o.blendMode:r=my),c!==void 0){const m=c.actionByRoot[s];if(m!==void 0&&m.blendMode===r)return m;u=c.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const d=new nP(this,o,t,r);return this._bindAction(d,u),this._addInactiveAction(d,a,s),d}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?Oh.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==r;++u)t[u]._update(i,e,s,o);const a=this._bindings,c=this._nActiveBindings;for(let u=0;u!==c;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,c=o.length;a!==c;++a){const u=o[a];this._deactivateAction(u);const d=u._cacheIndex,m=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,m._cacheIndex=d,t[d]=m,t.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,c=a[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class Pw{constructor(e){this.value=e}clone(){return new Pw(this.value.clone===void 0?this.value:this.value.clone())}}let mH=0;class gH extends ql{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:mH++}),this.name="",this.usage=Om,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++)this.uniforms.push(t[r].clone());return this}clone(){return new this.constructor().copy(this)}}class vH extends ug{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class yH{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class Lw{constructor(e,t,r=0,i=1/0){this.ray=new Hf(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new Mf,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return eS(e,this,r,t),r.sort(VT),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)eS(e[i],this,r,t);return r.sort(VT),r}}function VT(n,e){return n.distance-e.distance}function eS(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let s=0,o=i.length;s<o;s++)eS(i[s],e,t,!0)}}class tS{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Ur(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class _H{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const WT=new it;class xH{constructor(e=new it(1/0,1/0),t=new it(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=WT.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,WT).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const jT=new oe,n0=new oe;class SH{constructor(e=new oe,t=new oe){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){jT.subVectors(e,this.start),n0.subVectors(this.end,this.start);const r=n0.dot(n0);let s=n0.dot(jT)/r;return t&&(s=Ur(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const XT=new oe;class wH extends Ln{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new En,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,c=32;o<c;o++,a++){const u=o/c*Math.PI*2,d=a/c*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(d),Math.sin(d),1)}r.setAttribute("position",new Vt(i,3));const s=new Zi({fog:!1,toneMapped:!1});this.cone=new va(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),XT.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(XT),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ic=new oe,r0=new sn,xx=new sn;class EH extends va{constructor(e){const t=rP(e),r=new En,i=[],s=[],o=new Rt(0,0,1),a=new Rt(0,1,0);for(let u=0;u<t.length;u++){const d=t[u];d.parent&&d.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new Vt(i,3)),r.setAttribute("color",new Vt(s,3));const c=new Zi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,c),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");xx.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(r0.multiplyMatrices(xx,a.matrixWorld),Ic.setFromMatrixPosition(r0),i.setXYZ(o,Ic.x,Ic.y,Ic.z),r0.multiplyMatrices(xx,a.parent.matrixWorld),Ic.setFromMatrixPosition(r0),i.setXYZ(o+1,Ic.x,Ic.y,Ic.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function rP(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,rP(n.children[t]));return e}class MH extends ir{constructor(e,t,r){const i=new Xh(t,4,2),s=new Ki({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const TH=new oe,YT=new Rt,qT=new Rt;class bH extends Ln{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new pg(t);i.rotateY(Math.PI*.5),this.material=new Ki({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Xn(o,3)),this.add(new ir(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");YT.copy(this.light.color),qT.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?YT:qT;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(TH.setFromMatrixPosition(this.light.matrixWorld).negate())}}class AH extends va{constructor(e=10,t=10,r=4473924,i=8947848){r=new Rt(r),i=new Rt(i);const s=t/2,o=e/t,a=e/2,c=[],u=[];for(let g=0,y=0,_=-a;g<=t;g++,_+=o){c.push(-a,0,_,a,0,_),c.push(_,0,-a,_,0,a);const w=g===s?r:i;w.toArray(u,y),y+=3,w.toArray(u,y),y+=3,w.toArray(u,y),y+=3,w.toArray(u,y),y+=3}const d=new En;d.setAttribute("position",new Vt(c,3)),d.setAttribute("color",new Vt(u,3));const m=new Zi({vertexColors:!0,toneMapped:!1});super(d,m),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class CH extends va{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new Rt(s),o=new Rt(o);const a=[],c=[];if(t>1)for(let m=0;m<t;m++){const g=m/t*(Math.PI*2),y=Math.sin(g)*e,_=Math.cos(g)*e;a.push(0,0,0),a.push(y,0,_);const w=m&1?s:o;c.push(w.r,w.g,w.b),c.push(w.r,w.g,w.b)}for(let m=0;m<r;m++){const g=m&1?s:o,y=e-e/r*m;for(let _=0;_<i;_++){let w=_/i*(Math.PI*2),x=Math.sin(w)*y,S=Math.cos(w)*y;a.push(x,0,S),c.push(g.r,g.g,g.b),w=(_+1)/i*(Math.PI*2),x=Math.sin(w)*y,S=Math.cos(w)*y,a.push(x,0,S),c.push(g.r,g.g,g.b)}}const u=new En;u.setAttribute("position",new Vt(a,3)),u.setAttribute("color",new Vt(c,3));const d=new Zi({vertexColors:!0,toneMapped:!1});super(u,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const KT=new oe,i0=new oe,ZT=new oe;class RH extends Ln{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new En;i.setAttribute("position",new Vt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Zi({fog:!1,toneMapped:!1});this.lightPlane=new Yl(i,s),this.add(this.lightPlane),i=new En,i.setAttribute("position",new Vt([0,0,0,0,0,1],3)),this.targetLine=new Yl(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),KT.setFromMatrixPosition(this.light.matrixWorld),i0.setFromMatrixPosition(this.light.target.matrixWorld),ZT.subVectors(i0,KT),this.lightPlane.lookAt(i0),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(i0),this.targetLine.scale.z=ZT.length()}}const s0=new oe,Lr=new ag;class PH extends va{constructor(e){const t=new En,r=new Zi({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(_,w){c(_),c(w)}function c(_){i.push(0,0,0),s.push(0,0,0),o[_]===void 0&&(o[_]=[]),o[_].push(i.length/3-1)}t.setAttribute("position",new Vt(i,3)),t.setAttribute("color",new Vt(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new Rt(16755200),d=new Rt(16711680),m=new Rt(43775),g=new Rt(16777215),y=new Rt(3355443);this.setColors(u,d,m,g,y)}setColors(e,t,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;Lr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Vr("c",t,e,Lr,0,0,-1),Vr("t",t,e,Lr,0,0,1),Vr("n1",t,e,Lr,-1,-1,-1),Vr("n2",t,e,Lr,r,-1,-1),Vr("n3",t,e,Lr,-1,i,-1),Vr("n4",t,e,Lr,r,i,-1),Vr("f1",t,e,Lr,-1,-1,1),Vr("f2",t,e,Lr,r,-1,1),Vr("f3",t,e,Lr,-1,i,1),Vr("f4",t,e,Lr,r,i,1),Vr("u1",t,e,Lr,r*.7,i*1.1,-1),Vr("u2",t,e,Lr,-1*.7,i*1.1,-1),Vr("u3",t,e,Lr,0,i*2,-1),Vr("cf1",t,e,Lr,-1,0,1),Vr("cf2",t,e,Lr,r,0,1),Vr("cf3",t,e,Lr,0,-1,1),Vr("cf4",t,e,Lr,0,i,1),Vr("cn1",t,e,Lr,-1,0,-1),Vr("cn2",t,e,Lr,r,0,-1),Vr("cn3",t,e,Lr,0,-1,-1),Vr("cn4",t,e,Lr,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Vr(n,e,t,r,i,s,o){s0.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const c=t.getAttribute("position");for(let u=0,d=a.length;u<d;u++)c.setXYZ(a[u],s0.x,s0.y,s0.z)}}const o0=new Us;class LH extends va{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new En;s.setIndex(new Xn(r,1)),s.setAttribute("position",new Xn(i,3)),super(s,new Zi({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&o0.setFromObject(this.object),o0.isEmpty())return;const t=o0.min,r=o0.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class IH extends va{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new En;s.setIndex(new Xn(r,1)),s.setAttribute("position",new Vt(i,3)),super(s,new Zi({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class NH extends Yl{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new En;o.setAttribute("position",new Vt(s,3)),o.computeBoundingSphere(),super(o,new Zi({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new En;c.setAttribute("position",new Vt(a,3)),c.computeBoundingSphere(),this.add(new ir(c,new Ki({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const QT=new oe;let a0,Sx;class DH extends Ln{constructor(e=new oe(0,0,1),t=new oe(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",a0===void 0&&(a0=new En,a0.setAttribute("position",new Vt([0,0,0,0,1,0],3)),Sx=new jh(0,.5,1,5,1),Sx.translate(0,-.5,0)),this.position.copy(t),this.line=new Yl(a0,new Zi({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ir(Sx,new Ki({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{QT.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(QT,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class UH extends va{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new En;i.setAttribute("position",new Vt(t,3)),i.setAttribute("color",new Vt(r,3));const s=new Zi({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new Rt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class OH{constructor(){this.type="ShapePath",this.color=new Rt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Bm,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(S){const b=[];for(let T=0,C=S.length;T<C;T++){const P=S[T],D=new bf;D.curves=P.curves,b.push(D)}return b}function r(S,b){const T=b.length;let C=!1;for(let P=T-1,D=0;D<T;P=D++){let U=b[P],F=b[D],I=F.x-U.x,k=F.y-U.y;if(Math.abs(k)>Number.EPSILON){if(k<0&&(U=b[D],I=-I,F=b[P],k=-k),S.y<U.y||S.y>F.y)continue;if(S.y===U.y){if(S.x===U.x)return!0}else{const Q=k*(S.x-U.x)-I*(S.y-U.y);if(Q===0)return!0;if(Q<0)continue;C=!C}}else{if(S.y!==U.y)continue;if(F.x<=S.x&&S.x<=U.x||U.x<=S.x&&S.x<=F.x)return!0}}return C}const i=qa.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,c;const u=[];if(s.length===1)return a=s[0],c=new bf,c.curves=a.curves,u.push(c),u;let d=!i(s[0].getPoints());d=e?!d:d;const m=[],g=[];let y=[],_=0,w;g[_]=void 0,y[_]=[];for(let S=0,b=s.length;S<b;S++)a=s[S],w=a.getPoints(),o=i(w),o=e?!o:o,o?(!d&&g[_]&&_++,g[_]={s:new bf,p:w},g[_].s.curves=a.curves,d&&_++,y[_]=[]):y[_].push({h:a,p:w[0]});if(!g[0])return t(s);if(g.length>1){let S=!1,b=0;for(let T=0,C=g.length;T<C;T++)m[T]=[];for(let T=0,C=g.length;T<C;T++){const P=y[T];for(let D=0;D<P.length;D++){const U=P[D];let F=!0;for(let I=0;I<g.length;I++)r(U.p,g[I].p)&&(T!==I&&b++,F?(F=!1,m[I].push(U)):S=!0);F&&m[T].push(U)}}b>0&&S===!1&&(y=m)}let x;for(let S=0,b=g.length;S<b;S++){c=g[S].s,u.push(c),x=y[S];for(let T=0,C=x.length;T<C;T++)c.holes.push(x[T].h)}return u}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:If}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=If);const FH=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:BS,AddEquation:Bc,AddOperation:RC,AdditiveAnimationBlendMode:qS,AdditiveBlending:h1,AlphaFormat:UC,AlwaysCompare:eR,AlwaysDepth:wC,AlwaysStencilFunc:j1,AmbientLight:qR,AnimationAction:nP,AnimationClip:Oh,AnimationLoader:V5,AnimationMixer:pH,AnimationObjectGroup:dH,AnimationUtils:B5,ArcCurve:SR,ArrayCamera:mR,ArrowHelper:DH,AttachedBindMode:y1,Audio:eP,AudioAnalyser:nH,AudioContext:bw,AudioListener:$5,AudioLoader:Z5,AxesHelper:UH,BackSide:ms,BasicDepthPacking:jC,BasicShadowMap:iC,Bone:Ty,BooleanKeyframeTrack:Vf,Box2:xH,Box3:Us,Box3Helper:IH,BoxGeometry:Gf,BoxHelper:LH,BufferAttribute:Xn,BufferGeometry:En,BufferGeometryLoader:JR,ByteType:zS,Cache:kf,Camera:ag,CameraHelper:PH,CanvasTexture:c5,CapsuleGeometry:Ry,CatmullRomCurve3:wR,CineonToneMapping:IC,CircleGeometry:Py,ClampToEdgeWrapping:gr,Clock:Aw,Color:Rt,ColorKeyframeTrack:_w,ColorManagement:Kn,CompressedArrayTexture:a5,CompressedCubeTexture:l5,CompressedTexture:Ay,CompressedTextureLoader:W5,ConeGeometry:Ly,ConstantAlphaFactor:_C,ConstantColorFactor:vC,CubeCamera:lR,CubeReflectionMapping:Ja,CubeRefractionMapping:su,CubeTexture:lg,CubeTextureLoader:jR,CubeUVReflectionMapping:Vh,CubicBezierCurve:dw,CubicBezierCurve3:ER,CubicInterpolant:HR,CullFaceBack:d1,CullFaceFront:rC,CullFaceFrontBack:fO,CullFaceNone:nC,Curve:ya,CurvePath:TR,CustomBlending:sC,CustomToneMapping:NC,CylinderGeometry:jh,Cylindrical:_H,Data3DTexture:ew,DataArrayTexture:vy,DataTexture:Tf,DataTextureLoader:xw,DataUtils:pf,DecrementStencilOp:_O,DecrementWrapStencilOp:SO,DefaultLoadingManager:WR,DepthFormat:Zc,DepthStencilFormat:Nf,DepthTexture:gR,DetachedBindMode:DC,DirectionalLight:Mw,DirectionalLightHelper:RH,DiscreteInterpolant:GR,DisplayP3ColorSpace:gy,DodecahedronGeometry:Iy,DoubleSide:eo,DstAlphaFactor:dC,DstColorFactor:pC,DynamicCopyUsage:OO,DynamicDrawUsage:PO,DynamicReadUsage:NO,EdgesGeometry:bR,EllipseCurve:Cy,EqualCompare:KC,EqualDepth:MC,EqualStencilFunc:TO,EquirectangularReflectionMapping:Lh,EquirectangularRefractionMapping:Pm,Euler:og,EventDispatcher:ql,ExtrudeGeometry:Dy,FileLoader:gs,Float16BufferAttribute:xF,Float32BufferAttribute:Vt,Float64BufferAttribute:SF,FloatType:pi,Fog:My,FogExp2:Ey,FramebufferTexture:o5,FrontSide:Qa,Frustum:yy,GLBufferAttribute:yH,GLSL1:kO,GLSL3:X1,GreaterCompare:QC,GreaterDepth:bC,GreaterEqualCompare:$C,GreaterEqualDepth:TC,GreaterEqualStencilFunc:RO,GreaterStencilFunc:AO,GridHelper:AH,Group:Co,HalfFloatType:bi,HemisphereLight:YR,HemisphereLightHelper:bH,IcosahedronGeometry:hg,ImageBitmapLoader:$R,ImageLoader:Vm,ImageUtils:$S,IncrementStencilOp:yO,IncrementWrapStencilOp:xO,InstancedBufferAttribute:lu,InstancedBufferGeometry:Tw,InstancedInterleavedBuffer:vH,InstancedMesh:lw,Int16BufferAttribute:yF,Int32BufferAttribute:_F,Int8BufferAttribute:mF,IntType:py,InterleavedBuffer:ug,InterleavedBufferAttribute:au,Interpolant:Yh,InterpolateDiscrete:Nh,InterpolateLinear:Df,InterpolateSmooth:M0,InvertStencilOp:wO,KeepStencilOp:af,KeyframeTrack:_a,LOD:xR,LatheGeometry:dg,Layers:Mf,LessCompare:qC,LessDepth:EC,LessEqualCompare:ZC,LessEqualDepth:Rm,LessEqualStencilFunc:bO,LessStencilFunc:MO,Light:hu,LightProbe:QR,Line:Yl,Line3:SH,LineBasicMaterial:Zi,LineCurve:hw,LineCurve3:MR,LineDashedMaterial:kR,LineLoop:cw,LineSegments:va,LinearDisplayP3ColorSpace:sg,LinearEncoding:ZS,LinearFilter:Pn,LinearInterpolant:yw,LinearMipMapLinearFilter:_1,LinearMipMapNearestFilter:mO,LinearMipmapLinearFilter:$a,LinearMipmapNearestFilter:dy,LinearSRGBColorSpace:so,LinearToneMapping:PC,LinearTransfer:Nm,Loader:Qi,LoaderUtils:Jc,LoadingManager:Hy,LoopOnce:HC,LoopPingPong:VC,LoopRepeat:GC,LuminanceAlphaFormat:FC,LuminanceFormat:OC,MOUSE:sf,Material:mi,MaterialLoader:Gy,MathUtils:nR,Matrix3:xn,Matrix4:sn,MaxEquation:v1,Mesh:ir,MeshBasicMaterial:Ki,MeshDepthMaterial:xy,MeshDistanceMaterial:Sy,MeshLambertMaterial:OR,MeshMatcapMaterial:FR,MeshNormalMaterial:UR,MeshPhongMaterial:NR,MeshPhysicalMaterial:Po,MeshStandardMaterial:mg,MeshToonMaterial:DR,MinEquation:g1,MirroredRepeatWrapping:Ih,MixOperation:CC,MultiplyBlending:m1,MultiplyOperation:ig,NearestFilter:Dr,NearestMipMapLinearFilter:pO,NearestMipMapNearestFilter:hO,NearestMipmapLinearFilter:ph,NearestMipmapNearestFilter:Lm,NeverCompare:YC,NeverDepth:SC,NeverStencilFunc:EO,NoBlending:ja,NoColorSpace:to,NoToneMapping:Xa,NormalAnimationBlendMode:my,NormalBlending:wf,NotEqualCompare:JC,NotEqualDepth:AC,NotEqualStencilFunc:CO,NumberKeyframeTrack:Of,Object3D:Ln,ObjectLoader:q5,ObjectSpaceNormalMap:XC,OctahedronGeometry:pg,OneFactor:cC,OneMinusConstantAlphaFactor:xC,OneMinusConstantColorFactor:yC,OneMinusDstAlphaFactor:hC,OneMinusDstColorFactor:mC,OneMinusSrcAlphaFactor:B0,OneMinusSrcColorFactor:fC,OrthographicCamera:Ya,P3Primaries:Um,PCFShadowMap:fy,PCFSoftShadowMap:pm,PMREMGenerator:q1,Path:Bm,PerspectiveCamera:Or,Plane:Hl,PlaneGeometry:nl,PlaneHelper:NH,PointLight:Ew,PointLightHelper:MH,Points:uw,PointsMaterial:by,PolarGridHelper:CH,PolyhedronGeometry:du,PositionalAudio:tH,PropertyBinding:Dn,PropertyMixer:tP,QuadraticBezierCurve:pw,QuadraticBezierCurve3:mw,Quaternion:Ai,QuaternionKeyframeTrack:cu,QuaternionLinearInterpolant:VR,RED_GREEN_RGTC2_Format:V1,RED_RGTC1_Format:zC,REVISION:If,RGBADepthPacking:QS,RGBAFormat:di,RGBAIntegerFormat:YS,RGBA_ASTC_10x10_Format:F1,RGBA_ASTC_10x5_Format:D1,RGBA_ASTC_10x6_Format:U1,RGBA_ASTC_10x8_Format:O1,RGBA_ASTC_12x10_Format:k1,RGBA_ASTC_12x12_Format:B1,RGBA_ASTC_4x4_Format:b1,RGBA_ASTC_5x4_Format:A1,RGBA_ASTC_5x5_Format:C1,RGBA_ASTC_6x5_Format:R1,RGBA_ASTC_6x6_Format:P1,RGBA_ASTC_8x5_Format:L1,RGBA_ASTC_8x6_Format:I1,RGBA_ASTC_8x8_Format:N1,RGBA_BPTC_Format:E0,RGBA_ETC2_EAC_Format:T1,RGBA_PVRTC_2BPPV1_Format:E1,RGBA_PVRTC_4BPPV1_Format:w1,RGBA_S3TC_DXT1_Format:x0,RGBA_S3TC_DXT3_Format:S0,RGBA_S3TC_DXT5_Format:w0,RGB_BPTC_SIGNED_Format:z1,RGB_BPTC_UNSIGNED_Format:H1,RGB_ETC1_Format:BC,RGB_ETC2_Format:M1,RGB_PVRTC_2BPPV1_Format:S1,RGB_PVRTC_4BPPV1_Format:x1,RGB_S3TC_DXT1_Format:_0,RGFormat:kC,RGIntegerFormat:XS,RawShaderMaterial:IR,Ray:Hf,Raycaster:Lw,Rec709Primaries:Dm,RectAreaLight:KR,RedFormat:WS,RedIntegerFormat:jS,ReinhardToneMapping:LC,RenderTarget:sR,RepeatWrapping:ou,ReplaceStencilOp:vO,ReverseSubtractEquation:aC,RingGeometry:Uy,SIGNED_RED_GREEN_RGTC2_Format:W1,SIGNED_RED_RGTC1_Format:G1,SRGBColorSpace:ti,SRGBTransfer:cr,Scene:cg,ShaderChunk:yn,ShaderLib:fa,ShaderMaterial:ao,ShadowMaterial:LR,Shape:bf,ShapeGeometry:Oy,ShapePath:OH,ShapeUtils:qa,ShortType:HS,Skeleton:fg,SkeletonHelper:EH,SkinnedMesh:aw,Source:hf,Sphere:Os,SphereGeometry:Xh,Spherical:tS,SphericalHarmonics3:ZR,SplineCurve:gw,SpotLight:ww,SpotLightHelper:wH,Sprite:_R,SpriteMaterial:ow,SrcAlphaFactor:k0,SrcAlphaSaturateFactor:gC,SrcColorFactor:uC,StaticCopyUsage:UO,StaticDrawUsage:Om,StaticReadUsage:IO,StereoCamera:Q5,StreamCopyUsage:FO,StreamDrawUsage:LO,StreamReadUsage:DO,StringKeyframeTrack:Wf,SubtractEquation:oC,SubtractiveBlending:p1,TOUCH:of,TangentSpaceNormalMap:fu,TetrahedronGeometry:Fy,Texture:jn,TextureLoader:XR,TorusGeometry:ky,TorusKnotGeometry:By,Triangle:Ls,TriangleFanDrawMode:z0,TriangleStripDrawMode:KS,TrianglesDrawMode:WC,TubeGeometry:zy,TwoPassDoubleSide:dO,UVMapping:iu,Uint16BufferAttribute:tw,Uint32BufferAttribute:nw,Uint8BufferAttribute:gF,Uint8ClampedBufferAttribute:vF,Uniform:Pw,UniformsGroup:gH,UniformsLib:Pt,UniformsUtils:rw,UnsignedByteType:ro,UnsignedInt248Type:Kc,UnsignedIntType:Ga,UnsignedShort4444Type:GS,UnsignedShort5551Type:VS,UnsignedShortType:hy,VSMShadowMap:ca,Vector2:it,Vector3:oe,Vector4:Hn,VectorKeyframeTrack:Ff,VideoTexture:s5,WebGL1Renderer:vR,WebGL3DRenderTarget:rF,WebGLArrayRenderTarget:nF,WebGLCoordinateSystem:Va,WebGLCubeRenderTarget:iw,WebGLMultipleRenderTargets:iF,WebGLRenderTarget:oo,WebGLRenderer:wy,WebGLUtils:pR,WebGPUCoordinateSystem:Fm,WireframeGeometry:PR,WrapAroundEnding:Im,ZeroCurvatureEnding:ff,ZeroFactor:lC,ZeroSlopeEnding:df,ZeroStencilOp:gO,_SRGBAFormat:H0,createCanvasElement:iR,sRGBEncoding:Qc},Symbol.toStringTag,{value:"Module"}));var wx={exports:{}},Nc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JT;function kH(){return JT||(JT=1,Nc.ConcurrentRoot=1,Nc.ContinuousEventPriority=4,Nc.DefaultEventPriority=16,Nc.DiscreteEventPriority=1,Nc.IdleEventPriority=536870912,Nc.LegacyRoot=0),Nc}var $T;function BH(){return $T||($T=1,wx.exports=kH()),wx.exports}var uh=BH();function zH(n){let e;const t=new Set,r=(u,d)=>{const m=typeof u=="function"?u(e):u;if(m!==e){const g=e;e=d?m:Object.assign({},e,m),t.forEach(y=>y(e,g))}},i=()=>e,s=(u,d=i,m=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let g=d(e);function y(){const _=d(e);if(!m(g,_)){const w=g;u(g=_,w)}}return t.add(y),()=>t.delete(y)},c={setState:r,getState:i,subscribe:(u,d,m)=>d||m?s(u,d,m):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(r,i,c),c}const HH=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),eb=HH?X.useEffect:X.useLayoutEffect;function Vy(n){const e=typeof n=="function"?zH(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=X.useReducer(x=>x+1,0),o=e.getState(),a=X.useRef(o),c=X.useRef(r),u=X.useRef(i),d=X.useRef(!1),m=X.useRef();m.current===void 0&&(m.current=r(o));let g,y=!1;(a.current!==o||c.current!==r||u.current!==i||d.current)&&(g=r(o),y=!i(m.current,g)),eb(()=>{y&&(m.current=g),a.current=o,c.current=r,u.current=i,d.current=!1});const _=X.useRef(o);eb(()=>{const x=()=>{try{const b=e.getState(),T=c.current(b);u.current(m.current,T)||(a.current=b,m.current=T,s())}catch{d.current=!0,s()}},S=e.subscribe(x);return e.getState()!==_.current&&x(),S},[]);const w=y?g:m.current;return X.useDebugValue(w),w};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}const GH=n=>typeof n=="object"&&typeof n.then=="function",gf=[];function iP(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function sP(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const s of gf)if(iP(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=gf.indexOf(i);s!==-1&&gf.splice(s,1)},promise:(GH(n)?n:n(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(gf.push(i),!t)throw i.promise}const oP=(n,e,t)=>sP(n,e,!1,t),VH=(n,e,t)=>void sP(n,e,!0,t),WH=n=>{if(n===void 0||n.length===0)gf.splice(0,gf.length);else{const e=gf.find(t=>iP(n,t.keys,t.equal));e&&e.remove()}};var Ex={exports:{}},Mx={exports:{}},Tx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tb;function jH(){return tb||(tb=1,function(n){function e(G,K){var W=G.length;G.push(K);e:for(;0<W;){var L=W-1>>>1,B=G[L];if(0<i(B,K))G[L]=K,G[W]=B,W=L;else break e}}function t(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var K=G[0],W=G.pop();if(W!==K){G[0]=W;e:for(var L=0,B=G.length,ne=B>>>1;L<ne;){var ae=2*(L+1)-1,de=G[ae],pe=ae+1,xe=G[pe];if(0>i(de,W))pe<B&&0>i(xe,de)?(G[L]=xe,G[pe]=W,L=pe):(G[L]=de,G[ae]=W,L=ae);else if(pe<B&&0>i(xe,W))G[L]=xe,G[pe]=W,L=pe;else break e}}return K}function i(G,K){var W=G.sortIndex-K.sortIndex;return W!==0?W:G.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var c=[],u=[],d=1,m=null,g=3,y=!1,_=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(G){for(var K=t(u);K!==null;){if(K.callback===null)r(u);else if(K.startTime<=G)r(u),K.sortIndex=K.expirationTime,e(c,K);else break;K=t(u)}}function C(G){if(w=!1,T(G),!_)if(t(c)!==null)_=!0,re(P);else{var K=t(u);K!==null&&ue(C,K.startTime-G)}}function P(G,K){_=!1,w&&(w=!1,S(F),F=-1),y=!0;var W=g;try{for(T(K),m=t(c);m!==null&&(!(m.expirationTime>K)||G&&!Q());){var L=m.callback;if(typeof L=="function"){m.callback=null,g=m.priorityLevel;var B=L(m.expirationTime<=K);K=n.unstable_now(),typeof B=="function"?m.callback=B:m===t(c)&&r(c),T(K)}else r(c);m=t(c)}if(m!==null)var ne=!0;else{var ae=t(u);ae!==null&&ue(C,ae.startTime-K),ne=!1}return ne}finally{m=null,g=W,y=!1}}var D=!1,U=null,F=-1,I=5,k=-1;function Q(){return!(n.unstable_now()-k<I)}function j(){if(U!==null){var G=n.unstable_now();k=G;var K=!0;try{K=U(!0,G)}finally{K?$():(D=!1,U=null)}}else D=!1}var $;if(typeof b=="function")$=function(){b(j)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,ie=H.port2;H.port1.onmessage=j,$=function(){ie.postMessage(null)}}else $=function(){x(j,0)};function re(G){U=G,D||(D=!0,$())}function ue(G,K){F=x(function(){G(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_continueExecution=function(){_||y||(_=!0,re(P))},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(G){switch(g){case 1:case 2:case 3:var K=3;break;default:K=g}var W=g;g=K;try{return G()}finally{g=W}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(G,K){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var W=g;g=G;try{return K()}finally{g=W}},n.unstable_scheduleCallback=function(G,K,W){var L=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?L+W:L):W=L,G){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=W+B,G={id:d++,callback:K,priorityLevel:G,startTime:W,expirationTime:B,sortIndex:-1},W>L?(G.sortIndex=W,e(u,G),t(c)===null&&G===t(u)&&(w?(S(F),F=-1):w=!0,ue(C,W-L))):(G.sortIndex=B,e(c,G),_||y||(_=!0,re(P))),G},n.unstable_shouldYield=Q,n.unstable_wrapCallback=function(G){var K=g;return function(){var W=g;g=K;try{return G.apply(this,arguments)}finally{g=W}}}}(Tx)),Tx}var nb;function XH(){return nb||(nb=1,Mx.exports=jH()),Mx.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bx,rb;function YH(){return rb||(rb=1,bx=function(e){var t={},r=Z0(),i=XH(),s=Object.assign;function o(h){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+h,E=1;E<arguments.length;E++)p+="&args[]="+encodeURIComponent(arguments[E]);return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=Symbol.for("react.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),_=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),C=Symbol.for("react.offscreen"),P=Symbol.iterator;function D(h){return h===null||typeof h!="object"?null:(h=P&&h[P]||h["@@iterator"],typeof h=="function"?h:null)}function U(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case d:return"Fragment";case u:return"Portal";case g:return"Profiler";case m:return"StrictMode";case x:return"Suspense";case S:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case _:return(h.displayName||"Context")+".Consumer";case y:return(h._context.displayName||"Context")+".Provider";case w:var p=h.render;return h=h.displayName,h||(h=p.displayName||p.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case b:return p=h.displayName||null,p!==null?p:U(h.type)||"Memo";case T:p=h._payload,h=h._init;try{return U(h(p))}catch{}}return null}function F(h){var p=h.type;switch(h.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=p.render,h=h.displayName||h.name||"",p.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(p);case 8:return p===m?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function I(h){var p=h,E=h;if(h.alternate)for(;p.return;)p=p.return;else{h=p;do p=h,(p.flags&4098)!==0&&(E=p.return),h=p.return;while(h)}return p.tag===3?E:null}function k(h){if(I(h)!==h)throw Error(o(188))}function Q(h){var p=h.alternate;if(!p){if(p=I(h),p===null)throw Error(o(188));return p!==h?null:h}for(var E=h,A=p;;){var N=E.return;if(N===null)break;var z=N.alternate;if(z===null){if(A=N.return,A!==null){E=A;continue}break}if(N.child===z.child){for(z=N.child;z;){if(z===E)return k(N),h;if(z===A)return k(N),p;z=z.sibling}throw Error(o(188))}if(E.return!==A.return)E=N,A=z;else{for(var fe=!1,Ae=N.child;Ae;){if(Ae===E){fe=!0,E=N,A=z;break}if(Ae===A){fe=!0,A=N,E=z;break}Ae=Ae.sibling}if(!fe){for(Ae=z.child;Ae;){if(Ae===E){fe=!0,E=z,A=N;break}if(Ae===A){fe=!0,A=z,E=N;break}Ae=Ae.sibling}if(!fe)throw Error(o(189))}}if(E.alternate!==A)throw Error(o(190))}if(E.tag!==3)throw Error(o(188));return E.stateNode.current===E?h:p}function j(h){return h=Q(h),h!==null?$(h):null}function $(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var p=$(h);if(p!==null)return p;h=h.sibling}return null}function H(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){if(h.tag!==4){var p=H(h);if(p!==null)return p}h=h.sibling}return null}var ie=Array.isArray,re=e.getPublicInstance,ue=e.getRootHostContext,G=e.getChildHostContext,K=e.prepareForCommit,W=e.resetAfterCommit,L=e.createInstance,B=e.appendInitialChild,ne=e.finalizeInitialChildren,ae=e.prepareUpdate,de=e.shouldSetTextContent,pe=e.createTextInstance,xe=e.scheduleTimeout,Me=e.cancelTimeout,Xe=e.noTimeout,ot=e.isPrimaryRenderer,He=e.supportsMutation,te=e.supportsPersistence,Ye=e.supportsHydration,Re=e.getInstanceFromNode,je=e.preparePortalMount,Ne=e.getCurrentEventPriority,ct=e.detachDeletedInstance,Fe=e.supportsMicrotasks,qe=e.scheduleMicrotask,nt=e.supportsTestSelectors,Ue=e.findFiberRoot,_t=e.getBoundingRect,J=e.getTextContent,q=e.isHiddenSubtree,ye=e.matchAccessibilityRole,tt=e.setFocusIfFocusable,Le=e.setupIntersectionObserver,We=e.appendChild,st=e.appendChildToContainer,et=e.commitTextUpdate,lt=e.commitMount,Mt=e.commitUpdate,xt=e.insertBefore,Ge=e.insertInContainerBefore,mt=e.removeChild,ce=e.removeChildFromContainer,Ie=e.resetTextContent,Pe=e.hideInstance,ke=e.hideTextInstance,Te=e.unhideInstance,he=e.unhideTextInstance,ut=e.clearContainer,rt=e.cloneInstance,De=e.createContainerChildSet,at=e.appendChildToContainerChildSet,St=e.finalizeContainerChildren,Et=e.replaceContainerChildren,Wt=e.cloneHiddenInstance,gn=e.cloneHiddenTextInstance,Yt=e.canHydrateInstance,pn=e.canHydrateTextInstance,kn=e.canHydrateSuspenseInstance,Fr=e.isSuspenseInstancePending,Sr=e.isSuspenseInstanceFallback,sr=e.registerSuspenseInstanceRetry,$n=e.getNextHydratableSibling,qt=e.getFirstHydratableChild,fr=e.getFirstHydratableChildWithinContainer,Fi=e.getFirstHydratableChildWithinSuspenseInstance,Y=e.hydrateInstance,ee=e.hydrateTextInstance,_e=e.hydrateSuspenseInstance,V=e.getNextHydratableInstanceAfterSuspenseInstance,se=e.commitHydratedContainer,le=e.commitHydratedSuspenseInstance,ve=e.clearSuspenseBoundary,ge=e.clearSuspenseBoundaryFromContainer,Be=e.shouldDeleteUnhydratedTailInstances,Ze=e.didNotMatchHydratedContainerTextInstance,Je=e.didNotMatchHydratedTextInstance,Se;function Lt(h){if(Se===void 0)try{throw Error()}catch(E){var p=E.stack.trim().match(/\n( *(at )?)/);Se=p&&p[1]||""}return`
`+Se+h}var dt=!1;function ht(h,p){if(!h||dt)return"";dt=!0;var E=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(yt){var A=yt}Reflect.construct(h,[],p)}else{try{p.call()}catch(yt){A=yt}h.call(p.prototype)}else{try{throw Error()}catch(yt){A=yt}h()}}catch(yt){if(yt&&A&&typeof yt.stack=="string"){for(var N=yt.stack.split(`
`),z=A.stack.split(`
`),fe=N.length-1,Ae=z.length-1;1<=fe&&0<=Ae&&N[fe]!==z[Ae];)Ae--;for(;1<=fe&&0<=Ae;fe--,Ae--)if(N[fe]!==z[Ae]){if(fe!==1||Ae!==1)do if(fe--,Ae--,0>Ae||N[fe]!==z[Ae]){var $e=`
`+N[fe].replace(" at new "," at ");return h.displayName&&$e.includes("<anonymous>")&&($e=$e.replace("<anonymous>",h.displayName)),$e}while(1<=fe&&0<=Ae);break}}}finally{dt=!1,Error.prepareStackTrace=E}return(h=h?h.displayName||h.name:"")?Lt(h):""}var It=Object.prototype.hasOwnProperty,Ht=[],jt=-1;function Zt(h){return{current:h}}function Tt(h){0>jt||(h.current=Ht[jt],Ht[jt]=null,jt--)}function bt(h,p){jt++,Ht[jt]=h.current,h.current=p}var Kt={},$t=Zt(Kt),Qt=Zt(!1),In=Kt;function Un(h,p){var E=h.type.contextTypes;if(!E)return Kt;var A=h.stateNode;if(A&&A.__reactInternalMemoizedUnmaskedChildContext===p)return A.__reactInternalMemoizedMaskedChildContext;var N={},z;for(z in E)N[z]=p[z];return A&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=p,h.__reactInternalMemoizedMaskedChildContext=N),N}function On(h){return h=h.childContextTypes,h!=null}function un(){Tt(Qt),Tt($t)}function an(h,p,E){if($t.current!==Kt)throw Error(o(168));bt($t,p),bt(Qt,E)}function Yn(h,p,E){var A=h.stateNode;if(p=p.childContextTypes,typeof A.getChildContext!="function")return E;A=A.getChildContext();for(var N in A)if(!(N in p))throw Error(o(108,F(h)||"Unknown",N));return s({},E,A)}function on(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||Kt,In=$t.current,bt($t,h),bt(Qt,Qt.current),!0}function rn(h,p,E){var A=h.stateNode;if(!A)throw Error(o(169));E?(h=Yn(h,p,In),A.__reactInternalMemoizedMergedChildContext=h,Tt(Qt),Tt($t),bt($t,h)):Tt(Qt),bt(Qt,E)}var zn=Math.clz32?Math.clz32:Ji,kr=Math.log,er=Math.LN2;function Ji(h){return h>>>=0,h===0?32:31-(kr(h)/er|0)|0}var Fs=64,Tn=4194304;function lo(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function xa(h,p){var E=h.pendingLanes;if(E===0)return 0;var A=0,N=h.suspendedLanes,z=h.pingedLanes,fe=E&268435455;if(fe!==0){var Ae=fe&~N;Ae!==0?A=lo(Ae):(z&=fe,z!==0&&(A=lo(z)))}else fe=E&~N,fe!==0?A=lo(fe):z!==0&&(A=lo(z));if(A===0)return 0;if(p!==0&&p!==A&&(p&N)===0&&(N=A&-A,z=p&-p,N>=z||N===16&&(z&4194240)!==0))return p;if((A&4)!==0&&(A|=E&16),p=h.entangledLanes,p!==0)for(h=h.entanglements,p&=A;0<p;)E=31-zn(p),N=1<<E,A|=h[E],p&=~N;return A}function Kl(h,p){switch(h){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zl(h,p){for(var E=h.suspendedLanes,A=h.pingedLanes,N=h.expirationTimes,z=h.pendingLanes;0<z;){var fe=31-zn(z),Ae=1<<fe,$e=N[fe];$e===-1?((Ae&E)===0||(Ae&A)!==0)&&(N[fe]=Kl(Ae,p)):$e<=p&&(h.expiredLanes|=Ae),z&=~Ae}}function co(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function rl(h){for(var p=[],E=0;31>E;E++)p.push(h);return p}function vs(h,p,E){h.pendingLanes|=p,p!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,p=31-zn(p),h[p]=E}function ks(h,p){var E=h.pendingLanes&~p;h.pendingLanes=p,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=p,h.mutableReadLanes&=p,h.entangledLanes&=p,p=h.entanglements;var A=h.eventTimes;for(h=h.expirationTimes;0<E;){var N=31-zn(E),z=1<<N;p[N]=0,A[N]=-1,h[N]=-1,E&=~z}}function ni(h,p){var E=h.entangledLanes|=p;for(h=h.entanglements;E;){var A=31-zn(E),N=1<<A;N&p|h[A]&p&&(h[A]|=p),E&=~N}}var ln=0;function ys(h){return h&=-h,1<h?4<h?(h&268435455)!==0?16:536870912:4:1}var $i=i.unstable_scheduleCallback,uo=i.unstable_cancelCallback,_s=i.unstable_shouldYield,jf=i.unstable_requestPaint,or=i.unstable_now,Bs=i.unstable_ImmediatePriority,Xf=i.unstable_UserBlockingPriority,yi=i.unstable_NormalPriority,Sa=i.unstable_IdlePriority,wa=null,es=null;function Lo(h){if(es&&typeof es.onCommitFiberRoot=="function")try{es.onCommitFiberRoot(wa,h,void 0,(h.current.flags&128)===128)}catch{}}function Ea(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var Wr=typeof Object.is=="function"?Object.is:Ea,jr=null,fo=!1,xs=!1;function il(h){jr===null?jr=[h]:jr.push(h)}function Ma(h){fo=!0,il(h)}function _i(){if(!xs&&jr!==null){xs=!0;var h=0,p=ln;try{var E=jr;for(ln=1;h<E.length;h++){var A=E[h];do A=A(!0);while(A!==null)}jr=null,fo=!1}catch(N){throw jr!==null&&(jr=jr.slice(h+1)),$i(Bs,_i),N}finally{ln=p,xs=!1}}return null}var Ta=a.ReactCurrentBatchConfig;function ki(h,p){if(Wr(h,p))return!0;if(typeof h!="object"||h===null||typeof p!="object"||p===null)return!1;var E=Object.keys(h),A=Object.keys(p);if(E.length!==A.length)return!1;for(A=0;A<E.length;A++){var N=E[A];if(!It.call(p,N)||!Wr(h[N],p[N]))return!1}return!0}function Io(h){switch(h.tag){case 5:return Lt(h.type);case 16:return Lt("Lazy");case 13:return Lt("Suspense");case 19:return Lt("SuspenseList");case 0:case 2:case 15:return h=ht(h.type,!1),h;case 11:return h=ht(h.type.render,!1),h;case 1:return h=ht(h.type,!0),h;default:return""}}function Xr(h,p){if(h&&h.defaultProps){p=s({},p),h=h.defaultProps;for(var E in h)p[E]===void 0&&(p[E]=h[E]);return p}return p}var Br=Zt(null),No=null,Bi=null,Do=null;function Yr(){Do=Bi=No=null}function Uo(h,p,E){ot?(bt(Br,p._currentValue),p._currentValue=E):(bt(Br,p._currentValue2),p._currentValue2=E)}function Ar(h){var p=Br.current;Tt(Br),ot?h._currentValue=p:h._currentValue2=p}function zr(h,p,E){for(;h!==null;){var A=h.alternate;if((h.childLanes&p)!==p?(h.childLanes|=p,A!==null&&(A.childLanes|=p)):A!==null&&(A.childLanes&p)!==p&&(A.childLanes|=p),h===E)break;h=h.return}}function wr(h,p){No=h,Do=Bi=null,h=h.dependencies,h!==null&&h.firstContext!==null&&((h.lanes&p)!==0&&(Qr=!0),h.firstContext=null)}function dr(h){var p=ot?h._currentValue:h._currentValue2;if(Do!==h)if(h={context:h,memoizedValue:p,next:null},Bi===null){if(No===null)throw Error(o(308));Bi=h,No.dependencies={lanes:0,firstContext:h}}else Bi=Bi.next=h;return p}var Ci=null,Ss=!1;function Ql(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zh(h,p){h=h.updateQueue,p.updateQueue===h&&(p.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function Oo(h,p){return{eventTime:h,lane:p,tag:0,payload:null,callback:null,next:null}}function ba(h,p){var E=h.updateQueue;E!==null&&(E=E.shared,Mr!==null&&(h.mode&1)!==0&&(mn&2)===0?(h=E.interleaved,h===null?(p.next=p,Ci===null?Ci=[E]:Ci.push(E)):(p.next=h.next,h.next=p),E.interleaved=p):(h=E.pending,h===null?p.next=p:(p.next=h.next,h.next=p),E.pending=p))}function Yf(h,p,E){if(p=p.updateQueue,p!==null&&(p=p.shared,(E&4194240)!==0)){var A=p.lanes;A&=h.pendingLanes,E|=A,p.lanes=E,ni(h,E)}}function qf(h,p){var E=h.updateQueue,A=h.alternate;if(A!==null&&(A=A.updateQueue,E===A)){var N=null,z=null;if(E=E.firstBaseUpdate,E!==null){do{var fe={eventTime:E.eventTime,lane:E.lane,tag:E.tag,payload:E.payload,callback:E.callback,next:null};z===null?N=z=fe:z=z.next=fe,E=E.next}while(E!==null);z===null?N=z=p:z=z.next=p}else N=z=p;E={baseState:A.baseState,firstBaseUpdate:N,lastBaseUpdate:z,shared:A.shared,effects:A.effects},h.updateQueue=E;return}h=E.lastBaseUpdate,h===null?E.firstBaseUpdate=p:h.next=p,E.lastBaseUpdate=p}function Kf(h,p,E,A){var N=h.updateQueue;Ss=!1;var z=N.firstBaseUpdate,fe=N.lastBaseUpdate,Ae=N.shared.pending;if(Ae!==null){N.shared.pending=null;var $e=Ae,yt=$e.next;$e.next=null,fe===null?z=yt:fe.next=yt,fe=$e;var Ft=h.alternate;Ft!==null&&(Ft=Ft.updateQueue,Ae=Ft.lastBaseUpdate,Ae!==fe&&(Ae===null?Ft.firstBaseUpdate=yt:Ae.next=yt,Ft.lastBaseUpdate=$e))}if(z!==null){var fn=N.baseState;fe=0,Ft=yt=$e=null,Ae=z;do{var Jt=Ae.lane,vn=Ae.eventTime;if((A&Jt)===Jt){Ft!==null&&(Ft=Ft.next={eventTime:vn,lane:0,tag:Ae.tag,payload:Ae.payload,callback:Ae.callback,next:null});e:{var Ut=h,li=Ae;switch(Jt=p,vn=E,li.tag){case 1:if(Ut=li.payload,typeof Ut=="function"){fn=Ut.call(vn,fn,Jt);break e}fn=Ut;break e;case 3:Ut.flags=Ut.flags&-65537|128;case 0:if(Ut=li.payload,Jt=typeof Ut=="function"?Ut.call(vn,fn,Jt):Ut,Jt==null)break e;fn=s({},fn,Jt);break e;case 2:Ss=!0}}Ae.callback!==null&&Ae.lane!==0&&(h.flags|=64,Jt=N.effects,Jt===null?N.effects=[Ae]:Jt.push(Ae))}else vn={eventTime:vn,lane:Jt,tag:Ae.tag,payload:Ae.payload,callback:Ae.callback,next:null},Ft===null?(yt=Ft=vn,$e=fn):Ft=Ft.next=vn,fe|=Jt;if(Ae=Ae.next,Ae===null){if(Ae=N.shared.pending,Ae===null)break;Jt=Ae,Ae=Jt.next,Jt.next=null,N.lastBaseUpdate=Jt,N.shared.pending=null}}while(!0);if(Ft===null&&($e=fn),N.baseState=$e,N.firstBaseUpdate=yt,N.lastBaseUpdate=Ft,p=N.shared.interleaved,p!==null){N=p;do fe|=N.lane,N=N.next;while(N!==p)}else z===null&&(N.shared.lanes=0);go|=fe,h.lanes=fe,h.memoizedState=fn}}function Sg(h,p,E){if(h=p.effects,p.effects=null,h!==null)for(p=0;p<h.length;p++){var A=h[p],N=A.callback;if(N!==null){if(A.callback=null,A=E,typeof N!="function")throw Error(o(191,N));N.call(A)}}}var wg=new r.Component().refs;function Qh(h,p,E,A){p=h.memoizedState,E=E(A,p),E=E==null?p:s({},p,E),h.memoizedState=E,h.lanes===0&&(h.updateQueue.baseState=E)}var Zf={isMounted:function(h){return(h=h._reactInternals)?I(h)===h:!1},enqueueSetState:function(h,p,E){h=h._reactInternals;var A=Nn(),N=Xs(h),z=Oo(A,N);z.payload=p,E!=null&&(z.callback=E),ba(h,z),p=wi(h,N,A),p!==null&&Yf(p,h,N)},enqueueReplaceState:function(h,p,E){h=h._reactInternals;var A=Nn(),N=Xs(h),z=Oo(A,N);z.tag=1,z.payload=p,E!=null&&(z.callback=E),ba(h,z),p=wi(h,N,A),p!==null&&Yf(p,h,N)},enqueueForceUpdate:function(h,p){h=h._reactInternals;var E=Nn(),A=Xs(h),N=Oo(E,A);N.tag=2,p!=null&&(N.callback=p),ba(h,N),p=wi(h,A,E),p!==null&&Yf(p,h,A)}};function Jh(h,p,E,A,N,z,fe){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(A,z,fe):p.prototype&&p.prototype.isPureReactComponent?!ki(E,A)||!ki(N,z):!0}function Eg(h,p,E){var A=!1,N=Kt,z=p.contextType;return typeof z=="object"&&z!==null?z=dr(z):(N=On(p)?In:$t.current,A=p.contextTypes,z=(A=A!=null)?Un(h,N):Kt),p=new p(E,z),h.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Zf,h.stateNode=p,p._reactInternals=h,A&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=N,h.__reactInternalMemoizedMaskedChildContext=z),p}function Mg(h,p,E,A){h=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(E,A),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(E,A),p.state!==h&&Zf.enqueueReplaceState(p,p.state,null)}function $h(h,p,E,A){var N=h.stateNode;N.props=E,N.state=h.memoizedState,N.refs=wg,Ql(h);var z=p.contextType;typeof z=="object"&&z!==null?N.context=dr(z):(z=On(p)?In:$t.current,N.context=Un(h,z)),N.state=h.memoizedState,z=p.getDerivedStateFromProps,typeof z=="function"&&(Qh(h,p,z,E),N.state=h.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(p=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),p!==N.state&&Zf.enqueueReplaceState(N,N.state,null),Kf(h,E,N,A),N.state=h.memoizedState),typeof N.componentDidMount=="function"&&(h.flags|=4194308)}var Jl=[],Aa=0,Qf=null,Jf=0,ws=[],ts=0,sl=null,Fo=1,ko="";function ol(h,p){Jl[Aa++]=Jf,Jl[Aa++]=Qf,Qf=h,Jf=p}function Tg(h,p,E){ws[ts++]=Fo,ws[ts++]=ko,ws[ts++]=sl,sl=h;var A=Fo;h=ko;var N=32-zn(A)-1;A&=~(1<<N),E+=1;var z=32-zn(p)+N;if(30<z){var fe=N-N%5;z=(A&(1<<fe)-1).toString(32),A>>=fe,N-=fe,Fo=1<<32-zn(p)+N|E<<N|A,ko=z+h}else Fo=1<<z|E<<N|A,ko=h}function ep(h){h.return!==null&&(ol(h,1),Tg(h,1,0))}function tp(h){for(;h===Qf;)Qf=Jl[--Aa],Jl[Aa]=null,Jf=Jl[--Aa],Jl[Aa]=null;for(;h===sl;)sl=ws[--ts],ws[ts]=null,ko=ws[--ts],ws[ts]=null,Fo=ws[--ts],ws[ts]=null}var Ri=null,ri=null,ar=!1,$l=!1,Es=null;function np(h,p){var E=ls(5,null,null,0);E.elementType="DELETED",E.stateNode=p,E.return=h,p=h.deletions,p===null?(h.deletions=[E],h.flags|=16):p.push(E)}function rp(h,p){switch(h.tag){case 5:return p=Yt(p,h.type,h.pendingProps),p!==null?(h.stateNode=p,Ri=h,ri=qt(p),!0):!1;case 6:return p=pn(p,h.pendingProps),p!==null?(h.stateNode=p,Ri=h,ri=null,!0):!1;case 13:if(p=kn(p),p!==null){var E=sl!==null?{id:Fo,overflow:ko}:null;return h.memoizedState={dehydrated:p,treeContext:E,retryLane:1073741824},E=ls(18,null,null,0),E.stateNode=p,E.return=h,h.child=E,Ri=h,ri=null,!0}return!1;default:return!1}}function $f(h){return(h.mode&1)!==0&&(h.flags&128)===0}function Ca(h){if(ar){var p=ri;if(p){var E=p;if(!rp(h,p)){if($f(h))throw Error(o(418));p=$n(E);var A=Ri;p&&rp(h,p)?np(A,E):(h.flags=h.flags&-4097|2,ar=!1,Ri=h)}}else{if($f(h))throw Error(o(418));h.flags=h.flags&-4097|2,ar=!1,Ri=h}}}function bg(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;Ri=h}function pu(h){if(!Ye||h!==Ri)return!1;if(!ar)return bg(h),ar=!0,!1;if(h.tag!==3&&(h.tag!==5||Be(h.type)&&!de(h.type,h.memoizedProps))){var p=ri;if(p){if($f(h)){for(h=ri;h;)h=$n(h);throw Error(o(418))}for(;p;)np(h,p),p=$n(p)}}if(bg(h),h.tag===13){if(!Ye)throw Error(o(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));ri=V(h)}else ri=Ri?$n(h.stateNode):null;return!0}function ec(){Ye&&(ri=Ri=null,$l=ar=!1)}function ed(h){Es===null?Es=[h]:Es.push(h)}function tc(h,p,E){if(h=E.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(E._owner){if(E=E._owner,E){if(E.tag!==1)throw Error(o(309));var A=E.stateNode}if(!A)throw Error(o(147,h));var N=A,z=""+h;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===z?p.ref:(p=function(fe){var Ae=N.refs;Ae===wg&&(Ae=N.refs={}),fe===null?delete Ae[z]:Ae[z]=fe},p._stringRef=z,p)}if(typeof h!="string")throw Error(o(284));if(!E._owner)throw Error(o(290,h))}return h}function Ra(h,p){throw h=Object.prototype.toString.call(p),Error(o(31,h==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":h))}function nc(h){var p=h._init;return p(h._payload)}function Ag(h){function p(Ve,Ce){if(h){var Qe=Ve.deletions;Qe===null?(Ve.deletions=[Ce],Ve.flags|=16):Qe.push(Ce)}}function E(Ve,Ce){if(!h)return null;for(;Ce!==null;)p(Ve,Ce),Ce=Ce.sibling;return null}function A(Ve,Ce){for(Ve=new Map;Ce!==null;)Ce.key!==null?Ve.set(Ce.key,Ce):Ve.set(Ce.index,Ce),Ce=Ce.sibling;return Ve}function N(Ve,Ce){return Ve=Jo(Ve,Ce),Ve.index=0,Ve.sibling=null,Ve}function z(Ve,Ce,Qe){return Ve.index=Qe,h?(Qe=Ve.alternate,Qe!==null?(Qe=Qe.index,Qe<Ce?(Ve.flags|=2,Ce):Qe):(Ve.flags|=2,Ce)):(Ve.flags|=1048576,Ce)}function fe(Ve){return h&&Ve.alternate===null&&(Ve.flags|=2),Ve}function Ae(Ve,Ce,Qe,Nt){return Ce===null||Ce.tag!==6?(Ce=Ad(Qe,Ve.mode,Nt),Ce.return=Ve,Ce):(Ce=N(Ce,Qe),Ce.return=Ve,Ce)}function $e(Ve,Ce,Qe,Nt){var Gt=Qe.type;return Gt===d?Ft(Ve,Ce,Qe.props.children,Nt,Qe.key):Ce!==null&&(Ce.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===T&&nc(Gt)===Ce.type)?(Nt=N(Ce,Qe.props),Nt.ref=tc(Ve,Ce,Qe),Nt.return=Ve,Nt):(Nt=bd(Qe.type,Qe.key,Qe.props,null,Ve.mode,Nt),Nt.ref=tc(Ve,Ce,Qe),Nt.return=Ve,Nt)}function yt(Ve,Ce,Qe,Nt){return Ce===null||Ce.tag!==4||Ce.stateNode.containerInfo!==Qe.containerInfo||Ce.stateNode.implementation!==Qe.implementation?(Ce=Cd(Qe,Ve.mode,Nt),Ce.return=Ve,Ce):(Ce=N(Ce,Qe.children||[]),Ce.return=Ve,Ce)}function Ft(Ve,Ce,Qe,Nt,Gt){return Ce===null||Ce.tag!==7?(Ce=Cl(Qe,Ve.mode,Nt,Gt),Ce.return=Ve,Ce):(Ce=N(Ce,Qe),Ce.return=Ve,Ce)}function fn(Ve,Ce,Qe){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return Ce=Ad(""+Ce,Ve.mode,Qe),Ce.return=Ve,Ce;if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case c:return Qe=bd(Ce.type,Ce.key,Ce.props,null,Ve.mode,Qe),Qe.ref=tc(Ve,null,Ce),Qe.return=Ve,Qe;case u:return Ce=Cd(Ce,Ve.mode,Qe),Ce.return=Ve,Ce;case T:var Nt=Ce._init;return fn(Ve,Nt(Ce._payload),Qe)}if(ie(Ce)||D(Ce))return Ce=Cl(Ce,Ve.mode,Qe,null),Ce.return=Ve,Ce;Ra(Ve,Ce)}return null}function Jt(Ve,Ce,Qe,Nt){var Gt=Ce!==null?Ce.key:null;if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number")return Gt!==null?null:Ae(Ve,Ce,""+Qe,Nt);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case c:return Qe.key===Gt?$e(Ve,Ce,Qe,Nt):null;case u:return Qe.key===Gt?yt(Ve,Ce,Qe,Nt):null;case T:return Gt=Qe._init,Jt(Ve,Ce,Gt(Qe._payload),Nt)}if(ie(Qe)||D(Qe))return Gt!==null?null:Ft(Ve,Ce,Qe,Nt,null);Ra(Ve,Qe)}return null}function vn(Ve,Ce,Qe,Nt,Gt){if(typeof Nt=="string"&&Nt!==""||typeof Nt=="number")return Ve=Ve.get(Qe)||null,Ae(Ce,Ve,""+Nt,Gt);if(typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case c:return Ve=Ve.get(Nt.key===null?Qe:Nt.key)||null,$e(Ce,Ve,Nt,Gt);case u:return Ve=Ve.get(Nt.key===null?Qe:Nt.key)||null,yt(Ce,Ve,Nt,Gt);case T:var hn=Nt._init;return vn(Ve,Ce,Qe,hn(Nt._payload),Gt)}if(ie(Nt)||D(Nt))return Ve=Ve.get(Qe)||null,Ft(Ce,Ve,Nt,Gt,null);Ra(Ce,Nt)}return null}function Ut(Ve,Ce,Qe,Nt){for(var Gt=null,hn=null,dn=Ce,Rn=Ce=0,Rr=null;dn!==null&&Rn<Qe.length;Rn++){dn.index>Rn?(Rr=dn,dn=null):Rr=dn.sibling;var Cn=Jt(Ve,dn,Qe[Rn],Nt);if(Cn===null){dn===null&&(dn=Rr);break}h&&dn&&Cn.alternate===null&&p(Ve,dn),Ce=z(Cn,Ce,Rn),hn===null?Gt=Cn:hn.sibling=Cn,hn=Cn,dn=Rr}if(Rn===Qe.length)return E(Ve,dn),ar&&ol(Ve,Rn),Gt;if(dn===null){for(;Rn<Qe.length;Rn++)dn=fn(Ve,Qe[Rn],Nt),dn!==null&&(Ce=z(dn,Ce,Rn),hn===null?Gt=dn:hn.sibling=dn,hn=dn);return ar&&ol(Ve,Rn),Gt}for(dn=A(Ve,dn);Rn<Qe.length;Rn++)Rr=vn(dn,Ve,Rn,Qe[Rn],Nt),Rr!==null&&(h&&Rr.alternate!==null&&dn.delete(Rr.key===null?Rn:Rr.key),Ce=z(Rr,Ce,Rn),hn===null?Gt=Rr:hn.sibling=Rr,hn=Rr);return h&&dn.forEach(function($o){return p(Ve,$o)}),ar&&ol(Ve,Rn),Gt}function li(Ve,Ce,Qe,Nt){var Gt=D(Qe);if(typeof Gt!="function")throw Error(o(150));if(Qe=Gt.call(Qe),Qe==null)throw Error(o(151));for(var hn=Gt=null,dn=Ce,Rn=Ce=0,Rr=null,Cn=Qe.next();dn!==null&&!Cn.done;Rn++,Cn=Qe.next()){dn.index>Rn?(Rr=dn,dn=null):Rr=dn.sibling;var $o=Jt(Ve,dn,Cn.value,Nt);if($o===null){dn===null&&(dn=Rr);break}h&&dn&&$o.alternate===null&&p(Ve,dn),Ce=z($o,Ce,Rn),hn===null?Gt=$o:hn.sibling=$o,hn=$o,dn=Rr}if(Cn.done)return E(Ve,dn),ar&&ol(Ve,Rn),Gt;if(dn===null){for(;!Cn.done;Rn++,Cn=Qe.next())Cn=fn(Ve,Cn.value,Nt),Cn!==null&&(Ce=z(Cn,Ce,Rn),hn===null?Gt=Cn:hn.sibling=Cn,hn=Cn);return ar&&ol(Ve,Rn),Gt}for(dn=A(Ve,dn);!Cn.done;Rn++,Cn=Qe.next())Cn=vn(dn,Ve,Rn,Cn.value,Nt),Cn!==null&&(h&&Cn.alternate!==null&&dn.delete(Cn.key===null?Rn:Cn.key),Ce=z(Cn,Ce,Rn),hn===null?Gt=Cn:hn.sibling=Cn,hn=Cn);return h&&dn.forEach(function(Dp){return p(Ve,Dp)}),ar&&ol(Ve,Rn),Gt}function cs(Ve,Ce,Qe,Nt){if(typeof Qe=="object"&&Qe!==null&&Qe.type===d&&Qe.key===null&&(Qe=Qe.props.children),typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case c:e:{for(var Gt=Qe.key,hn=Ce;hn!==null;){if(hn.key===Gt){if(Gt=Qe.type,Gt===d){if(hn.tag===7){E(Ve,hn.sibling),Ce=N(hn,Qe.props.children),Ce.return=Ve,Ve=Ce;break e}}else if(hn.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===T&&nc(Gt)===hn.type){E(Ve,hn.sibling),Ce=N(hn,Qe.props),Ce.ref=tc(Ve,hn,Qe),Ce.return=Ve,Ve=Ce;break e}E(Ve,hn);break}else p(Ve,hn);hn=hn.sibling}Qe.type===d?(Ce=Cl(Qe.props.children,Ve.mode,Nt,Qe.key),Ce.return=Ve,Ve=Ce):(Nt=bd(Qe.type,Qe.key,Qe.props,null,Ve.mode,Nt),Nt.ref=tc(Ve,Ce,Qe),Nt.return=Ve,Ve=Nt)}return fe(Ve);case u:e:{for(hn=Qe.key;Ce!==null;){if(Ce.key===hn)if(Ce.tag===4&&Ce.stateNode.containerInfo===Qe.containerInfo&&Ce.stateNode.implementation===Qe.implementation){E(Ve,Ce.sibling),Ce=N(Ce,Qe.children||[]),Ce.return=Ve,Ve=Ce;break e}else{E(Ve,Ce);break}else p(Ve,Ce);Ce=Ce.sibling}Ce=Cd(Qe,Ve.mode,Nt),Ce.return=Ve,Ve=Ce}return fe(Ve);case T:return hn=Qe._init,cs(Ve,Ce,hn(Qe._payload),Nt)}if(ie(Qe))return Ut(Ve,Ce,Qe,Nt);if(D(Qe))return li(Ve,Ce,Qe,Nt);Ra(Ve,Qe)}return typeof Qe=="string"&&Qe!==""||typeof Qe=="number"?(Qe=""+Qe,Ce!==null&&Ce.tag===6?(E(Ve,Ce.sibling),Ce=N(Ce,Qe),Ce.return=Ve,Ve=Ce):(E(Ve,Ce),Ce=Ad(Qe,Ve.mode,Nt),Ce.return=Ve,Ve=Ce),fe(Ve)):E(Ve,Ce)}return cs}var Bo=Ag(!0),Cg=Ag(!1),rc={},zi=Zt(rc),al=Zt(rc),ll=Zt(rc);function zs(h){if(h===rc)throw Error(o(174));return h}function td(h,p){bt(ll,p),bt(al,h),bt(zi,rc),h=ue(p),Tt(zi),bt(zi,h)}function ic(){Tt(zi),Tt(al),Tt(ll)}function Rg(h){var p=zs(ll.current),E=zs(zi.current);p=G(E,h.type,p),E!==p&&(bt(al,h),bt(zi,p))}function ip(h){al.current===h&&(Tt(zi),Tt(al))}var hr=Zt(0);function nd(h){for(var p=h;p!==null;){if(p.tag===13){var E=p.memoizedState;if(E!==null&&(E=E.dehydrated,E===null||Fr(E)||Sr(E)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var ns=[];function cl(){for(var h=0;h<ns.length;h++){var p=ns[h];ot?p._workInProgressVersionPrimary=null:p._workInProgressVersionSecondary=null}ns.length=0}var mu=a.ReactCurrentDispatcher,rs=a.ReactCurrentBatchConfig,ul=0,pr=null,qr=null,Kr=null,rd=!1,ho=!1,fl=0,gu=0;function Zr(){throw Error(o(321))}function id(h,p){if(p===null)return!1;for(var E=0;E<p.length&&E<h.length;E++)if(!Wr(h[E],p[E]))return!1;return!0}function sc(h,p,E,A,N,z){if(ul=z,pr=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,mu.current=h===null||h.memoizedState===null?up:fp,h=E(A,N),ho){z=0;do{if(ho=!1,fl=0,25<=z)throw Error(o(301));z+=1,Kr=qr=null,p.updateQueue=null,mu.current=dp,h=E(A,N)}while(ho)}if(mu.current=cc,p=qr!==null&&qr.next!==null,ul=0,Kr=qr=pr=null,rd=!1,p)throw Error(o(300));return h}function Pa(){var h=fl!==0;return fl=0,h}function Hs(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kr===null?pr.memoizedState=Kr=h:Kr=Kr.next=h,Kr}function Gs(){if(qr===null){var h=pr.alternate;h=h!==null?h.memoizedState:null}else h=qr.next;var p=Kr===null?pr.memoizedState:Kr.next;if(p!==null)Kr=p,qr=h;else{if(h===null)throw Error(o(310));qr=h,h={memoizedState:qr.memoizedState,baseState:qr.baseState,baseQueue:qr.baseQueue,queue:qr.queue,next:null},Kr===null?pr.memoizedState=Kr=h:Kr=Kr.next=h}return Kr}function po(h,p){return typeof p=="function"?p(h):p}function vu(h){var p=Gs(),E=p.queue;if(E===null)throw Error(o(311));E.lastRenderedReducer=h;var A=qr,N=A.baseQueue,z=E.pending;if(z!==null){if(N!==null){var fe=N.next;N.next=z.next,z.next=fe}A.baseQueue=N=z,E.pending=null}if(N!==null){z=N.next,A=A.baseState;var Ae=fe=null,$e=null,yt=z;do{var Ft=yt.lane;if((ul&Ft)===Ft)$e!==null&&($e=$e.next={lane:0,action:yt.action,hasEagerState:yt.hasEagerState,eagerState:yt.eagerState,next:null}),A=yt.hasEagerState?yt.eagerState:h(A,yt.action);else{var fn={lane:Ft,action:yt.action,hasEagerState:yt.hasEagerState,eagerState:yt.eagerState,next:null};$e===null?(Ae=$e=fn,fe=A):$e=$e.next=fn,pr.lanes|=Ft,go|=Ft}yt=yt.next}while(yt!==null&&yt!==z);$e===null?fe=A:$e.next=Ae,Wr(A,p.memoizedState)||(Qr=!0),p.memoizedState=A,p.baseState=fe,p.baseQueue=$e,E.lastRenderedState=A}if(h=E.interleaved,h!==null){N=h;do z=N.lane,pr.lanes|=z,go|=z,N=N.next;while(N!==h)}else N===null&&(E.lanes=0);return[p.memoizedState,E.dispatch]}function yu(h){var p=Gs(),E=p.queue;if(E===null)throw Error(o(311));E.lastRenderedReducer=h;var A=E.dispatch,N=E.pending,z=p.memoizedState;if(N!==null){E.pending=null;var fe=N=N.next;do z=h(z,fe.action),fe=fe.next;while(fe!==N);Wr(z,p.memoizedState)||(Qr=!0),p.memoizedState=z,p.baseQueue===null&&(p.baseState=z),E.lastRenderedState=z}return[z,A]}function sp(){}function op(h,p){var E=pr,A=Gs(),N=p(),z=!Wr(A.memoizedState,N);if(z&&(A.memoizedState=N,Qr=!0),A=A.queue,oc(zo.bind(null,E,A,h),[h]),A.getSnapshot!==p||z||Kr!==null&&Kr.memoizedState.tag&1){if(E.flags|=2048,xu(9,lp.bind(null,E,A,N,p),void 0,null),Mr===null)throw Error(o(349));(ul&30)!==0||ap(E,p,N)}return N}function ap(h,p,E){h.flags|=16384,h={getSnapshot:p,value:E},p=pr.updateQueue,p===null?(p={lastEffect:null,stores:null},pr.updateQueue=p,p.stores=[h]):(E=p.stores,E===null?p.stores=[h]:E.push(h))}function lp(h,p,E,A){p.value=E,p.getSnapshot=A,sd(p)&&wi(h,1,-1)}function zo(h,p,E){return E(function(){sd(p)&&wi(h,1,-1)})}function sd(h){var p=h.getSnapshot;h=h.value;try{var E=p();return!Wr(h,E)}catch{return!0}}function _u(h){var p=Hs();return typeof h=="function"&&(h=h()),p.memoizedState=p.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:h},p.queue=h,h=h.dispatch=t_.bind(null,pr,h),[p.memoizedState,h]}function xu(h,p,E,A){return h={tag:h,create:p,destroy:E,deps:A,next:null},p=pr.updateQueue,p===null?(p={lastEffect:null,stores:null},pr.updateQueue=p,p.lastEffect=h.next=h):(E=p.lastEffect,E===null?p.lastEffect=h.next=h:(A=E.next,E.next=h,h.next=A,p.lastEffect=h)),h}function Pg(){return Gs().memoizedState}function La(h,p,E,A){var N=Hs();pr.flags|=h,N.memoizedState=xu(1|p,E,void 0,A===void 0?null:A)}function od(h,p,E,A){var N=Gs();A=A===void 0?null:A;var z=void 0;if(qr!==null){var fe=qr.memoizedState;if(z=fe.destroy,A!==null&&id(A,fe.deps)){N.memoizedState=xu(p,E,z,A);return}}pr.flags|=h,N.memoizedState=xu(1|p,E,z,A)}function ad(h,p){return La(8390656,8,h,p)}function oc(h,p){return od(2048,8,h,p)}function Zn(h,p){return od(4,2,h,p)}function ld(h,p){return od(4,4,h,p)}function Su(h,p){if(typeof p=="function")return h=h(),p(h),function(){p(null)};if(p!=null)return h=h(),p.current=h,function(){p.current=null}}function ac(h,p,E){return E=E!=null?E.concat([h]):null,od(4,4,Su.bind(null,p,h),E)}function cd(){}function ud(h,p){var E=Gs();p=p===void 0?null:p;var A=E.memoizedState;return A!==null&&p!==null&&id(p,A[1])?A[0]:(E.memoizedState=[h,p],h)}function lc(h,p){var E=Gs();p=p===void 0?null:p;var A=E.memoizedState;return A!==null&&p!==null&&id(p,A[1])?A[0]:(h=h(),E.memoizedState=[h,p],h)}function fd(h,p){var E=ln;ln=E!==0&&4>E?E:4,h(!0);var A=rs.transition;rs.transition={};try{h(!1),p()}finally{ln=E,rs.transition=A}}function dl(){return Gs().memoizedState}function Lg(h,p,E){var A=Xs(h);E={lane:A,action:E,hasEagerState:!1,eagerState:null,next:null},Ig(h)?cp(p,E):(wu(h,p,E),E=Nn(),h=wi(h,A,E),h!==null&&Eu(h,p,A))}function t_(h,p,E){var A=Xs(h),N={lane:A,action:E,hasEagerState:!1,eagerState:null,next:null};if(Ig(h))cp(p,N);else{wu(h,p,N);var z=h.alternate;if(h.lanes===0&&(z===null||z.lanes===0)&&(z=p.lastRenderedReducer,z!==null))try{var fe=p.lastRenderedState,Ae=z(fe,E);if(N.hasEagerState=!0,N.eagerState=Ae,Wr(Ae,fe))return}catch{}finally{}E=Nn(),h=wi(h,A,E),h!==null&&Eu(h,p,A)}}function Ig(h){var p=h.alternate;return h===pr||p!==null&&p===pr}function cp(h,p){ho=rd=!0;var E=h.pending;E===null?p.next=p:(p.next=E.next,E.next=p),h.pending=p}function wu(h,p,E){Mr!==null&&(h.mode&1)!==0&&(mn&2)===0?(h=p.interleaved,h===null?(E.next=E,Ci===null?Ci=[p]:Ci.push(p)):(E.next=h.next,h.next=E),p.interleaved=E):(h=p.pending,h===null?E.next=E:(E.next=h.next,h.next=E),p.pending=E)}function Eu(h,p,E){if((E&4194240)!==0){var A=p.lanes;A&=h.pendingLanes,E|=A,p.lanes=E,ni(h,E)}}var cc={readContext:dr,useCallback:Zr,useContext:Zr,useEffect:Zr,useImperativeHandle:Zr,useInsertionEffect:Zr,useLayoutEffect:Zr,useMemo:Zr,useReducer:Zr,useRef:Zr,useState:Zr,useDebugValue:Zr,useDeferredValue:Zr,useTransition:Zr,useMutableSource:Zr,useSyncExternalStore:Zr,useId:Zr,unstable_isNewReconciler:!1},up={readContext:dr,useCallback:function(h,p){return Hs().memoizedState=[h,p===void 0?null:p],h},useContext:dr,useEffect:ad,useImperativeHandle:function(h,p,E){return E=E!=null?E.concat([h]):null,La(4194308,4,Su.bind(null,p,h),E)},useLayoutEffect:function(h,p){return La(4194308,4,h,p)},useInsertionEffect:function(h,p){return La(4,2,h,p)},useMemo:function(h,p){var E=Hs();return p=p===void 0?null:p,h=h(),E.memoizedState=[h,p],h},useReducer:function(h,p,E){var A=Hs();return p=E!==void 0?E(p):p,A.memoizedState=A.baseState=p,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:p},A.queue=h,h=h.dispatch=Lg.bind(null,pr,h),[A.memoizedState,h]},useRef:function(h){var p=Hs();return h={current:h},p.memoizedState=h},useState:_u,useDebugValue:cd,useDeferredValue:function(h){var p=_u(h),E=p[0],A=p[1];return ad(function(){var N=rs.transition;rs.transition={};try{A(h)}finally{rs.transition=N}},[h]),E},useTransition:function(){var h=_u(!1),p=h[0];return h=fd.bind(null,h[1]),Hs().memoizedState=h,[p,h]},useMutableSource:function(){},useSyncExternalStore:function(h,p,E){var A=pr,N=Hs();if(ar){if(E===void 0)throw Error(o(407));E=E()}else{if(E=p(),Mr===null)throw Error(o(349));(ul&30)!==0||ap(A,p,E)}N.memoizedState=E;var z={value:E,getSnapshot:p};return N.queue=z,ad(zo.bind(null,A,z,h),[h]),A.flags|=2048,xu(9,lp.bind(null,A,z,E,p),void 0,null),E},useId:function(){var h=Hs(),p=Mr.identifierPrefix;if(ar){var E=ko,A=Fo;E=(A&~(1<<32-zn(A)-1)).toString(32)+E,p=":"+p+"R"+E,E=fl++,0<E&&(p+="H"+E.toString(32)),p+=":"}else E=gu++,p=":"+p+"r"+E.toString(32)+":";return h.memoizedState=p},unstable_isNewReconciler:!1},fp={readContext:dr,useCallback:ud,useContext:dr,useEffect:oc,useImperativeHandle:ac,useInsertionEffect:Zn,useLayoutEffect:ld,useMemo:lc,useReducer:vu,useRef:Pg,useState:function(){return vu(po)},useDebugValue:cd,useDeferredValue:function(h){var p=vu(po),E=p[0],A=p[1];return oc(function(){var N=rs.transition;rs.transition={};try{A(h)}finally{rs.transition=N}},[h]),E},useTransition:function(){var h=vu(po)[0],p=Gs().memoizedState;return[h,p]},useMutableSource:sp,useSyncExternalStore:op,useId:dl,unstable_isNewReconciler:!1},dp={readContext:dr,useCallback:ud,useContext:dr,useEffect:oc,useImperativeHandle:ac,useInsertionEffect:Zn,useLayoutEffect:ld,useMemo:lc,useReducer:yu,useRef:Pg,useState:function(){return yu(po)},useDebugValue:cd,useDeferredValue:function(h){var p=yu(po),E=p[0],A=p[1];return oc(function(){var N=rs.transition;rs.transition={};try{A(h)}finally{rs.transition=N}},[h]),E},useTransition:function(){var h=yu(po)[0],p=Gs().memoizedState;return[h,p]},useMutableSource:sp,useSyncExternalStore:op,useId:dl,unstable_isNewReconciler:!1};function hp(h,p){try{var E="",A=p;do E+=Io(A),A=A.return;while(A);var N=E}catch(z){N=`
Error generating stack: `+z.message+`
`+z.stack}return{value:h,source:p,stack:N}}function dd(h,p){try{console.error(p.value)}catch(E){setTimeout(function(){throw E})}}var n_=typeof WeakMap=="function"?WeakMap:Map;function Ng(h,p,E){E=Oo(-1,E),E.tag=3,E.payload={element:null};var A=p.value;return E.callback=function(){mc||(mc=!0,nr=A),dd(h,p)},E}function hd(h,p,E){E=Oo(-1,E),E.tag=3;var A=h.type.getDerivedStateFromError;if(typeof A=="function"){var N=p.value;E.payload=function(){return A(N)},E.callback=function(){dd(h,p)}}var z=h.stateNode;return z!==null&&typeof z.componentDidCatch=="function"&&(E.callback=function(){dd(h,p),typeof A!="function"&&(js===null?js=new Set([this]):js.add(this));var fe=p.stack;this.componentDidCatch(p.value,{componentStack:fe!==null?fe:""})}),E}function Ho(h,p,E){var A=h.pingCache;if(A===null){A=h.pingCache=new n_;var N=new Set;A.set(p,N)}else N=A.get(p),N===void 0&&(N=new Set,A.set(p,N));N.has(E)||(N.add(E),h=Lp.bind(null,h,p,E),p.then(h,h))}function pp(h){do{var p;if((p=h.tag===13)&&(p=h.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return h;h=h.return}while(h!==null);return null}function hl(h,p,E,A,N){return(h.mode&1)===0?(h===p?h.flags|=65536:(h.flags|=128,E.flags|=131072,E.flags&=-52805,E.tag===1&&(E.alternate===null?E.tag=17:(p=Oo(-1,1),p.tag=2,ba(E,p))),E.lanes|=1),h):(h.flags|=65536,h.lanes=N,h)}function Hr(h){h.flags|=4}function uc(h,p){if(h!==null&&h.child===p.child)return!0;if((p.flags&16)!==0)return!1;for(h=p.child;h!==null;){if((h.flags&12854)!==0||(h.subtreeFlags&12854)!==0)return!1;h=h.sibling}return!0}var is,pl,pd,md;if(He)is=function(h,p){for(var E=p.child;E!==null;){if(E.tag===5||E.tag===6)B(h,E.stateNode);else if(E.tag!==4&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===p)break;for(;E.sibling===null;){if(E.return===null||E.return===p)return;E=E.return}E.sibling.return=E.return,E=E.sibling}},pl=function(){},pd=function(h,p,E,A,N){if(h=h.memoizedProps,h!==A){var z=p.stateNode,fe=zs(zi.current);E=ae(z,E,h,A,N,fe),(p.updateQueue=E)&&Hr(p)}},md=function(h,p,E,A){E!==A&&Hr(p)};else if(te){is=function(h,p,E,A){for(var N=p.child;N!==null;){if(N.tag===5){var z=N.stateNode;E&&A&&(z=Wt(z,N.type,N.memoizedProps,N)),B(h,z)}else if(N.tag===6)z=N.stateNode,E&&A&&(z=gn(z,N.memoizedProps,N)),B(h,z);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)z=N.child,z!==null&&(z.return=N),is(h,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===p)break;for(;N.sibling===null;){if(N.return===null||N.return===p)return;N=N.return}N.sibling.return=N.return,N=N.sibling}};var Ia=function(h,p,E,A){for(var N=p.child;N!==null;){if(N.tag===5){var z=N.stateNode;E&&A&&(z=Wt(z,N.type,N.memoizedProps,N)),at(h,z)}else if(N.tag===6)z=N.stateNode,E&&A&&(z=gn(z,N.memoizedProps,N)),at(h,z);else if(N.tag!==4){if(N.tag===22&&N.memoizedState!==null)z=N.child,z!==null&&(z.return=N),Ia(h,N,!0,!0);else if(N.child!==null){N.child.return=N,N=N.child;continue}}if(N===p)break;for(;N.sibling===null;){if(N.return===null||N.return===p)return;N=N.return}N.sibling.return=N.return,N=N.sibling}};pl=function(h,p){var E=p.stateNode;if(!uc(h,p)){h=E.containerInfo;var A=De(h);Ia(A,p,!1,!1),E.pendingChildren=A,Hr(p),St(h,A)}},pd=function(h,p,E,A,N){var z=h.stateNode,fe=h.memoizedProps;if((h=uc(h,p))&&fe===A)p.stateNode=z;else{var Ae=p.stateNode,$e=zs(zi.current),yt=null;fe!==A&&(yt=ae(Ae,E,fe,A,N,$e)),h&&yt===null?p.stateNode=z:(z=rt(z,yt,E,fe,A,p,h,Ae),ne(z,E,A,N,$e)&&Hr(p),p.stateNode=z,h?Hr(p):is(z,p,!1,!1))}},md=function(h,p,E,A){E!==A?(h=zs(ll.current),E=zs(zi.current),p.stateNode=pe(A,h,E,p),Hr(p)):p.stateNode=h.stateNode}}else pl=function(){},pd=function(){},md=function(){};function Go(h,p){if(!ar)switch(h.tailMode){case"hidden":p=h.tail;for(var E=null;p!==null;)p.alternate!==null&&(E=p),p=p.sibling;E===null?h.tail=null:E.sibling=null;break;case"collapsed":E=h.tail;for(var A=null;E!==null;)E.alternate!==null&&(A=E),E=E.sibling;A===null?p||h.tail===null?h.tail=null:h.tail.sibling=null:A.sibling=null}}function Er(h){var p=h.alternate!==null&&h.alternate.child===h.child,E=0,A=0;if(p)for(var N=h.child;N!==null;)E|=N.lanes|N.childLanes,A|=N.subtreeFlags&14680064,A|=N.flags&14680064,N.return=h,N=N.sibling;else for(N=h.child;N!==null;)E|=N.lanes|N.childLanes,A|=N.subtreeFlags,A|=N.flags,N.return=h,N=N.sibling;return h.subtreeFlags|=A,h.childLanes=E,p}function gd(h,p,E){var A=p.pendingProps;switch(tp(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Er(p),null;case 1:return On(p.type)&&un(),Er(p),null;case 3:return A=p.stateNode,ic(),Tt(Qt),Tt($t),cl(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),(h===null||h.child===null)&&(pu(p)?Hr(p):h===null||h.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,Es!==null&&(Ou(Es),Es=null))),pl(h,p),Er(p),null;case 5:ip(p),E=zs(ll.current);var N=p.type;if(h!==null&&p.stateNode!=null)pd(h,p,N,A,E),h.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!A){if(p.stateNode===null)throw Error(o(166));return Er(p),null}if(h=zs(zi.current),pu(p)){if(!Ye)throw Error(o(175));h=Y(p.stateNode,p.type,p.memoizedProps,E,h,p,!$l),p.updateQueue=h,h!==null&&Hr(p)}else{var z=L(N,A,E,h,p);is(z,p,!1,!1),p.stateNode=z,ne(z,N,A,E,h)&&Hr(p)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return Er(p),null;case 6:if(h&&p.stateNode!=null)md(h,p,h.memoizedProps,A);else{if(typeof A!="string"&&p.stateNode===null)throw Error(o(166));if(h=zs(ll.current),E=zs(zi.current),pu(p)){if(!Ye)throw Error(o(176));if(h=p.stateNode,A=p.memoizedProps,(E=ee(h,A,p,!$l))&&(N=Ri,N!==null))switch(z=(N.mode&1)!==0,N.tag){case 3:Ze(N.stateNode.containerInfo,h,A,z);break;case 5:Je(N.type,N.memoizedProps,N.stateNode,h,A,z)}E&&Hr(p)}else p.stateNode=pe(A,h,E,p)}return Er(p),null;case 13:if(Tt(hr),A=p.memoizedState,ar&&ri!==null&&(p.mode&1)!==0&&(p.flags&128)===0){for(h=ri;h;)h=$n(h);return ec(),p.flags|=98560,p}if(A!==null&&A.dehydrated!==null){if(A=pu(p),h===null){if(!A)throw Error(o(318));if(!Ye)throw Error(o(344));if(h=p.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));_e(h,p)}else ec(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;return Er(p),null}return Es!==null&&(Ou(Es),Es=null),(p.flags&128)!==0?(p.lanes=E,p):(A=A!==null,E=!1,h===null?pu(p):E=h.memoizedState!==null,A&&!E&&(p.child.flags|=8192,(p.mode&1)!==0&&(h===null||(hr.current&1)!==0?_r===0&&(_r=3):Ed())),p.updateQueue!==null&&(p.flags|=4),Er(p),null);case 4:return ic(),pl(h,p),h===null&&je(p.stateNode.containerInfo),Er(p),null;case 10:return Ar(p.type._context),Er(p),null;case 17:return On(p.type)&&un(),Er(p),null;case 19:if(Tt(hr),N=p.memoizedState,N===null)return Er(p),null;if(A=(p.flags&128)!==0,z=N.rendering,z===null)if(A)Go(N,!1);else{if(_r!==0||h!==null&&(h.flags&128)!==0)for(h=p.child;h!==null;){if(z=nd(h),z!==null){for(p.flags|=128,Go(N,!1),h=z.updateQueue,h!==null&&(p.updateQueue=h,p.flags|=4),p.subtreeFlags=0,h=E,A=p.child;A!==null;)E=A,N=h,E.flags&=14680066,z=E.alternate,z===null?(E.childLanes=0,E.lanes=N,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=z.childLanes,E.lanes=z.lanes,E.child=z.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=z.memoizedProps,E.memoizedState=z.memoizedState,E.updateQueue=z.updateQueue,E.type=z.type,N=z.dependencies,E.dependencies=N===null?null:{lanes:N.lanes,firstContext:N.firstContext}),A=A.sibling;return bt(hr,hr.current&1|2),p.child}h=h.sibling}N.tail!==null&&or()>Ua&&(p.flags|=128,A=!0,Go(N,!1),p.lanes=4194304)}else{if(!A)if(h=nd(z),h!==null){if(p.flags|=128,A=!0,h=h.updateQueue,h!==null&&(p.updateQueue=h,p.flags|=4),Go(N,!0),N.tail===null&&N.tailMode==="hidden"&&!z.alternate&&!ar)return Er(p),null}else 2*or()-N.renderingStartTime>Ua&&E!==1073741824&&(p.flags|=128,A=!0,Go(N,!1),p.lanes=4194304);N.isBackwards?(z.sibling=p.child,p.child=z):(h=N.last,h!==null?h.sibling=z:p.child=z,N.last=z)}return N.tail!==null?(p=N.tail,N.rendering=p,N.tail=p.sibling,N.renderingStartTime=or(),p.sibling=null,h=hr.current,bt(hr,A?h&1|2:h&1),p):(Er(p),null);case 22:case 23:return Fu(),A=p.memoizedState!==null,h!==null&&h.memoizedState!==null!==A&&(p.flags|=8192),A&&(p.mode&1)!==0?(Si&1073741824)!==0&&(Er(p),He&&p.subtreeFlags&6&&(p.flags|=8192)):Er(p),null;case 24:return null;case 25:return null}throw Error(o(156,p.tag))}var mp=a.ReactCurrentOwner,Qr=!1;function yr(h,p,E,A){p.child=h===null?Cg(p,null,E,A):Bo(p,h.child,E,A)}function Qn(h,p,E,A,N){E=E.render;var z=p.ref;return wr(p,N),A=sc(h,p,E,A,z,N),E=Pa(),h!==null&&!Qr?(p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~N,Hi(h,p,N)):(ar&&E&&ep(p),p.flags|=1,yr(h,p,A,N),p.child)}function qn(h,p,E,A,N){if(h===null){var z=E.type;return typeof z=="function"&&!Td(z)&&z.defaultProps===void 0&&E.compare===null&&E.defaultProps===void 0?(p.tag=15,p.type=z,Vo(h,p,z,A,N)):(h=bd(E.type,null,A,p,p.mode,N),h.ref=p.ref,h.return=p,p.child=h)}if(z=h.child,(h.lanes&N)===0){var fe=z.memoizedProps;if(E=E.compare,E=E!==null?E:ki,E(fe,A)&&h.ref===p.ref)return Hi(h,p,N)}return p.flags|=1,h=Jo(z,A),h.ref=p.ref,h.return=p,p.child=h}function Vo(h,p,E,A,N){if(h!==null&&ki(h.memoizedProps,A)&&h.ref===p.ref)if(Qr=!1,(h.lanes&N)!==0)(h.flags&131072)!==0&&(Qr=!0);else return p.lanes=h.lanes,Hi(h,p,N);return Wo(h,p,E,A,N)}function ii(h,p,E){var A=p.pendingProps,N=A.children,z=h!==null?h.memoizedState:null;if(A.mode==="hidden")if((p.mode&1)===0)p.memoizedState={baseLanes:0,cachePool:null},bt(El,Si),Si|=E;else if((E&1073741824)!==0)p.memoizedState={baseLanes:0,cachePool:null},A=z!==null?z.baseLanes:E,bt(El,Si),Si|=A;else return h=z!==null?z.baseLanes|E:E,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:h,cachePool:null},p.updateQueue=null,bt(El,Si),Si|=h,null;else z!==null?(A=z.baseLanes|E,p.memoizedState=null):A=E,bt(El,Si),Si|=A;return yr(h,p,N,E),p.child}function Pi(h,p){var E=p.ref;(h===null&&E!==null||h!==null&&h.ref!==E)&&(p.flags|=512,p.flags|=2097152)}function Wo(h,p,E,A,N){var z=On(E)?In:$t.current;return z=Un(p,z),wr(p,N),E=sc(h,p,E,A,z,N),A=Pa(),h!==null&&!Qr?(p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~N,Hi(h,p,N)):(ar&&A&&ep(p),p.flags|=1,yr(h,p,E,N),p.child)}function ml(h,p,E,A,N){if(On(E)){var z=!0;on(p)}else z=!1;if(wr(p,N),p.stateNode===null)h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),Eg(p,E,A),$h(p,E,A,N),A=!0;else if(h===null){var fe=p.stateNode,Ae=p.memoizedProps;fe.props=Ae;var $e=fe.context,yt=E.contextType;typeof yt=="object"&&yt!==null?yt=dr(yt):(yt=On(E)?In:$t.current,yt=Un(p,yt));var Ft=E.getDerivedStateFromProps,fn=typeof Ft=="function"||typeof fe.getSnapshotBeforeUpdate=="function";fn||typeof fe.UNSAFE_componentWillReceiveProps!="function"&&typeof fe.componentWillReceiveProps!="function"||(Ae!==A||$e!==yt)&&Mg(p,fe,A,yt),Ss=!1;var Jt=p.memoizedState;fe.state=Jt,Kf(p,A,fe,N),$e=p.memoizedState,Ae!==A||Jt!==$e||Qt.current||Ss?(typeof Ft=="function"&&(Qh(p,E,Ft,A),$e=p.memoizedState),(Ae=Ss||Jh(p,E,Ae,A,Jt,$e,yt))?(fn||typeof fe.UNSAFE_componentWillMount!="function"&&typeof fe.componentWillMount!="function"||(typeof fe.componentWillMount=="function"&&fe.componentWillMount(),typeof fe.UNSAFE_componentWillMount=="function"&&fe.UNSAFE_componentWillMount()),typeof fe.componentDidMount=="function"&&(p.flags|=4194308)):(typeof fe.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=A,p.memoizedState=$e),fe.props=A,fe.state=$e,fe.context=yt,A=Ae):(typeof fe.componentDidMount=="function"&&(p.flags|=4194308),A=!1)}else{fe=p.stateNode,Zh(h,p),Ae=p.memoizedProps,yt=p.type===p.elementType?Ae:Xr(p.type,Ae),fe.props=yt,fn=p.pendingProps,Jt=fe.context,$e=E.contextType,typeof $e=="object"&&$e!==null?$e=dr($e):($e=On(E)?In:$t.current,$e=Un(p,$e));var vn=E.getDerivedStateFromProps;(Ft=typeof vn=="function"||typeof fe.getSnapshotBeforeUpdate=="function")||typeof fe.UNSAFE_componentWillReceiveProps!="function"&&typeof fe.componentWillReceiveProps!="function"||(Ae!==fn||Jt!==$e)&&Mg(p,fe,A,$e),Ss=!1,Jt=p.memoizedState,fe.state=Jt,Kf(p,A,fe,N);var Ut=p.memoizedState;Ae!==fn||Jt!==Ut||Qt.current||Ss?(typeof vn=="function"&&(Qh(p,E,vn,A),Ut=p.memoizedState),(yt=Ss||Jh(p,E,yt,A,Jt,Ut,$e)||!1)?(Ft||typeof fe.UNSAFE_componentWillUpdate!="function"&&typeof fe.componentWillUpdate!="function"||(typeof fe.componentWillUpdate=="function"&&fe.componentWillUpdate(A,Ut,$e),typeof fe.UNSAFE_componentWillUpdate=="function"&&fe.UNSAFE_componentWillUpdate(A,Ut,$e)),typeof fe.componentDidUpdate=="function"&&(p.flags|=4),typeof fe.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof fe.componentDidUpdate!="function"||Ae===h.memoizedProps&&Jt===h.memoizedState||(p.flags|=4),typeof fe.getSnapshotBeforeUpdate!="function"||Ae===h.memoizedProps&&Jt===h.memoizedState||(p.flags|=1024),p.memoizedProps=A,p.memoizedState=Ut),fe.props=A,fe.state=Ut,fe.context=$e,A=yt):(typeof fe.componentDidUpdate!="function"||Ae===h.memoizedProps&&Jt===h.memoizedState||(p.flags|=4),typeof fe.getSnapshotBeforeUpdate!="function"||Ae===h.memoizedProps&&Jt===h.memoizedState||(p.flags|=1024),A=!1)}return xi(h,p,E,A,z,N)}function xi(h,p,E,A,N,z){Pi(h,p);var fe=(p.flags&128)!==0;if(!A&&!fe)return N&&rn(p,E,!1),Hi(h,p,z);A=p.stateNode,mp.current=p;var Ae=fe&&typeof E.getDerivedStateFromError!="function"?null:A.render();return p.flags|=1,h!==null&&fe?(p.child=Bo(p,h.child,null,z),p.child=Bo(p,null,Ae,z)):yr(h,p,Ae,z),p.memoizedState=A.state,N&&rn(p,E,!0),p.child}function Mu(h){var p=h.stateNode;p.pendingContext?an(h,p.pendingContext,p.pendingContext!==p.context):p.context&&an(h,p.context,!1),td(h,p.containerInfo)}function gp(h,p,E,A,N){return ec(),ed(N),p.flags|=256,yr(h,p,E,A),p.child}var Tu={dehydrated:null,treeContext:null,retryLane:0};function gl(h){return{baseLanes:h,cachePool:null}}function vp(h,p,E){var A=p.pendingProps,N=hr.current,z=!1,fe=(p.flags&128)!==0,Ae;if((Ae=fe)||(Ae=h!==null&&h.memoizedState===null?!1:(N&2)!==0),Ae?(z=!0,p.flags&=-129):(h===null||h.memoizedState!==null)&&(N|=1),bt(hr,N&1),h===null)return Ca(p),h=p.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?((p.mode&1)===0?p.lanes=1:Sr(h)?p.lanes=8:p.lanes=1073741824,null):(N=A.children,h=A.fallback,z?(A=p.mode,z=p.child,N={mode:"hidden",children:N},(A&1)===0&&z!==null?(z.childLanes=0,z.pendingProps=N):z=zu(N,A,0,null),h=Cl(h,A,E,null),z.return=p,h.return=p,z.sibling=h,p.child=z,p.child.memoizedState=gl(E),p.memoizedState=Tu,h):Vs(p,N));if(N=h.memoizedState,N!==null){if(Ae=N.dehydrated,Ae!==null){if(fe)return p.flags&256?(p.flags&=-257,Au(h,p,E,Error(o(422)))):p.memoizedState!==null?(p.child=h.child,p.flags|=128,null):(z=A.fallback,N=p.mode,A=zu({mode:"visible",children:A.children},N,0,null),z=Cl(z,N,E,null),z.flags|=2,A.return=p,z.return=p,A.sibling=z,p.child=A,(p.mode&1)!==0&&Bo(p,h.child,null,E),p.child.memoizedState=gl(E),p.memoizedState=Tu,z);if((p.mode&1)===0)p=Au(h,p,E,null);else if(Sr(Ae))p=Au(h,p,E,Error(o(419)));else if(A=(E&h.childLanes)!==0,Qr||A){if(A=Mr,A!==null){switch(E&-E){case 4:z=2;break;case 16:z=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:z=32;break;case 536870912:z=268435456;break;default:z=0}A=(z&(A.suspendedLanes|E))!==0?0:z,A!==0&&A!==N.retryLane&&(N.retryLane=A,wi(h,A,-1))}Ed(),p=Au(h,p,E,Error(o(421)))}else Fr(Ae)?(p.flags|=128,p.child=h.child,p=kg.bind(null,h),sr(Ae,p),p=null):(E=N.treeContext,Ye&&(ri=Fi(Ae),Ri=p,ar=!0,Es=null,$l=!1,E!==null&&(ws[ts++]=Fo,ws[ts++]=ko,ws[ts++]=sl,Fo=E.id,ko=E.overflow,sl=p)),p=Vs(p,p.pendingProps.children),p.flags|=4096);return p}return z?(A=vd(h,p,A.children,A.fallback,E),z=p.child,N=h.child.memoizedState,z.memoizedState=N===null?gl(E):{baseLanes:N.baseLanes|E,cachePool:null},z.childLanes=h.childLanes&~E,p.memoizedState=Tu,A):(E=bu(h,p,A.children,E),p.memoizedState=null,E)}return z?(A=vd(h,p,A.children,A.fallback,E),z=p.child,N=h.child.memoizedState,z.memoizedState=N===null?gl(E):{baseLanes:N.baseLanes|E,cachePool:null},z.childLanes=h.childLanes&~E,p.memoizedState=Tu,A):(E=bu(h,p,A.children,E),p.memoizedState=null,E)}function Vs(h,p){return p=zu({mode:"visible",children:p},h.mode,0,null),p.return=h,h.child=p}function bu(h,p,E,A){var N=h.child;return h=N.sibling,E=Jo(N,{mode:"visible",children:E}),(p.mode&1)===0&&(E.lanes=A),E.return=p,E.sibling=null,h!==null&&(A=p.deletions,A===null?(p.deletions=[h],p.flags|=16):A.push(h)),p.child=E}function vd(h,p,E,A,N){var z=p.mode;h=h.child;var fe=h.sibling,Ae={mode:"hidden",children:E};return(z&1)===0&&p.child!==h?(E=p.child,E.childLanes=0,E.pendingProps=Ae,p.deletions=null):(E=Jo(h,Ae),E.subtreeFlags=h.subtreeFlags&14680064),fe!==null?A=Jo(fe,A):(A=Cl(A,z,N,null),A.flags|=2),A.return=p,E.return=p,E.sibling=A,p.child=E,A}function Au(h,p,E,A){return A!==null&&ed(A),Bo(p,h.child,null,E),h=Vs(p,p.pendingProps.children),h.flags|=2,p.memoizedState=null,h}function Dg(h,p,E){h.lanes|=p;var A=h.alternate;A!==null&&(A.lanes|=p),zr(h.return,p,E)}function mo(h,p,E,A,N){var z=h.memoizedState;z===null?h.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:A,tail:E,tailMode:N}:(z.isBackwards=p,z.rendering=null,z.renderingStartTime=0,z.last=A,z.tail=E,z.tailMode=N)}function vl(h,p,E){var A=p.pendingProps,N=A.revealOrder,z=A.tail;if(yr(h,p,A.children,E),A=hr.current,(A&2)!==0)A=A&1|2,p.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=p.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&Dg(h,E,p);else if(h.tag===19)Dg(h,E,p);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===p)break e;for(;h.sibling===null;){if(h.return===null||h.return===p)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}A&=1}if(bt(hr,A),(p.mode&1)===0)p.memoizedState=null;else switch(N){case"forwards":for(E=p.child,N=null;E!==null;)h=E.alternate,h!==null&&nd(h)===null&&(N=E),E=E.sibling;E=N,E===null?(N=p.child,p.child=null):(N=E.sibling,E.sibling=null),mo(p,!1,N,E,z);break;case"backwards":for(E=null,N=p.child,p.child=null;N!==null;){if(h=N.alternate,h!==null&&nd(h)===null){p.child=N;break}h=N.sibling,N.sibling=E,E=N,N=h}mo(p,!0,E,null,z);break;case"together":mo(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function Hi(h,p,E){if(h!==null&&(p.dependencies=h.dependencies),go|=p.lanes,(E&p.childLanes)===0)return null;if(h!==null&&p.child!==h.child)throw Error(o(153));if(p.child!==null){for(h=p.child,E=Jo(h,h.pendingProps),p.child=E,E.return=p;h.sibling!==null;)h=h.sibling,E=E.sibling=Jo(h,h.pendingProps),E.return=p;E.sibling=null}return p.child}function yd(h,p,E){switch(p.tag){case 3:Mu(p),ec();break;case 5:Rg(p);break;case 1:On(p.type)&&on(p);break;case 4:td(p,p.stateNode.containerInfo);break;case 10:Uo(p,p.type._context,p.memoizedProps.value);break;case 13:var A=p.memoizedState;if(A!==null)return A.dehydrated!==null?(bt(hr,hr.current&1),p.flags|=128,null):(E&p.child.childLanes)!==0?vp(h,p,E):(bt(hr,hr.current&1),h=Hi(h,p,E),h!==null?h.sibling:null);bt(hr,hr.current&1);break;case 19:if(A=(E&p.childLanes)!==0,(h.flags&128)!==0){if(A)return vl(h,p,E);p.flags|=128}var N=p.memoizedState;if(N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),bt(hr,hr.current),A)break;return null;case 22:case 23:return p.lanes=0,ii(h,p,E)}return Hi(h,p,E)}function _d(h,p){switch(tp(p),p.tag){case 1:return On(p.type)&&un(),h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 3:return ic(),Tt(Qt),Tt($t),cl(),h=p.flags,(h&65536)!==0&&(h&128)===0?(p.flags=h&-65537|128,p):null;case 5:return ip(p),null;case 13:if(Tt(hr),h=p.memoizedState,h!==null&&h.dehydrated!==null){if(p.alternate===null)throw Error(o(340));ec()}return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 19:return Tt(hr),null;case 4:return ic(),null;case 10:return Ar(p.type._context),null;case 22:case 23:return Fu(),null;case 24:return null;default:return null}}var Li=!1,Jr=!1,yl=typeof WeakSet=="function"?WeakSet:Set,At=null;function Ms(h,p){var E=h.ref;if(E!==null)if(typeof E=="function")try{E(null)}catch(A){Ni(h,p,A)}else E.current=null}function jo(h,p,E){try{E()}catch(A){Ni(h,p,A)}}var yp=!1;function _p(h,p){for(K(h.containerInfo),At=p;At!==null;)if(h=At,p=h.child,(h.subtreeFlags&1028)!==0&&p!==null)p.return=h,At=p;else for(;At!==null;){h=At;try{var E=h.alternate;if((h.flags&1024)!==0)switch(h.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var A=E.memoizedProps,N=E.memoizedState,z=h.stateNode,fe=z.getSnapshotBeforeUpdate(h.elementType===h.type?A:Xr(h.type,A),N);z.__reactInternalSnapshotBeforeUpdate=fe}break;case 3:He&&ut(h.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Ae){Ni(h,h.return,Ae)}if(p=h.sibling,p!==null){p.return=h.return,At=p;break}At=h.return}return E=yp,yp=!1,E}function Xo(h,p,E){var A=p.updateQueue;if(A=A!==null?A.lastEffect:null,A!==null){var N=A=A.next;do{if((N.tag&h)===h){var z=N.destroy;N.destroy=void 0,z!==void 0&&jo(p,E,z)}N=N.next}while(N!==A)}}function si(h,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var E=p=p.next;do{if((E.tag&h)===h){var A=E.create;E.destroy=A()}E=E.next}while(E!==p)}}function Ii(h){var p=h.ref;if(p!==null){var E=h.stateNode;switch(h.tag){case 5:h=re(E);break;default:h=E}typeof p=="function"?p(h):p.current=h}}function tr(h,p,E){if(es&&typeof es.onCommitFiberUnmount=="function")try{es.onCommitFiberUnmount(wa,p)}catch{}switch(p.tag){case 0:case 11:case 14:case 15:if(h=p.updateQueue,h!==null&&(h=h.lastEffect,h!==null)){var A=h=h.next;do{var N=A,z=N.destroy;N=N.tag,z!==void 0&&((N&2)!==0||(N&4)!==0)&&jo(p,E,z),A=A.next}while(A!==h)}break;case 1:if(Ms(p,E),h=p.stateNode,typeof h.componentWillUnmount=="function")try{h.props=p.memoizedProps,h.state=p.memoizedState,h.componentWillUnmount()}catch(fe){Ni(p,E,fe)}break;case 5:Ms(p,E);break;case 4:He?wp(h,p,E):te&&te&&(p=p.stateNode.containerInfo,E=De(p),Et(p,E))}}function Ts(h,p,E){for(var A=p;;)if(tr(h,A,E),A.child===null||He&&A.tag===4){if(A===p)break;for(;A.sibling===null;){if(A.return===null||A.return===p)return;A=A.return}A.sibling.return=A.return,A=A.sibling}else A.child.return=A,A=A.child}function xp(h){var p=h.alternate;p!==null&&(h.alternate=null,xp(p)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(p=h.stateNode,p!==null&&ct(p)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function Sp(h){return h.tag===5||h.tag===3||h.tag===4}function xd(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||Sp(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function Sd(h){if(He){e:{for(var p=h.return;p!==null;){if(Sp(p))break e;p=p.return}throw Error(o(160))}var E=p;switch(E.tag){case 5:p=E.stateNode,E.flags&32&&(Ie(p),E.flags&=-33),E=xd(h),fc(h,E,p);break;case 3:case 4:p=E.stateNode.containerInfo,E=xd(h),wd(h,E,p);break;default:throw Error(o(161))}}}function wd(h,p,E){var A=h.tag;if(A===5||A===6)h=h.stateNode,p?Ge(E,h,p):st(E,h);else if(A!==4&&(h=h.child,h!==null))for(wd(h,p,E),h=h.sibling;h!==null;)wd(h,p,E),h=h.sibling}function fc(h,p,E){var A=h.tag;if(A===5||A===6)h=h.stateNode,p?xt(E,h,p):We(E,h);else if(A!==4&&(h=h.child,h!==null))for(fc(h,p,E),h=h.sibling;h!==null;)fc(h,p,E),h=h.sibling}function wp(h,p,E){for(var A=p,N=!1,z,fe;;){if(!N){N=A.return;e:for(;;){if(N===null)throw Error(o(160));switch(z=N.stateNode,N.tag){case 5:fe=!1;break e;case 3:z=z.containerInfo,fe=!0;break e;case 4:z=z.containerInfo,fe=!0;break e}N=N.return}N=!0}if(A.tag===5||A.tag===6)Ts(h,A,E),fe?ce(z,A.stateNode):mt(z,A.stateNode);else if(A.tag===18)fe?ge(z,A.stateNode):ve(z,A.stateNode);else if(A.tag===4){if(A.child!==null){z=A.stateNode.containerInfo,fe=!0,A.child.return=A,A=A.child;continue}}else if(tr(h,A,E),A.child!==null){A.child.return=A,A=A.child;continue}if(A===p)break;for(;A.sibling===null;){if(A.return===null||A.return===p)return;A=A.return,A.tag===4&&(N=!1)}A.sibling.return=A.return,A=A.sibling}}function Na(h,p){if(He){switch(p.tag){case 0:case 11:case 14:case 15:Xo(3,p,p.return),si(3,p),Xo(5,p,p.return);return;case 1:return;case 5:var E=p.stateNode;if(E!=null){var A=p.memoizedProps;h=h!==null?h.memoizedProps:A;var N=p.type,z=p.updateQueue;p.updateQueue=null,z!==null&&Mt(E,z,N,h,A,p)}return;case 6:if(p.stateNode===null)throw Error(o(162));E=p.memoizedProps,et(p.stateNode,h!==null?h.memoizedProps:E,E);return;case 3:Ye&&h!==null&&h.memoizedState.isDehydrated&&se(p.stateNode.containerInfo);return;case 12:return;case 13:dc(p);return;case 19:dc(p);return;case 17:return}throw Error(o(163))}switch(p.tag){case 0:case 11:case 14:case 15:Xo(3,p,p.return),si(3,p),Xo(5,p,p.return);return;case 12:return;case 13:dc(p);return;case 19:dc(p);return;case 3:Ye&&h!==null&&h.memoizedState.isDehydrated&&se(p.stateNode.containerInfo);break;case 22:case 23:return}e:if(te){switch(p.tag){case 1:case 5:case 6:break e;case 3:case 4:p=p.stateNode,Et(p.containerInfo,p.pendingChildren);break e}throw Error(o(163))}}function dc(h){var p=h.updateQueue;if(p!==null){h.updateQueue=null;var E=h.stateNode;E===null&&(E=h.stateNode=new yl),p.forEach(function(A){var N=Bg.bind(null,h,A);E.has(A)||(E.add(A),A.then(N,N))})}}function r_(h,p){for(At=p;At!==null;){p=At;var E=p.deletions;if(E!==null)for(var A=0;A<E.length;A++){var N=E[A];try{var z=h;He?wp(z,N,p):Ts(z,N,p);var fe=N.alternate;fe!==null&&(fe.return=null),N.return=null}catch(Gt){Ni(N,p,Gt)}}if(E=p.child,(p.subtreeFlags&12854)!==0&&E!==null)E.return=p,At=E;else for(;At!==null;){p=At;try{var Ae=p.flags;if(Ae&32&&He&&Ie(p.stateNode),Ae&512){var $e=p.alternate;if($e!==null){var yt=$e.ref;yt!==null&&(typeof yt=="function"?yt(null):yt.current=null)}}if(Ae&8192)switch(p.tag){case 13:if(p.memoizedState!==null){var Ft=p.alternate;(Ft===null||Ft.memoizedState===null)&&(Du=or())}break;case 22:var fn=p.memoizedState!==null,Jt=p.alternate,vn=Jt!==null&&Jt.memoizedState!==null;if(E=p,He){e:if(A=E,N=fn,z=null,He)for(var Ut=A;;){if(Ut.tag===5){if(z===null){z=Ut;var li=Ut.stateNode;N?Pe(li):Te(Ut.stateNode,Ut.memoizedProps)}}else if(Ut.tag===6){if(z===null){var cs=Ut.stateNode;N?ke(cs):he(cs,Ut.memoizedProps)}}else if((Ut.tag!==22&&Ut.tag!==23||Ut.memoizedState===null||Ut===A)&&Ut.child!==null){Ut.child.return=Ut,Ut=Ut.child;continue}if(Ut===A)break;for(;Ut.sibling===null;){if(Ut.return===null||Ut.return===A)break e;z===Ut&&(z=null),Ut=Ut.return}z===Ut&&(z=null),Ut.sibling.return=Ut.return,Ut=Ut.sibling}}if(fn&&!vn&&(E.mode&1)!==0){At=E;for(var Ve=E.child;Ve!==null;){for(E=At=Ve;At!==null;){A=At;var Ce=A.child;switch(A.tag){case 0:case 11:case 14:case 15:Xo(4,A,A.return);break;case 1:Ms(A,A.return);var Qe=A.stateNode;if(typeof Qe.componentWillUnmount=="function"){var Nt=A.return;try{Qe.props=A.memoizedProps,Qe.state=A.memoizedState,Qe.componentWillUnmount()}catch(Gt){Ni(A,Nt,Gt)}}break;case 5:Ms(A,A.return);break;case 22:if(A.memoizedState!==null){Mp(E);continue}}Ce!==null?(Ce.return=A,At=Ce):Mp(E)}Ve=Ve.sibling}}}switch(Ae&4102){case 2:Sd(p),p.flags&=-3;break;case 6:Sd(p),p.flags&=-3,Na(p.alternate,p);break;case 4096:p.flags&=-4097;break;case 4100:p.flags&=-4097,Na(p.alternate,p);break;case 4:Na(p.alternate,p)}}catch(Gt){Ni(p,p.return,Gt)}if(E=p.sibling,E!==null){E.return=p.return,At=E;break}At=p.return}}}function Cu(h,p,E){At=h,Ru(h)}function Ru(h,p,E){for(var A=(h.mode&1)!==0;At!==null;){var N=At,z=N.child;if(N.tag===22&&A){var fe=N.memoizedState!==null||Li;if(!fe){var Ae=N.alternate,$e=Ae!==null&&Ae.memoizedState!==null||Jr;Ae=Li;var yt=Jr;if(Li=fe,(Jr=$e)&&!yt)for(At=N;At!==null;)fe=At,$e=fe.child,fe.tag===22&&fe.memoizedState!==null?_l(N):$e!==null?($e.return=fe,At=$e):_l(N);for(;z!==null;)At=z,Ru(z),z=z.sibling;At=N,Li=Ae,Jr=yt}Ep(h)}else(N.subtreeFlags&8772)!==0&&z!==null?(z.return=N,At=z):Ep(h)}}function Ep(h){for(;At!==null;){var p=At;if((p.flags&8772)!==0){var E=p.alternate;try{if((p.flags&8772)!==0)switch(p.tag){case 0:case 11:case 15:Jr||si(5,p);break;case 1:var A=p.stateNode;if(p.flags&4&&!Jr)if(E===null)A.componentDidMount();else{var N=p.elementType===p.type?E.memoizedProps:Xr(p.type,E.memoizedProps);A.componentDidUpdate(N,E.memoizedState,A.__reactInternalSnapshotBeforeUpdate)}var z=p.updateQueue;z!==null&&Sg(p,z,A);break;case 3:var fe=p.updateQueue;if(fe!==null){if(E=null,p.child!==null)switch(p.child.tag){case 5:E=re(p.child.stateNode);break;case 1:E=p.child.stateNode}Sg(p,fe,E)}break;case 5:var Ae=p.stateNode;E===null&&p.flags&4&&lt(Ae,p.type,p.memoizedProps,p);break;case 6:break;case 4:break;case 12:break;case 13:if(Ye&&p.memoizedState===null){var $e=p.alternate;if($e!==null){var yt=$e.memoizedState;if(yt!==null){var Ft=yt.dehydrated;Ft!==null&&le(Ft)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Jr||p.flags&512&&Ii(p)}catch(fn){Ni(p,p.return,fn)}}if(p===h){At=null;break}if(E=p.sibling,E!==null){E.return=p.return,At=E;break}At=p.return}}function Mp(h){for(;At!==null;){var p=At;if(p===h){At=null;break}var E=p.sibling;if(E!==null){E.return=p.return,At=E;break}At=p.return}}function _l(h){for(;At!==null;){var p=At;try{switch(p.tag){case 0:case 11:case 15:var E=p.return;try{si(4,p)}catch($e){Ni(p,E,$e)}break;case 1:var A=p.stateNode;if(typeof A.componentDidMount=="function"){var N=p.return;try{A.componentDidMount()}catch($e){Ni(p,N,$e)}}var z=p.return;try{Ii(p)}catch($e){Ni(p,z,$e)}break;case 5:var fe=p.return;try{Ii(p)}catch($e){Ni(p,fe,$e)}}}catch($e){Ni(p,p.return,$e)}if(p===h){At=null;break}var Ae=p.sibling;if(Ae!==null){Ae.return=p.return,At=Ae;break}At=p.return}}var Pu=0,xl=1,Sl=2,Yo=3,hc=4;if(typeof Symbol=="function"&&Symbol.for){var wl=Symbol.for;Pu=wl("selector.component"),xl=wl("selector.has_pseudo_class"),Sl=wl("selector.role"),Yo=wl("selector.test_id"),hc=wl("selector.text")}function Lu(h){var p=Re(h);if(p!=null){if(typeof p.memoizedProps["data-testname"]!="string")throw Error(o(364));return p}if(h=Ue(h),h===null)throw Error(o(362));return h.stateNode.current}function Iu(h,p){switch(p.$$typeof){case Pu:if(h.type===p.value)return!0;break;case xl:e:{p=p.value,h=[h,0];for(var E=0;E<h.length;){var A=h[E++],N=h[E++],z=p[N];if(A.tag!==5||!q(A)){for(;z!=null&&Iu(A,z);)N++,z=p[N];if(N===p.length){p=!0;break e}else for(A=A.child;A!==null;)h.push(A,N),A=A.sibling}}p=!1}return p;case Sl:if(h.tag===5&&ye(h.stateNode,p.value))return!0;break;case hc:if((h.tag===5||h.tag===6)&&(h=J(h),h!==null&&0<=h.indexOf(p.value)))return!0;break;case Yo:if(h.tag===5&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===p.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Da(h){switch(h.$$typeof){case Pu:return"<"+(U(h.value)||"Unknown")+">";case xl:return":has("+(Da(h)||"")+")";case Sl:return'[role="'+h.value+'"]';case hc:return'"'+h.value+'"';case Yo:return'[data-testname="'+h.value+'"]';default:throw Error(o(365))}}function ss(h,p){var E=[];h=[h,0];for(var A=0;A<h.length;){var N=h[A++],z=h[A++],fe=p[z];if(N.tag!==5||!q(N)){for(;fe!=null&&Iu(N,fe);)z++,fe=p[z];if(z===p.length)E.push(N);else for(N=N.child;N!==null;)h.push(N,z),N=N.sibling}}return E}function qo(h,p){if(!nt)throw Error(o(363));h=Lu(h),h=ss(h,p),p=[],h=Array.from(h);for(var E=0;E<h.length;){var A=h[E++];if(A.tag===5)q(A)||p.push(A.stateNode);else for(A=A.child;A!==null;)h.push(A),A=A.sibling}return p}var Tp=Math.ceil,Nu=a.ReactCurrentDispatcher,Ws=a.ReactCurrentOwner,Gn=a.ReactCurrentBatchConfig,mn=0,Mr=null,Vn=null,lr=0,Si=0,El=Zt(0),_r=0,pc=null,go=0,os=0,Ml=0,Ko=null,Cr=null,Du=0,Ua=1/0;function Tl(){Ua=or()+500}var mc=!1,nr=null,js=null,gc=!1,vo=null,bl=0,Al=0,Zo=null,Jn=-1,xr=0;function Nn(){return(mn&6)!==0?or():Jn!==-1?Jn:Jn=or()}function Xs(h){return(h.mode&1)===0?1:(mn&2)!==0&&lr!==0?lr&-lr:Ta.transition!==null?(xr===0&&(h=Fs,Fs<<=1,(Fs&4194240)===0&&(Fs=64),xr=h),xr):(h=ln,h!==0?h:Ne())}function wi(h,p,E){if(50<Al)throw Al=0,Zo=null,Error(o(185));var A=Oa(h,p);return A===null?null:(vs(A,p,E),((mn&2)===0||A!==Mr)&&(A===Mr&&((mn&2)===0&&(os|=p),_r===4&&ai(A,lr)),Gi(A,E),p===1&&mn===0&&(h.mode&1)===0&&(Tl(),fo&&_i())),A)}function Oa(h,p){h.lanes|=p;var E=h.alternate;for(E!==null&&(E.lanes|=p),E=h,h=h.return;h!==null;)h.childLanes|=p,E=h.alternate,E!==null&&(E.childLanes|=p),E=h,h=h.return;return E.tag===3?E.stateNode:null}function Gi(h,p){var E=h.callbackNode;Zl(h,p);var A=xa(h,h===Mr?lr:0);if(A===0)E!==null&&uo(E),h.callbackNode=null,h.callbackPriority=0;else if(p=A&-A,h.callbackPriority!==p){if(E!=null&&uo(E),p===1)h.tag===0?Ma(as.bind(null,h)):il(as.bind(null,h)),Fe?qe(function(){mn===0&&_i()}):$i(Bs,_i),E=null;else{switch(ys(A)){case 1:E=Bs;break;case 4:E=Xf;break;case 16:E=yi;break;case 536870912:E=Sa;break;default:E=yi}E=Md(E,oi.bind(null,h))}h.callbackPriority=p,h.callbackNode=E}}function oi(h,p){if(Jn=-1,xr=0,(mn&6)!==0)throw Error(o(327));var E=h.callbackNode;if(yo()&&h.callbackNode!==E)return null;var A=xa(h,h===Mr?lr:0);if(A===0)return null;if((A&30)!==0||(A&h.expiredLanes)!==0||p)p=ku(h,A);else{p=A;var N=mn;mn|=2;var z=Cp();(Mr!==h||lr!==p)&&(Tl(),Qo(h,p));do try{Og();break}catch(Ae){Ap(h,Ae)}while(!0);Yr(),Nu.current=z,mn=N,Vn!==null?p=0:(Mr=null,lr=0,p=_r)}if(p!==0){if(p===2&&(N=co(h),N!==0&&(A=N,p=Uu(h,N))),p===1)throw E=pc,Qo(h,0),ai(h,A),Gi(h,or()),E;if(p===6)ai(h,A);else{if(N=h.current.alternate,(A&30)===0&&!bp(N)&&(p=ku(h,A),p===2&&(z=co(h),z!==0&&(A=z,p=Uu(h,z))),p===1))throw E=pc,Qo(h,0),ai(h,A),Gi(h,or()),E;switch(h.finishedWork=N,h.finishedLanes=A,p){case 0:case 1:throw Error(o(345));case 2:Ys(h,Cr);break;case 3:if(ai(h,A),(A&130023424)===A&&(p=Du+500-or(),10<p)){if(xa(h,0)!==0)break;if(N=h.suspendedLanes,(N&A)!==A){Nn(),h.pingedLanes|=h.suspendedLanes&N;break}h.timeoutHandle=xe(Ys.bind(null,h,Cr),p);break}Ys(h,Cr);break;case 4:if(ai(h,A),(A&4194240)===A)break;for(p=h.eventTimes,N=-1;0<A;){var fe=31-zn(A);z=1<<fe,fe=p[fe],fe>N&&(N=fe),A&=~z}if(A=N,A=or()-A,A=(120>A?120:480>A?480:1080>A?1080:1920>A?1920:3e3>A?3e3:4320>A?4320:1960*Tp(A/1960))-A,10<A){h.timeoutHandle=xe(Ys.bind(null,h,Cr),A);break}Ys(h,Cr);break;case 5:Ys(h,Cr);break;default:throw Error(o(329))}}}return Gi(h,or()),h.callbackNode===E?oi.bind(null,h):null}function Uu(h,p){var E=Ko;return h.current.memoizedState.isDehydrated&&(Qo(h,p).flags|=256),h=ku(h,p),h!==2&&(p=Cr,Cr=E,p!==null&&Ou(p)),h}function Ou(h){Cr===null?Cr=h:Cr.push.apply(Cr,h)}function bp(h){for(var p=h;;){if(p.flags&16384){var E=p.updateQueue;if(E!==null&&(E=E.stores,E!==null))for(var A=0;A<E.length;A++){var N=E[A],z=N.getSnapshot;N=N.value;try{if(!Wr(z(),N))return!1}catch{return!1}}}if(E=p.child,p.subtreeFlags&16384&&E!==null)E.return=p,p=E;else{if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function ai(h,p){for(p&=~Ml,p&=~os,h.suspendedLanes|=p,h.pingedLanes&=~p,h=h.expirationTimes;0<p;){var E=31-zn(p),A=1<<E;h[E]=-1,p&=~A}}function as(h){if((mn&6)!==0)throw Error(o(327));yo();var p=xa(h,0);if((p&1)===0)return Gi(h,or()),null;var E=ku(h,p);if(h.tag!==0&&E===2){var A=co(h);A!==0&&(p=A,E=Uu(h,A))}if(E===1)throw E=pc,Qo(h,0),ai(h,p),Gi(h,or()),E;if(E===6)throw Error(o(345));return h.finishedWork=h.current.alternate,h.finishedLanes=p,Ys(h,Cr),Gi(h,or()),null}function vc(h){vo!==null&&vo.tag===0&&(mn&6)===0&&yo();var p=mn;mn|=1;var E=Gn.transition,A=ln;try{if(Gn.transition=null,ln=1,h)return h()}finally{ln=A,Gn.transition=E,mn=p,(mn&6)===0&&_i()}}function Fu(){Si=El.current,Tt(El)}function Qo(h,p){h.finishedWork=null,h.finishedLanes=0;var E=h.timeoutHandle;if(E!==Xe&&(h.timeoutHandle=Xe,Me(E)),Vn!==null)for(E=Vn.return;E!==null;){var A=E;switch(tp(A),A.tag){case 1:A=A.type.childContextTypes,A!=null&&un();break;case 3:ic(),Tt(Qt),Tt($t),cl();break;case 5:ip(A);break;case 4:ic();break;case 13:Tt(hr);break;case 19:Tt(hr);break;case 10:Ar(A.type._context);break;case 22:case 23:Fu()}E=E.return}if(Mr=h,Vn=h=Jo(h.current,null),lr=Si=p,_r=0,pc=null,Ml=os=go=0,Cr=Ko=null,Ci!==null){for(p=0;p<Ci.length;p++)if(E=Ci[p],A=E.interleaved,A!==null){E.interleaved=null;var N=A.next,z=E.pending;if(z!==null){var fe=z.next;z.next=N,A.next=fe}E.pending=A}Ci=null}return h}function Ap(h,p){do{var E=Vn;try{if(Yr(),mu.current=cc,rd){for(var A=pr.memoizedState;A!==null;){var N=A.queue;N!==null&&(N.pending=null),A=A.next}rd=!1}if(ul=0,Kr=qr=pr=null,ho=!1,fl=0,Ws.current=null,E===null||E.return===null){_r=1,pc=p,Vn=null;break}e:{var z=h,fe=E.return,Ae=E,$e=p;if(p=lr,Ae.flags|=32768,$e!==null&&typeof $e=="object"&&typeof $e.then=="function"){var yt=$e,Ft=Ae,fn=Ft.tag;if((Ft.mode&1)===0&&(fn===0||fn===11||fn===15)){var Jt=Ft.alternate;Jt?(Ft.updateQueue=Jt.updateQueue,Ft.memoizedState=Jt.memoizedState,Ft.lanes=Jt.lanes):(Ft.updateQueue=null,Ft.memoizedState=null)}var vn=pp(fe);if(vn!==null){vn.flags&=-257,hl(vn,fe,Ae,z,p),vn.mode&1&&Ho(z,yt,p),p=vn,$e=yt;var Ut=p.updateQueue;if(Ut===null){var li=new Set;li.add($e),p.updateQueue=li}else Ut.add($e);break e}else{if((p&1)===0){Ho(z,yt,p),Ed();break e}$e=Error(o(426))}}else if(ar&&Ae.mode&1){var cs=pp(fe);if(cs!==null){(cs.flags&65536)===0&&(cs.flags|=256),hl(cs,fe,Ae,z,p),ed($e);break e}}z=$e,_r!==4&&(_r=2),Ko===null?Ko=[z]:Ko.push(z),$e=hp($e,Ae),Ae=fe;do{switch(Ae.tag){case 3:Ae.flags|=65536,p&=-p,Ae.lanes|=p;var Ve=Ng(Ae,$e,p);qf(Ae,Ve);break e;case 1:z=$e;var Ce=Ae.type,Qe=Ae.stateNode;if((Ae.flags&128)===0&&(typeof Ce.getDerivedStateFromError=="function"||Qe!==null&&typeof Qe.componentDidCatch=="function"&&(js===null||!js.has(Qe)))){Ae.flags|=65536,p&=-p,Ae.lanes|=p;var Nt=hd(Ae,z,p);qf(Ae,Nt);break e}}Ae=Ae.return}while(Ae!==null)}Pp(E)}catch(Gt){p=Gt,Vn===E&&E!==null&&(Vn=E=E.return);continue}break}while(!0)}function Cp(){var h=Nu.current;return Nu.current=cc,h===null?cc:h}function Ed(){(_r===0||_r===3||_r===2)&&(_r=4),Mr===null||(go&268435455)===0&&(os&268435455)===0||ai(Mr,lr)}function ku(h,p){var E=mn;mn|=2;var A=Cp();Mr===h&&lr===p||Qo(h,p);do try{Ug();break}catch(N){Ap(h,N)}while(!0);if(Yr(),mn=E,Nu.current=A,Vn!==null)throw Error(o(261));return Mr=null,lr=0,_r}function Ug(){for(;Vn!==null;)Rp(Vn)}function Og(){for(;Vn!==null&&!_s();)Rp(Vn)}function Rp(h){var p=Np(h.alternate,h,Si);h.memoizedProps=h.pendingProps,p===null?Pp(h):Vn=p,Ws.current=null}function Pp(h){var p=h;do{var E=p.alternate;if(h=p.return,(p.flags&32768)===0){if(E=gd(E,p,Si),E!==null){Vn=E;return}}else{if(E=_d(E,p),E!==null){E.flags&=32767,Vn=E;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{_r=6,Vn=null;return}}if(p=p.sibling,p!==null){Vn=p;return}Vn=p=h}while(p!==null);_r===0&&(_r=5)}function Ys(h,p){var E=ln,A=Gn.transition;try{Gn.transition=null,ln=1,Fg(h,p,E)}finally{Gn.transition=A,ln=E}return null}function Fg(h,p,E){do yo();while(vo!==null);if((mn&6)!==0)throw Error(o(327));var A=h.finishedWork,N=h.finishedLanes;if(A===null)return null;if(h.finishedWork=null,h.finishedLanes=0,A===h.current)throw Error(o(177));h.callbackNode=null,h.callbackPriority=0;var z=A.lanes|A.childLanes;if(ks(h,z),h===Mr&&(Vn=Mr=null,lr=0),(A.subtreeFlags&2064)===0&&(A.flags&2064)===0||gc||(gc=!0,Md(yi,function(){return yo(),null})),z=(A.flags&15990)!==0,(A.subtreeFlags&15990)!==0||z){z=Gn.transition,Gn.transition=null;var fe=ln;ln=1;var Ae=mn;mn|=4,Ws.current=null,_p(h,A),r_(h,A),W(h.containerInfo),h.current=A,Cu(A),jf(),mn=Ae,ln=fe,Gn.transition=z}else h.current=A;if(gc&&(gc=!1,vo=h,bl=N),z=h.pendingLanes,z===0&&(js=null),Lo(A.stateNode),Gi(h,or()),p!==null)for(E=h.onRecoverableError,A=0;A<p.length;A++)E(p[A]);if(mc)throw mc=!1,h=nr,nr=null,h;return(bl&1)!==0&&h.tag!==0&&yo(),z=h.pendingLanes,(z&1)!==0?h===Zo?Al++:(Al=0,Zo=h):Al=0,_i(),null}function yo(){if(vo!==null){var h=ys(bl),p=Gn.transition,E=ln;try{if(Gn.transition=null,ln=16>h?16:h,vo===null)var A=!1;else{if(h=vo,vo=null,bl=0,(mn&6)!==0)throw Error(o(331));var N=mn;for(mn|=4,At=h.current;At!==null;){var z=At,fe=z.child;if((At.flags&16)!==0){var Ae=z.deletions;if(Ae!==null){for(var $e=0;$e<Ae.length;$e++){var yt=Ae[$e];for(At=yt;At!==null;){var Ft=At;switch(Ft.tag){case 0:case 11:case 15:Xo(8,Ft,z)}var fn=Ft.child;if(fn!==null)fn.return=Ft,At=fn;else for(;At!==null;){Ft=At;var Jt=Ft.sibling,vn=Ft.return;if(xp(Ft),Ft===yt){At=null;break}if(Jt!==null){Jt.return=vn,At=Jt;break}At=vn}}}var Ut=z.alternate;if(Ut!==null){var li=Ut.child;if(li!==null){Ut.child=null;do{var cs=li.sibling;li.sibling=null,li=cs}while(li!==null)}}At=z}}if((z.subtreeFlags&2064)!==0&&fe!==null)fe.return=z,At=fe;else e:for(;At!==null;){if(z=At,(z.flags&2048)!==0)switch(z.tag){case 0:case 11:case 15:Xo(9,z,z.return)}var Ve=z.sibling;if(Ve!==null){Ve.return=z.return,At=Ve;break e}At=z.return}}var Ce=h.current;for(At=Ce;At!==null;){fe=At;var Qe=fe.child;if((fe.subtreeFlags&2064)!==0&&Qe!==null)Qe.return=fe,At=Qe;else e:for(fe=Ce;At!==null;){if(Ae=At,(Ae.flags&2048)!==0)try{switch(Ae.tag){case 0:case 11:case 15:si(9,Ae)}}catch(Gt){Ni(Ae,Ae.return,Gt)}if(Ae===fe){At=null;break e}var Nt=Ae.sibling;if(Nt!==null){Nt.return=Ae.return,At=Nt;break e}At=Ae.return}}if(mn=N,_i(),es&&typeof es.onPostCommitFiberRoot=="function")try{es.onPostCommitFiberRoot(wa,h)}catch{}A=!0}return A}finally{ln=E,Gn.transition=p}}return!1}function Bu(h,p,E){p=hp(E,p),p=Ng(h,p,1),ba(h,p),p=Nn(),h=Oa(h,1),h!==null&&(vs(h,1,p),Gi(h,p))}function Ni(h,p,E){if(h.tag===3)Bu(h,h,E);else for(;p!==null;){if(p.tag===3){Bu(p,h,E);break}else if(p.tag===1){var A=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(js===null||!js.has(A))){h=hp(E,h),h=hd(p,h,1),ba(p,h),h=Nn(),p=Oa(p,1),p!==null&&(vs(p,1,h),Gi(p,h));break}}p=p.return}}function Lp(h,p,E){var A=h.pingCache;A!==null&&A.delete(p),p=Nn(),h.pingedLanes|=h.suspendedLanes&E,Mr===h&&(lr&E)===E&&(_r===4||_r===3&&(lr&130023424)===lr&&500>or()-Du?Qo(h,0):Ml|=E),Gi(h,p)}function Ip(h,p){p===0&&((h.mode&1)===0?p=1:(p=Tn,Tn<<=1,(Tn&130023424)===0&&(Tn=4194304)));var E=Nn();h=Oa(h,p),h!==null&&(vs(h,p,E),Gi(h,E))}function kg(h){var p=h.memoizedState,E=0;p!==null&&(E=p.retryLane),Ip(h,E)}function Bg(h,p){var E=0;switch(h.tag){case 13:var A=h.stateNode,N=h.memoizedState;N!==null&&(E=N.retryLane);break;case 19:A=h.stateNode;break;default:throw Error(o(314))}A!==null&&A.delete(p),Ip(h,E)}var Np;Np=function(h,p,E){if(h!==null)if(h.memoizedProps!==p.pendingProps||Qt.current)Qr=!0;else{if((h.lanes&E)===0&&(p.flags&128)===0)return Qr=!1,yd(h,p,E);Qr=(h.flags&131072)!==0}else Qr=!1,ar&&(p.flags&1048576)!==0&&Tg(p,Jf,p.index);switch(p.lanes=0,p.tag){case 2:var A=p.type;h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),h=p.pendingProps;var N=Un(p,$t.current);wr(p,E),N=sc(null,p,A,h,N,E);var z=Pa();return p.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,On(A)?(z=!0,on(p)):z=!1,p.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,Ql(p),N.updater=Zf,p.stateNode=N,N._reactInternals=p,$h(p,A,h,E),p=xi(null,p,A,!0,z,E)):(p.tag=0,ar&&z&&ep(p),yr(null,p,N,E),p=p.child),p;case 16:A=p.elementType;e:{switch(h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),h=p.pendingProps,N=A._init,A=N(A._payload),p.type=A,N=p.tag=i_(A),h=Xr(A,h),N){case 0:p=Wo(null,p,A,h,E);break e;case 1:p=ml(null,p,A,h,E);break e;case 11:p=Qn(null,p,A,h,E);break e;case 14:p=qn(null,p,A,Xr(A.type,h),E);break e}throw Error(o(306,A,""))}return p;case 0:return A=p.type,N=p.pendingProps,N=p.elementType===A?N:Xr(A,N),Wo(h,p,A,N,E);case 1:return A=p.type,N=p.pendingProps,N=p.elementType===A?N:Xr(A,N),ml(h,p,A,N,E);case 3:e:{if(Mu(p),h===null)throw Error(o(387));A=p.pendingProps,z=p.memoizedState,N=z.element,Zh(h,p),Kf(p,A,null,E);var fe=p.memoizedState;if(A=fe.element,Ye&&z.isDehydrated)if(z={element:A,isDehydrated:!1,cache:fe.cache,transitions:fe.transitions},p.updateQueue.baseState=z,p.memoizedState=z,p.flags&256){N=Error(o(423)),p=gp(h,p,A,E,N);break e}else if(A!==N){N=Error(o(424)),p=gp(h,p,A,E,N);break e}else for(Ye&&(ri=fr(p.stateNode.containerInfo),Ri=p,ar=!0,Es=null,$l=!1),E=Cg(p,null,A,E),p.child=E;E;)E.flags=E.flags&-3|4096,E=E.sibling;else{if(ec(),A===N){p=Hi(h,p,E);break e}yr(h,p,A,E)}p=p.child}return p;case 5:return Rg(p),h===null&&Ca(p),A=p.type,N=p.pendingProps,z=h!==null?h.memoizedProps:null,fe=N.children,de(A,N)?fe=null:z!==null&&de(A,z)&&(p.flags|=32),Pi(h,p),yr(h,p,fe,E),p.child;case 6:return h===null&&Ca(p),null;case 13:return vp(h,p,E);case 4:return td(p,p.stateNode.containerInfo),A=p.pendingProps,h===null?p.child=Bo(p,null,A,E):yr(h,p,A,E),p.child;case 11:return A=p.type,N=p.pendingProps,N=p.elementType===A?N:Xr(A,N),Qn(h,p,A,N,E);case 7:return yr(h,p,p.pendingProps,E),p.child;case 8:return yr(h,p,p.pendingProps.children,E),p.child;case 12:return yr(h,p,p.pendingProps.children,E),p.child;case 10:e:{if(A=p.type._context,N=p.pendingProps,z=p.memoizedProps,fe=N.value,Uo(p,A,fe),z!==null)if(Wr(z.value,fe)){if(z.children===N.children&&!Qt.current){p=Hi(h,p,E);break e}}else for(z=p.child,z!==null&&(z.return=p);z!==null;){var Ae=z.dependencies;if(Ae!==null){fe=z.child;for(var $e=Ae.firstContext;$e!==null;){if($e.context===A){if(z.tag===1){$e=Oo(-1,E&-E),$e.tag=2;var yt=z.updateQueue;if(yt!==null){yt=yt.shared;var Ft=yt.pending;Ft===null?$e.next=$e:($e.next=Ft.next,Ft.next=$e),yt.pending=$e}}z.lanes|=E,$e=z.alternate,$e!==null&&($e.lanes|=E),zr(z.return,E,p),Ae.lanes|=E;break}$e=$e.next}}else if(z.tag===10)fe=z.type===p.type?null:z.child;else if(z.tag===18){if(fe=z.return,fe===null)throw Error(o(341));fe.lanes|=E,Ae=fe.alternate,Ae!==null&&(Ae.lanes|=E),zr(fe,E,p),fe=z.sibling}else fe=z.child;if(fe!==null)fe.return=z;else for(fe=z;fe!==null;){if(fe===p){fe=null;break}if(z=fe.sibling,z!==null){z.return=fe.return,fe=z;break}fe=fe.return}z=fe}yr(h,p,N.children,E),p=p.child}return p;case 9:return N=p.type,A=p.pendingProps.children,wr(p,E),N=dr(N),A=A(N),p.flags|=1,yr(h,p,A,E),p.child;case 14:return A=p.type,N=Xr(A,p.pendingProps),N=Xr(A.type,N),qn(h,p,A,N,E);case 15:return Vo(h,p,p.type,p.pendingProps,E);case 17:return A=p.type,N=p.pendingProps,N=p.elementType===A?N:Xr(A,N),h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),p.tag=1,On(A)?(h=!0,on(p)):h=!1,wr(p,E),Eg(p,A,N),$h(p,A,N,E),xi(null,p,A,!0,h,E);case 19:return vl(h,p,E);case 22:return ii(h,p,E)}throw Error(o(156,p.tag))};function Md(h,p){return $i(h,p)}function zg(h,p,E,A){this.tag=h,this.key=E,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ls(h,p,E,A){return new zg(h,p,E,A)}function Td(h){return h=h.prototype,!(!h||!h.isReactComponent)}function i_(h){if(typeof h=="function")return Td(h)?1:0;if(h!=null){if(h=h.$$typeof,h===w)return 11;if(h===b)return 14}return 2}function Jo(h,p){var E=h.alternate;return E===null?(E=ls(h.tag,p,h.key,h.mode),E.elementType=h.elementType,E.type=h.type,E.stateNode=h.stateNode,E.alternate=h,h.alternate=E):(E.pendingProps=p,E.type=h.type,E.flags=0,E.subtreeFlags=0,E.deletions=null),E.flags=h.flags&14680064,E.childLanes=h.childLanes,E.lanes=h.lanes,E.child=h.child,E.memoizedProps=h.memoizedProps,E.memoizedState=h.memoizedState,E.updateQueue=h.updateQueue,p=h.dependencies,E.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},E.sibling=h.sibling,E.index=h.index,E.ref=h.ref,E}function bd(h,p,E,A,N,z){var fe=2;if(A=h,typeof h=="function")Td(h)&&(fe=1);else if(typeof h=="string")fe=5;else e:switch(h){case d:return Cl(E.children,N,z,p);case m:fe=8,N|=8;break;case g:return h=ls(12,E,p,N|2),h.elementType=g,h.lanes=z,h;case x:return h=ls(13,E,p,N),h.elementType=x,h.lanes=z,h;case S:return h=ls(19,E,p,N),h.elementType=S,h.lanes=z,h;case C:return zu(E,N,z,p);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case y:fe=10;break e;case _:fe=9;break e;case w:fe=11;break e;case b:fe=14;break e;case T:fe=16,A=null;break e}throw Error(o(130,h==null?h:typeof h,""))}return p=ls(fe,E,p,N),p.elementType=h,p.type=A,p.lanes=z,p}function Cl(h,p,E,A){return h=ls(7,h,A,p),h.lanes=E,h}function zu(h,p,E,A){return h=ls(22,h,A,p),h.elementType=C,h.lanes=E,h.stateNode={},h}function Ad(h,p,E){return h=ls(6,h,null,p),h.lanes=E,h}function Cd(h,p,E){return p=ls(4,h.children!==null?h.children:[],h.key,p),p.lanes=E,p.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},p}function Rd(h,p,E,A,N){this.tag=p,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Xe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rl(0),this.expirationTimes=rl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rl(0),this.identifierPrefix=A,this.onRecoverableError=N,Ye&&(this.mutableSourceEagerHydrationData=null)}function Hg(h,p,E,A,N,z,fe,Ae,$e){return h=new Rd(h,p,E,Ae,$e),p===1?(p=1,z===!0&&(p|=8)):p=0,z=ls(3,null,null,p),h.current=z,z.stateNode=h,z.memoizedState={element:A,isDehydrated:E,cache:null,transitions:null},Ql(z),h}function Gg(h){if(!h)return Kt;h=h._reactInternals;e:{if(I(h)!==h||h.tag!==1)throw Error(o(170));var p=h;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(On(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(o(171))}if(h.tag===1){var E=h.type;if(On(E))return Yn(h,E,p)}return p}function Vg(h){var p=h._reactInternals;if(p===void 0)throw typeof h.render=="function"?Error(o(188)):(h=Object.keys(h).join(","),Error(o(268,h)));return h=j(p),h===null?null:h.stateNode}function bs(h,p){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var E=h.retryLane;h.retryLane=E!==0&&E<p?E:p}}function Hu(h,p){bs(h,p),(h=h.alternate)&&bs(h,p)}function Pd(h){return h=j(h),h===null?null:h.stateNode}function Wg(){return null}return t.attemptContinuousHydration=function(h){if(h.tag===13){var p=Nn();wi(h,134217728,p),Hu(h,134217728)}},t.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var p=Nn(),E=Xs(h);wi(h,E,p),Hu(h,E)}},t.attemptSynchronousHydration=function(h){switch(h.tag){case 3:var p=h.stateNode;if(p.current.memoizedState.isDehydrated){var E=lo(p.pendingLanes);E!==0&&(ni(p,E|1),Gi(p,or()),(mn&6)===0&&(Tl(),_i()))}break;case 13:var A=Nn();vc(function(){return wi(h,1,A)}),Hu(h,1)}},t.batchedUpdates=function(h,p){var E=mn;mn|=1;try{return h(p)}finally{mn=E,mn===0&&(Tl(),fo&&_i())}},t.createComponentSelector=function(h){return{$$typeof:Pu,value:h}},t.createContainer=function(h,p,E,A,N,z,fe){return Hg(h,p,!1,null,E,A,N,z,fe)},t.createHasPseudoClassSelector=function(h){return{$$typeof:xl,value:h}},t.createHydrationContainer=function(h,p,E,A,N,z,fe,Ae,$e){return h=Hg(E,A,!0,h,N,z,fe,Ae,$e),h.context=Gg(null),E=h.current,A=Nn(),N=Xs(E),z=Oo(A,N),z.callback=p??null,ba(E,z),h.current.lanes=N,vs(h,N,A),Gi(h,A),h},t.createPortal=function(h,p,E){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:A==null?null:""+A,children:h,containerInfo:p,implementation:E}},t.createRoleSelector=function(h){return{$$typeof:Sl,value:h}},t.createTestNameSelector=function(h){return{$$typeof:Yo,value:h}},t.createTextSelector=function(h){return{$$typeof:hc,value:h}},t.deferredUpdates=function(h){var p=ln,E=Gn.transition;try{return Gn.transition=null,ln=16,h()}finally{ln=p,Gn.transition=E}},t.discreteUpdates=function(h,p,E,A,N){var z=ln,fe=Gn.transition;try{return Gn.transition=null,ln=1,h(p,E,A,N)}finally{ln=z,Gn.transition=fe,mn===0&&Tl()}},t.findAllNodes=qo,t.findBoundingRects=function(h,p){if(!nt)throw Error(o(363));p=qo(h,p),h=[];for(var E=0;E<p.length;E++)h.push(_t(p[E]));for(p=h.length-1;0<p;p--){E=h[p];for(var A=E.x,N=A+E.width,z=E.y,fe=z+E.height,Ae=p-1;0<=Ae;Ae--)if(p!==Ae){var $e=h[Ae],yt=$e.x,Ft=yt+$e.width,fn=$e.y,Jt=fn+$e.height;if(A>=yt&&z>=fn&&N<=Ft&&fe<=Jt){h.splice(p,1);break}else if(A!==yt||E.width!==$e.width||Jt<z||fn>fe){if(!(z!==fn||E.height!==$e.height||Ft<A||yt>N)){yt>A&&($e.width+=yt-A,$e.x=A),Ft<N&&($e.width=N-yt),h.splice(p,1);break}}else{fn>z&&($e.height+=fn-z,$e.y=z),Jt<fe&&($e.height=fe-fn),h.splice(p,1);break}}}return h},t.findHostInstance=Vg,t.findHostInstanceWithNoPortals=function(h){return h=Q(h),h=h!==null?H(h):null,h===null?null:h.stateNode},t.findHostInstanceWithWarning=function(h){return Vg(h)},t.flushControlled=function(h){var p=mn;mn|=1;var E=Gn.transition,A=ln;try{Gn.transition=null,ln=1,h()}finally{ln=A,Gn.transition=E,mn=p,mn===0&&(Tl(),_i())}},t.flushPassiveEffects=yo,t.flushSync=vc,t.focusWithin=function(h,p){if(!nt)throw Error(o(363));for(h=Lu(h),p=ss(h,p),p=Array.from(p),h=0;h<p.length;){var E=p[h++];if(!q(E)){if(E.tag===5&&tt(E.stateNode))return!0;for(E=E.child;E!==null;)p.push(E),E=E.sibling}}return!1},t.getCurrentUpdatePriority=function(){return ln},t.getFindAllNodesFailureDescription=function(h,p){if(!nt)throw Error(o(363));var E=0,A=[];h=[Lu(h),0];for(var N=0;N<h.length;){var z=h[N++],fe=h[N++],Ae=p[fe];if((z.tag!==5||!q(z))&&(Iu(z,Ae)&&(A.push(Da(Ae)),fe++,fe>E&&(E=fe)),fe<p.length))for(z=z.child;z!==null;)h.push(z,fe),z=z.sibling}if(E<p.length){for(h=[];E<p.length;E++)h.push(Da(p[E]));return`findAllNodes was able to match part of the selector:
  `+(A.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},t.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return re(h.child.stateNode);default:return h.child.stateNode}},t.injectIntoDevTools=function(h){if(h={bundleType:h.bundleType,version:h.version,rendererPackageName:h.rendererPackageName,rendererConfig:h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:Pd,findFiberByHostInstance:h.findFiberByHostInstance||Wg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(p.isDisabled||!p.supportsFiber)h=!0;else{try{wa=p.inject(h),es=p}catch{}h=!!p.checkDCE}}return h},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(h,p,E,A){if(!nt)throw Error(o(363));h=qo(h,p);var N=Le(h,E,A).disconnect;return{disconnect:function(){N()}}},t.registerMutableSourceForHydration=function(h,p){var E=p._getVersion;E=E(p._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[p,E]:h.mutableSourceEagerHydrationData.push(p,E)},t.runWithPriority=function(h,p){var E=ln;try{return ln=h,p()}finally{ln=E}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(h,p,E,A){var N=p.current,z=Nn(),fe=Xs(N);return E=Gg(E),p.context===null?p.context=E:p.pendingContext=E,p=Oo(z,fe),p.payload={element:h},A=A===void 0?null:A,A!==null&&(p.callback=A),ba(N,p),h=wi(N,fe,z),h!==null&&Yf(h,N,fe),fe},t}),bx}var ib;function qH(){return ib||(ib=1,Ex.exports=YH()),Ex.exports}var KH=qH();const ZH=SS(KH);var Ax={exports:{}},Cx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sb;function QH(){return sb||(sb=1,function(n){function e(G,K){var W=G.length;G.push(K);e:for(;0<W;){var L=W-1>>>1,B=G[L];if(0<i(B,K))G[L]=K,G[W]=B,W=L;else break e}}function t(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var K=G[0],W=G.pop();if(W!==K){G[0]=W;e:for(var L=0,B=G.length,ne=B>>>1;L<ne;){var ae=2*(L+1)-1,de=G[ae],pe=ae+1,xe=G[pe];if(0>i(de,W))pe<B&&0>i(xe,de)?(G[L]=xe,G[pe]=W,L=pe):(G[L]=de,G[ae]=W,L=ae);else if(pe<B&&0>i(xe,W))G[L]=xe,G[pe]=W,L=pe;else break e}}return K}function i(G,K){var W=G.sortIndex-K.sortIndex;return W!==0?W:G.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var c=[],u=[],d=1,m=null,g=3,y=!1,_=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(G){for(var K=t(u);K!==null;){if(K.callback===null)r(u);else if(K.startTime<=G)r(u),K.sortIndex=K.expirationTime,e(c,K);else break;K=t(u)}}function C(G){if(w=!1,T(G),!_)if(t(c)!==null)_=!0,re(P);else{var K=t(u);K!==null&&ue(C,K.startTime-G)}}function P(G,K){_=!1,w&&(w=!1,S(F),F=-1),y=!0;var W=g;try{for(T(K),m=t(c);m!==null&&(!(m.expirationTime>K)||G&&!Q());){var L=m.callback;if(typeof L=="function"){m.callback=null,g=m.priorityLevel;var B=L(m.expirationTime<=K);K=n.unstable_now(),typeof B=="function"?m.callback=B:m===t(c)&&r(c),T(K)}else r(c);m=t(c)}if(m!==null)var ne=!0;else{var ae=t(u);ae!==null&&ue(C,ae.startTime-K),ne=!1}return ne}finally{m=null,g=W,y=!1}}var D=!1,U=null,F=-1,I=5,k=-1;function Q(){return!(n.unstable_now()-k<I)}function j(){if(U!==null){var G=n.unstable_now();k=G;var K=!0;try{K=U(!0,G)}finally{K?$():(D=!1,U=null)}}else D=!1}var $;if(typeof b=="function")$=function(){b(j)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,ie=H.port2;H.port1.onmessage=j,$=function(){ie.postMessage(null)}}else $=function(){x(j,0)};function re(G){U=G,D||(D=!0,$())}function ue(G,K){F=x(function(){G(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_continueExecution=function(){_||y||(_=!0,re(P))},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(G){switch(g){case 1:case 2:case 3:var K=3;break;default:K=g}var W=g;g=K;try{return G()}finally{g=W}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(G,K){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var W=g;g=G;try{return K()}finally{g=W}},n.unstable_scheduleCallback=function(G,K,W){var L=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?L+W:L):W=L,G){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=W+B,G={id:d++,callback:K,priorityLevel:G,startTime:W,expirationTime:B,sortIndex:-1},W>L?(G.sortIndex=W,e(u,G),t(c)===null&&G===t(u)&&(w?(S(F),F=-1):w=!0,ue(C,W-L))):(G.sortIndex=B,e(c,G),_||y||(_=!0,re(P))),G},n.unstable_shouldYield=Q,n.unstable_wrapCallback=function(G){var K=g;return function(){var W=g;g=K;try{return G.apply(this,arguments)}finally{g=W}}}}(Cx)),Cx}var ob;function JH(){return ob||(ob=1,Ax.exports=QH()),Ax.exports}var ab=JH();const Iw={},Wy=n=>void Object.assign(Iw,n);function $H(n,e){function t(d,{args:m=[],attach:g,...y},_){let w=`${d[0].toUpperCase()}${d.slice(1)}`,x;if(d==="primitive"){if(y.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const S=y.object;x=sh(S,{type:d,root:_,attach:g,primitive:!0})}else{const S=Iw[w];if(!S)throw new Error(`R3F: ${w} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(m))throw new Error("R3F: The args prop must be an array!");x=sh(new S(...m),{type:d,root:_,attach:g,memoizedProps:{args:m}})}return x.__r3f.attach===void 0&&(x.isBufferGeometry?x.__r3f.attach="geometry":x.isMaterial&&(x.__r3f.attach="material")),w!=="inject"&&Lx(x,y),x}function r(d,m){let g=!1;if(m){var y,_;(y=m.__r3f)!=null&&y.attach?Px(d,m,m.__r3f.attach):m.isObject3D&&d.isObject3D&&(d.add(m),g=!0),g||(_=d.__r3f)==null||_.objects.push(m),m.__r3f||sh(m,{}),m.__r3f.parent=d,rS(m),oh(m)}}function i(d,m,g){let y=!1;if(m){var _,w;if((_=m.__r3f)!=null&&_.attach)Px(d,m,m.__r3f.attach);else if(m.isObject3D&&d.isObject3D){m.parent=d,m.dispatchEvent({type:"added"}),d.dispatchEvent({type:"childadded",child:m});const x=d.children.filter(b=>b!==m),S=x.indexOf(g);d.children=[...x.slice(0,S),m,...x.slice(S)],y=!0}y||(w=d.__r3f)==null||w.objects.push(m),m.__r3f||sh(m,{}),m.__r3f.parent=d,rS(m),oh(m)}}function s(d,m,g=!1){d&&[...d].forEach(y=>o(m,y,g))}function o(d,m,g){if(m){var y,_,w;if(m.__r3f&&(m.__r3f.parent=null),(y=d.__r3f)!=null&&y.objects&&(d.__r3f.objects=d.__r3f.objects.filter(C=>C!==m)),(_=m.__r3f)!=null&&_.attach)db(d,m,m.__r3f.attach);else if(m.isObject3D&&d.isObject3D){var x;d.remove(m),(x=m.__r3f)!=null&&x.root&&oG(b0(m),m)}const b=(w=m.__r3f)==null?void 0:w.primitive,T=!b&&(g===void 0?m.dispose!==null:g);if(!b){var S;s((S=m.__r3f)==null?void 0:S.objects,m,T),s(m.children,m,T)}if(delete m.__r3f,T&&m.dispose&&m.type!=="Scene"){const C=()=>{try{m.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?ab.unstable_scheduleCallback(ab.unstable_IdlePriority,C):C()}oh(d)}}function a(d,m,g,y){var _;const w=(_=d.__r3f)==null?void 0:_.parent;if(!w)return;const x=t(m,g,d.__r3f.root);if(d.children){for(const S of d.children)S.__r3f&&r(x,S);d.children=d.children.filter(S=>!S.__r3f)}d.__r3f.objects.forEach(S=>r(x,S)),d.__r3f.objects=[],d.__r3f.autoRemovedBeforeAppend||o(w,d),x.parent&&(x.__r3f.autoRemovedBeforeAppend=!0),r(w,x),x.raycast&&x.__r3f.eventCount&&b0(x).getState().internal.interaction.push(x),[y,y.alternate].forEach(S=>{S!==null&&(S.stateNode=x,S.ref&&(typeof S.ref=="function"?S.ref(x):S.ref.current=x))})}const c=()=>{};return{reconciler:ZH({createInstance:t,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(d,m)=>{if(!m)return;const g=d.getState().scene;g.__r3f&&(g.__r3f.root=d,r(g,m))},removeChildFromContainer:(d,m)=>{m&&o(d.getState().scene,m)},insertInContainerBefore:(d,m,g)=>{if(!m||!g)return;const y=d.getState().scene;y.__r3f&&i(y,m,g)},getRootHostContext:()=>null,getChildHostContext:d=>d,finalizeInitialChildren(d){var m;return!!((m=d==null?void 0:d.__r3f)!=null?m:{}).handlers},prepareUpdate(d,m,g,y){var _;if(((_=d==null?void 0:d.__r3f)!=null?_:{}).primitive&&y.object&&y.object!==d)return[!0];{const{args:x=[],children:S,...b}=y,{args:T=[],children:C,...P}=g;if(!Array.isArray(x))throw new Error("R3F: the args prop must be an array!");if(x.some((U,F)=>U!==T[F]))return[!0];const D=hP(d,b,P,!0);return D.changes.length?[!1,D]:null}},commitUpdate(d,[m,g],y,_,w,x){m?a(d,y,w,x):Lx(d,g)},commitMount(d,m,g,y){var _;const w=(_=d.__r3f)!=null?_:{};d.raycast&&w.handlers&&w.eventCount&&b0(d).getState().internal.interaction.push(d)},getPublicInstance:d=>d,prepareForCommit:()=>null,preparePortalMount:d=>sh(d.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(d){var m;const{attach:g,parent:y}=(m=d.__r3f)!=null?m:{};g&&y&&db(y,d,g),d.isObject3D&&(d.visible=!1),oh(d)},unhideInstance(d,m){var g;const{attach:y,parent:_}=(g=d.__r3f)!=null?g:{};y&&_&&Px(_,d,y),(d.isObject3D&&m.visible==null||m.visible)&&(d.visible=!0),oh(d)},createTextInstance:c,hideTextInstance:c,unhideTextInstance:c,getCurrentEventPriority:()=>e?e():uh.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&ur.fun(performance.now)?performance.now:ur.fun(Date.now)?Date.now:()=>0,scheduleTimeout:ur.fun(setTimeout)?setTimeout:void 0,cancelTimeout:ur.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Lx}}var lb,cb;const Rx=n=>"colorSpace"in n||"outputColorSpace"in n,aP=()=>{var n;return(n=Iw.ColorManagement)!=null?n:null},lP=n=>n&&n.isOrthographicCamera,eG=n=>n&&n.hasOwnProperty("current"),gg=typeof window<"u"&&((lb=window.document)!=null&&lb.createElement||((cb=window.navigator)==null?void 0:cb.product)==="ReactNative")?X.useLayoutEffect:X.useEffect;function cP(n){const e=X.useRef(n);return gg(()=>void(e.current=n),[n]),e}function tG({set:n}){return gg(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class uP extends X.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}uP.getDerivedStateFromError=()=>({error:!0});const fP="__default",ub=new Map,nG=n=>n&&!!n.memoized&&!!n.changes;function dP(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const em=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function b0(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const ur={obj:n=>n===Object(n)&&!ur.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(ur.str(n)||ur.num(n)||ur.boo(n))return n===e;const s=ur.obj(n);if(s&&r==="reference")return n===e;const o=ur.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&r==="shallow"){for(a in i?e:n)if(!ur.equ(n[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:n)if(n[a]!==e[a])return!1;if(ur.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function rG(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function iG(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function sh(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function nS(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((s,o)=>s[o],n),{target:t,key:i}}else return{target:t,key:e}}const fb=/-\d+$/;function Px(n,e,t){if(ur.str(t)){if(fb.test(t)){const s=t.replace(fb,""),{target:o,key:a}=nS(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=nS(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function db(n,e,t){var r,i;if(ur.str(t)){const{target:s,key:o}=nS(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function hP(n,{children:e,key:t,ref:r,...i},{children:s,key:o,ref:a,...c}={},u=!1){const d=n.__r3f,m=Object.entries(i),g=[];if(u){const _=Object.keys(c);for(let w=0;w<_.length;w++)i.hasOwnProperty(_[w])||m.unshift([_[w],fP+"remove"])}m.forEach(([_,w])=>{var x;if((x=n.__r3f)!=null&&x.primitive&&_==="object"||ur.equ(w,c[_]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(_))return g.push([_,w,!0,[]]);let S=[];_.includes("-")&&(S=_.split("-")),g.push([_,w,!1,S]);for(const b in i){const T=i[b];b.startsWith(`${_}-`)&&g.push([b,T,!1,b.split("-")])}});const y={...i};return d!=null&&d.memoizedProps&&d!=null&&d.memoizedProps.args&&(y.args=d.memoizedProps.args),d!=null&&d.memoizedProps&&d!=null&&d.memoizedProps.attach&&(y.attach=d.memoizedProps.attach),{memoized:y,changes:g}}function Lx(n,e){var t;const r=n.__r3f,i=r==null?void 0:r.root,s=i==null||i.getState==null?void 0:i.getState(),{memoized:o,changes:a}=nG(e)?e:hP(n,e),c=r==null?void 0:r.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let g=0;g<a.length;g++){let[y,_,w,x]=a[g];if(Rx(n)){const C="srgb",P="srgb-linear";y==="encoding"?(y="colorSpace",_=_===3001?C:P):y==="outputEncoding"&&(y="outputColorSpace",_=_===3001?C:P)}let S=n,b=S[y];if(x.length&&(b=x.reduce((T,C)=>T[C],n),!(b&&b.set))){const[T,...C]=x.reverse();S=C.reverse().reduce((P,D)=>P[D],n),y=T}if(_===fP+"remove")if(S.constructor){let T=ub.get(S.constructor);T||(T=new S.constructor,ub.set(S.constructor,T)),_=T[y]}else _=0;if(w&&r)_?r.handlers[y]=_:delete r.handlers[y],r.eventCount=Object.keys(r.handlers).length;else if(b&&b.set&&(b.copy||b instanceof Mf)){if(Array.isArray(_))b.fromArray?b.fromArray(_):b.set(..._);else if(b.copy&&_&&_.constructor&&b.constructor===_.constructor)b.copy(_);else if(_!==void 0){var u;const T=(u=b)==null?void 0:u.isColor;!T&&b.setScalar?b.setScalar(_):b instanceof Mf&&_ instanceof Mf?b.mask=_.mask:b.set(_),!aP()&&s&&!s.linear&&T&&b.convertSRGBToLinear()}}else{var d;if(S[y]=_,(d=S[y])!=null&&d.isTexture&&S[y].format===di&&S[y].type===ro&&s){const T=S[y];Rx(T)&&Rx(s.gl)?T.colorSpace=s.gl.outputColorSpace:T.encoding=s.gl.outputEncoding}}oh(n)}if(r&&r.parent&&n.raycast&&c!==r.eventCount){const g=b0(n).getState().internal,y=g.interaction.indexOf(n);y>-1&&g.interaction.splice(y,1),r.eventCount&&g.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&rS(n),n}function oh(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function rS(n){n.onUpdate==null||n.onUpdate(n)}function pP(n,e){n.manual||(lP(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function l0(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function sG(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return uh.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return uh.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return uh.ContinuousEventPriority;default:return uh.DefaultEventPriority}}function mP(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function oG(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{mP(t.capturedMap,e,r,i)})}function aG(n){function e(c){const{internal:u}=n.getState(),d=c.offsetX-u.initialClick[0],m=c.offsetY-u.initialClick[1];return Math.round(Math.sqrt(d*d+m*m))}function t(c){return c.filter(u=>["Move","Over","Enter","Out","Leave"].some(d=>{var m;return(m=u.__r3f)==null?void 0:m.handlers["onPointer"+d]}))}function r(c,u){const d=n.getState(),m=new Set,g=[],y=u?u(d.internal.interaction):d.internal.interaction;for(let S=0;S<y.length;S++){const b=em(y[S]);b&&(b.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(c,d);function _(S){const b=em(S);if(!b||!b.events.enabled||b.raycaster.camera===null)return[];if(b.raycaster.camera===void 0){var T;b.events.compute==null||b.events.compute(c,b,(T=b.previousRoot)==null?void 0:T.getState()),b.raycaster.camera===void 0&&(b.raycaster.camera=null)}return b.raycaster.camera?b.raycaster.intersectObject(S,!0):[]}let w=y.flatMap(_).sort((S,b)=>{const T=em(S.object),C=em(b.object);return!T||!C?S.distance-b.distance:C.events.priority-T.events.priority||S.distance-b.distance}).filter(S=>{const b=l0(S);return m.has(b)?!1:(m.add(b),!0)});d.events.filter&&(w=d.events.filter(w,d));for(const S of w){let b=S.object;for(;b;){var x;(x=b.__r3f)!=null&&x.eventCount&&g.push({...S,eventObject:b}),b=b.parent}}if("pointerId"in c&&d.internal.capturedMap.has(c.pointerId))for(let S of d.internal.capturedMap.get(c.pointerId).values())m.has(l0(S.intersection))||g.push(S.intersection);return g}function i(c,u,d,m){const g=n.getState();if(c.length){const y={stopped:!1};for(const _ of c){const w=em(_.object)||g,{raycaster:x,pointer:S,camera:b,internal:T}=w,C=new oe(S.x,S.y,0).unproject(b),P=k=>{var Q,j;return(Q=(j=T.capturedMap.get(k))==null?void 0:j.has(_.eventObject))!=null?Q:!1},D=k=>{const Q={intersection:_,target:u.target};T.capturedMap.has(k)?T.capturedMap.get(k).set(_.eventObject,Q):T.capturedMap.set(k,new Map([[_.eventObject,Q]])),u.target.setPointerCapture(k)},U=k=>{const Q=T.capturedMap.get(k);Q&&mP(T.capturedMap,_.eventObject,Q,k)};let F={};for(let k in u){let Q=u[k];typeof Q!="function"&&(F[k]=Q)}let I={..._,...F,pointer:S,intersections:c,stopped:y.stopped,delta:d,unprojectedPoint:C,ray:x.ray,camera:b,stopPropagation(){const k="pointerId"in u&&T.capturedMap.get(u.pointerId);if((!k||k.has(_.eventObject))&&(I.stopped=y.stopped=!0,T.hovered.size&&Array.from(T.hovered.values()).find(Q=>Q.eventObject===_.eventObject))){const Q=c.slice(0,c.indexOf(_));s([...Q,_])}},target:{hasPointerCapture:P,setPointerCapture:D,releasePointerCapture:U},currentTarget:{hasPointerCapture:P,setPointerCapture:D,releasePointerCapture:U},nativeEvent:u};if(m(I),y.stopped===!0)break}}return c}function s(c){const{internal:u}=n.getState();for(const d of u.hovered.values())if(!c.length||!c.find(m=>m.object===d.object&&m.index===d.index&&m.instanceId===d.instanceId)){const g=d.eventObject.__r3f,y=g==null?void 0:g.handlers;if(u.hovered.delete(l0(d)),g!=null&&g.eventCount){const _={...d,intersections:c};y.onPointerOut==null||y.onPointerOut(_),y.onPointerLeave==null||y.onPointerLeave(_)}}}function o(c,u){for(let d=0;d<u.length;d++){const m=u[d].__r3f;m==null||m.handlers.onPointerMissed==null||m.handlers.onPointerMissed(c)}}function a(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:d}=n.getState();"pointerId"in u&&d.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{d.capturedMap.has(u.pointerId)&&(d.capturedMap.delete(u.pointerId),s([]))})}}return function(d){const{onPointerMissed:m,internal:g}=n.getState();g.lastEvent.current=d;const y=c==="onPointerMove",_=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",x=r(d,y?t:void 0),S=_?e(d):0;c==="onPointerDown"&&(g.initialClick=[d.offsetX,d.offsetY],g.initialHits=x.map(T=>T.eventObject)),_&&!x.length&&S<=2&&(o(d,g.interaction),m&&m(d)),y&&s(x);function b(T){const C=T.eventObject,P=C.__r3f,D=P==null?void 0:P.handlers;if(P!=null&&P.eventCount)if(y){if(D.onPointerOver||D.onPointerEnter||D.onPointerOut||D.onPointerLeave){const U=l0(T),F=g.hovered.get(U);F?F.stopped&&T.stopPropagation():(g.hovered.set(U,T),D.onPointerOver==null||D.onPointerOver(T),D.onPointerEnter==null||D.onPointerEnter(T))}D.onPointerMove==null||D.onPointerMove(T)}else{const U=D[c];U?(!_||g.initialHits.includes(C))&&(o(d,g.interaction.filter(F=>!g.initialHits.includes(F))),U(T)):_&&g.initialHits.includes(C)&&o(d,g.interaction.filter(F=>!g.initialHits.includes(F)))}}i(x,d,S,b)}}return{handlePointer:a}}const lG=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],gP=n=>!!(n!=null&&n.render),Nw=X.createContext(null),cG=(n,e)=>{const t=Vy((a,c)=>{const u=new oe,d=new oe,m=new oe;function g(S=c().camera,b=d,T=c().size){const{width:C,height:P,top:D,left:U}=T,F=C/P;b.isVector3?m.copy(b):m.set(...b);const I=S.getWorldPosition(u).distanceTo(m);if(lP(S))return{width:C/S.zoom,height:P/S.zoom,top:D,left:U,factor:1,distance:I,aspect:F};{const k=S.fov*Math.PI/180,Q=2*Math.tan(k/2)*I,j=Q*(C/P);return{width:j,height:Q,top:D,left:U,factor:C/j,distance:I,aspect:F}}}let y;const _=S=>a(b=>({performance:{...b.performance,current:S}})),w=new it;return{set:a,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(S=1)=>n(c(),S),advance:(S,b)=>e(S,b,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Aw,pointer:w,mouse:w,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const S=c();y&&clearTimeout(y),S.performance.current!==S.performance.min&&_(S.performance.min),y=setTimeout(()=>_(c().performance.max),S.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:g},setEvents:S=>a(b=>({...b,events:{...b.events,...S}})),setSize:(S,b,T,C,P)=>{const D=c().camera,U={width:S,height:b,top:C||0,left:P||0,updateStyle:T};a(F=>({size:U,viewport:{...F.viewport,...g(D,d,U)}}))},setDpr:S=>a(b=>{const T=dP(S);return{viewport:{...b.viewport,dpr:T,initialDpr:b.viewport.initialDpr||T}}}),setFrameloop:(S="always")=>{const b=c().clock;b.stop(),b.elapsedTime=0,S!=="never"&&(b.start(),b.elapsedTime=0),a(()=>({frameloop:S}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:X.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(S,b,T)=>{const C=c().internal;return C.priority=C.priority+(b>0?1:0),C.subscribers.push({ref:S,priority:b,store:T}),C.subscribers=C.subscribers.sort((P,D)=>P.priority-D.priority),()=>{const P=c().internal;P!=null&&P.subscribers&&(P.priority=P.priority-(b>0?1:0),P.subscribers=P.subscribers.filter(D=>D.ref!==S))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:a,size:c,viewport:u,gl:d,set:m}=t.getState();if(c.width!==i.width||c.height!==i.height||u.dpr!==s){var g;i=c,s=u.dpr,pP(a,c),d.setPixelRatio(u.dpr);const y=(g=c.updateStyle)!=null?g:typeof HTMLCanvasElement<"u"&&d.domElement instanceof HTMLCanvasElement;d.setSize(c.width,c.height,y)}a!==o&&(o=a,m(y=>({viewport:{...y.viewport,...y.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let c0,uG=new Set,fG=new Set,dG=new Set;function Ix(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function tm(n,e){switch(n){case"before":return Ix(uG,e);case"after":return Ix(fG,e);case"tail":return Ix(dG,e)}}let Nx,Dx;function Ux(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),Nx=e.internal.subscribers,c0=0;c0<Nx.length;c0++)Dx=Nx[c0],Dx.ref.current(Dx.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function hG(n){let e=!1,t=!1,r,i,s;function o(u){i=requestAnimationFrame(o),e=!0,r=0,tm("before",u),t=!0;for(const m of n.values()){var d;s=m.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((d=s.gl.xr)!=null&&d.isPresenting)&&(r+=Ux(u,s))}if(t=!1,tm("after",u),r===0)return tm("tail",u),e=!1,cancelAnimationFrame(i)}function a(u,d=1){var m;if(!u)return n.forEach(g=>a(g.store.getState(),d));(m=u.gl.xr)!=null&&m.isPresenting||!u.internal.active||u.frameloop==="never"||(d>1?u.internal.frames=Math.min(60,u.internal.frames+d):t?u.internal.frames=2:u.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function c(u,d=!0,m,g){if(d&&tm("before",u),m)Ux(u,m,g);else for(const y of n.values())Ux(u,y.store.getState());d&&tm("after",u)}return{loop:o,invalidate:a,advance:c}}function Dw(){const n=X.useContext(Nw);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function ui(n=t=>t,e){return Dw()(n,e)}function qh(n,e=0){const t=Dw(),r=t.getState().internal.subscribe,i=cP(n);return gg(()=>r(i,e,t),[e,r,t]),null}const hb=new WeakMap;function vP(n,e){return function(t,...r){let i=hb.get(t);return i||(i=new t,hb.set(t,i)),n&&n(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,c=>{c.scene&&Object.assign(c,rG(c.scene)),o(c)},e,c=>a(new Error(`Could not load ${s}: ${c==null?void 0:c.message}`))))))}}function Fh(n,e,t,r){const i=Array.isArray(e)?e:[e],s=oP(vP(t,r),[n,...i],{equal:ur.equ});return Array.isArray(e)?s:s[0]}Fh.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return VH(vP(t),[n,...r])};Fh.clear=function(n,e){const t=Array.isArray(e)?e:[e];return WH([n,...t])};const kh=new Map,{invalidate:pb,advance:mb}=hG(kh),{reconciler:Wm,applyProps:kc}=$H(kh,sG),th={objects:"shallow",strict:!1},pG=(n,e)=>{const t=typeof n=="function"?n(e):n;return gP(t)?t:new wy({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function mG(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:o,updateStyle:a=t}=e;return{width:r,height:i,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:r,height:i,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function gG(n){const e=kh.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||cG(pb,mb),o=t||Wm.createContainer(s,uh.ConcurrentRoot,null,!1,null,"",i,null);e||kh.set(n,{fiber:o,store:s});let a,c=!1,u;return{configure(d={}){let{gl:m,size:g,scene:y,events:_,onCreated:w,shadows:x=!1,linear:S=!1,flat:b=!1,legacy:T=!1,orthographic:C=!1,frameloop:P="always",dpr:D=[1,2],performance:U,raycaster:F,camera:I,onPointerMissed:k}=d,Q=s.getState(),j=Q.gl;Q.gl||Q.set({gl:j=pG(m,n)});let $=Q.raycaster;$||Q.set({raycaster:$=new Lw});const{params:H,...ie}=F||{};if(ur.equ(ie,$,th)||kc($,{...ie}),ur.equ(H,$.params,th)||kc($,{params:{...$.params,...H}}),!Q.camera||Q.camera===u&&!ur.equ(u,I,th)){u=I;const W=I instanceof ag,L=W?I:C?new Ya(0,0,0,0,.1,1e3):new Or(75,0,.1,1e3);W||(L.position.z=5,I&&(kc(L,I),("aspect"in I||"left"in I||"right"in I||"bottom"in I||"top"in I)&&(L.manual=!0,L.updateProjectionMatrix())),!Q.camera&&!(I!=null&&I.rotation)&&L.lookAt(0,0,0)),Q.set({camera:L}),$.camera=L}if(!Q.scene){let W;y!=null&&y.isScene?W=y:(W=new cg,y&&kc(W,y)),Q.set({scene:sh(W)})}if(!Q.xr){var re;const W=(ne,ae)=>{const de=s.getState();de.frameloop!=="never"&&mb(ne,!0,de,ae)},L=()=>{const ne=s.getState();ne.gl.xr.enabled=ne.gl.xr.isPresenting,ne.gl.xr.setAnimationLoop(ne.gl.xr.isPresenting?W:null),ne.gl.xr.isPresenting||pb(ne)},B={connect(){const ne=s.getState().gl;ne.xr.addEventListener("sessionstart",L),ne.xr.addEventListener("sessionend",L)},disconnect(){const ne=s.getState().gl;ne.xr.removeEventListener("sessionstart",L),ne.xr.removeEventListener("sessionend",L)}};typeof((re=j.xr)==null?void 0:re.addEventListener)=="function"&&B.connect(),Q.set({xr:B})}if(j.shadowMap){const W=j.shadowMap.enabled,L=j.shadowMap.type;if(j.shadowMap.enabled=!!x,ur.boo(x))j.shadowMap.type=pm;else if(ur.str(x)){var ue;const B={basic:iC,percentage:fy,soft:pm,variance:ca};j.shadowMap.type=(ue=B[x])!=null?ue:pm}else ur.obj(x)&&Object.assign(j.shadowMap,x);(W!==j.shadowMap.enabled||L!==j.shadowMap.type)&&(j.shadowMap.needsUpdate=!0)}const G=aP();G&&("enabled"in G?G.enabled=!T:"legacyMode"in G&&(G.legacyMode=T)),c||kc(j,{outputEncoding:S?3e3:3001,toneMapping:b?Xa:BS}),Q.legacy!==T&&Q.set(()=>({legacy:T})),Q.linear!==S&&Q.set(()=>({linear:S})),Q.flat!==b&&Q.set(()=>({flat:b})),m&&!ur.fun(m)&&!gP(m)&&!ur.equ(m,j,th)&&kc(j,m),_&&!Q.events.handlers&&Q.set({events:_(s)});const K=mG(n,g);return ur.equ(K,Q.size,th)||Q.setSize(K.width,K.height,K.updateStyle,K.top,K.left),D&&Q.viewport.dpr!==dP(D)&&Q.setDpr(D),Q.frameloop!==P&&Q.setFrameloop(P),Q.onPointerMissed||Q.set({onPointerMissed:k}),U&&!ur.equ(U,Q.performance,th)&&Q.set(W=>({performance:{...W.performance,...U}})),a=w,c=!0,this},render(d){return c||this.configure(),Wm.updateContainer(Ee.jsx(vG,{store:s,children:d,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){yP(n)}}}function vG({store:n,children:e,onCreated:t,rootElement:r}){return gg(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),Ee.jsx(Nw.Provider,{value:n,children:e})}function yP(n,e){const t=kh.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),Wm.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,c;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(c=i.gl)!=null&&c.xr&&i.xr.disconnect(),iG(i),kh.delete(n)}catch{}},500)})}}function W0(n,e,t){return Ee.jsx(yG,{children:n,container:e,state:t},e.uuid)}function yG({state:n={},children:e,container:t}){const{events:r,size:i,...s}=n,o=Dw(),[a]=X.useState(()=>new Lw),[c]=X.useState(()=>new it),u=X.useCallback((m,g)=>{const y={...m};Object.keys(m).forEach(w=>{(lG.includes(w)||m[w]!==g[w]&&g[w])&&delete y[w]});let _;if(g&&i){const w=g.camera;_=m.viewport.getCurrentViewport(w,new oe,i),w!==m.camera&&pP(w,i)}return{...y,scene:t,raycaster:a,pointer:c,mouse:c,previousRoot:o,events:{...m.events,...g==null?void 0:g.events,...r},size:{...m.size,...i},viewport:{...m.viewport,..._},...s}},[n]),[d]=X.useState(()=>{const m=o.getState();return Vy((y,_)=>({...m,scene:t,raycaster:a,pointer:c,mouse:c,previousRoot:o,events:{...m.events,...r},size:{...m.size,...i},...s,set:y,get:_,setEvents:w=>y(x=>({...x,events:{...x.events,...w}}))}))});return X.useEffect(()=>{const m=o.subscribe(g=>d.setState(y=>u(g,y)));return()=>{m()}},[u]),X.useEffect(()=>{d.setState(m=>u(o.getState(),m))},[u]),X.useEffect(()=>()=>{d.destroy()},[]),Ee.jsx(Ee.Fragment,{children:Wm.createPortal(Ee.jsx(Nw.Provider,{value:d,children:e}),d,null)})}Wm.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:X.version});const Ox={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function _G(n){const{handlePointer:e}=aG(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(Ox).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:s}=n.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[c,u]=Ox[o];t.addEventListener(c,a,{passive:u})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=Ox[s];r.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function gb(n,e){let t;return(...r)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...r),e)}}function xG({debounce:n,scroll:e,polyfill:t,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=X.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=X.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),c=n?typeof n=="number"?n:n.scroll:null,u=n?typeof n=="number"?n:n.resize:null,d=X.useRef(!1);X.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[m,g,y]=X.useMemo(()=>{const S=()=>{if(!a.current.element)return;const{left:b,top:T,width:C,height:P,bottom:D,right:U,x:F,y:I}=a.current.element.getBoundingClientRect(),k={left:b,top:T,width:C,height:P,bottom:D,right:U,x:F,y:I};a.current.element instanceof HTMLElement&&r&&(k.height=a.current.element.offsetHeight,k.width=a.current.element.offsetWidth),Object.freeze(k),d.current&&!MG(a.current.lastBounds,k)&&o(a.current.lastBounds=k)};return[S,u?gb(S,u):S,c?gb(S,c):S]},[o,r,c,u]);function _(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(S=>S.removeEventListener("scroll",y,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function w(){a.current.element&&(a.current.resizeObserver=new i(y),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(S=>S.addEventListener("scroll",y,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{y()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const x=S=>{!S||S===a.current.element||(_(),a.current.element=S,a.current.scrollContainers=_P(S),w())};return wG(y,!!e),SG(g),X.useEffect(()=>{_(),w()},[e,y,g]),X.useEffect(()=>_,[]),[x,s,m]}function SG(n){X.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function wG(n,e){X.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function _P(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,..._P(n.parentElement)]}const EG=["x","y","top","bottom","left","right","width","height"],MG=(n,e)=>EG.every(t=>n[t]===e[t]);var TG=Object.defineProperty,bG=Object.defineProperties,AG=Object.getOwnPropertyDescriptors,vb=Object.getOwnPropertySymbols,CG=Object.prototype.hasOwnProperty,RG=Object.prototype.propertyIsEnumerable,yb=(n,e,t)=>e in n?TG(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,_b=(n,e)=>{for(var t in e||(e={}))CG.call(e,t)&&yb(n,t,e[t]);if(vb)for(var t of vb(e))RG.call(e,t)&&yb(n,t,e[t]);return n},PG=(n,e)=>bG(n,AG(e)),xb,Sb;typeof window<"u"&&((xb=window.document)!=null&&xb.createElement||((Sb=window.navigator)==null?void 0:Sb.product)==="ReactNative")?X.useLayoutEffect:X.useEffect;function xP(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=n.child;for(;r;){const i=xP(r,e,t);if(i)return i;r=r.sibling}}function SP(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const wb=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=wb;return}return wb.apply(this,arguments)};const Uw=SP(X.createContext(null));class wP extends X.Component{render(){return X.createElement(Uw.Provider,{value:this._reactInternals},this.props.children)}}function LG(){const n=X.useContext(Uw);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=X.useId();return X.useMemo(()=>{for(const r of[n,n==null?void 0:n.alternate]){if(!r)continue;const i=xP(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[n,e])}function IG(){const n=LG(),[e]=X.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==Uw&&!e.has(i)&&e.set(i,X.useContext(SP(i)))}t=t.return}return e}function NG(){const n=IG();return X.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>X.createElement(e,null,X.createElement(t.Provider,PG(_b({},r),{value:n.get(t)}))),e=>X.createElement(wP,_b({},e))),[n])}const DG=X.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:s,events:o=_G,eventSource:a,eventPrefix:c,shadows:u,linear:d,flat:m,legacy:g,orthographic:y,frameloop:_,dpr:w,performance:x,raycaster:S,camera:b,scene:T,onPointerMissed:C,onCreated:P,...D},U){X.useMemo(()=>Wy(FH),[]);const F=NG(),[I,k]=xG({scroll:!0,debounce:{scroll:50,resize:0},...r}),Q=X.useRef(null),j=X.useRef(null);X.useImperativeHandle(U,()=>Q.current);const $=cP(C),[H,ie]=X.useState(!1),[re,ue]=X.useState(!1);if(H)throw H;if(re)throw re;const G=X.useRef(null);gg(()=>{const W=Q.current;k.width>0&&k.height>0&&W&&(G.current||(G.current=gG(W)),G.current.configure({gl:s,events:o,shadows:u,linear:d,flat:m,legacy:g,orthographic:y,frameloop:_,dpr:w,performance:x,raycaster:S,camera:b,scene:T,size:k,onPointerMissed:(...L)=>$.current==null?void 0:$.current(...L),onCreated:L=>{L.events.connect==null||L.events.connect(a?eG(a)?a.current:a:j.current),c&&L.setEvents({compute:(B,ne)=>{const ae=B[c+"X"],de=B[c+"Y"];ne.pointer.set(ae/ne.size.width*2-1,-(de/ne.size.height)*2+1),ne.raycaster.setFromCamera(ne.pointer,ne.camera)}}),P==null||P(L)}}),G.current.render(Ee.jsx(F,{children:Ee.jsx(uP,{set:ue,children:Ee.jsx(X.Suspense,{fallback:Ee.jsx(tG,{set:ie}),children:e??null})})})))}),X.useEffect(()=>{const W=Q.current;if(W)return()=>yP(W)},[]);const K=a?"none":"auto";return Ee.jsx("div",{ref:j,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:K,...i},...D,children:Ee.jsx("div",{ref:I,style:{width:"100%",height:"100%"},children:Ee.jsx("canvas",{ref:Q,style:{display:"block"},children:t})})})}),UG=X.forwardRef(function(e,t){return Ee.jsx(wP,{children:Ee.jsx(DG,{...e,ref:t})})});function jm(){return jm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},jm.apply(null,arguments)}var Ow=yg(),wn=n=>vg(n,Ow),Fw=yg();wn.write=n=>vg(n,Fw);var jy=yg();wn.onStart=n=>vg(n,jy);var kw=yg();wn.onFrame=n=>vg(n,kw);var Bw=yg();wn.onFinish=n=>vg(n,Bw);var gh=[];wn.setTimeout=(n,e)=>{const t=wn.now()+e,r=()=>{const s=gh.findIndex(o=>o.cancel==r);~s&&gh.splice(s,1),Yc-=~s?1:0},i={time:t,handler:n,cancel:r};return gh.splice(EP(t),0,i),Yc+=1,MP(),i};var EP=n=>~(~gh.findIndex(e=>e.time>n)||~gh.length);wn.cancel=n=>{jy.delete(n),kw.delete(n),Bw.delete(n),Ow.delete(n),Fw.delete(n)};wn.sync=n=>{iS=!0,wn.batchedUpdates(n),iS=!1};wn.throttle=n=>{let e;function t(){try{n(...e)}finally{e=null}}function r(...i){e=i,wn.onStart(t)}return r.handler=n,r.cancel=()=>{jy.delete(t),e=null},r};var zw=typeof window<"u"?window.requestAnimationFrame:()=>{};wn.use=n=>zw=n;wn.now=typeof performance<"u"?()=>performance.now():Date.now;wn.batchedUpdates=n=>n();wn.catch=console.error;wn.frameLoop="always";wn.advance=()=>{wn.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):bP()};var Xc=-1,Yc=0,iS=!1;function vg(n,e){iS?(e.delete(n),n(0)):(e.add(n),MP())}function MP(){Xc<0&&(Xc=0,wn.frameLoop!=="demand"&&zw(TP))}function OG(){Xc=-1}function TP(){~Xc&&(zw(TP),wn.batchedUpdates(bP))}function bP(){const n=Xc;Xc=wn.now();const e=EP(Xc);if(e&&(AP(gh.splice(0,e),t=>t.handler()),Yc-=e),!Yc){OG();return}jy.flush(),Ow.flush(n?Math.min(64,Xc-n):16.667),kw.flush(),Fw.flush(),Bw.flush()}function yg(){let n=new Set,e=n;return{add(t){Yc+=e==n&&!n.has(t)?1:0,n.add(t)},delete(t){return Yc-=e==n&&n.has(t)?1:0,n.delete(t)},flush(t){e.size&&(n=new Set,Yc-=e.size,AP(e,r=>r(t)&&n.add(r)),Yc+=n.size,e=n)}}}function AP(n,e){n.forEach(t=>{try{e(t)}catch(r){wn.catch(r)}})}var FG=Object.defineProperty,kG=(n,e)=>{for(var t in e)FG(n,t,{get:e[t],enumerable:!0})},el={};kG(el,{assign:()=>zG,colors:()=>$c,createStringInterpolator:()=>Gw,skipAnimation:()=>RP,to:()=>CP,willAdvance:()=>Vw});function sS(){}var BG=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),Dt={arr:Array.isArray,obj:n=>!!n&&n.constructor.name==="Object",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0};function Bl(n,e){if(Dt.arr(n)){if(!Dt.arr(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}return n===e}var rr=(n,e)=>n.forEach(e);function uu(n,e,t){if(Dt.arr(n)){for(let r=0;r<n.length;r++)e.call(t,n[r],`${r}`);return}for(const r in n)n.hasOwnProperty(r)&&e.call(t,n[r],r)}var Ro=n=>Dt.und(n)?[]:Dt.arr(n)?n:[n];function _m(n,e){if(n.size){const t=Array.from(n);n.clear(),rr(t,e)}}var fm=(n,...e)=>_m(n,t=>t(...e)),Hw=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Gw,CP,$c=null,RP=!1,Vw=sS,zG=n=>{n.to&&(CP=n.to),n.now&&(wn.now=n.now),n.colors!==void 0&&($c=n.colors),n.skipAnimation!=null&&(RP=n.skipAnimation),n.createStringInterpolator&&(Gw=n.createStringInterpolator),n.requestAnimationFrame&&wn.use(n.requestAnimationFrame),n.batchedUpdates&&(wn.batchedUpdates=n.batchedUpdates),n.willAdvance&&(Vw=n.willAdvance),n.frameLoop&&(wn.frameLoop=n.frameLoop)},xm=new Set,bo=[],Fx=[],j0=0,Xy={get idle(){return!xm.size&&!bo.length},start(n){j0>n.priority?(xm.add(n),wn.onStart(HG)):(PP(n),wn(oS))},advance:oS,sort(n){if(j0)wn.onFrame(()=>Xy.sort(n));else{const e=bo.indexOf(n);~e&&(bo.splice(e,1),LP(n))}},clear(){bo=[],xm.clear()}};function HG(){xm.forEach(PP),xm.clear(),wn(oS)}function PP(n){bo.includes(n)||LP(n)}function LP(n){bo.splice(GG(bo,e=>e.priority>n.priority),0,n)}function oS(n){const e=Fx;for(let t=0;t<bo.length;t++){const r=bo[t];j0=r.priority,r.idle||(Vw(r),r.advance(n),r.idle||e.push(r))}return j0=0,Fx=bo,Fx.length=0,bo=e,bo.length>0}function GG(n,e){const t=n.findIndex(e);return t<0?n.length:t}var ha="[-+]?\\d*\\.?\\d+",X0=ha+"%";function Yy(...n){return"\\(\\s*("+n.join(")\\s*,\\s*(")+")\\s*\\)"}var VG=new RegExp("rgb"+Yy(ha,ha,ha)),WG=new RegExp("rgba"+Yy(ha,ha,ha,ha)),jG=new RegExp("hsl"+Yy(ha,X0,X0)),XG=new RegExp("hsla"+Yy(ha,X0,X0,ha)),YG=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,qG=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,KG=/^#([0-9a-fA-F]{6})$/,ZG=/^#([0-9a-fA-F]{8})$/;function QG(n){let e;return typeof n=="number"?n>>>0===n&&n>=0&&n<=4294967295?n:null:(e=KG.exec(n))?parseInt(e[1]+"ff",16)>>>0:$c&&$c[n]!==void 0?$c[n]:(e=VG.exec(n))?(nh(e[1])<<24|nh(e[2])<<16|nh(e[3])<<8|255)>>>0:(e=WG.exec(n))?(nh(e[1])<<24|nh(e[2])<<16|nh(e[3])<<8|Tb(e[4]))>>>0:(e=YG.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=ZG.exec(n))?parseInt(e[1],16)>>>0:(e=qG.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=jG.exec(n))?(Eb(Mb(e[1]),u0(e[2]),u0(e[3]))|255)>>>0:(e=XG.exec(n))?(Eb(Mb(e[1]),u0(e[2]),u0(e[3]))|Tb(e[4]))>>>0:null}function kx(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Eb(n,e,t){const r=t<.5?t*(1+e):t+e-t*e,i=2*t-r,s=kx(i,r,n+1/3),o=kx(i,r,n),a=kx(i,r,n-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function nh(n){const e=parseInt(n,10);return e<0?0:e>255?255:e}function Mb(n){return(parseFloat(n)%360+360)%360/360}function Tb(n){const e=parseFloat(n);return e<0?0:e>1?255:Math.round(e*255)}function u0(n){const e=parseFloat(n);return e<0?0:e>100?1:e/100}function bb(n){let e=QG(n);if(e===null)return n;e=e||0;const t=(e&4278190080)>>>24,r=(e&16711680)>>>16,i=(e&65280)>>>8,s=(e&255)/255;return`rgba(${t}, ${r}, ${i}, ${s})`}var Xm=(n,e,t)=>{if(Dt.fun(n))return n;if(Dt.arr(n))return Xm({range:n,output:e,extrapolate:t});if(Dt.str(n.output[0]))return Gw(n);const r=n,i=r.output,s=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",c=r.easing||(u=>u);return u=>{const d=$G(u,s);return JG(u,s[d],s[d+1],i[d],i[d+1],c,o,a,r.map)}};function JG(n,e,t,r,i,s,o,a,c){let u=c?c(n):n;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>t){if(a==="identity")return u;a==="clamp"&&(u=t)}return r===i?r:e===t?n<=e?r:i:(e===-1/0?u=-u:t===1/0?u=u-e:u=(u-e)/(t-e),u=s(u),r===-1/0?u=-u:i===1/0?u=u+r:u=u*(i-r)+r,u)}function $G(n,e){for(var t=1;t<e.length-1&&!(e[t]>=n);++t);return t-1}var e6={linear:n=>n},Ym=Symbol.for("FluidValue.get"),Bh=Symbol.for("FluidValue.observers"),Gl=n=>!!(n&&n[Ym]),Mo=n=>n&&n[Ym]?n[Ym]():n,Ab=n=>n[Bh]||null;function t6(n,e){n.eventObserved?n.eventObserved(e):n(e)}function Y0(n,e){const t=n[Bh];t&&t.forEach(r=>{t6(r,e)})}var n6=class{constructor(n){if(!n&&!(n=this.get))throw Error("Unknown getter");r6(this,n)}},r6=(n,e)=>NP(n,Ym,e);function qy(n,e){if(n[Ym]){let t=n[Bh];t||NP(n,Bh,t=new Set),t.has(e)||(t.add(e),n.observerAdded&&n.observerAdded(t.size,e))}return e}function IP(n,e){const t=n[Bh];if(t&&t.has(e)){const r=t.size-1;r?t.delete(e):n[Bh]=null,n.observerRemoved&&n.observerRemoved(r,e)}}var NP=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),A0=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,i6=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Cb=new RegExp(`(${A0.source})(%|[a-z]+)`,"i"),s6=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Ky=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,DP=n=>{const[e,t]=o6(n);if(!e||Hw())return n;const r=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(r)return r.trim();if(t&&t.startsWith("--")){const i=window.getComputedStyle(document.documentElement).getPropertyValue(t);return i||n}else{if(t&&Ky.test(t))return DP(t);if(t)return t}return n},o6=n=>{const e=Ky.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]},Bx,a6=(n,e,t,r,i)=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(r)}, ${i})`,l6=n=>{Bx||(Bx=$c?new RegExp(`(${Object.keys($c).join("|")})(?!\\w)`,"g"):/^\b$/);const e=n.output.map(s=>Mo(s).replace(Ky,DP).replace(i6,bb).replace(Bx,bb)),t=e.map(s=>s.match(A0).map(Number)),i=t[0].map((s,o)=>t.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>Xm({...n,output:s}));return s=>{var c;const o=!Cb.test(e[0])&&((c=e.find(u=>Cb.test(u)))==null?void 0:c.replace(A0,""));let a=0;return e[0].replace(A0,()=>`${i[a++](s)}${o||""}`).replace(s6,a6)}},Ww="react-spring: ",UP=n=>{const e=n;let t=!1;if(typeof e!="function")throw new TypeError(`${Ww}once requires a function parameter`);return(...r)=>{t||(e(...r),t=!0)}},c6=UP(console.warn);function u6(){c6(`${Ww}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var f6=UP(console.warn);function d6(){f6(`${Ww}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Zy(n){return Dt.str(n)&&(n[0]=="#"||/\d/.test(n)||!Hw()&&Ky.test(n)||n in($c||{}))}var OP=Hw()?X.useEffect:X.useLayoutEffect,h6=()=>{const n=X.useRef(!1);return OP(()=>(n.current=!0,()=>{n.current=!1}),[]),n};function p6(){const n=X.useState()[1],e=h6();return()=>{e.current&&n(Math.random())}}function m6(n,e){const[t]=X.useState(()=>({inputs:e,result:n()})),r=X.useRef(),i=r.current;let s=i;return s?e&&s.inputs&&g6(e,s.inputs)||(s={inputs:e,result:n()}):s=t,X.useEffect(()=>{r.current=s,i==t&&(t.inputs=t.result=void 0)},[s]),s.result}function g6(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}var v6=n=>X.useEffect(n,y6),y6=[];function Rb(n){const e=X.useRef();return X.useEffect(()=>{e.current=n}),e.current}var qm=Symbol.for("Animated:node"),_6=n=>!!n&&n[qm]===n,ka=n=>n&&n[qm],jw=(n,e)=>BG(n,qm,e),Qy=n=>n&&n[qm]&&n[qm].getPayload(),FP=class{constructor(){jw(this,this)}getPayload(){return this.payload||[]}},_g=class extends FP{constructor(n){super(),this._value=n,this.done=!0,this.durationProgress=0,Dt.num(this._value)&&(this.lastPosition=this._value)}static create(n){return new _g(n)}getPayload(){return[this]}getValue(){return this._value}setValue(n,e){return Dt.num(n)&&(this.lastPosition=n,e&&(n=Math.round(n/e)*e,this.done&&(this.lastPosition=n))),this._value===n?!1:(this._value=n,!0)}reset(){const{done:n}=this;this.done=!1,Dt.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,n&&(this.lastVelocity=null),this.v0=null)}},Km=class extends _g{constructor(n){super(0),this._string=null,this._toString=Xm({output:[n,n]})}static create(n){return new Km(n)}getValue(){const n=this._string;return n??(this._string=this._toString(this._value))}setValue(n){if(Dt.str(n)){if(n==this._string)return!1;this._string=n,this._value=1}else if(super.setValue(n))this._string=null;else return!1;return!0}reset(n){n&&(this._toString=Xm({output:[this.getValue(),n]})),this._value=0,super.reset()}},x6=class extends FP{constructor(n){super(),this.source=n,this.setValue(n)}getValue(n){const e={};return uu(this.source,(t,r)=>{_6(t)?e[r]=t.getValue(n):Gl(t)?e[r]=Mo(t):n||(e[r]=t)}),e}setValue(n){this.source=n,this.payload=this._makePayload(n)}reset(){this.payload&&rr(this.payload,n=>n.reset())}_makePayload(n){if(n){const e=new Set;return uu(n,this._addToPayload,e),Array.from(e)}}_addToPayload(n){const e=Qy(n);e&&rr(e,t=>this.add(t))}},kP=class extends x6{constructor(n){super(n)}static create(n){return new kP(n)}getValue(){return this.source.map(n=>n.getValue())}setValue(n){const e=this.getPayload();return n.length==e.length?e.map((t,r)=>t.setValue(n[r])).some(Boolean):(super.setValue(n.map(S6)),!0)}};function S6(n){return(Zy(n)?Km:_g).create(n)}function aS(n){const e=ka(n);return e?e.constructor:Dt.arr(n)?kP:Zy(n)?Km:_g}function uf(n,...e){return Dt.fun(n)?n(...e):n}var Sm=(n,e)=>n===!0||!!(e&&n&&(Dt.fun(n)?n(e):Ro(n).includes(e))),BP=(n,e)=>Dt.obj(n)?e&&n[e]:n,zP=(n,e)=>n.default===!0?n[e]:n.default?n.default[e]:void 0,w6=n=>n,Xw=(n,e=w6)=>{let t=E6;n.default&&n.default!==!0&&(n=n.default,t=Object.keys(n));const r={};for(const i of t){const s=e(n[i],i);Dt.und(s)||(r[i]=s)}return r},E6=["config","onProps","onStart","onChange","onPause","onResume","onRest"],M6={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function T6(n){const e={};let t=0;if(uu(n,(r,i)=>{M6[i]||(e[i]=r,t++)}),t)return e}function HP(n){const e=T6(n);if(e){const t={to:e};return uu(n,(r,i)=>i in e||(t[i]=r)),t}return{...n}}function Zm(n){return n=Mo(n),Dt.arr(n)?n.map(Zm):Zy(n)?el.createStringInterpolator({range:[0,1],output:[n,n]})(1):n}function b6(n){for(const e in n)return!0;return!1}function lS(n){return Dt.fun(n)||Dt.arr(n)&&Dt.obj(n[0])}function A6(n,e){var t;(t=n.ref)==null||t.delete(n),e==null||e.delete(n)}function C6(n,e){var t;e&&n.ref!==e&&((t=n.ref)==null||t.delete(n),e.add(n),n.ref=e)}var R6={default:{tension:170,friction:26}},cS={...R6.default,mass:1,damping:1,easing:e6.linear,clamp:!1},P6=class{constructor(){this.velocity=0,Object.assign(this,cS)}};function L6(n,e,t){t&&(t={...t},Pb(t,e),e={...t,...e}),Pb(n,e),Object.assign(n,e);for(const o in cS)n[o]==null&&(n[o]=cS[o]);let{frequency:r,damping:i}=n;const{mass:s}=n;return Dt.und(r)||(r<.01&&(r=.01),i<0&&(i=0),n.tension=Math.pow(2*Math.PI/r,2)*s,n.friction=4*Math.PI*i*s/r),n}function Pb(n,e){if(!Dt.und(e.decay))n.duration=void 0;else{const t=!Dt.und(e.tension)||!Dt.und(e.friction);(t||!Dt.und(e.frequency)||!Dt.und(e.damping)||!Dt.und(e.mass))&&(n.duration=void 0,n.decay=void 0),t&&(n.frequency=void 0)}}var Lb=[],I6=class{constructor(){this.changed=!1,this.values=Lb,this.toValues=null,this.fromValues=Lb,this.config=new P6,this.immediate=!1}};function GP(n,{key:e,props:t,defaultProps:r,state:i,actions:s}){return new Promise((o,a)=>{let c,u,d=Sm(t.cancel??(r==null?void 0:r.cancel),e);if(d)y();else{Dt.und(t.pause)||(i.paused=Sm(t.pause,e));let _=r==null?void 0:r.pause;_!==!0&&(_=i.paused||Sm(_,e)),c=uf(t.delay||0,e),_?(i.resumeQueue.add(g),s.pause()):(s.resume(),g())}function m(){i.resumeQueue.add(g),i.timeouts.delete(u),u.cancel(),c=u.time-wn.now()}function g(){c>0&&!el.skipAnimation?(i.delayed=!0,u=wn.setTimeout(y,c),i.pauseQueue.add(m),i.timeouts.add(u)):y()}function y(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(m),i.timeouts.delete(u),n<=(i.cancelId||0)&&(d=!0);try{s.start({...t,callId:n,cancel:d},o)}catch(_){a(_)}}})}var Yw=(n,e)=>e.length==1?e[0]:e.some(t=>t.cancelled)?vh(n.get()):e.every(t=>t.noop)?VP(n.get()):da(n.get(),e.every(t=>t.finished)),VP=n=>({value:n,noop:!0,finished:!0,cancelled:!1}),da=(n,e,t=!1)=>({value:n,finished:e,cancelled:t}),vh=n=>({value:n,cancelled:!0,finished:!1});function WP(n,e,t,r){const{callId:i,parentId:s,onRest:o}=e,{asyncTo:a,promise:c}=t;return!s&&n===a&&!e.reset?c:t.promise=(async()=>{t.asyncId=i,t.asyncTo=n;const u=Xw(e,(x,S)=>S==="onRest"?void 0:x);let d,m;const g=new Promise((x,S)=>(d=x,m=S)),y=x=>{const S=i<=(t.cancelId||0)&&vh(r)||i!==t.asyncId&&da(r,!1);if(S)throw x.result=S,m(x),x},_=(x,S)=>{const b=new Ib,T=new Nb;return(async()=>{if(el.skipAnimation)throw Qm(t),T.result=da(r,!1),m(T),T;y(b);const C=Dt.obj(x)?{...x}:{...S,to:x};C.parentId=i,uu(u,(D,U)=>{Dt.und(C[U])&&(C[U]=D)});const P=await r.start(C);return y(b),t.paused&&await new Promise(D=>{t.resumeQueue.add(D)}),P})()};let w;if(el.skipAnimation)return Qm(t),da(r,!1);try{let x;Dt.arr(n)?x=(async S=>{for(const b of S)await _(b)})(n):x=Promise.resolve(n(_,r.stop.bind(r))),await Promise.all([x.then(d),g]),w=da(r.get(),!0,!1)}catch(x){if(x instanceof Ib)w=x.result;else if(x instanceof Nb)w=x.result;else throw x}finally{i==t.asyncId&&(t.asyncId=s,t.asyncTo=s?a:void 0,t.promise=s?c:void 0)}return Dt.fun(o)&&wn.batchedUpdates(()=>{o(w,r,r.item)}),w})()}function Qm(n,e){_m(n.timeouts,t=>t.cancel()),n.pauseQueue.clear(),n.resumeQueue.clear(),n.asyncId=n.asyncTo=n.promise=void 0,e&&(n.cancelId=e)}var Ib=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Nb=class extends Error{constructor(){super("SkipAnimationSignal")}},uS=n=>n instanceof qw,N6=1,qw=class extends n6{constructor(){super(...arguments),this.id=N6++,this._priority=0}get priority(){return this._priority}set priority(n){this._priority!=n&&(this._priority=n,this._onPriorityChange(n))}get(){const n=ka(this);return n&&n.getValue()}to(...n){return el.to(this,n)}interpolate(...n){return u6(),el.to(this,n)}toJSON(){return this.get()}observerAdded(n){n==1&&this._attach()}observerRemoved(n){n==0&&this._detach()}_attach(){}_detach(){}_onChange(n,e=!1){Y0(this,{type:"change",parent:this,value:n,idle:e})}_onPriorityChange(n){this.idle||Xy.sort(this),Y0(this,{type:"priority",parent:this,priority:n})}},Bf=Symbol.for("SpringPhase"),jP=1,XP=2,YP=4,zx=n=>(n[Bf]&jP)>0,Dc=n=>(n[Bf]&XP)>0,nm=n=>(n[Bf]&YP)>0,Db=(n,e)=>e?n[Bf]|=XP|jP:n[Bf]&=-3,Ub=(n,e)=>e?n[Bf]|=YP:n[Bf]&=-5,D6=class extends qw{constructor(n,e){if(super(),this.animation=new I6,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Dt.und(n)||!Dt.und(e)){const t=Dt.obj(n)?{...n}:{...e,from:n};Dt.und(t.default)&&(t.default=!0),this.start(t)}}get idle(){return!(Dc(this)||this._state.asyncTo)||nm(this)}get goal(){return Mo(this.animation.to)}get velocity(){const n=ka(this);return n instanceof _g?n.lastVelocity||0:n.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return zx(this)}get isAnimating(){return Dc(this)}get isPaused(){return nm(this)}get isDelayed(){return this._state.delayed}advance(n){let e=!0,t=!1;const r=this.animation;let{toValues:i}=r;const{config:s}=r,o=Qy(r.to);!o&&Gl(r.to)&&(i=Ro(Mo(r.to))),r.values.forEach((u,d)=>{if(u.done)return;const m=u.constructor==Km?1:o?o[d].lastPosition:i[d];let g=r.immediate,y=m;if(!g){if(y=u.lastPosition,s.tension<=0){u.done=!0;return}let _=u.elapsedTime+=n;const w=r.fromValues[d],x=u.v0!=null?u.v0:u.v0=Dt.arr(s.velocity)?s.velocity[d]:s.velocity;let S;const b=s.precision||(w==m?.005:Math.min(1,Math.abs(m-w)*.001));if(Dt.und(s.duration))if(s.decay){const T=s.decay===!0?.998:s.decay,C=Math.exp(-(1-T)*_);y=w+x/(1-T)*(1-C),g=Math.abs(u.lastPosition-y)<=b,S=x*C}else{S=u.lastVelocity==null?x:u.lastVelocity;const T=s.restVelocity||b/10,C=s.clamp?0:s.bounce,P=!Dt.und(C),D=w==m?u.v0>0:w<m;let U,F=!1;const I=1,k=Math.ceil(n/I);for(let Q=0;Q<k&&(U=Math.abs(S)>T,!(!U&&(g=Math.abs(m-y)<=b,g)));++Q){P&&(F=y==m||y>m==D,F&&(S=-S*C,y=m));const j=-s.tension*1e-6*(y-m),$=-s.friction*.001*S,H=(j+$)/s.mass;S=S+H*I,y=y+S*I}}else{let T=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,u.durationProgress>0&&(u.elapsedTime=s.duration*u.durationProgress,_=u.elapsedTime+=n)),T=(s.progress||0)+_/this._memoizedDuration,T=T>1?1:T<0?0:T,u.durationProgress=T),y=w+s.easing(T)*(m-w),S=(y-u.lastPosition)/n,g=T==1}u.lastVelocity=S,Number.isNaN(y)&&(console.warn("Got NaN while animating:",this),g=!0)}o&&!o[d].done&&(g=!1),g?u.done=!0:e=!1,u.setValue(y,s.round)&&(t=!0)});const a=ka(this),c=a.getValue();if(e){const u=Mo(r.to);(c!==u||t)&&!s.decay?(a.setValue(u),this._onChange(u)):t&&s.decay&&this._onChange(c),this._stop()}else t&&this._onChange(c)}set(n){return wn.batchedUpdates(()=>{this._stop(),this._focus(n),this._set(n)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Dc(this)){const{to:n,config:e}=this.animation;wn.batchedUpdates(()=>{this._onStart(),e.decay||this._set(n,!1),this._stop()})}return this}update(n){return(this.queue||(this.queue=[])).push(n),this}start(n,e){let t;return Dt.und(n)?(t=this.queue||[],this.queue=[]):t=[Dt.obj(n)?n:{...e,to:n}],Promise.all(t.map(r=>this._update(r))).then(r=>Yw(this,r))}stop(n){const{to:e}=this.animation;return this._focus(this.get()),Qm(this._state,n&&this._lastCallId),wn.batchedUpdates(()=>this._stop(e,n)),this}reset(){this._update({reset:!0})}eventObserved(n){n.type=="change"?this._start():n.type=="priority"&&(this.priority=n.priority+1)}_prepareNode(n){const e=this.key||"";let{to:t,from:r}=n;t=Dt.obj(t)?t[e]:t,(t==null||lS(t))&&(t=void 0),r=Dt.obj(r)?r[e]:r,r==null&&(r=void 0);const i={to:t,from:r};return zx(this)||(n.reverse&&([t,r]=[r,t]),r=Mo(r),Dt.und(r)?ka(this)||this._set(t):this._set(r)),i}_update({...n},e){const{key:t,defaultProps:r}=this;n.default&&Object.assign(r,Xw(n,(o,a)=>/^on/.test(a)?BP(o,t):o)),Fb(this,n,"onProps"),im(this,"onProps",n,this);const i=this._prepareNode(n);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return GP(++this._lastCallId,{key:t,props:n,defaultProps:r,state:s,actions:{pause:()=>{nm(this)||(Ub(this,!0),fm(s.pauseQueue),im(this,"onPause",da(this,rm(this,this.animation.to)),this))},resume:()=>{nm(this)&&(Ub(this,!1),Dc(this)&&this._resume(),fm(s.resumeQueue),im(this,"onResume",da(this,rm(this,this.animation.to)),this))},start:this._merge.bind(this,i)}}).then(o=>{if(n.loop&&o.finished&&!(e&&o.noop)){const a=qP(n);if(a)return this._update(a,!0)}return o})}_merge(n,e,t){if(e.cancel)return this.stop(!0),t(vh(this));const r=!Dt.und(n.to),i=!Dt.und(n.from);if(r||i)if(e.callId>this._lastToId)this._lastToId=e.callId;else return t(vh(this));const{key:s,defaultProps:o,animation:a}=this,{to:c,from:u}=a;let{to:d=c,from:m=u}=n;i&&!r&&(!e.default||Dt.und(d))&&(d=m),e.reverse&&([d,m]=[m,d]);const g=!Bl(m,u);g&&(a.from=m),m=Mo(m);const y=!Bl(d,c);y&&this._focus(d);const _=lS(e.to),{config:w}=a,{decay:x,velocity:S}=w;(r||i)&&(w.velocity=0),e.config&&!_&&L6(w,uf(e.config,s),e.config!==o.config?uf(o.config,s):void 0);let b=ka(this);if(!b||Dt.und(d))return t(da(this,!0));const T=Dt.und(e.reset)?i&&!e.default:!Dt.und(m)&&Sm(e.reset,s),C=T?m:this.get(),P=Zm(d),D=Dt.num(P)||Dt.arr(P)||Zy(P),U=!_&&(!D||Sm(o.immediate||e.immediate,s));if(y){const Q=aS(d);if(Q!==b.constructor)if(U)b=this._set(P);else throw Error(`Cannot animate between ${b.constructor.name} and ${Q.name}, as the "to" prop suggests`)}const F=b.constructor;let I=Gl(d),k=!1;if(!I){const Q=T||!zx(this)&&g;(y||Q)&&(k=Bl(Zm(C),P),I=!k),(!Bl(a.immediate,U)&&!U||!Bl(w.decay,x)||!Bl(w.velocity,S))&&(I=!0)}if(k&&Dc(this)&&(a.changed&&!T?I=!0:I||this._stop(c)),!_&&((I||Gl(c))&&(a.values=b.getPayload(),a.toValues=Gl(d)?null:F==Km?[1]:Ro(P)),a.immediate!=U&&(a.immediate=U,!U&&!T&&this._set(c)),I)){const{onRest:Q}=a;rr(O6,$=>Fb(this,e,$));const j=da(this,rm(this,c));fm(this._pendingCalls,j),this._pendingCalls.add(t),a.changed&&wn.batchedUpdates(()=>{var $;a.changed=!T,Q==null||Q(j,this),T?uf(o.onRest,j):($=a.onStart)==null||$.call(a,j,this)})}T&&this._set(C),_?t(WP(e.to,e,this._state,this)):I?this._start():Dc(this)&&!y?this._pendingCalls.add(t):t(VP(C))}_focus(n){const e=this.animation;n!==e.to&&(Ab(this)&&this._detach(),e.to=n,Ab(this)&&this._attach())}_attach(){let n=0;const{to:e}=this.animation;Gl(e)&&(qy(e,this),uS(e)&&(n=e.priority+1)),this.priority=n}_detach(){const{to:n}=this.animation;Gl(n)&&IP(n,this)}_set(n,e=!0){const t=Mo(n);if(!Dt.und(t)){const r=ka(this);if(!r||!Bl(t,r.getValue())){const i=aS(t);!r||r.constructor!=i?jw(this,i.create(t)):r.setValue(t),r&&wn.batchedUpdates(()=>{this._onChange(t,e)})}}return ka(this)}_onStart(){const n=this.animation;n.changed||(n.changed=!0,im(this,"onStart",da(this,rm(this,n.to)),this))}_onChange(n,e){e||(this._onStart(),uf(this.animation.onChange,n,this)),uf(this.defaultProps.onChange,n,this),super._onChange(n,e)}_start(){const n=this.animation;ka(this).reset(Mo(n.to)),n.immediate||(n.fromValues=n.values.map(e=>e.lastPosition)),Dc(this)||(Db(this,!0),nm(this)||this._resume())}_resume(){el.skipAnimation?this.finish():Xy.start(this)}_stop(n,e){if(Dc(this)){Db(this,!1);const t=this.animation;rr(t.values,i=>{i.done=!0}),t.toValues&&(t.onChange=t.onPause=t.onResume=void 0),Y0(this,{type:"idle",parent:this});const r=e?vh(this.get()):da(this.get(),rm(this,n??t.to));fm(this._pendingCalls,r),t.changed&&(t.changed=!1,im(this,"onRest",r,this))}}};function rm(n,e){const t=Zm(e),r=Zm(n.get());return Bl(r,t)}function qP(n,e=n.loop,t=n.to){const r=uf(e);if(r){const i=r!==!0&&HP(r),s=(i||n).reverse,o=!i||i.reset;return Jm({...n,loop:e,default:!1,pause:void 0,to:!s||lS(t)?t:void 0,from:o?n.from:void 0,reset:o,...i})}}function Jm(n){const{to:e,from:t}=n=HP(n),r=new Set;return Dt.obj(e)&&Ob(e,r),Dt.obj(t)&&Ob(t,r),n.keys=r.size?Array.from(r):null,n}function U6(n){const e=Jm(n);return Dt.und(e.default)&&(e.default=Xw(e)),e}function Ob(n,e){uu(n,(t,r)=>t!=null&&e.add(r))}var O6=["onStart","onRest","onChange","onPause","onResume"];function Fb(n,e,t){n.animation[t]=e[t]!==zP(e,t)?BP(e[t],n.key):void 0}function im(n,e,...t){var r,i,s,o;(i=(r=n.animation)[e])==null||i.call(r,...t),(o=(s=n.defaultProps)[e])==null||o.call(s,...t)}var F6=["onStart","onChange","onRest"],k6=1,B6=class{constructor(n,e){this.id=k6++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),n&&this.start({default:!0,...n})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(n=>n.idle&&!n.isDelayed&&!n.isPaused)}get item(){return this._item}set item(n){this._item=n}get(){const n={};return this.each((e,t)=>n[t]=e.get()),n}set(n){for(const e in n){const t=n[e];Dt.und(t)||this.springs[e].set(t)}}update(n){return n&&this.queue.push(Jm(n)),this}start(n){let{queue:e}=this;return n?e=Ro(n).map(Jm):this.queue=[],this._flush?this._flush(this,e):($P(this,e),fS(this,e))}stop(n,e){if(n!==!!n&&(e=n),e){const t=this.springs;rr(Ro(e),r=>t[r].stop(!!n))}else Qm(this._state,this._lastAsyncId),this.each(t=>t.stop(!!n));return this}pause(n){if(Dt.und(n))this.start({pause:!0});else{const e=this.springs;rr(Ro(n),t=>e[t].pause())}return this}resume(n){if(Dt.und(n))this.start({pause:!1});else{const e=this.springs;rr(Ro(n),t=>e[t].resume())}return this}each(n){uu(this.springs,n)}_onFrame(){const{onStart:n,onChange:e,onRest:t}=this._events,r=this._active.size>0,i=this._changed.size>0;(r&&!this._started||i&&!this._started)&&(this._started=!0,_m(n,([a,c])=>{c.value=this.get(),a(c,this,this._item)}));const s=!r&&this._started,o=i||s&&t.size?this.get():null;i&&e.size&&_m(e,([a,c])=>{c.value=o,a(c,this,this._item)}),s&&(this._started=!1,_m(t,([a,c])=>{c.value=o,a(c,this,this._item)}))}eventObserved(n){if(n.type=="change")this._changed.add(n.parent),n.idle||this._active.add(n.parent);else if(n.type=="idle")this._active.delete(n.parent);else return;wn.onFrame(this._onFrame)}};function fS(n,e){return Promise.all(e.map(t=>KP(n,t))).then(t=>Yw(n,t))}async function KP(n,e,t){const{keys:r,to:i,from:s,loop:o,onRest:a,onResolve:c}=e,u=Dt.obj(e.default)&&e.default;o&&(e.loop=!1),i===!1&&(e.to=null),s===!1&&(e.from=null);const d=Dt.arr(i)||Dt.fun(i)?i:void 0;d?(e.to=void 0,e.onRest=void 0,u&&(u.onRest=void 0)):rr(F6,w=>{const x=e[w];if(Dt.fun(x)){const S=n._events[w];e[w]=({finished:b,cancelled:T})=>{const C=S.get(x);C?(b||(C.finished=!1),T&&(C.cancelled=!0)):S.set(x,{value:null,finished:b||!1,cancelled:T||!1})},u&&(u[w]=e[w])}});const m=n._state;e.pause===!m.paused?(m.paused=e.pause,fm(e.pause?m.pauseQueue:m.resumeQueue)):m.paused&&(e.pause=!0);const g=(r||Object.keys(n.springs)).map(w=>n.springs[w].start(e)),y=e.cancel===!0||zP(e,"cancel")===!0;(d||y&&m.asyncId)&&g.push(GP(++n._lastAsyncId,{props:e,state:m,actions:{pause:sS,resume:sS,start(w,x){y?(Qm(m,n._lastAsyncId),x(vh(n))):(w.onRest=a,x(WP(d,w,m,n)))}}})),m.paused&&await new Promise(w=>{m.resumeQueue.add(w)});const _=Yw(n,await Promise.all(g));if(o&&_.finished&&!(t&&_.noop)){const w=qP(e,o,i);if(w)return $P(n,[w]),KP(n,w,!0)}return c&&wn.batchedUpdates(()=>c(_,n,n.item)),_}function kb(n,e){const t={...n.springs};return e&&rr(Ro(e),r=>{Dt.und(r.keys)&&(r=Jm(r)),Dt.obj(r.to)||(r={...r,to:void 0}),JP(t,r,i=>QP(i))}),ZP(n,t),t}function ZP(n,e){uu(e,(t,r)=>{n.springs[r]||(n.springs[r]=t,qy(t,n))})}function QP(n,e){const t=new D6;return t.key=n,e&&qy(t,e),t}function JP(n,e,t){e.keys&&rr(e.keys,r=>{(n[r]||(n[r]=t(r)))._prepareNode(e)})}function $P(n,e){rr(e,t=>{JP(n.springs,t,r=>QP(r,n))})}var Jy=({children:n,...e})=>{const t=X.useContext(q0),r=e.pause||!!t.pause,i=e.immediate||!!t.immediate;e=m6(()=>({pause:r,immediate:i}),[r,i]);const{Provider:s}=q0;return X.createElement(s,{value:e},n)},q0=z6(Jy,{});Jy.Provider=q0.Provider;Jy.Consumer=q0.Consumer;function z6(n,e){return Object.assign(n,X.createContext(e)),n.Provider._context=n,n.Consumer._context=n,n}var H6=()=>{const n=[],e=function(r){d6();const i=[];return rr(n,(s,o)=>{if(Dt.und(r))i.push(s.start());else{const a=t(r,s,o);a&&i.push(s.start(a))}}),i};e.current=n,e.add=function(r){n.includes(r)||n.push(r)},e.delete=function(r){const i=n.indexOf(r);~i&&n.splice(i,1)},e.pause=function(){return rr(n,r=>r.pause(...arguments)),this},e.resume=function(){return rr(n,r=>r.resume(...arguments)),this},e.set=function(r){rr(n,(i,s)=>{const o=Dt.fun(r)?r(s,i):r;o&&i.set(o)})},e.start=function(r){const i=[];return rr(n,(s,o)=>{if(Dt.und(r))i.push(s.start());else{const a=this._getProps(r,s,o);a&&i.push(s.start(a))}}),i},e.stop=function(){return rr(n,r=>r.stop(...arguments)),this},e.update=function(r){return rr(n,(i,s)=>i.update(this._getProps(r,i,s))),this};const t=function(r,i,s){return Dt.fun(r)?r(s,i):r};return e._getProps=t,e};function G6(n,e,t){const r=Dt.fun(e)&&e;r&&!t&&(t=[]);const i=X.useMemo(()=>r||arguments.length==3?H6():void 0,[]),s=X.useRef(0),o=p6(),a=X.useMemo(()=>({ctrls:[],queue:[],flush(S,b){const T=kb(S,b);return s.current>0&&!a.queue.length&&!Object.keys(T).some(P=>!S.springs[P])?fS(S,b):new Promise(P=>{ZP(S,T),a.queue.push(()=>{P(fS(S,b))}),o()})}}),[]),c=X.useRef([...a.ctrls]),u=[],d=Rb(n)||0;X.useMemo(()=>{rr(c.current.slice(n,d),S=>{A6(S,i),S.stop(!0)}),c.current.length=n,m(d,n)},[n]),X.useMemo(()=>{m(0,Math.min(d,n))},t);function m(S,b){for(let T=S;T<b;T++){const C=c.current[T]||(c.current[T]=new B6(null,a.flush)),P=r?r(T,C):e[T];P&&(u[T]=U6(P))}}const g=c.current.map((S,b)=>kb(S,u[b])),y=X.useContext(Jy),_=Rb(y),w=y!==_&&b6(y);OP(()=>{s.current++,a.ctrls=c.current;const{queue:S}=a;S.length&&(a.queue=[],rr(S,b=>b())),rr(c.current,(b,T)=>{i==null||i.add(b),w&&b.start({default:y});const C=u[T];C&&(C6(b,C.ref),b.ref?b.queue.push(C):b.start(C))})}),v6(()=>()=>{rr(a.ctrls,S=>S.stop(!0))});const x=g.map(S=>({...S}));return i?[x,i]:x}function V6(n,e){const t=Dt.fun(n),[[r],i]=G6(1,t?n:[n],t?[]:e);return t||arguments.length==2?[r,i]:r}var W6=class extends qw{constructor(n,e){super(),this.source=n,this.idle=!0,this._active=new Set,this.calc=Xm(...e);const t=this._get(),r=aS(t);jw(this,r.create(t))}advance(n){const e=this._get(),t=this.get();Bl(e,t)||(ka(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&Bb(this._active)&&Hx(this)}_get(){const n=Dt.arr(this.source)?this.source.map(Mo):Ro(Mo(this.source));return this.calc(...n)}_start(){this.idle&&!Bb(this._active)&&(this.idle=!1,rr(Qy(this),n=>{n.done=!1}),el.skipAnimation?(wn.batchedUpdates(()=>this.advance()),Hx(this)):Xy.start(this))}_attach(){let n=1;rr(Ro(this.source),e=>{Gl(e)&&qy(e,this),uS(e)&&(e.idle||this._active.add(e),n=Math.max(n,e.priority+1))}),this.priority=n,this._start()}_detach(){rr(Ro(this.source),n=>{Gl(n)&&IP(n,this)}),this._active.clear(),Hx(this)}eventObserved(n){n.type=="change"?n.idle?this.advance():(this._active.add(n.parent),this._start()):n.type=="idle"?this._active.delete(n.parent):n.type=="priority"&&(this.priority=Ro(this.source).reduce((e,t)=>Math.max(e,(uS(t)?t.priority:0)+1),0))}};function j6(n){return n.idle!==!1}function Bb(n){return!n.size||Array.from(n).every(j6)}function Hx(n){n.idle||(n.idle=!0,rr(Qy(n),e=>{e.done=!0}),Y0(n,{type:"idle",parent:n}))}el.assign({createStringInterpolator:l6,to:(n,e)=>new W6(n,e)});const Kw=parseInt(If.replace(/\D+/g,""));function zb(n,e){if(e===WC)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===z0||e===KS){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let c=0;c<a.count;c++)o.push(c);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(t)if(e===z0)for(let o=1;o<=r;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var Ao=Uint8Array,qc=Uint16Array,dS=Uint32Array,eL=new Ao([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),tL=new Ao([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),X6=new Ao([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),nL=function(n,e){for(var t=new qc(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new dS(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return[t,i]},rL=nL(eL,2),iL=rL[0],Y6=rL[1];iL[28]=258,Y6[258]=28;var q6=nL(tL,0),K6=q6[0],hS=new qc(32768);for(var vr=0;vr<32768;++vr){var Uc=(vr&43690)>>>1|(vr&21845)<<1;Uc=(Uc&52428)>>>2|(Uc&13107)<<2,Uc=(Uc&61680)>>>4|(Uc&3855)<<4,hS[vr]=((Uc&65280)>>>8|(Uc&255)<<8)>>>1}var wm=function(n,e,t){for(var r=n.length,i=0,s=new qc(e);i<r;++i)++s[n[i]-1];var o=new qc(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new qc(1<<e);var c=15-e;for(i=0;i<r;++i)if(n[i])for(var u=i<<4|n[i],d=e-n[i],m=o[n[i]-1]++<<d,g=m|(1<<d)-1;m<=g;++m)a[hS[m]>>>c]=u}else for(a=new qc(r),i=0;i<r;++i)n[i]&&(a[i]=hS[o[n[i]-1]++]>>>15-n[i]);return a},xg=new Ao(288);for(var vr=0;vr<144;++vr)xg[vr]=8;for(var vr=144;vr<256;++vr)xg[vr]=9;for(var vr=256;vr<280;++vr)xg[vr]=7;for(var vr=280;vr<288;++vr)xg[vr]=8;var sL=new Ao(32);for(var vr=0;vr<32;++vr)sL[vr]=5;var Z6=wm(xg,9,1),Q6=wm(sL,5,1),Gx=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},oa=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},Vx=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},J6=function(n){return(n/8|0)+(n&7&&1)},$6=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof qc?qc:n instanceof dS?dS:Ao)(t-e);return r.set(n.subarray(e,t)),r},eV=function(n,e,t){var r=n.length;if(!r||t&&!t.l&&r<5)return e||new Ao(0);var i=!e||t,s=!t||t.i;t||(t={}),e||(e=new Ao(r*3));var o=function(pe){var xe=e.length;if(pe>xe){var Me=new Ao(Math.max(xe*2,pe));Me.set(e),e=Me}},a=t.f||0,c=t.p||0,u=t.b||0,d=t.l,m=t.d,g=t.m,y=t.n,_=r*8;do{if(!d){t.f=a=oa(n,c,1);var w=oa(n,c+1,3);if(c+=3,w)if(w==1)d=Z6,m=Q6,g=9,y=5;else if(w==2){var T=oa(n,c,31)+257,C=oa(n,c+10,15)+4,P=T+oa(n,c+5,31)+1;c+=14;for(var D=new Ao(P),U=new Ao(19),F=0;F<C;++F)U[X6[F]]=oa(n,c+F*3,7);c+=C*3;for(var I=Gx(U),k=(1<<I)-1,Q=wm(U,I,1),F=0;F<P;){var j=Q[oa(n,c,k)];c+=j&15;var x=j>>>4;if(x<16)D[F++]=x;else{var $=0,H=0;for(x==16?(H=3+oa(n,c,3),c+=2,$=D[F-1]):x==17?(H=3+oa(n,c,7),c+=3):x==18&&(H=11+oa(n,c,127),c+=7);H--;)D[F++]=$}}var ie=D.subarray(0,T),re=D.subarray(T);g=Gx(ie),y=Gx(re),d=wm(ie,g,1),m=wm(re,y,1)}else throw"invalid block type";else{var x=J6(c)+4,S=n[x-4]|n[x-3]<<8,b=x+S;if(b>r){if(s)throw"unexpected EOF";break}i&&o(u+S),e.set(n.subarray(x,b),u),t.b=u+=S,t.p=c=b*8;continue}if(c>_){if(s)throw"unexpected EOF";break}}i&&o(u+131072);for(var ue=(1<<g)-1,G=(1<<y)-1,K=c;;K=c){var $=d[Vx(n,c)&ue],W=$>>>4;if(c+=$&15,c>_){if(s)throw"unexpected EOF";break}if(!$)throw"invalid length/literal";if(W<256)e[u++]=W;else if(W==256){K=c,d=null;break}else{var L=W-254;if(W>264){var F=W-257,B=eL[F];L=oa(n,c,(1<<B)-1)+iL[F],c+=B}var ne=m[Vx(n,c)&G],ae=ne>>>4;if(!ne)throw"invalid distance";c+=ne&15;var re=K6[ae];if(ae>3){var B=tL[ae];re+=Vx(n,c)&(1<<B)-1,c+=B}if(c>_){if(s)throw"unexpected EOF";break}i&&o(u+131072);for(var de=u+L;u<de;u+=4)e[u]=e[u-re],e[u+1]=e[u+1-re],e[u+2]=e[u+2-re],e[u+3]=e[u+3-re];u=de}}t.l=d,t.p=K,t.b=u,d&&(a=1,t.m=g,t.d=m,t.n=y)}while(!a);return u==e.length?e:$6(e,0,u)},tV=new Ao(0),nV=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function f0(n,e){return eV((nV(n),n.subarray(2,-4)),e)}var rV=typeof TextDecoder<"u"&&new TextDecoder,iV=0;try{rV.decode(tV,{stream:!0}),iV=1}catch{}const sV=n=>n&&n.isCubeTexture;class oV extends ir{constructor(e,t){var r,i;const s=sV(e),a=((i=s?(r=e.image[0])==null?void 0:r.width:e.image.width)!=null?i:1024)/4,c=Math.floor(Math.log2(a)),u=Math.pow(2,c),d=3*Math.max(u,16*7),m=4*u,g=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/d}`,`#define CUBEUV_TEXEL_HEIGHT ${1/m}`,`#define CUBEUV_MAX_MIP ${c}.0`],y=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,_=g.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${Kw>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,w={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},x=new hg(1,16),S=new ao({uniforms:w,fragmentShader:_,vertexShader:y,side:eo});super(x,S)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var aV=Object.defineProperty,lV=(n,e,t)=>e in n?aV(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,cV=(n,e,t)=>(lV(n,e+"",t),t);class uV{constructor(){cV(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}var fV=Object.defineProperty,dV=(n,e,t)=>e in n?fV(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,nn=(n,e,t)=>(dV(n,typeof e!="symbol"?e+"":e,t),t);const d0=new Hf,Hb=new Hl,hV=Math.cos(70*(Math.PI/180)),Gb=(n,e)=>(n%e+e)%e;let pV=class extends uV{constructor(e,t){super(),nn(this,"object"),nn(this,"domElement"),nn(this,"enabled",!0),nn(this,"target",new oe),nn(this,"minDistance",0),nn(this,"maxDistance",1/0),nn(this,"minZoom",0),nn(this,"maxZoom",1/0),nn(this,"minPolarAngle",0),nn(this,"maxPolarAngle",Math.PI),nn(this,"minAzimuthAngle",-1/0),nn(this,"maxAzimuthAngle",1/0),nn(this,"enableDamping",!1),nn(this,"dampingFactor",.05),nn(this,"enableZoom",!0),nn(this,"zoomSpeed",1),nn(this,"enableRotate",!0),nn(this,"rotateSpeed",1),nn(this,"enablePan",!0),nn(this,"panSpeed",1),nn(this,"screenSpacePanning",!0),nn(this,"keyPanSpeed",7),nn(this,"zoomToCursor",!1),nn(this,"autoRotate",!1),nn(this,"autoRotateSpeed",2),nn(this,"reverseOrbit",!1),nn(this,"reverseHorizontalOrbit",!1),nn(this,"reverseVerticalOrbit",!1),nn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),nn(this,"mouseButtons",{LEFT:sf.ROTATE,MIDDLE:sf.DOLLY,RIGHT:sf.PAN}),nn(this,"touches",{ONE:of.ROTATE,TWO:of.DOLLY_PAN}),nn(this,"target0"),nn(this,"position0"),nn(this,"zoom0"),nn(this,"_domElementKeyEvents",null),nn(this,"getPolarAngle"),nn(this,"getAzimuthalAngle"),nn(this,"setPolarAngle"),nn(this,"setAzimuthalAngle"),nn(this,"getDistance"),nn(this,"getZoomScale"),nn(this,"listenToKeyEvents"),nn(this,"stopListenToKeyEvents"),nn(this,"saveState"),nn(this,"reset"),nn(this,"update"),nn(this,"connect"),nn(this,"dispose"),nn(this,"dollyIn"),nn(this,"dollyOut"),nn(this,"getScale"),nn(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=ce=>{let Ie=Gb(ce,2*Math.PI),Pe=d.phi;Pe<0&&(Pe+=2*Math.PI),Ie<0&&(Ie+=2*Math.PI);let ke=Math.abs(Ie-Pe);2*Math.PI-ke<ke&&(Ie<Pe?Ie+=2*Math.PI:Pe+=2*Math.PI),m.phi=Ie-Pe,r.update()},this.setAzimuthalAngle=ce=>{let Ie=Gb(ce,2*Math.PI),Pe=d.theta;Pe<0&&(Pe+=2*Math.PI),Ie<0&&(Ie+=2*Math.PI);let ke=Math.abs(Ie-Pe);2*Math.PI-ke<ke&&(Ie<Pe?Ie+=2*Math.PI:Pe+=2*Math.PI),m.theta=Ie-Pe,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=ce=>{ce.addEventListener("keydown",We),this._domElementKeyEvents=ce},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",We),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),c=a.NONE},this.update=(()=>{const ce=new oe,Ie=new oe(0,1,0),Pe=new Ai().setFromUnitVectors(e.up,Ie),ke=Pe.clone().invert(),Te=new oe,he=new Ai,ut=2*Math.PI;return function(){const De=r.object.position;Pe.setFromUnitVectors(e.up,Ie),ke.copy(Pe).invert(),ce.copy(De).sub(r.target),ce.applyQuaternion(Pe),d.setFromVector3(ce),r.autoRotate&&c===a.NONE&&H(j()),r.enableDamping?(d.theta+=m.theta*r.dampingFactor,d.phi+=m.phi*r.dampingFactor):(d.theta+=m.theta,d.phi+=m.phi);let at=r.minAzimuthAngle,St=r.maxAzimuthAngle;isFinite(at)&&isFinite(St)&&(at<-Math.PI?at+=ut:at>Math.PI&&(at-=ut),St<-Math.PI?St+=ut:St>Math.PI&&(St-=ut),at<=St?d.theta=Math.max(at,Math.min(St,d.theta)):d.theta=d.theta>(at+St)/2?Math.max(at,d.theta):Math.min(St,d.theta)),d.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,d.phi)),d.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(y,r.dampingFactor):r.target.add(y),r.zoomToCursor&&I||r.object.isOrthographicCamera?d.radius=ne(d.radius):d.radius=ne(d.radius*g),ce.setFromSpherical(d),ce.applyQuaternion(ke),De.copy(r.target).add(ce),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(m.theta*=1-r.dampingFactor,m.phi*=1-r.dampingFactor,y.multiplyScalar(1-r.dampingFactor)):(m.set(0,0,0),y.set(0,0,0));let Et=!1;if(r.zoomToCursor&&I){let Wt=null;if(r.object instanceof Or&&r.object.isPerspectiveCamera){const gn=ce.length();Wt=ne(gn*g);const Yt=gn-Wt;r.object.position.addScaledVector(U,Yt),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const gn=new oe(F.x,F.y,0);gn.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/g)),r.object.updateProjectionMatrix(),Et=!0;const Yt=new oe(F.x,F.y,0);Yt.unproject(r.object),r.object.position.sub(Yt).add(gn),r.object.updateMatrixWorld(),Wt=ce.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;Wt!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(Wt).add(r.object.position):(d0.origin.copy(r.object.position),d0.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(d0.direction))<hV?e.lookAt(r.target):(Hb.setFromNormalAndCoplanarPoint(r.object.up,r.target),d0.intersectPlane(Hb,r.target))))}else r.object instanceof Ya&&r.object.isOrthographicCamera&&(Et=g!==1,Et&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/g)),r.object.updateProjectionMatrix()));return g=1,I=!1,Et||Te.distanceToSquared(r.object.position)>u||8*(1-he.dot(r.object.quaternion))>u?(r.dispatchEvent(i),Te.copy(r.object.position),he.copy(r.object.quaternion),Et=!1,!0):!1}})(),this.connect=ce=>{r.domElement=ce,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",lt),r.domElement.addEventListener("pointerdown",_t),r.domElement.addEventListener("pointercancel",q),r.domElement.addEventListener("wheel",Le)},this.dispose=()=>{var ce,Ie,Pe,ke,Te,he;r.domElement&&(r.domElement.style.touchAction="auto"),(ce=r.domElement)==null||ce.removeEventListener("contextmenu",lt),(Ie=r.domElement)==null||Ie.removeEventListener("pointerdown",_t),(Pe=r.domElement)==null||Pe.removeEventListener("pointercancel",q),(ke=r.domElement)==null||ke.removeEventListener("wheel",Le),(Te=r.domElement)==null||Te.ownerDocument.removeEventListener("pointermove",J),(he=r.domElement)==null||he.ownerDocument.removeEventListener("pointerup",q),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",We)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=a.NONE;const u=1e-6,d=new tS,m=new tS;let g=1;const y=new oe,_=new it,w=new it,x=new it,S=new it,b=new it,T=new it,C=new it,P=new it,D=new it,U=new oe,F=new it;let I=!1;const k=[],Q={};function j(){return 2*Math.PI/60/60*r.autoRotateSpeed}function $(){return Math.pow(.95,r.zoomSpeed)}function H(ce){r.reverseOrbit||r.reverseHorizontalOrbit?m.theta+=ce:m.theta-=ce}function ie(ce){r.reverseOrbit||r.reverseVerticalOrbit?m.phi+=ce:m.phi-=ce}const re=(()=>{const ce=new oe;return function(Pe,ke){ce.setFromMatrixColumn(ke,0),ce.multiplyScalar(-Pe),y.add(ce)}})(),ue=(()=>{const ce=new oe;return function(Pe,ke){r.screenSpacePanning===!0?ce.setFromMatrixColumn(ke,1):(ce.setFromMatrixColumn(ke,0),ce.crossVectors(r.object.up,ce)),ce.multiplyScalar(Pe),y.add(ce)}})(),G=(()=>{const ce=new oe;return function(Pe,ke){const Te=r.domElement;if(Te&&r.object instanceof Or&&r.object.isPerspectiveCamera){const he=r.object.position;ce.copy(he).sub(r.target);let ut=ce.length();ut*=Math.tan(r.object.fov/2*Math.PI/180),re(2*Pe*ut/Te.clientHeight,r.object.matrix),ue(2*ke*ut/Te.clientHeight,r.object.matrix)}else Te&&r.object instanceof Ya&&r.object.isOrthographicCamera?(re(Pe*(r.object.right-r.object.left)/r.object.zoom/Te.clientWidth,r.object.matrix),ue(ke*(r.object.top-r.object.bottom)/r.object.zoom/Te.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function K(ce){r.object instanceof Or&&r.object.isPerspectiveCamera||r.object instanceof Ya&&r.object.isOrthographicCamera?g=ce:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function W(ce){K(g/ce)}function L(ce){K(g*ce)}function B(ce){if(!r.zoomToCursor||!r.domElement)return;I=!0;const Ie=r.domElement.getBoundingClientRect(),Pe=ce.clientX-Ie.left,ke=ce.clientY-Ie.top,Te=Ie.width,he=Ie.height;F.x=Pe/Te*2-1,F.y=-(ke/he)*2+1,U.set(F.x,F.y,1).unproject(r.object).sub(r.object.position).normalize()}function ne(ce){return Math.max(r.minDistance,Math.min(r.maxDistance,ce))}function ae(ce){_.set(ce.clientX,ce.clientY)}function de(ce){B(ce),C.set(ce.clientX,ce.clientY)}function pe(ce){S.set(ce.clientX,ce.clientY)}function xe(ce){w.set(ce.clientX,ce.clientY),x.subVectors(w,_).multiplyScalar(r.rotateSpeed);const Ie=r.domElement;Ie&&(H(2*Math.PI*x.x/Ie.clientHeight),ie(2*Math.PI*x.y/Ie.clientHeight)),_.copy(w),r.update()}function Me(ce){P.set(ce.clientX,ce.clientY),D.subVectors(P,C),D.y>0?W($()):D.y<0&&L($()),C.copy(P),r.update()}function Xe(ce){b.set(ce.clientX,ce.clientY),T.subVectors(b,S).multiplyScalar(r.panSpeed),G(T.x,T.y),S.copy(b),r.update()}function ot(ce){B(ce),ce.deltaY<0?L($()):ce.deltaY>0&&W($()),r.update()}function He(ce){let Ie=!1;switch(ce.code){case r.keys.UP:G(0,r.keyPanSpeed),Ie=!0;break;case r.keys.BOTTOM:G(0,-r.keyPanSpeed),Ie=!0;break;case r.keys.LEFT:G(r.keyPanSpeed,0),Ie=!0;break;case r.keys.RIGHT:G(-r.keyPanSpeed,0),Ie=!0;break}Ie&&(ce.preventDefault(),r.update())}function te(){if(k.length==1)_.set(k[0].pageX,k[0].pageY);else{const ce=.5*(k[0].pageX+k[1].pageX),Ie=.5*(k[0].pageY+k[1].pageY);_.set(ce,Ie)}}function Ye(){if(k.length==1)S.set(k[0].pageX,k[0].pageY);else{const ce=.5*(k[0].pageX+k[1].pageX),Ie=.5*(k[0].pageY+k[1].pageY);S.set(ce,Ie)}}function Re(){const ce=k[0].pageX-k[1].pageX,Ie=k[0].pageY-k[1].pageY,Pe=Math.sqrt(ce*ce+Ie*Ie);C.set(0,Pe)}function je(){r.enableZoom&&Re(),r.enablePan&&Ye()}function Ne(){r.enableZoom&&Re(),r.enableRotate&&te()}function ct(ce){if(k.length==1)w.set(ce.pageX,ce.pageY);else{const Pe=mt(ce),ke=.5*(ce.pageX+Pe.x),Te=.5*(ce.pageY+Pe.y);w.set(ke,Te)}x.subVectors(w,_).multiplyScalar(r.rotateSpeed);const Ie=r.domElement;Ie&&(H(2*Math.PI*x.x/Ie.clientHeight),ie(2*Math.PI*x.y/Ie.clientHeight)),_.copy(w)}function Fe(ce){if(k.length==1)b.set(ce.pageX,ce.pageY);else{const Ie=mt(ce),Pe=.5*(ce.pageX+Ie.x),ke=.5*(ce.pageY+Ie.y);b.set(Pe,ke)}T.subVectors(b,S).multiplyScalar(r.panSpeed),G(T.x,T.y),S.copy(b)}function qe(ce){const Ie=mt(ce),Pe=ce.pageX-Ie.x,ke=ce.pageY-Ie.y,Te=Math.sqrt(Pe*Pe+ke*ke);P.set(0,Te),D.set(0,Math.pow(P.y/C.y,r.zoomSpeed)),W(D.y),C.copy(P)}function nt(ce){r.enableZoom&&qe(ce),r.enablePan&&Fe(ce)}function Ue(ce){r.enableZoom&&qe(ce),r.enableRotate&&ct(ce)}function _t(ce){var Ie,Pe;r.enabled!==!1&&(k.length===0&&((Ie=r.domElement)==null||Ie.ownerDocument.addEventListener("pointermove",J),(Pe=r.domElement)==null||Pe.ownerDocument.addEventListener("pointerup",q)),Mt(ce),ce.pointerType==="touch"?st(ce):ye(ce))}function J(ce){r.enabled!==!1&&(ce.pointerType==="touch"?et(ce):tt(ce))}function q(ce){var Ie,Pe,ke;xt(ce),k.length===0&&((Ie=r.domElement)==null||Ie.releasePointerCapture(ce.pointerId),(Pe=r.domElement)==null||Pe.ownerDocument.removeEventListener("pointermove",J),(ke=r.domElement)==null||ke.ownerDocument.removeEventListener("pointerup",q)),r.dispatchEvent(o),c=a.NONE}function ye(ce){let Ie;switch(ce.button){case 0:Ie=r.mouseButtons.LEFT;break;case 1:Ie=r.mouseButtons.MIDDLE;break;case 2:Ie=r.mouseButtons.RIGHT;break;default:Ie=-1}switch(Ie){case sf.DOLLY:if(r.enableZoom===!1)return;de(ce),c=a.DOLLY;break;case sf.ROTATE:if(ce.ctrlKey||ce.metaKey||ce.shiftKey){if(r.enablePan===!1)return;pe(ce),c=a.PAN}else{if(r.enableRotate===!1)return;ae(ce),c=a.ROTATE}break;case sf.PAN:if(ce.ctrlKey||ce.metaKey||ce.shiftKey){if(r.enableRotate===!1)return;ae(ce),c=a.ROTATE}else{if(r.enablePan===!1)return;pe(ce),c=a.PAN}break;default:c=a.NONE}c!==a.NONE&&r.dispatchEvent(s)}function tt(ce){if(r.enabled!==!1)switch(c){case a.ROTATE:if(r.enableRotate===!1)return;xe(ce);break;case a.DOLLY:if(r.enableZoom===!1)return;Me(ce);break;case a.PAN:if(r.enablePan===!1)return;Xe(ce);break}}function Le(ce){r.enabled===!1||r.enableZoom===!1||c!==a.NONE&&c!==a.ROTATE||(ce.preventDefault(),r.dispatchEvent(s),ot(ce),r.dispatchEvent(o))}function We(ce){r.enabled===!1||r.enablePan===!1||He(ce)}function st(ce){switch(Ge(ce),k.length){case 1:switch(r.touches.ONE){case of.ROTATE:if(r.enableRotate===!1)return;te(),c=a.TOUCH_ROTATE;break;case of.PAN:if(r.enablePan===!1)return;Ye(),c=a.TOUCH_PAN;break;default:c=a.NONE}break;case 2:switch(r.touches.TWO){case of.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;je(),c=a.TOUCH_DOLLY_PAN;break;case of.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Ne(),c=a.TOUCH_DOLLY_ROTATE;break;default:c=a.NONE}break;default:c=a.NONE}c!==a.NONE&&r.dispatchEvent(s)}function et(ce){switch(Ge(ce),c){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;ct(ce),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;Fe(ce),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;nt(ce),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Ue(ce),r.update();break;default:c=a.NONE}}function lt(ce){r.enabled!==!1&&ce.preventDefault()}function Mt(ce){k.push(ce)}function xt(ce){delete Q[ce.pointerId];for(let Ie=0;Ie<k.length;Ie++)if(k[Ie].pointerId==ce.pointerId){k.splice(Ie,1);return}}function Ge(ce){let Ie=Q[ce.pointerId];Ie===void 0&&(Ie=new it,Q[ce.pointerId]=Ie),Ie.set(ce.pageX,ce.pageY)}function mt(ce){const Ie=ce.pointerId===k[0].pointerId?k[1]:k[0];return Q[Ie.pointerId]}this.dollyIn=(ce=$())=>{L(ce),r.update()},this.dollyOut=(ce=$())=>{W(ce),r.update()},this.getScale=()=>g,this.setScale=ce=>{K(ce),r.update()},this.getZoomScale=()=>$(),t!==void 0&&this.connect(t),this.update()}};function K0(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,r=n.length;t<r;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const vf="srgb",Wl="srgb-linear",Vb=3001,mV=3e3;class oL extends Qi{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new xV(t)}),this.register(function(t){return new SV(t)}),this.register(function(t){return new PV(t)}),this.register(function(t){return new LV(t)}),this.register(function(t){return new IV(t)}),this.register(function(t){return new EV(t)}),this.register(function(t){return new MV(t)}),this.register(function(t){return new TV(t)}),this.register(function(t){return new bV(t)}),this.register(function(t){return new _V(t)}),this.register(function(t){return new AV(t)}),this.register(function(t){return new wV(t)}),this.register(function(t){return new RV(t)}),this.register(function(t){return new CV(t)}),this.register(function(t){return new vV(t)}),this.register(function(t){return new NV(t)}),this.register(function(t){return new DV(t)})}load(e,t,r,i){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const u=Jc.extractUrlBase(e);o=Jc.resolveURL(u,this.path)}else o=Jc.extractUrlBase(e);this.manager.itemStart(e);const a=function(u){i?i(u):console.error(u),s.manager.itemError(e),s.manager.itemEnd(e)},c=new gs(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(u){try{s.parse(u,o,function(d){t(d),s.manager.itemEnd(e)},a)}catch(d){a(d)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(K0(new Uint8Array(e.slice(0,4)))===aL){try{o[An.KHR_BINARY_GLTF]=new UV(e)}catch(d){i&&i(d);return}s=JSON.parse(o[An.KHR_BINARY_GLTF].content)}else s=JSON.parse(K0(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new qV(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const d=this.pluginCallbacks[u](c);d.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[d.name]=d,o[d.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const d=s.extensionsUsed[u],m=s.extensionsRequired||[];switch(d){case An.KHR_MATERIALS_UNLIT:o[d]=new yV;break;case An.KHR_DRACO_MESH_COMPRESSION:o[d]=new OV(s,this.dracoLoader);break;case An.KHR_TEXTURE_TRANSFORM:o[d]=new FV;break;case An.KHR_MESH_QUANTIZATION:o[d]=new kV;break;default:m.indexOf(d)>=0&&a[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(r,i)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,t,i,s)})}}function gV(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const An={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class vV{constructor(e){this.parser=e,this.name=An.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const s=t.json,c=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let u;const d=new Rt(16777215);c.color!==void 0&&d.setRGB(c.color[0],c.color[1],c.color[2],Wl);const m=c.range!==void 0?c.range:0;switch(c.type){case"directional":u=new Mw(d),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new Ew(d),u.distance=m;break;case"spot":u=new ww(d),u.distance=m,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,u.angle=c.spot.outerConeAngle,u.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return u.position.set(0,0,0),u.decay=2,zl(u,c),c.intensity!==void 0&&(u.intensity=c.intensity),u.name=t.createUniqueName(c.name||"light_"+e),i=Promise.resolve(u),t.cache.add(r,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(c){return r._getNodeRef(t.cache,a,c)})}}class yV{constructor(){this.name=An.KHR_MATERIALS_UNLIT}getMaterialType(){return Ki}extendParams(e,t,r){const i=[];e.color=new Rt(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],Wl),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,vf))}return Promise.all(i)}}class _V{constructor(e){this.parser=e,this.name=An.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class xV{constructor(e){this.parser=e,this.name=An.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Po}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new it(a,a)}return Promise.all(s)}}class SV{constructor(e){this.parser=e,this.name=An.KHR_MATERIALS_DISPERSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Po}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class wV{constructor(e){this.parser=e,this.name=An.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Po}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class EV{constructor(e){this.parser=e,this.name=An.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Po}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Rt(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],Wl)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture,vf)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class MV{constructor(e){this.parser=e,this.name=An.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Po}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class TV{constructor(e){this.parser=e,this.name=An.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Po}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Rt().setRGB(a[0],a[1],a[2],Wl),Promise.all(s)}}class bV{constructor(e){this.parser=e,this.name=An.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Po}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class AV{constructor(e){this.parser=e,this.name=An.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Po}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Rt().setRGB(a[0],a[1],a[2],Wl),o.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture,vf)),Promise.all(s)}}class CV{constructor(e){this.parser=e,this.name=An.EXT_MATERIALS_BUMP}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Po}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(r.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class RV{constructor(e){this.parser=e,this.name=An.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Po}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(r.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class PV{constructor(e){this.parser=e,this.name=An.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class LV{constructor(e){this.parser=e,this.name=An.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let c=r.textureLoader;if(a.uri){const u=r.options.manager.getHandler(a.uri);u!==null&&(c=u)}return this.detectSupport().then(function(u){if(u)return r.loadTextureImage(e,o.source,c);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class IV{constructor(e){this.parser=e,this.name=An.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let c=r.textureLoader;if(a.uri){const u=r.options.manager.getHandler(a.uri);u!==null&&(c=u)}return this.detectSupport().then(function(u){if(u)return r.loadTextureImage(e,o.source,c);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class NV{constructor(e){this.name=An.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const c=i.byteOffset||0,u=i.byteLength||0,d=i.count,m=i.byteStride,g=new Uint8Array(a,c,u);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(d,m,g,i.mode,i.filter).then(function(y){return y.buffer}):o.ready.then(function(){const y=new ArrayBuffer(d*m);return o.decodeGltfBuffer(new Uint8Array(y),d,m,g,i.mode,i.filter),y})})}else return null}}class DV{constructor(e){this.name=An.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=t.meshes[r.mesh];for(const u of i.primitives)if(u.mode!==wo.TRIANGLES&&u.mode!==wo.TRIANGLE_STRIP&&u.mode!==wo.TRIANGLE_FAN&&u.mode!==void 0)return null;const o=r.extensions[this.name].attributes,a=[],c={};for(const u in o)a.push(this.parser.getDependency("accessor",o[u]).then(d=>(c[u]=d,c[u])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(u=>{const d=u.pop(),m=d.isGroup?d.children:[d],g=u[0].count,y=[];for(const _ of m){const w=new sn,x=new oe,S=new Ai,b=new oe(1,1,1),T=new lw(_.geometry,_.material,g);for(let C=0;C<g;C++)c.TRANSLATION&&x.fromBufferAttribute(c.TRANSLATION,C),c.ROTATION&&S.fromBufferAttribute(c.ROTATION,C),c.SCALE&&b.fromBufferAttribute(c.SCALE,C),T.setMatrixAt(C,w.compose(x,S,b));for(const C in c)if(C==="_COLOR_0"){const P=c[C];T.instanceColor=new lu(P.array,P.itemSize,P.normalized)}else C!=="TRANSLATION"&&C!=="ROTATION"&&C!=="SCALE"&&_.geometry.setAttribute(C,c[C]);Ln.prototype.copy.call(T,_),this.parser.assignFinalMaterial(T),y.push(T)}return d.isGroup?(d.clear(),d.add(...y),d):y[0]}))}}const aL="glTF",sm=12,Wb={JSON:1313821514,BIN:5130562};class UV{constructor(e){this.name=An.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,sm);if(this.header={magic:K0(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==aL)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-sm,i=new DataView(e,sm);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===Wb.JSON){const c=new Uint8Array(e,sm+s,o);this.content=K0(c)}else if(a===Wb.BIN){const c=sm+s;this.body=e.slice(c,c+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class OV{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=An.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},c={},u={};for(const d in o){const m=pS[d]||d.toLowerCase();a[m]=o[d]}for(const d in e.attributes){const m=pS[d]||d.toLowerCase();if(o[d]!==void 0){const g=r.accessors[e.attributes[d]],y=yh[g.componentType];u[m]=y.name,c[m]=g.normalized===!0}}return t.getDependency("bufferView",s).then(function(d){return new Promise(function(m,g){i.decodeDracoFile(d,function(y){for(const _ in y.attributes){const w=y.attributes[_],x=c[_];x!==void 0&&(w.normalized=x)}m(y)},a,u,Wl,g)})})}}class FV{constructor(){this.name=An.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class kV{constructor(){this.name=An.KHR_MESH_QUANTIZATION}}class lL extends Yh{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=r[s+o];return t}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=a*2,u=a*3,d=i-t,m=(r-t)/d,g=m*m,y=g*m,_=e*u,w=_-u,x=-2*y+3*g,S=y-g,b=1-x,T=S-g+m;for(let C=0;C!==a;C++){const P=o[w+C+a],D=o[w+C+c]*d,U=o[_+C+a],F=o[_+C]*d;s[C]=b*P+T*D+x*U+S*F}return s}}const BV=new Ai;class zV extends lL{interpolate_(e,t,r,i){const s=super.interpolate_(e,t,r,i);return BV.fromArray(s).normalize().toArray(s),s}}const wo={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},yh={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},jb={9728:Dr,9729:Pn,9984:Lm,9985:dy,9986:ph,9987:$a},Xb={33071:gr,33648:Ih,10497:ou},Wx={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},pS={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...Kw>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Oc={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},HV={CUBICSPLINE:void 0,LINEAR:Df,STEP:Nh},jx={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function GV(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new mg({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Qa})),n.DefaultMaterial}function nf(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function zl(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function VV(n,e,t){let r=!1,i=!1,s=!1;for(let u=0,d=e.length;u<d;u++){const m=e[u];if(m.POSITION!==void 0&&(r=!0),m.NORMAL!==void 0&&(i=!0),m.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(n);const o=[],a=[],c=[];for(let u=0,d=e.length;u<d;u++){const m=e[u];if(r){const g=m.POSITION!==void 0?t.getDependency("accessor",m.POSITION):n.attributes.position;o.push(g)}if(i){const g=m.NORMAL!==void 0?t.getDependency("accessor",m.NORMAL):n.attributes.normal;a.push(g)}if(s){const g=m.COLOR_0!==void 0?t.getDependency("accessor",m.COLOR_0):n.attributes.color;c.push(g)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(c)]).then(function(u){const d=u[0],m=u[1],g=u[2];return r&&(n.morphAttributes.position=d),i&&(n.morphAttributes.normal=m),s&&(n.morphAttributes.color=g),n.morphTargetsRelative=!0,n})}function WV(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function jV(n){let e;const t=n.extensions&&n.extensions[An.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+Xx(t.attributes):e=n.indices+":"+Xx(n.attributes)+":"+n.mode,n.targets!==void 0)for(let r=0,i=n.targets.length;r<i;r++)e+=":"+Xx(n.targets[r]);return e}function Xx(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function mS(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function XV(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const YV=new sn;class qV{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new gV,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new XR(this.options.manager):this.textureLoader=new $R(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new gs(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};return nf(s,a,i),zl(a,i),Promise.all(r._invokeAll(function(c){return c.afterRoot&&c.afterRoot(a)})).then(function(){for(const c of a.scenes)c.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i].joints;for(let a=0,c=o.length;a<c;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone(),s=(o,a)=>{const c=this.associations.get(o);c!=null&&this.associations.set(a,c);for(const[u,d]of o.children.entries())s(d,a.children[u])};return s(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[An.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(Jc.resolveURL(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=Wx[i.type],a=yh[i.componentType],c=i.normalized===!0,u=new a(i.count*o);return Promise.resolve(new Xn(u,o,c))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],c=Wx[i.type],u=yh[i.componentType],d=u.BYTES_PER_ELEMENT,m=d*c,g=i.byteOffset||0,y=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,_=i.normalized===!0;let w,x;if(y&&y!==m){const S=Math.floor(g/y),b="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+S+":"+i.count;let T=t.cache.get(b);T||(w=new u(a,S*y,i.count*y/d),T=new ug(w,y/d),t.cache.add(b,T)),x=new au(T,c,g%y/d,_)}else a===null?w=new u(i.count*c):w=new u(a,g,i.count*c),x=new Xn(w,c,_);if(i.sparse!==void 0){const S=Wx.SCALAR,b=yh[i.sparse.indices.componentType],T=i.sparse.indices.byteOffset||0,C=i.sparse.values.byteOffset||0,P=new b(o[1],T,i.sparse.count*S),D=new u(o[2],C,i.sparse.count*c);a!==null&&(x=new Xn(x.array.slice(),x.itemSize,x.normalized));for(let U=0,F=P.length;U<F;U++){const I=P[U];if(x.setX(I,D[U*c]),c>=2&&x.setY(I,D[U*c+1]),c>=3&&x.setZ(I,D[U*c+2]),c>=4&&x.setW(I,D[U*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return x})}loadTexture(e){const t=this.json,r=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const c=r.manager.getHandler(o.uri);c!==null&&(a=c)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,r){const i=this,s=this.json,o=s.textures[e],a=s.images[t],c=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[c])return this.textureCache[c];const u=this.loadImageSource(t,r).then(function(d){d.flipY=!1,d.name=o.name||a.name||"",d.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(d.name=a.uri);const g=(s.samplers||{})[o.sampler]||{};return d.magFilter=jb[g.magFilter]||Pn,d.minFilter=jb[g.minFilter]||$a,d.wrapS=Xb[g.wrapS]||ou,d.wrapT=Xb[g.wrapT]||ou,i.associations.set(d,{textures:e}),d}).catch(function(){return null});return this.textureCache[c]=u,u}loadImageSource(e,t){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(m=>m.clone());const o=i.images[e],a=self.URL||self.webkitURL;let c=o.uri||"",u=!1;if(o.bufferView!==void 0)c=r.getDependency("bufferView",o.bufferView).then(function(m){u=!0;const g=new Blob([m],{type:o.mimeType});return c=a.createObjectURL(g),c});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(c).then(function(m){return new Promise(function(g,y){let _=g;t.isImageBitmapLoader===!0&&(_=function(w){const x=new jn(w);x.needsUpdate=!0,g(x)}),t.load(Jc.resolveURL(m,s.path),_,void 0,y)})}).then(function(m){return u===!0&&a.revokeObjectURL(c),zl(m,o),m.userData.mimeType=o.mimeType||XV(o.uri),m}).catch(function(m){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),m});return this.sourceCache[e]=d,d}assignTexture(e,t,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(o=o.clone(),o.channel=r.texCoord),s.extensions[An.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[An.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const c=s.associations.get(o);o=s.extensions[An.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,c)}}return i!==void 0&&(typeof i=="number"&&(i=i===Vb?vf:Wl),"colorSpace"in o?o.colorSpace=i:o.encoding=i===vf?Vb:mV),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let c=this.cache.get(a);c||(c=new by,mi.prototype.copy.call(c,r),c.color.copy(r.color),c.map=r.map,c.sizeAttenuation=!1,this.cache.add(a,c)),r=c}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let c=this.cache.get(a);c||(c=new Zi,mi.prototype.copy.call(c,r),c.color.copy(r.color),c.map=r.map,this.cache.add(a,c)),r=c}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let c=this.cache.get(a);c||(c=r.clone(),s&&(c.vertexColors=!0),o&&(c.flatShading=!0),i&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(a,c),this.associations.set(c,this.associations.get(r))),r=c}e.material=r}getMaterialType(){return mg}loadMaterial(e){const t=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},c=s.extensions||{},u=[];if(c[An.KHR_MATERIALS_UNLIT]){const m=i[An.KHR_MATERIALS_UNLIT];o=m.getMaterialType(),u.push(m.extendParams(a,s,t))}else{const m=s.pbrMetallicRoughness||{};if(a.color=new Rt(1,1,1),a.opacity=1,Array.isArray(m.baseColorFactor)){const g=m.baseColorFactor;a.color.setRGB(g[0],g[1],g[2],Wl),a.opacity=g[3]}m.baseColorTexture!==void 0&&u.push(t.assignTexture(a,"map",m.baseColorTexture,vf)),a.metalness=m.metallicFactor!==void 0?m.metallicFactor:1,a.roughness=m.roughnessFactor!==void 0?m.roughnessFactor:1,m.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(a,"metalnessMap",m.metallicRoughnessTexture)),u.push(t.assignTexture(a,"roughnessMap",m.metallicRoughnessTexture))),o=this._invokeOne(function(g){return g.getMaterialType&&g.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(g){return g.extendMaterialParams&&g.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=eo);const d=s.alphaMode||jx.OPAQUE;if(d===jx.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,d===jx.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Ki&&(u.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new it(1,1),s.normalTexture.scale!==void 0)){const m=s.normalTexture.scale;a.normalScale.set(m,m)}if(s.occlusionTexture!==void 0&&o!==Ki&&(u.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Ki){const m=s.emissiveFactor;a.emissive=new Rt().setRGB(m[0],m[1],m[2],Wl)}return s.emissiveTexture!==void 0&&o!==Ki&&u.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,vf)),Promise.all(u).then(function(){const m=new o(a);return s.name&&(m.name=s.name),zl(m,s),t.associations.set(m,{materials:e}),s.extensions&&nf(i,m,s),m})}createUniqueName(e){const t=Dn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[An.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(c){return Yb(c,a,t)})}const o=[];for(let a=0,c=e.length;a<c;a++){const u=e[a],d=jV(u),m=i[d];if(m)o.push(m.promise);else{let g;u.extensions&&u.extensions[An.KHR_DRACO_MESH_COMPRESSION]?g=s(u):g=Yb(new En,u,t),i[d]={primitive:u,promise:g},o.push(g)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let c=0,u=o.length;c<u;c++){const d=o[c].material===void 0?GV(this.cache):this.getDependency("material",o[c].material);a.push(d)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(c){const u=c.slice(0,c.length-1),d=c[c.length-1],m=[];for(let y=0,_=d.length;y<_;y++){const w=d[y],x=o[y];let S;const b=u[y];if(x.mode===wo.TRIANGLES||x.mode===wo.TRIANGLE_STRIP||x.mode===wo.TRIANGLE_FAN||x.mode===void 0)S=s.isSkinnedMesh===!0?new aw(w,b):new ir(w,b),S.isSkinnedMesh===!0&&S.normalizeSkinWeights(),x.mode===wo.TRIANGLE_STRIP?S.geometry=zb(S.geometry,KS):x.mode===wo.TRIANGLE_FAN&&(S.geometry=zb(S.geometry,z0));else if(x.mode===wo.LINES)S=new va(w,b);else if(x.mode===wo.LINE_STRIP)S=new Yl(w,b);else if(x.mode===wo.LINE_LOOP)S=new cw(w,b);else if(x.mode===wo.POINTS)S=new uw(w,b);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+x.mode);Object.keys(S.geometry.morphAttributes).length>0&&WV(S,s),S.name=t.createUniqueName(s.name||"mesh_"+e),zl(S,s),x.extensions&&nf(i,S,x),t.assignFinalMaterial(S),m.push(S)}for(let y=0,_=m.length;y<_;y++)t.associations.set(m[y],{meshes:e,primitives:y});if(m.length===1)return s.extensions&&nf(i,m[0],s),m[0];const g=new Co;s.extensions&&nf(i,g,s),t.associations.set(g,{meshes:e});for(let y=0,_=m.length;y<_;y++)g.add(m[y]);return g})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new Or(nR.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new Ya(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),zl(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r=[];for(let i=0,s=t.joints.length;i<s;i++)r.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",t.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const s=i.pop(),o=i,a=[],c=[];for(let u=0,d=o.length;u<d;u++){const m=o[u];if(m){a.push(m);const g=new sn;s!==null&&g.fromArray(s.array,u*16),c.push(g)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}return new fg(a,c)})}loadAnimation(e){const t=this.json,r=this,i=t.animations[e],s=i.name?i.name:"animation_"+e,o=[],a=[],c=[],u=[],d=[];for(let m=0,g=i.channels.length;m<g;m++){const y=i.channels[m],_=i.samplers[y.sampler],w=y.target,x=w.node,S=i.parameters!==void 0?i.parameters[_.input]:_.input,b=i.parameters!==void 0?i.parameters[_.output]:_.output;w.node!==void 0&&(o.push(this.getDependency("node",x)),a.push(this.getDependency("accessor",S)),c.push(this.getDependency("accessor",b)),u.push(_),d.push(w))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(c),Promise.all(u),Promise.all(d)]).then(function(m){const g=m[0],y=m[1],_=m[2],w=m[3],x=m[4],S=[];for(let b=0,T=g.length;b<T;b++){const C=g[b],P=y[b],D=_[b],U=w[b],F=x[b];if(C===void 0)continue;C.updateMatrix&&C.updateMatrix();const I=r._createAnimationTracks(C,P,D,U,F);if(I)for(let k=0;k<I.length;k++)S.push(I[k])}return new Oh(s,void 0,S)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let c=0,u=i.weights.length;c<u;c++)a.morphTargetInfluences[c]=i.weights[c]}),o})}loadNode(e){const t=this.json,r=this,i=t.nodes[e],s=r._loadNodeShallow(e),o=[],a=i.children||[];for(let u=0,d=a.length;u<d;u++)o.push(r.getDependency("node",a[u]));const c=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([s,Promise.all(o),c]).then(function(u){const d=u[0],m=u[1],g=u[2];g!==null&&d.traverse(function(y){y.isSkinnedMesh&&y.bind(g,YV)});for(let y=0,_=m.length;y<_;y++)d.add(m[y]);return d})}_loadNodeShallow(e){const t=this.json,r=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"",a=[],c=i._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return c&&a.push(c),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(u){return i._getNodeRef(i.cameraCache,s.camera,u)})),i._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){a.push(u)}),this.nodeCache[e]=Promise.all(a).then(function(u){let d;if(s.isBone===!0?d=new Ty:u.length>1?d=new Co:u.length===1?d=u[0]:d=new Ln,d!==u[0])for(let m=0,g=u.length;m<g;m++)d.add(u[m]);if(s.name&&(d.userData.name=s.name,d.name=o),zl(d,s),s.extensions&&nf(r,d,s),s.matrix!==void 0){const m=new sn;m.fromArray(s.matrix),d.applyMatrix4(m)}else s.translation!==void 0&&d.position.fromArray(s.translation),s.rotation!==void 0&&d.quaternion.fromArray(s.rotation),s.scale!==void 0&&d.scale.fromArray(s.scale);return i.associations.has(d)||i.associations.set(d,{}),i.associations.get(d).nodes=e,d}),this.nodeCache[e]}loadScene(e){const t=this.extensions,r=this.json.scenes[e],i=this,s=new Co;r.name&&(s.name=i.createUniqueName(r.name)),zl(s,r),r.extensions&&nf(t,s,r);const o=r.nodes||[],a=[];for(let c=0,u=o.length;c<u;c++)a.push(i.getDependency("node",o[c]));return Promise.all(a).then(function(c){for(let d=0,m=c.length;d<m;d++)s.add(c[d]);const u=d=>{const m=new Map;for(const[g,y]of i.associations)(g instanceof mi||g instanceof jn)&&m.set(g,y);return d.traverse(g=>{const y=i.associations.get(g);y!=null&&m.set(g,y)}),m};return i.associations=u(s),s})}_createAnimationTracks(e,t,r,i,s){const o=[],a=e.name?e.name:e.uuid,c=[];Oc[s.path]===Oc.weights?e.traverse(function(g){g.morphTargetInfluences&&c.push(g.name?g.name:g.uuid)}):c.push(a);let u;switch(Oc[s.path]){case Oc.weights:u=Of;break;case Oc.rotation:u=cu;break;case Oc.position:case Oc.scale:u=Ff;break;default:switch(r.itemSize){case 1:u=Of;break;case 2:case 3:default:u=Ff;break}break}const d=i.interpolation!==void 0?HV[i.interpolation]:Df,m=this._getArrayFromAccessor(r);for(let g=0,y=c.length;g<y;g++){const _=new u(c[g]+"."+Oc[s.path],t.array,m,d);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(_),o.push(_)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const r=mS(t.constructor),i=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)i[s]=t[s]*r;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(r){const i=this instanceof cu?zV:lL;return new i(this.times,this.values,this.getValueSize()/3,r)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function KV(n,e,t){const r=e.attributes,i=new Us;if(r.POSITION!==void 0){const a=t.json.accessors[r.POSITION],c=a.min,u=a.max;if(c!==void 0&&u!==void 0){if(i.set(new oe(c[0],c[1],c[2]),new oe(u[0],u[1],u[2])),a.normalized){const d=mS(yh[a.componentType]);i.min.multiplyScalar(d),i.max.multiplyScalar(d)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new oe,c=new oe;for(let u=0,d=s.length;u<d;u++){const m=s[u];if(m.POSITION!==void 0){const g=t.json.accessors[m.POSITION],y=g.min,_=g.max;if(y!==void 0&&_!==void 0){if(c.setX(Math.max(Math.abs(y[0]),Math.abs(_[0]))),c.setY(Math.max(Math.abs(y[1]),Math.abs(_[1]))),c.setZ(Math.max(Math.abs(y[2]),Math.abs(_[2]))),g.normalized){const w=mS(yh[g.componentType]);c.multiplyScalar(w)}a.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}n.boundingBox=i;const o=new Os;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=o}function Yb(n,e,t){const r=e.attributes,i=[];function s(o,a){return t.getDependency("accessor",o).then(function(c){n.setAttribute(a,c)})}for(const o in r){const a=pS[o]||o.toLowerCase();a in n.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});i.push(o)}return zl(n,e),KV(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?VV(n,e.targets,t):n})}var ZV=Object.defineProperty,QV=(n,e,t)=>e in n?ZV(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Tr=(n,e,t)=>(QV(n,typeof e!="symbol"?e+"":e,t),t);const Nr={ComponentState:{DEFAULT:"default",TOUCHED:"touched",PRESSED:"pressed"},ComponentProperty:{BUTTON:"button",X_AXIS:"xAxis",Y_AXIS:"yAxis",STATE:"state"},ComponentType:{TOUCHPAD:"touchpad"},ButtonTouchThreshold:.05,AxisTouchThreshold:.1,VisualResponseProperty:{TRANSFORM:"transform",VISIBILITY:"visibility"}};async function cL(n){const e=await fetch(n);if(e.ok)return e.json();throw new Error(e.statusText)}async function JV(n){if(!n)throw new Error("No basePath supplied");return await cL(`${n}/profilesList.json`)}async function $V(n,e,t=null,r=!0){if(!n)throw new Error("No xrInputSource supplied");if(!e)throw new Error("No basePath supplied");const i=await JV(e);let s;if(n.profiles.some(c=>{const u=i[c];return u&&(s={profileId:c,profilePath:`${e}/${u.path}`,deprecated:!!u.deprecated}),!!s}),!s){if(!t)throw new Error("No matching profile name found");const c=i[t];if(!c)throw new Error(`No matching profile name found and default profile "${t}" missing.`);s={profileId:t,profilePath:`${e}/${c.path}`,deprecated:!!c.deprecated}}const o=await cL(s.profilePath);let a;if(r){let c;if(n.handedness==="any"?c=o.layouts[Object.keys(o.layouts)[0]]:c=o.layouts[n.handedness],!c)throw new Error(`No matching handedness, ${n.handedness}, in profile ${s.profileId}`);c.assetPath&&(a=s.profilePath.replace("profile.json",c.assetPath))}return{profile:o,assetPath:a}}const e8={xAxis:0,yAxis:0,button:0,state:Nr.ComponentState.DEFAULT};function t8(n=0,e=0){let t=n,r=e;if(Math.sqrt(n*n+e*e)>1){const o=Math.atan2(e,n);t=Math.cos(o),r=Math.sin(o)}return{normalizedXAxis:t*.5+.5,normalizedYAxis:r*.5+.5}}class n8{constructor(e){Tr(this,"value"),Tr(this,"componentProperty"),Tr(this,"states"),Tr(this,"valueNodeName"),Tr(this,"valueNodeProperty"),Tr(this,"minNodeName"),Tr(this,"maxNodeName"),Tr(this,"valueNode"),Tr(this,"minNode"),Tr(this,"maxNode"),this.componentProperty=e.componentProperty,this.states=e.states,this.valueNodeName=e.valueNodeName,this.valueNodeProperty=e.valueNodeProperty,this.valueNodeProperty===Nr.VisualResponseProperty.TRANSFORM&&(this.minNodeName=e.minNodeName,this.maxNodeName=e.maxNodeName),this.value=0,this.updateFromComponent(e8)}updateFromComponent({xAxis:e,yAxis:t,button:r,state:i}){const{normalizedXAxis:s,normalizedYAxis:o}=t8(e,t);switch(this.componentProperty){case Nr.ComponentProperty.X_AXIS:this.value=this.states.includes(i)?s:.5;break;case Nr.ComponentProperty.Y_AXIS:this.value=this.states.includes(i)?o:.5;break;case Nr.ComponentProperty.BUTTON:this.value=this.states.includes(i)&&r?r:0;break;case Nr.ComponentProperty.STATE:this.valueNodeProperty===Nr.VisualResponseProperty.VISIBILITY?this.value=this.states.includes(i):this.value=this.states.includes(i)?1:0;break;default:throw new Error(`Unexpected visualResponse componentProperty ${this.componentProperty}`)}}}class r8{constructor(e,t){if(Tr(this,"id"),Tr(this,"values"),Tr(this,"type"),Tr(this,"gamepadIndices"),Tr(this,"rootNodeName"),Tr(this,"visualResponses"),Tr(this,"touchPointNodeName"),Tr(this,"touchPointNode"),!e||!t||!t.visualResponses||!t.gamepadIndices||Object.keys(t.gamepadIndices).length===0)throw new Error("Invalid arguments supplied");this.id=e,this.type=t.type,this.rootNodeName=t.rootNodeName,this.touchPointNodeName=t.touchPointNodeName,this.visualResponses={},Object.keys(t.visualResponses).forEach(r=>{const i=new n8(t.visualResponses[r]);this.visualResponses[r]=i}),this.gamepadIndices=Object.assign({},t.gamepadIndices),this.values={state:Nr.ComponentState.DEFAULT,button:this.gamepadIndices.button!==void 0?0:void 0,xAxis:this.gamepadIndices.xAxis!==void 0?0:void 0,yAxis:this.gamepadIndices.yAxis!==void 0?0:void 0}}get data(){return{id:this.id,...this.values}}updateFromGamepad(e){if(this.values.state=Nr.ComponentState.DEFAULT,this.gamepadIndices.button!==void 0&&e.buttons.length>this.gamepadIndices.button){const t=e.buttons[this.gamepadIndices.button];this.values.button=t.value,this.values.button=this.values.button<0?0:this.values.button,this.values.button=this.values.button>1?1:this.values.button,t.pressed||this.values.button===1?this.values.state=Nr.ComponentState.PRESSED:(t.touched||this.values.button>Nr.ButtonTouchThreshold)&&(this.values.state=Nr.ComponentState.TOUCHED)}this.gamepadIndices.xAxis!==void 0&&e.axes.length>this.gamepadIndices.xAxis&&(this.values.xAxis=e.axes[this.gamepadIndices.xAxis],this.values.xAxis=this.values.xAxis<-1?-1:this.values.xAxis,this.values.xAxis=this.values.xAxis>1?1:this.values.xAxis,this.values.state===Nr.ComponentState.DEFAULT&&Math.abs(this.values.xAxis)>Nr.AxisTouchThreshold&&(this.values.state=Nr.ComponentState.TOUCHED)),this.gamepadIndices.yAxis!==void 0&&e.axes.length>this.gamepadIndices.yAxis&&(this.values.yAxis=e.axes[this.gamepadIndices.yAxis],this.values.yAxis=this.values.yAxis<-1?-1:this.values.yAxis,this.values.yAxis=this.values.yAxis>1?1:this.values.yAxis,this.values.state===Nr.ComponentState.DEFAULT&&Math.abs(this.values.yAxis)>Nr.AxisTouchThreshold&&(this.values.state=Nr.ComponentState.TOUCHED)),Object.values(this.visualResponses).forEach(t=>{t.updateFromComponent(this.values)})}}class i8{constructor(e,t,r){if(Tr(this,"xrInputSource"),Tr(this,"assetUrl"),Tr(this,"layoutDescription"),Tr(this,"id"),Tr(this,"components"),!e)throw new Error("No xrInputSource supplied");if(!t)throw new Error("No profile supplied");if(!t.layouts[e.handedness])throw new Error("No layout for "+e.handedness+" handedness");this.xrInputSource=e,this.assetUrl=r,this.id=t.profileId,this.layoutDescription=t.layouts[e.handedness],this.components={},Object.keys(this.layoutDescription.components).forEach(i=>{const s=this.layoutDescription.components[i];this.components[i]=new r8(i,s)}),this.updateFromGamepad()}get gripSpace(){return this.xrInputSource.gripSpace}get targetRaySpace(){return this.xrInputSource.targetRaySpace}get data(){const e=[];return Object.values(this.components).forEach(t=>{e.push(t.data)}),e}updateFromGamepad(){Object.values(this.components).forEach(e=>{e.updateFromGamepad(this.xrInputSource.gamepad)})}}class s8 extends xw{constructor(e){super(e),this.type=bi}parse(e){const o=function(F,I){switch(F){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(I||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(I||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(I||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(I||""))}},d=`
`,m=function(F,I,k){I=I||1024;let j=F.pos,$=-1,H=0,ie="",re=String.fromCharCode.apply(null,new Uint16Array(F.subarray(j,j+128)));for(;0>($=re.indexOf(d))&&H<I&&j<F.byteLength;)ie+=re,H+=re.length,j+=128,re+=String.fromCharCode.apply(null,new Uint16Array(F.subarray(j,j+128)));return-1<$?(F.pos+=H+$+1,ie+re.slice(0,$)):!1},g=function(F){const I=/^#\?(\S+)/,k=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,Q=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,j=/^\s*FORMAT=(\S+)\s*$/,$=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,H={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let ie,re;for((F.pos>=F.byteLength||!(ie=m(F)))&&o(1,"no header found"),(re=ie.match(I))||o(3,"bad initial token"),H.valid|=1,H.programtype=re[1],H.string+=ie+`
`;ie=m(F),ie!==!1;){if(H.string+=ie+`
`,ie.charAt(0)==="#"){H.comments+=ie+`
`;continue}if((re=ie.match(k))&&(H.gamma=parseFloat(re[1])),(re=ie.match(Q))&&(H.exposure=parseFloat(re[1])),(re=ie.match(j))&&(H.valid|=2,H.format=re[1]),(re=ie.match($))&&(H.valid|=4,H.height=parseInt(re[1],10),H.width=parseInt(re[2],10)),H.valid&2&&H.valid&4)break}return H.valid&2||o(3,"missing format specifier"),H.valid&4||o(3,"missing image size specifier"),H},y=function(F,I,k){const Q=I;if(Q<8||Q>32767||F[0]!==2||F[1]!==2||F[2]&128)return new Uint8Array(F);Q!==(F[2]<<8|F[3])&&o(3,"wrong scanline width");const j=new Uint8Array(4*I*k);j.length||o(4,"unable to allocate buffer space");let $=0,H=0;const ie=4*Q,re=new Uint8Array(4),ue=new Uint8Array(ie);let G=k;for(;G>0&&H<F.byteLength;){H+4>F.byteLength&&o(1),re[0]=F[H++],re[1]=F[H++],re[2]=F[H++],re[3]=F[H++],(re[0]!=2||re[1]!=2||(re[2]<<8|re[3])!=Q)&&o(3,"bad rgbe scanline format");let K=0,W;for(;K<ie&&H<F.byteLength;){W=F[H++];const B=W>128;if(B&&(W-=128),(W===0||K+W>ie)&&o(3,"bad scanline data"),B){const ne=F[H++];for(let ae=0;ae<W;ae++)ue[K++]=ne}else ue.set(F.subarray(H,H+W),K),K+=W,H+=W}const L=Q;for(let B=0;B<L;B++){let ne=0;j[$]=ue[B+ne],ne+=Q,j[$+1]=ue[B+ne],ne+=Q,j[$+2]=ue[B+ne],ne+=Q,j[$+3]=ue[B+ne],$+=4}G--}return j},_=function(F,I,k,Q){const j=F[I+3],$=Math.pow(2,j-128)/255;k[Q+0]=F[I+0]*$,k[Q+1]=F[I+1]*$,k[Q+2]=F[I+2]*$,k[Q+3]=1},w=function(F,I,k,Q){const j=F[I+3],$=Math.pow(2,j-128)/255;k[Q+0]=pf.toHalfFloat(Math.min(F[I+0]*$,65504)),k[Q+1]=pf.toHalfFloat(Math.min(F[I+1]*$,65504)),k[Q+2]=pf.toHalfFloat(Math.min(F[I+2]*$,65504)),k[Q+3]=pf.toHalfFloat(1)},x=new Uint8Array(e);x.pos=0;const S=g(x),b=S.width,T=S.height,C=y(x.subarray(x.pos),b,T);let P,D,U;switch(this.type){case pi:U=C.length/4;const F=new Float32Array(U*4);for(let k=0;k<U;k++)_(C,k*4,F,k*4);P=F,D=pi;break;case bi:U=C.length/4;const I=new Uint16Array(U*4);for(let k=0;k<U;k++)w(C,k*4,I,k*4);P=I,D=bi;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:b,height:T,data:P,header:S.string,gamma:S.gamma,exposure:S.exposure,type:D}}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(o,a){switch(o.type){case pi:case bi:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=Pn,o.magFilter=Pn,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,r,i)}}const om=Kw>=152;class o8 extends xw{constructor(e){super(e),this.type=bi}parse(e){const I=Math.pow(2.7182818,2.2);function k(Y,ee){for(var _e=0,V=0;V<65536;++V)(V==0||Y[V>>3]&1<<(V&7))&&(ee[_e++]=V);for(var se=_e-1;_e<65536;)ee[_e++]=0;return se}function Q(Y){for(var ee=0;ee<16384;ee++)Y[ee]={},Y[ee].len=0,Y[ee].lit=0,Y[ee].p=null}const j={l:0,c:0,lc:0};function $(Y,ee,_e,V,se){for(;_e<Y;)ee=ee<<8|mt(V,se),_e+=8;_e-=Y,j.l=ee>>_e&(1<<Y)-1,j.c=ee,j.lc=_e}const H=new Array(59);function ie(Y){for(var ee=0;ee<=58;++ee)H[ee]=0;for(var ee=0;ee<65537;++ee)H[Y[ee]]+=1;for(var _e=0,ee=58;ee>0;--ee){var V=_e+H[ee]>>1;H[ee]=_e,_e=V}for(var ee=0;ee<65537;++ee){var se=Y[ee];se>0&&(Y[ee]=se|H[se]++<<6)}}function re(Y,ee,_e,V,se,le,ve){for(var ge=_e,Be=0,Ze=0;se<=le;se++){if(ge.value-_e.value>V)return!1;$(6,Be,Ze,Y,ge);var Je=j.l;if(Be=j.c,Ze=j.lc,ve[se]=Je,Je==63){if(ge.value-_e.value>V)throw"Something wrong with hufUnpackEncTable";$(8,Be,Ze,Y,ge);var Se=j.l+6;if(Be=j.c,Ze=j.lc,se+Se>le+1)throw"Something wrong with hufUnpackEncTable";for(;Se--;)ve[se++]=0;se--}else if(Je>=59){var Se=Je-59+2;if(se+Se>le+1)throw"Something wrong with hufUnpackEncTable";for(;Se--;)ve[se++]=0;se--}}ie(ve)}function ue(Y){return Y&63}function G(Y){return Y>>6}function K(Y,ee,_e,V){for(;ee<=_e;ee++){var se=G(Y[ee]),le=ue(Y[ee]);if(se>>le)throw"Invalid table entry";if(le>14){var ve=V[se>>le-14];if(ve.len)throw"Invalid table entry";if(ve.lit++,ve.p){var ge=ve.p;ve.p=new Array(ve.lit);for(var Be=0;Be<ve.lit-1;++Be)ve.p[Be]=ge[Be]}else ve.p=new Array(1);ve.p[ve.lit-1]=ee}else if(le)for(var Ze=0,Be=1<<14-le;Be>0;Be--){var ve=V[(se<<14-le)+Ze];if(ve.len||ve.p)throw"Invalid table entry";ve.len=le,ve.lit=ee,Ze++}}return!0}const W={c:0,lc:0};function L(Y,ee,_e,V){Y=Y<<8|mt(_e,V),ee+=8,W.c=Y,W.lc=ee}const B={c:0,lc:0};function ne(Y,ee,_e,V,se,le,ve,ge,Be,Ze){if(Y==ee){V<8&&(L(_e,V,se,ve),_e=W.c,V=W.lc),V-=8;var Je=_e>>V,Je=new Uint8Array([Je])[0];if(Be.value+Je>Ze)return!1;for(var Se=ge[Be.value-1];Je-- >0;)ge[Be.value++]=Se}else if(Be.value<Ze)ge[Be.value++]=Y;else return!1;B.c=_e,B.lc=V}function ae(Y){return Y&65535}function de(Y){var ee=ae(Y);return ee>32767?ee-65536:ee}const pe={a:0,b:0};function xe(Y,ee){var _e=de(Y),V=de(ee),se=V,le=_e+(se&1)+(se>>1),ve=le,ge=le-se;pe.a=ve,pe.b=ge}function Me(Y,ee){var _e=ae(Y),V=ae(ee),se=_e-(V>>1)&65535,le=V+se-32768&65535;pe.a=le,pe.b=se}function Xe(Y,ee,_e,V,se,le,ve){for(var ge=ve<16384,Be=_e>se?se:_e,Ze=1,Je;Ze<=Be;)Ze<<=1;for(Ze>>=1,Je=Ze,Ze>>=1;Ze>=1;){for(var Se=0,Lt=Se+le*(se-Je),dt=le*Ze,ht=le*Je,It=V*Ze,Ht=V*Je,jt,Zt,Tt,bt;Se<=Lt;Se+=ht){for(var Kt=Se,$t=Se+V*(_e-Je);Kt<=$t;Kt+=Ht){var Qt=Kt+It,In=Kt+dt,Un=In+It;ge?(xe(Y[Kt+ee],Y[In+ee]),jt=pe.a,Tt=pe.b,xe(Y[Qt+ee],Y[Un+ee]),Zt=pe.a,bt=pe.b,xe(jt,Zt),Y[Kt+ee]=pe.a,Y[Qt+ee]=pe.b,xe(Tt,bt),Y[In+ee]=pe.a,Y[Un+ee]=pe.b):(Me(Y[Kt+ee],Y[In+ee]),jt=pe.a,Tt=pe.b,Me(Y[Qt+ee],Y[Un+ee]),Zt=pe.a,bt=pe.b,Me(jt,Zt),Y[Kt+ee]=pe.a,Y[Qt+ee]=pe.b,Me(Tt,bt),Y[In+ee]=pe.a,Y[Un+ee]=pe.b)}if(_e&Ze){var In=Kt+dt;ge?xe(Y[Kt+ee],Y[In+ee]):Me(Y[Kt+ee],Y[In+ee]),jt=pe.a,Y[In+ee]=pe.b,Y[Kt+ee]=jt}}if(se&Ze)for(var Kt=Se,$t=Se+V*(_e-Je);Kt<=$t;Kt+=Ht){var Qt=Kt+It;ge?xe(Y[Kt+ee],Y[Qt+ee]):Me(Y[Kt+ee],Y[Qt+ee]),jt=pe.a,Y[Qt+ee]=pe.b,Y[Kt+ee]=jt}Je=Ze,Ze>>=1}return Se}function ot(Y,ee,_e,V,se,le,ve,ge,Be,Ze){for(var Je=0,Se=0,Lt=ge,dt=Math.trunc(se.value+(le+7)/8);se.value<dt;)for(L(Je,Se,_e,se),Je=W.c,Se=W.lc;Se>=14;){var ht=Je>>Se-14&16383,It=ee[ht];if(It.len)Se-=It.len,ne(It.lit,ve,Je,Se,_e,V,se,Be,Ze,Lt),Je=B.c,Se=B.lc;else{if(!It.p)throw"hufDecode issues";var Ht;for(Ht=0;Ht<It.lit;Ht++){for(var jt=ue(Y[It.p[Ht]]);Se<jt&&se.value<dt;)L(Je,Se,_e,se),Je=W.c,Se=W.lc;if(Se>=jt&&G(Y[It.p[Ht]])==(Je>>Se-jt&(1<<jt)-1)){Se-=jt,ne(It.p[Ht],ve,Je,Se,_e,V,se,Be,Ze,Lt),Je=B.c,Se=B.lc;break}}if(Ht==It.lit)throw"hufDecode issues"}}var Zt=8-le&7;for(Je>>=Zt,Se-=Zt;Se>0;){var It=ee[Je<<14-Se&16383];if(It.len)Se-=It.len,ne(It.lit,ve,Je,Se,_e,V,se,Be,Ze,Lt),Je=B.c,Se=B.lc;else throw"hufDecode issues"}return!0}function He(Y,ee,_e,V,se,le){var ve={value:0},ge=_e.value,Be=Ge(ee,_e),Ze=Ge(ee,_e);_e.value+=4;var Je=Ge(ee,_e);if(_e.value+=4,Be<0||Be>=65537||Ze<0||Ze>=65537)throw"Something wrong with HUF_ENCSIZE";var Se=new Array(65537),Lt=new Array(16384);Q(Lt);var dt=V-(_e.value-ge);if(re(Y,ee,_e,dt,Be,Ze,Se),Je>8*(V-(_e.value-ge)))throw"Something wrong with hufUncompress";K(Se,Be,Ze,Lt),ot(Se,Lt,Y,ee,_e,Je,Ze,le,se,ve)}function te(Y,ee,_e){for(var V=0;V<_e;++V)ee[V]=Y[ee[V]]}function Ye(Y){for(var ee=1;ee<Y.length;ee++){var _e=Y[ee-1]+Y[ee]-128;Y[ee]=_e}}function Re(Y,ee){for(var _e=0,V=Math.floor((Y.length+1)/2),se=0,le=Y.length-1;!(se>le||(ee[se++]=Y[_e++],se>le));)ee[se++]=Y[V++]}function je(Y){for(var ee=Y.byteLength,_e=new Array,V=0,se=new DataView(Y);ee>0;){var le=se.getInt8(V++);if(le<0){var ve=-le;ee-=ve+1;for(var ge=0;ge<ve;ge++)_e.push(se.getUint8(V++))}else{var ve=le;ee-=2;for(var Be=se.getUint8(V++),ge=0;ge<ve+1;ge++)_e.push(Be)}}return _e}function Ne(Y,ee,_e,V,se,le){var Qt=new DataView(le.buffer),ve=_e[Y.idx[0]].width,ge=_e[Y.idx[0]].height,Be=3,Ze=Math.floor(ve/8),Je=Math.ceil(ve/8),Se=Math.ceil(ge/8),Lt=ve-(Je-1)*8,dt=ge-(Se-1)*8,ht={value:0},It=new Array(Be),Ht=new Array(Be),jt=new Array(Be),Zt=new Array(Be),Tt=new Array(Be);for(let an=0;an<Be;++an)Tt[an]=ee[Y.idx[an]],It[an]=an<1?0:It[an-1]+Je*Se,Ht[an]=new Float32Array(64),jt[an]=new Uint16Array(64),Zt[an]=new Uint16Array(Je*64);for(let an=0;an<Se;++an){var bt=8;an==Se-1&&(bt=dt);var Kt=8;for(let on=0;on<Je;++on){on==Je-1&&(Kt=Lt);for(let rn=0;rn<Be;++rn)jt[rn].fill(0),jt[rn][0]=se[It[rn]++],ct(ht,V,jt[rn]),Fe(jt[rn],Ht[rn]),qe(Ht[rn]);nt(Ht);for(let rn=0;rn<Be;++rn)Ue(Ht[rn],Zt[rn],on*64)}let Yn=0;for(let on=0;on<Be;++on){const rn=_e[Y.idx[on]].type;for(let zn=8*an;zn<8*an+bt;++zn){Yn=Tt[on][zn];for(let kr=0;kr<Ze;++kr){const er=kr*64+(zn&7)*8;Qt.setUint16(Yn+0*2*rn,Zt[on][er+0],!0),Qt.setUint16(Yn+1*2*rn,Zt[on][er+1],!0),Qt.setUint16(Yn+2*2*rn,Zt[on][er+2],!0),Qt.setUint16(Yn+3*2*rn,Zt[on][er+3],!0),Qt.setUint16(Yn+4*2*rn,Zt[on][er+4],!0),Qt.setUint16(Yn+5*2*rn,Zt[on][er+5],!0),Qt.setUint16(Yn+6*2*rn,Zt[on][er+6],!0),Qt.setUint16(Yn+7*2*rn,Zt[on][er+7],!0),Yn+=8*2*rn}}if(Ze!=Je)for(let zn=8*an;zn<8*an+bt;++zn){const kr=Tt[on][zn]+8*Ze*2*rn,er=Ze*64+(zn&7)*8;for(let Ji=0;Ji<Kt;++Ji)Qt.setUint16(kr+Ji*2*rn,Zt[on][er+Ji],!0)}}}for(var $t=new Uint16Array(ve),Qt=new DataView(le.buffer),In=0;In<Be;++In){_e[Y.idx[In]].decoded=!0;var Un=_e[Y.idx[In]].type;if(_e[In].type==2)for(var On=0;On<ge;++On){const an=Tt[In][On];for(var un=0;un<ve;++un)$t[un]=Qt.getUint16(an+un*2*Un,!0);for(var un=0;un<ve;++un)Qt.setFloat32(an+un*2*Un,Te($t[un]),!0)}}}function ct(Y,ee,_e){for(var V,se=1;se<64;)V=ee[Y.value],V==65280?se=64:V>>8==255?se+=V&255:(_e[se]=V,se++),Y.value++}function Fe(Y,ee){ee[0]=Te(Y[0]),ee[1]=Te(Y[1]),ee[2]=Te(Y[5]),ee[3]=Te(Y[6]),ee[4]=Te(Y[14]),ee[5]=Te(Y[15]),ee[6]=Te(Y[27]),ee[7]=Te(Y[28]),ee[8]=Te(Y[2]),ee[9]=Te(Y[4]),ee[10]=Te(Y[7]),ee[11]=Te(Y[13]),ee[12]=Te(Y[16]),ee[13]=Te(Y[26]),ee[14]=Te(Y[29]),ee[15]=Te(Y[42]),ee[16]=Te(Y[3]),ee[17]=Te(Y[8]),ee[18]=Te(Y[12]),ee[19]=Te(Y[17]),ee[20]=Te(Y[25]),ee[21]=Te(Y[30]),ee[22]=Te(Y[41]),ee[23]=Te(Y[43]),ee[24]=Te(Y[9]),ee[25]=Te(Y[11]),ee[26]=Te(Y[18]),ee[27]=Te(Y[24]),ee[28]=Te(Y[31]),ee[29]=Te(Y[40]),ee[30]=Te(Y[44]),ee[31]=Te(Y[53]),ee[32]=Te(Y[10]),ee[33]=Te(Y[19]),ee[34]=Te(Y[23]),ee[35]=Te(Y[32]),ee[36]=Te(Y[39]),ee[37]=Te(Y[45]),ee[38]=Te(Y[52]),ee[39]=Te(Y[54]),ee[40]=Te(Y[20]),ee[41]=Te(Y[22]),ee[42]=Te(Y[33]),ee[43]=Te(Y[38]),ee[44]=Te(Y[46]),ee[45]=Te(Y[51]),ee[46]=Te(Y[55]),ee[47]=Te(Y[60]),ee[48]=Te(Y[21]),ee[49]=Te(Y[34]),ee[50]=Te(Y[37]),ee[51]=Te(Y[47]),ee[52]=Te(Y[50]),ee[53]=Te(Y[56]),ee[54]=Te(Y[59]),ee[55]=Te(Y[61]),ee[56]=Te(Y[35]),ee[57]=Te(Y[36]),ee[58]=Te(Y[48]),ee[59]=Te(Y[49]),ee[60]=Te(Y[57]),ee[61]=Te(Y[58]),ee[62]=Te(Y[62]),ee[63]=Te(Y[63])}function qe(Y){const ee=.5*Math.cos(.7853975),_e=.5*Math.cos(3.14159/16),V=.5*Math.cos(3.14159/8),se=.5*Math.cos(3*3.14159/16),le=.5*Math.cos(5*3.14159/16),ve=.5*Math.cos(3*3.14159/8),ge=.5*Math.cos(7*3.14159/16);for(var Be=new Array(4),Ze=new Array(4),Je=new Array(4),Se=new Array(4),Lt=0;Lt<8;++Lt){var dt=Lt*8;Be[0]=V*Y[dt+2],Be[1]=ve*Y[dt+2],Be[2]=V*Y[dt+6],Be[3]=ve*Y[dt+6],Ze[0]=_e*Y[dt+1]+se*Y[dt+3]+le*Y[dt+5]+ge*Y[dt+7],Ze[1]=se*Y[dt+1]-ge*Y[dt+3]-_e*Y[dt+5]-le*Y[dt+7],Ze[2]=le*Y[dt+1]-_e*Y[dt+3]+ge*Y[dt+5]+se*Y[dt+7],Ze[3]=ge*Y[dt+1]-le*Y[dt+3]+se*Y[dt+5]-_e*Y[dt+7],Je[0]=ee*(Y[dt+0]+Y[dt+4]),Je[3]=ee*(Y[dt+0]-Y[dt+4]),Je[1]=Be[0]+Be[3],Je[2]=Be[1]-Be[2],Se[0]=Je[0]+Je[1],Se[1]=Je[3]+Je[2],Se[2]=Je[3]-Je[2],Se[3]=Je[0]-Je[1],Y[dt+0]=Se[0]+Ze[0],Y[dt+1]=Se[1]+Ze[1],Y[dt+2]=Se[2]+Ze[2],Y[dt+3]=Se[3]+Ze[3],Y[dt+4]=Se[3]-Ze[3],Y[dt+5]=Se[2]-Ze[2],Y[dt+6]=Se[1]-Ze[1],Y[dt+7]=Se[0]-Ze[0]}for(var ht=0;ht<8;++ht)Be[0]=V*Y[16+ht],Be[1]=ve*Y[16+ht],Be[2]=V*Y[48+ht],Be[3]=ve*Y[48+ht],Ze[0]=_e*Y[8+ht]+se*Y[24+ht]+le*Y[40+ht]+ge*Y[56+ht],Ze[1]=se*Y[8+ht]-ge*Y[24+ht]-_e*Y[40+ht]-le*Y[56+ht],Ze[2]=le*Y[8+ht]-_e*Y[24+ht]+ge*Y[40+ht]+se*Y[56+ht],Ze[3]=ge*Y[8+ht]-le*Y[24+ht]+se*Y[40+ht]-_e*Y[56+ht],Je[0]=ee*(Y[ht]+Y[32+ht]),Je[3]=ee*(Y[ht]-Y[32+ht]),Je[1]=Be[0]+Be[3],Je[2]=Be[1]-Be[2],Se[0]=Je[0]+Je[1],Se[1]=Je[3]+Je[2],Se[2]=Je[3]-Je[2],Se[3]=Je[0]-Je[1],Y[0+ht]=Se[0]+Ze[0],Y[8+ht]=Se[1]+Ze[1],Y[16+ht]=Se[2]+Ze[2],Y[24+ht]=Se[3]+Ze[3],Y[32+ht]=Se[3]-Ze[3],Y[40+ht]=Se[2]-Ze[2],Y[48+ht]=Se[1]-Ze[1],Y[56+ht]=Se[0]-Ze[0]}function nt(Y){for(var ee=0;ee<64;++ee){var _e=Y[0][ee],V=Y[1][ee],se=Y[2][ee];Y[0][ee]=_e+1.5747*se,Y[1][ee]=_e-.1873*V-.4682*se,Y[2][ee]=_e+1.8556*V}}function Ue(Y,ee,_e){for(var V=0;V<64;++V)ee[_e+V]=pf.toHalfFloat(_t(Y[V]))}function _t(Y){return Y<=1?Math.sign(Y)*Math.pow(Math.abs(Y),2.2):Math.sign(Y)*Math.pow(I,Math.abs(Y)-1)}function J(Y){return new DataView(Y.array.buffer,Y.offset.value,Y.size)}function q(Y){var ee=Y.viewer.buffer.slice(Y.offset.value,Y.offset.value+Y.size),_e=new Uint8Array(je(ee)),V=new Uint8Array(_e.length);return Ye(_e),Re(_e,V),new DataView(V.buffer)}function ye(Y){var ee=Y.array.slice(Y.offset.value,Y.offset.value+Y.size),_e=f0(ee),V=new Uint8Array(_e.length);return Ye(_e),Re(_e,V),new DataView(V.buffer)}function tt(Y){for(var ee=Y.viewer,_e={value:Y.offset.value},V=new Uint16Array(Y.width*Y.scanlineBlockSize*(Y.channels*Y.type)),se=new Uint8Array(8192),le=0,ve=new Array(Y.channels),ge=0;ge<Y.channels;ge++)ve[ge]={},ve[ge].start=le,ve[ge].end=ve[ge].start,ve[ge].nx=Y.width,ve[ge].ny=Y.lines,ve[ge].size=Y.type,le+=ve[ge].nx*ve[ge].ny*ve[ge].size;var Be=he(ee,_e),Ze=he(ee,_e);if(Ze>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(Be<=Ze)for(var ge=0;ge<Ze-Be+1;ge++)se[ge+Be]=ce(ee,_e);var Je=new Uint16Array(65536),Se=k(se,Je),Lt=Ge(ee,_e);He(Y.array,ee,_e,Lt,V,le);for(var ge=0;ge<Y.channels;++ge)for(var dt=ve[ge],ht=0;ht<ve[ge].size;++ht)Xe(V,dt.start+ht,dt.nx,dt.size,dt.ny,dt.nx*dt.size,Se);te(Je,V,le);for(var It=0,Ht=new Uint8Array(V.buffer.byteLength),jt=0;jt<Y.lines;jt++)for(var Zt=0;Zt<Y.channels;Zt++){var dt=ve[Zt],Tt=dt.nx*dt.size,bt=new Uint8Array(V.buffer,dt.end*2,Tt*2);Ht.set(bt,It),It+=Tt*2,dt.end+=Tt}return new DataView(Ht.buffer)}function Le(Y){var ee=Y.array.slice(Y.offset.value,Y.offset.value+Y.size),_e=f0(ee);const V=Y.lines*Y.channels*Y.width,se=Y.type==1?new Uint16Array(V):new Uint32Array(V);let le=0,ve=0;const ge=new Array(4);for(let Be=0;Be<Y.lines;Be++)for(let Ze=0;Ze<Y.channels;Ze++){let Je=0;switch(Y.type){case 1:ge[0]=le,ge[1]=ge[0]+Y.width,le=ge[1]+Y.width;for(let Se=0;Se<Y.width;++Se){const Lt=_e[ge[0]++]<<8|_e[ge[1]++];Je+=Lt,se[ve]=Je,ve++}break;case 2:ge[0]=le,ge[1]=ge[0]+Y.width,ge[2]=ge[1]+Y.width,le=ge[2]+Y.width;for(let Se=0;Se<Y.width;++Se){const Lt=_e[ge[0]++]<<24|_e[ge[1]++]<<16|_e[ge[2]++]<<8;Je+=Lt,se[ve]=Je,ve++}break}}return new DataView(se.buffer)}function We(Y){var ee=Y.viewer,_e={value:Y.offset.value},V=new Uint8Array(Y.width*Y.lines*(Y.channels*Y.type*2)),se={version:Ie(ee,_e),unknownUncompressedSize:Ie(ee,_e),unknownCompressedSize:Ie(ee,_e),acCompressedSize:Ie(ee,_e),dcCompressedSize:Ie(ee,_e),rleCompressedSize:Ie(ee,_e),rleUncompressedSize:Ie(ee,_e),rleRawSize:Ie(ee,_e),totalAcUncompressedCount:Ie(ee,_e),totalDcUncompressedCount:Ie(ee,_e),acCompression:Ie(ee,_e)};if(se.version<2)throw"EXRLoader.parse: "+$n.compression+" version "+se.version+" is unsupported";for(var le=new Array,ve=he(ee,_e)-2;ve>0;){var ge=st(ee.buffer,_e),Be=ce(ee,_e),Ze=Be>>2&3,Je=(Be>>4)-1,Se=new Int8Array([Je])[0],Lt=ce(ee,_e);le.push({name:ge,index:Se,type:Lt,compression:Ze}),ve-=ge.length+3}for(var dt=$n.channels,ht=new Array(Y.channels),It=0;It<Y.channels;++It){var Ht=ht[It]={},jt=dt[It];Ht.name=jt.name,Ht.compression=0,Ht.decoded=!1,Ht.type=jt.pixelType,Ht.pLinear=jt.pLinear,Ht.width=Y.width,Ht.height=Y.lines}for(var Zt={idx:new Array(3)},Tt=0;Tt<Y.channels;++Tt)for(var Ht=ht[Tt],It=0;It<le.length;++It){var bt=le[It];Ht.name==bt.name&&(Ht.compression=bt.compression,bt.index>=0&&(Zt.idx[bt.index]=Tt),Ht.offset=Tt)}if(se.acCompressedSize>0)switch(se.acCompression){case 0:var Qt=new Uint16Array(se.totalAcUncompressedCount);He(Y.array,ee,_e,se.acCompressedSize,Qt,se.totalAcUncompressedCount);break;case 1:var Kt=Y.array.slice(_e.value,_e.value+se.totalAcUncompressedCount),$t=f0(Kt),Qt=new Uint16Array($t.buffer);_e.value+=se.totalAcUncompressedCount;break}if(se.dcCompressedSize>0){var In={array:Y.array,offset:_e,size:se.dcCompressedSize},Un=new Uint16Array(ye(In).buffer);_e.value+=se.dcCompressedSize}if(se.rleRawSize>0){var Kt=Y.array.slice(_e.value,_e.value+se.rleCompressedSize),$t=f0(Kt),On=je($t.buffer);_e.value+=se.rleCompressedSize}for(var un=0,an=new Array(ht.length),It=0;It<an.length;++It)an[It]=new Array;for(var Yn=0;Yn<Y.lines;++Yn)for(var on=0;on<ht.length;++on)an[on].push(un),un+=ht[on].width*Y.type*2;Ne(Zt,an,ht,Qt,Un,V);for(var It=0;It<ht.length;++It){var Ht=ht[It];if(!Ht.decoded)switch(Ht.compression){case 2:for(var rn=0,zn=0,Yn=0;Yn<Y.lines;++Yn){for(var kr=an[It][rn],er=0;er<Ht.width;++er){for(var Ji=0;Ji<2*Ht.type;++Ji)V[kr++]=On[zn+Ji*Ht.width*Ht.height];zn++}rn++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(V.buffer)}function st(Y,ee){for(var _e=new Uint8Array(Y),V=0;_e[ee.value+V]!=0;)V+=1;var se=new TextDecoder().decode(_e.slice(ee.value,ee.value+V));return ee.value=ee.value+V+1,se}function et(Y,ee,_e){var V=new TextDecoder().decode(new Uint8Array(Y).slice(ee.value,ee.value+_e));return ee.value=ee.value+_e,V}function lt(Y,ee){var _e=xt(Y,ee),V=Ge(Y,ee);return[_e,V]}function Mt(Y,ee){var _e=Ge(Y,ee),V=Ge(Y,ee);return[_e,V]}function xt(Y,ee){var _e=Y.getInt32(ee.value,!0);return ee.value=ee.value+4,_e}function Ge(Y,ee){var _e=Y.getUint32(ee.value,!0);return ee.value=ee.value+4,_e}function mt(Y,ee){var _e=Y[ee.value];return ee.value=ee.value+1,_e}function ce(Y,ee){var _e=Y.getUint8(ee.value);return ee.value=ee.value+1,_e}const Ie=function(Y,ee){let _e;return"getBigInt64"in DataView.prototype?_e=Number(Y.getBigInt64(ee.value,!0)):_e=Y.getUint32(ee.value+4,!0)+Number(Y.getUint32(ee.value,!0)<<32),ee.value+=8,_e};function Pe(Y,ee){var _e=Y.getFloat32(ee.value,!0);return ee.value+=4,_e}function ke(Y,ee){return pf.toHalfFloat(Pe(Y,ee))}function Te(Y){var ee=(Y&31744)>>10,_e=Y&1023;return(Y>>15?-1:1)*(ee?ee===31?_e?NaN:1/0:Math.pow(2,ee-15)*(1+_e/1024):6103515625e-14*(_e/1024))}function he(Y,ee){var _e=Y.getUint16(ee.value,!0);return ee.value+=2,_e}function ut(Y,ee){return Te(he(Y,ee))}function rt(Y,ee,_e,V){for(var se=_e.value,le=[];_e.value<se+V-1;){var ve=st(ee,_e),ge=xt(Y,_e),Be=ce(Y,_e);_e.value+=3;var Ze=xt(Y,_e),Je=xt(Y,_e);le.push({name:ve,pixelType:ge,pLinear:Be,xSampling:Ze,ySampling:Je})}return _e.value+=1,le}function De(Y,ee){var _e=Pe(Y,ee),V=Pe(Y,ee),se=Pe(Y,ee),le=Pe(Y,ee),ve=Pe(Y,ee),ge=Pe(Y,ee),Be=Pe(Y,ee),Ze=Pe(Y,ee);return{redX:_e,redY:V,greenX:se,greenY:le,blueX:ve,blueY:ge,whiteX:Be,whiteY:Ze}}function at(Y,ee){var _e=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],V=ce(Y,ee);return _e[V]}function St(Y,ee){var _e=Ge(Y,ee),V=Ge(Y,ee),se=Ge(Y,ee),le=Ge(Y,ee);return{xMin:_e,yMin:V,xMax:se,yMax:le}}function Et(Y,ee){var _e=["INCREASING_Y"],V=ce(Y,ee);return _e[V]}function Wt(Y,ee){var _e=Pe(Y,ee),V=Pe(Y,ee);return[_e,V]}function gn(Y,ee){var _e=Pe(Y,ee),V=Pe(Y,ee),se=Pe(Y,ee);return[_e,V,se]}function Yt(Y,ee,_e,V,se){if(V==="string"||V==="stringvector"||V==="iccProfile")return et(ee,_e,se);if(V==="chlist")return rt(Y,ee,_e,se);if(V==="chromaticities")return De(Y,_e);if(V==="compression")return at(Y,_e);if(V==="box2i")return St(Y,_e);if(V==="lineOrder")return Et(Y,_e);if(V==="float")return Pe(Y,_e);if(V==="v2f")return Wt(Y,_e);if(V==="v3f")return gn(Y,_e);if(V==="int")return xt(Y,_e);if(V==="rational")return lt(Y,_e);if(V==="timecode")return Mt(Y,_e);if(V==="preview")return _e.value+=se,"skipped";_e.value+=se}function pn(Y,ee,_e){const V={};if(Y.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";V.version=Y.getUint8(4);const se=Y.getUint8(5);V.spec={singleTile:!!(se&2),longName:!!(se&4),deepFormat:!!(se&8),multiPart:!!(se&16)},_e.value=8;for(var le=!0;le;){var ve=st(ee,_e);if(ve==0)le=!1;else{var ge=st(ee,_e),Be=Ge(Y,_e),Ze=Yt(Y,ee,_e,ge,Be);Ze===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${ge}'.`):V[ve]=Ze}}if((se&-5)!=0)throw console.error("EXRHeader:",V),"THREE.EXRLoader: provided file is currently unsupported.";return V}function kn(Y,ee,_e,V,se){const le={size:0,viewer:ee,array:_e,offset:V,width:Y.dataWindow.xMax-Y.dataWindow.xMin+1,height:Y.dataWindow.yMax-Y.dataWindow.yMin+1,channels:Y.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:Y.channels[0].pixelType,uncompress:null,getter:null,format:null,[om?"colorSpace":"encoding"]:null};switch(Y.compression){case"NO_COMPRESSION":le.lines=1,le.uncompress=J;break;case"RLE_COMPRESSION":le.lines=1,le.uncompress=q;break;case"ZIPS_COMPRESSION":le.lines=1,le.uncompress=ye;break;case"ZIP_COMPRESSION":le.lines=16,le.uncompress=ye;break;case"PIZ_COMPRESSION":le.lines=32,le.uncompress=tt;break;case"PXR24_COMPRESSION":le.lines=16,le.uncompress=Le;break;case"DWAA_COMPRESSION":le.lines=32,le.uncompress=We;break;case"DWAB_COMPRESSION":le.lines=256,le.uncompress=We;break;default:throw"EXRLoader.parse: "+Y.compression+" is unsupported"}if(le.scanlineBlockSize=le.lines,le.type==1)switch(se){case pi:le.getter=ut,le.inputSize=2;break;case bi:le.getter=he,le.inputSize=2;break}else if(le.type==2)switch(se){case pi:le.getter=Pe,le.inputSize=4;break;case bi:le.getter=ke,le.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+le.type+" for "+Y.compression+".";le.blockCount=(Y.dataWindow.yMax+1)/le.scanlineBlockSize;for(var ve=0;ve<le.blockCount;ve++)Ie(ee,V);le.outputChannels=le.channels==3?4:le.channels;const ge=le.width*le.height*le.outputChannels;switch(se){case pi:le.byteArray=new Float32Array(ge),le.channels<le.outputChannels&&le.byteArray.fill(1,0,ge);break;case bi:le.byteArray=new Uint16Array(ge),le.channels<le.outputChannels&&le.byteArray.fill(15360,0,ge);break;default:console.error("THREE.EXRLoader: unsupported type: ",se);break}return le.bytesPerLine=le.width*le.inputSize*le.channels,le.outputChannels==4?le.format=di:le.format=WS,om?le.colorSpace="srgb-linear":le.encoding=3e3,le}const Fr=new DataView(e),Sr=new Uint8Array(e),sr={value:0},$n=pn(Fr,e,sr),qt=kn($n,Fr,Sr,sr,this.type),fr={value:0},Fi={R:0,G:1,B:2,A:3,Y:0};for(let Y=0;Y<qt.height/qt.scanlineBlockSize;Y++){const ee=Ge(Fr,sr);qt.size=Ge(Fr,sr),qt.lines=ee+qt.scanlineBlockSize>qt.height?qt.height-ee:qt.scanlineBlockSize;const V=qt.size<qt.lines*qt.bytesPerLine?qt.uncompress(qt):J(qt);sr.value+=qt.size;for(let se=0;se<qt.scanlineBlockSize;se++){const le=se+Y*qt.scanlineBlockSize;if(le>=qt.height)break;for(let ve=0;ve<qt.channels;ve++){const ge=Fi[$n.channels[ve].name];for(let Be=0;Be<qt.width;Be++){fr.value=(se*(qt.channels*qt.width)+ve*qt.width+Be)*qt.inputSize;const Ze=(qt.height-1-le)*(qt.width*qt.outputChannels)+Be*qt.outputChannels+ge;qt.byteArray[Ze]=qt.getter(V,fr)}}}}return{header:$n,width:qt.width,height:qt.height,data:qt.byteArray,format:qt.format,[om?"colorSpace":"encoding"]:qt[om?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(o,a){om?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=Pn,o.magFilter=Pn,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,a)}return super.load(e,s,r,i)}}function a8(){var n=Object.create(null);function e(i,s){var o=i.id,a=i.name,c=i.dependencies;c===void 0&&(c=[]);var u=i.init;u===void 0&&(u=function(){});var d=i.getTransferables;if(d===void 0&&(d=null),!n[o])try{c=c.map(function(g){return g&&g.isWorkerModule&&(e(g,function(y){if(y instanceof Error)throw y}),g=n[g.id].value),g}),u=r("<"+a+">.init",u),d&&(d=r("<"+a+">.getTransferables",d));var m=null;typeof u=="function"?m=u.apply(void 0,c):console.error("worker module init function failed to rehydrate"),n[o]={id:o,value:m,getTransferables:d},s(m)}catch(g){g&&g.noLog||console.error(g),s(g)}}function t(i,s){var o,a=i.id,c=i.args;(!n[a]||typeof n[a].value!="function")&&s(new Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var u=(o=n[a]).value.apply(o,c);u&&typeof u.then=="function"?u.then(d,function(m){return s(m instanceof Error?m:new Error(""+m))}):d(u)}catch(m){s(m)}function d(m){try{var g=n[a].getTransferables&&n[a].getTransferables(m);(!g||!Array.isArray(g)||!g.length)&&(g=void 0),s(m,g)}catch(y){console.error(y),s(y)}}}function r(i,s){var o=void 0;self.troikaDefine=function(c){return o=c};var a=URL.createObjectURL(new Blob(["/** "+i.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(a)}catch(c){console.error(c)}return URL.revokeObjectURL(a),delete self.troikaDefine,o}self.addEventListener("message",function(i){var s=i.data,o=s.messageId,a=s.action,c=s.data;try{a==="registerModule"&&e(c,function(u){u instanceof Error?postMessage({messageId:o,success:!1,error:u.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof u=="function"}})}),a==="callModule"&&t(c,function(u,d){u instanceof Error?postMessage({messageId:o,success:!1,error:u.message}):postMessage({messageId:o,success:!0,result:u},d||void 0)})}catch(u){postMessage({messageId:o,success:!1,error:u.stack})}})}function l8(n){var e=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return e._getInitResult().then(function(i){if(typeof i=="function")return i.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=n.dependencies,r=n.init;t=Array.isArray(t)?t.map(function(s){return s&&(s=s.onMainThread||s,s._getInitResult&&(s=s._getInitResult())),s}):[];var i=Promise.all(t).then(function(s){return r.apply(null,s)});return e._getInitResult=function(){return i},i},e}var uL=function(){var n=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),n=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return uL=function(){return n},n},c8=0,u8=0,Yx=!1,Em=Object.create(null),Mm=Object.create(null),gS=Object.create(null);function Kh(n){if((!n||typeof n.init!="function")&&!Yx)throw new Error("requires `options.init` function");var e=n.dependencies,t=n.init,r=n.getTransferables,i=n.workerId,s=l8(n);i==null&&(i="#default");var o="workerModule"+ ++c8,a=n.name||o,c=null;e=e&&e.map(function(d){return typeof d=="function"&&!d.workerModuleData&&(Yx=!0,d=Kh({workerId:i,name:"<"+a+"> function dependency: "+d.name,init:`function(){return (
`+C0(d)+`
)}`}),Yx=!1),d&&d.workerModuleData&&(d=d.workerModuleData),d});function u(){for(var d=[],m=arguments.length;m--;)d[m]=arguments[m];if(!uL())return s.apply(void 0,d);if(!c){c=qb(i,"registerModule",u.workerModuleData);var g=function(){c=null,Mm[i].delete(g)};(Mm[i]||(Mm[i]=new Set)).add(g)}return c.then(function(y){var _=y.isCallable;if(_)return qb(i,"callModule",{id:o,args:d});throw new Error("Worker module function was called but `init` did not return a callable function")})}return u.workerModuleData={isWorkerModule:!0,id:o,name:a,dependencies:e,init:C0(t),getTransferables:r&&C0(r)},u.onMainThread=s,u}function f8(n){Mm[n]&&Mm[n].forEach(function(e){e()}),Em[n]&&(Em[n].terminate(),delete Em[n])}function C0(n){var e=n.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function d8(n){var e=Em[n];if(!e){var t=C0(a8);e=Em[n]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+n.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(r){var i=r.data,s=i.messageId,o=gS[s];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete gS[s],o(i)}}return e}function qb(n,e,t){return new Promise(function(r,i){var s=++u8;gS[s]=function(o){o.success?r(o.result):i(new Error("Error in worker "+e+" call: "+o.error))},d8(n).postMessage({messageId:s,action:e,data:t})})}function fL(){var n=function(e){function t(K,W,L,B,ne,ae,de,pe){var xe=1-de;pe.x=xe*xe*K+2*xe*de*L+de*de*ne,pe.y=xe*xe*W+2*xe*de*B+de*de*ae}function r(K,W,L,B,ne,ae,de,pe,xe,Me){var Xe=1-xe;Me.x=Xe*Xe*Xe*K+3*Xe*Xe*xe*L+3*Xe*xe*xe*ne+xe*xe*xe*de,Me.y=Xe*Xe*Xe*W+3*Xe*Xe*xe*B+3*Xe*xe*xe*ae+xe*xe*xe*pe}function i(K,W){for(var L=/([MLQCZ])([^MLQCZ]*)/g,B,ne,ae,de,pe;B=L.exec(K);){var xe=B[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(Me){return parseFloat(Me)});switch(B[1]){case"M":de=ne=xe[0],pe=ae=xe[1];break;case"L":(xe[0]!==de||xe[1]!==pe)&&W("L",de,pe,de=xe[0],pe=xe[1]);break;case"Q":{W("Q",de,pe,de=xe[2],pe=xe[3],xe[0],xe[1]);break}case"C":{W("C",de,pe,de=xe[4],pe=xe[5],xe[0],xe[1],xe[2],xe[3]);break}case"Z":(de!==ne||pe!==ae)&&W("L",de,pe,ne,ae);break}}}function s(K,W,L){L===void 0&&(L=16);var B={x:0,y:0};i(K,function(ne,ae,de,pe,xe,Me,Xe,ot,He){switch(ne){case"L":W(ae,de,pe,xe);break;case"Q":{for(var te=ae,Ye=de,Re=1;Re<L;Re++)t(ae,de,Me,Xe,pe,xe,Re/(L-1),B),W(te,Ye,B.x,B.y),te=B.x,Ye=B.y;break}case"C":{for(var je=ae,Ne=de,ct=1;ct<L;ct++)r(ae,de,Me,Xe,ot,He,pe,xe,ct/(L-1),B),W(je,Ne,B.x,B.y),je=B.x,Ne=B.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",c=new WeakMap,u={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function d(K,W){var L=K.getContext?K.getContext("webgl",u):K,B=c.get(L);if(!B){let je=function(Ue){var _t=ae[Ue];if(!_t&&(_t=ae[Ue]=L.getExtension(Ue),!_t))throw new Error(Ue+" not supported");return _t},Ne=function(Ue,_t){var J=L.createShader(_t);return L.shaderSource(J,Ue),L.compileShader(J),J},ct=function(Ue,_t,J,q){if(!de[Ue]){var ye={},tt={},Le=L.createProgram();L.attachShader(Le,Ne(_t,L.VERTEX_SHADER)),L.attachShader(Le,Ne(J,L.FRAGMENT_SHADER)),L.linkProgram(Le),de[Ue]={program:Le,transaction:function(st){L.useProgram(Le),st({setUniform:function(lt,Mt){for(var xt=[],Ge=arguments.length-2;Ge-- >0;)xt[Ge]=arguments[Ge+2];var mt=tt[Mt]||(tt[Mt]=L.getUniformLocation(Le,Mt));L["uniform"+lt].apply(L,[mt].concat(xt))},setAttribute:function(lt,Mt,xt,Ge,mt){var ce=ye[lt];ce||(ce=ye[lt]={buf:L.createBuffer(),loc:L.getAttribLocation(Le,lt),data:null}),L.bindBuffer(L.ARRAY_BUFFER,ce.buf),L.vertexAttribPointer(ce.loc,Mt,L.FLOAT,!1,0,0),L.enableVertexAttribArray(ce.loc),ne?L.vertexAttribDivisor(ce.loc,Ge):je("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(ce.loc,Ge),mt!==ce.data&&(L.bufferData(L.ARRAY_BUFFER,mt,xt),ce.data=mt)}})}}}de[Ue].transaction(q)},Fe=function(Ue,_t){xe++;try{L.activeTexture(L.TEXTURE0+xe);var J=pe[Ue];J||(J=pe[Ue]=L.createTexture(),L.bindTexture(L.TEXTURE_2D,J),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MIN_FILTER,L.NEAREST),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MAG_FILTER,L.NEAREST)),L.bindTexture(L.TEXTURE_2D,J),_t(J,xe)}finally{xe--}},qe=function(Ue,_t,J){var q=L.createFramebuffer();Me.push(q),L.bindFramebuffer(L.FRAMEBUFFER,q),L.activeTexture(L.TEXTURE0+_t),L.bindTexture(L.TEXTURE_2D,Ue),L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_2D,Ue,0);try{J(q)}finally{L.deleteFramebuffer(q),L.bindFramebuffer(L.FRAMEBUFFER,Me[--Me.length-1]||null)}},nt=function(){ae={},de={},pe={},xe=-1,Me.length=0};var Xe=je,ot=Ne,He=ct,te=Fe,Ye=qe,Re=nt,ne=typeof WebGL2RenderingContext<"u"&&L instanceof WebGL2RenderingContext,ae={},de={},pe={},xe=-1,Me=[];L.canvas.addEventListener("webglcontextlost",function(Ue){nt(),Ue.preventDefault()},!1),c.set(L,B={gl:L,isWebGL2:ne,getExtension:je,withProgram:ct,withTexture:Fe,withTextureFramebuffer:qe,handleContextLoss:nt})}W(B)}function m(K,W,L,B,ne,ae,de,pe){de===void 0&&(de=15),pe===void 0&&(pe=null),d(K,function(xe){var Me=xe.gl,Xe=xe.withProgram,ot=xe.withTexture;ot("copy",function(He,te){Me.texImage2D(Me.TEXTURE_2D,0,Me.RGBA,ne,ae,0,Me.RGBA,Me.UNSIGNED_BYTE,W),Xe("copy",o,a,function(Ye){var Re=Ye.setUniform,je=Ye.setAttribute;je("aUV",2,Me.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),Re("1i","image",te),Me.bindFramebuffer(Me.FRAMEBUFFER,pe||null),Me.disable(Me.BLEND),Me.colorMask(de&8,de&4,de&2,de&1),Me.viewport(L,B,ne,ae),Me.scissor(L,B,ne,ae),Me.drawArrays(Me.TRIANGLES,0,3)})})})}function g(K,W,L){var B=K.width,ne=K.height;d(K,function(ae){var de=ae.gl,pe=new Uint8Array(B*ne*4);de.readPixels(0,0,B,ne,de.RGBA,de.UNSIGNED_BYTE,pe),K.width=W,K.height=L,m(de,pe,0,0,B,ne)})}var y=Object.freeze({__proto__:null,withWebGLContext:d,renderImageData:m,resizeWebGLCanvasWithoutClearing:g});function _(K,W,L,B,ne,ae){ae===void 0&&(ae=1);var de=new Uint8Array(K*W),pe=B[2]-B[0],xe=B[3]-B[1],Me=[];s(L,function(je,Ne,ct,Fe){Me.push({x1:je,y1:Ne,x2:ct,y2:Fe,minX:Math.min(je,ct),minY:Math.min(Ne,Fe),maxX:Math.max(je,ct),maxY:Math.max(Ne,Fe)})}),Me.sort(function(je,Ne){return je.maxX-Ne.maxX});for(var Xe=0;Xe<K;Xe++)for(var ot=0;ot<W;ot++){var He=Ye(B[0]+pe*(Xe+.5)/K,B[1]+xe*(ot+.5)/W),te=Math.pow(1-Math.abs(He)/ne,ae)/2;He<0&&(te=1-te),te=Math.max(0,Math.min(255,Math.round(te*255))),de[ot*K+Xe]=te}return de;function Ye(je,Ne){for(var ct=1/0,Fe=1/0,qe=Me.length;qe--;){var nt=Me[qe];if(nt.maxX+Fe<=je)break;if(je+Fe>nt.minX&&Ne-Fe<nt.maxY&&Ne+Fe>nt.minY){var Ue=S(je,Ne,nt.x1,nt.y1,nt.x2,nt.y2);Ue<ct&&(ct=Ue,Fe=Math.sqrt(ct))}}return Re(je,Ne)&&(Fe=-Fe),Fe}function Re(je,Ne){for(var ct=0,Fe=Me.length;Fe--;){var qe=Me[Fe];if(qe.maxX<=je)break;var nt=qe.y1>Ne!=qe.y2>Ne&&je<(qe.x2-qe.x1)*(Ne-qe.y1)/(qe.y2-qe.y1)+qe.x1;nt&&(ct+=qe.y1<qe.y2?1:-1)}return ct!==0}}function w(K,W,L,B,ne,ae,de,pe,xe,Me){ae===void 0&&(ae=1),pe===void 0&&(pe=0),xe===void 0&&(xe=0),Me===void 0&&(Me=0),x(K,W,L,B,ne,ae,de,null,pe,xe,Me)}function x(K,W,L,B,ne,ae,de,pe,xe,Me,Xe){ae===void 0&&(ae=1),xe===void 0&&(xe=0),Me===void 0&&(Me=0),Xe===void 0&&(Xe=0);for(var ot=_(K,W,L,B,ne,ae),He=new Uint8Array(ot.length*4),te=0;te<ot.length;te++)He[te*4+Xe]=ot[te];m(de,He,xe,Me,K,W,1<<3-Xe,pe)}function S(K,W,L,B,ne,ae){var de=ne-L,pe=ae-B,xe=de*de+pe*pe,Me=xe?Math.max(0,Math.min(1,((K-L)*de+(W-B)*pe)/xe)):0,Xe=K-(L+Me*de),ot=W-(B+Me*pe);return Xe*Xe+ot*ot}var b=Object.freeze({__proto__:null,generate:_,generateIntoCanvas:w,generateIntoFramebuffer:x}),T="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",C="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",P="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",D=new Float32Array([0,0,2,0,0,2]),U=null,F=!1,I={},k=new WeakMap;function Q(K){if(!F&&!ie(K))throw new Error("WebGL generation not supported")}function j(K,W,L,B,ne,ae,de){if(ae===void 0&&(ae=1),de===void 0&&(de=null),!de&&(de=U,!de)){var pe=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!pe)throw new Error("OffscreenCanvas or DOM canvas not supported");de=U=pe.getContext("webgl",{depth:!1})}Q(de);var xe=new Uint8Array(K*W*4);d(de,function(He){var te=He.gl,Ye=He.withTexture,Re=He.withTextureFramebuffer;Ye("readable",function(je,Ne){te.texImage2D(te.TEXTURE_2D,0,te.RGBA,K,W,0,te.RGBA,te.UNSIGNED_BYTE,null),Re(je,Ne,function(ct){H(K,W,L,B,ne,ae,te,ct,0,0,0),te.readPixels(0,0,K,W,te.RGBA,te.UNSIGNED_BYTE,xe)})})});for(var Me=new Uint8Array(K*W),Xe=0,ot=0;Xe<xe.length;Xe+=4)Me[ot++]=xe[Xe];return Me}function $(K,W,L,B,ne,ae,de,pe,xe,Me){ae===void 0&&(ae=1),pe===void 0&&(pe=0),xe===void 0&&(xe=0),Me===void 0&&(Me=0),H(K,W,L,B,ne,ae,de,null,pe,xe,Me)}function H(K,W,L,B,ne,ae,de,pe,xe,Me,Xe){ae===void 0&&(ae=1),xe===void 0&&(xe=0),Me===void 0&&(Me=0),Xe===void 0&&(Xe=0),Q(de);var ot=[];s(L,function(He,te,Ye,Re){ot.push(He,te,Ye,Re)}),ot=new Float32Array(ot),d(de,function(He){var te=He.gl,Ye=He.isWebGL2,Re=He.getExtension,je=He.withProgram,Ne=He.withTexture,ct=He.withTextureFramebuffer,Fe=He.handleContextLoss;if(Ne("rawDistances",function(qe,nt){(K!==qe._lastWidth||W!==qe._lastHeight)&&te.texImage2D(te.TEXTURE_2D,0,te.RGBA,qe._lastWidth=K,qe._lastHeight=W,0,te.RGBA,te.UNSIGNED_BYTE,null),je("main",T,C,function(Ue){var _t=Ue.setAttribute,J=Ue.setUniform,q=!Ye&&Re("ANGLE_instanced_arrays"),ye=!Ye&&Re("EXT_blend_minmax");_t("aUV",2,te.STATIC_DRAW,0,D),_t("aLineSegment",4,te.DYNAMIC_DRAW,1,ot),J.apply(void 0,["4f","uGlyphBounds"].concat(B)),J("1f","uMaxDistance",ne),J("1f","uExponent",ae),ct(qe,nt,function(tt){te.enable(te.BLEND),te.colorMask(!0,!0,!0,!0),te.viewport(0,0,K,W),te.scissor(0,0,K,W),te.blendFunc(te.ONE,te.ONE),te.blendEquationSeparate(te.FUNC_ADD,Ye?te.MAX:ye.MAX_EXT),te.clear(te.COLOR_BUFFER_BIT),Ye?te.drawArraysInstanced(te.TRIANGLES,0,3,ot.length/4):q.drawArraysInstancedANGLE(te.TRIANGLES,0,3,ot.length/4)})}),je("post",o,P,function(Ue){Ue.setAttribute("aUV",2,te.STATIC_DRAW,0,D),Ue.setUniform("1i","tex",nt),te.bindFramebuffer(te.FRAMEBUFFER,pe),te.disable(te.BLEND),te.colorMask(Xe===0,Xe===1,Xe===2,Xe===3),te.viewport(xe,Me,K,W),te.scissor(xe,Me,K,W),te.drawArrays(te.TRIANGLES,0,3)})}),te.isContextLost())throw Fe(),new Error("webgl context lost")})}function ie(K){var W=!K||K===U?I:K.canvas||K,L=k.get(W);if(L===void 0){F=!0;var B=null;try{var ne=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],ae=j(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,K);L=ae&&ne.length===ae.length&&ae.every(function(de,pe){return de===ne[pe]}),L||(B="bad trial run results",console.info(ne,ae))}catch(de){L=!1,B=de.message}B&&console.warn("WebGL SDF generation not supported:",B),F=!1,k.set(W,L)}return L}var re=Object.freeze({__proto__:null,generate:j,generateIntoCanvas:$,generateIntoFramebuffer:H,isSupported:ie});function ue(K,W,L,B,ne,ae){ne===void 0&&(ne=Math.max(B[2]-B[0],B[3]-B[1])/2),ae===void 0&&(ae=1);try{return j.apply(re,arguments)}catch(de){return console.info("WebGL SDF generation failed, falling back to JS",de),_.apply(b,arguments)}}function G(K,W,L,B,ne,ae,de,pe,xe,Me){ne===void 0&&(ne=Math.max(B[2]-B[0],B[3]-B[1])/2),ae===void 0&&(ae=1),pe===void 0&&(pe=0),xe===void 0&&(xe=0),Me===void 0&&(Me=0);try{return $.apply(re,arguments)}catch(Xe){return console.info("WebGL SDF generation failed, falling back to JS",Xe),w.apply(b,arguments)}}return e.forEachPathCommand=i,e.generate=ue,e.generateIntoCanvas=G,e.javascript=b,e.pathToLineSegments=s,e.webgl=re,e.webglUtils=y,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}function h8(){var n=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},r={},i={};r.L=1,i[1]="L",Object.keys(t).forEach(function(Fe,qe){r[Fe]=1<<qe+1,i[r[Fe]]=Fe}),Object.freeze(r);var s=r.LRI|r.RLI|r.FSI,o=r.L|r.R|r.AL,a=r.B|r.S|r.WS|r.ON|r.FSI|r.LRI|r.RLI|r.PDI,c=r.BN|r.RLE|r.LRE|r.RLO|r.LRO|r.PDF,u=r.S|r.WS|r.B|s|r.PDI|c,d=null;function m(){if(!d){d=new Map;var Fe=function(nt){if(t.hasOwnProperty(nt)){var Ue=0;t[nt].split(",").forEach(function(_t){var J=_t.split("+"),q=J[0],ye=J[1];q=parseInt(q,36),ye=ye?parseInt(ye,36):0,d.set(Ue+=q,r[nt]);for(var tt=0;tt<ye;tt++)d.set(++Ue,r[nt])})}};for(var qe in t)Fe(qe)}}function g(Fe){return m(),d.get(Fe.codePointAt(0))||r.L}function y(Fe){return i[g(Fe)]}var _={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function w(Fe,qe){var nt=36,Ue=0,_t=new Map,J=qe&&new Map,q;return Fe.split(",").forEach(function ye(tt){if(tt.indexOf("+")!==-1)for(var Le=+tt;Le--;)ye(q);else{q=tt;var We=tt.split(">"),st=We[0],et=We[1];st=String.fromCodePoint(Ue+=parseInt(st,nt)),et=String.fromCodePoint(Ue+=parseInt(et,nt)),_t.set(st,et),qe&&J.set(et,st)}}),{map:_t,reverseMap:J}}var x,S,b;function T(){if(!x){var Fe=w(_.pairs,!0),qe=Fe.map,nt=Fe.reverseMap;x=qe,S=nt,b=w(_.canonical,!1).map}}function C(Fe){return T(),x.get(Fe)||null}function P(Fe){return T(),S.get(Fe)||null}function D(Fe){return T(),b.get(Fe)||null}var U=r.L,F=r.R,I=r.EN,k=r.ES,Q=r.ET,j=r.AN,$=r.CS,H=r.B,ie=r.S,re=r.ON,ue=r.BN,G=r.NSM,K=r.AL,W=r.LRO,L=r.RLO,B=r.LRE,ne=r.RLE,ae=r.PDF,de=r.LRI,pe=r.RLI,xe=r.FSI,Me=r.PDI;function Xe(Fe,qe){for(var nt=125,Ue=new Uint32Array(Fe.length),_t=0;_t<Fe.length;_t++)Ue[_t]=g(Fe[_t]);var J=new Map;function q(Ar,zr){var wr=Ue[Ar];Ue[Ar]=zr,J.set(wr,J.get(wr)-1),wr&a&&J.set(a,J.get(a)-1),J.set(zr,(J.get(zr)||0)+1),zr&a&&J.set(a,(J.get(a)||0)+1)}for(var ye=new Uint8Array(Fe.length),tt=new Map,Le=[],We=null,st=0;st<Fe.length;st++)We||Le.push(We={start:st,end:Fe.length-1,level:qe==="rtl"?1:qe==="ltr"?0:Yr(st,!1)}),Ue[st]&H&&(We.end=st,We=null);for(var et=ne|B|L|W|s|Me|ae|H,lt=function(Ar){return Ar+(Ar&1?1:2)},Mt=function(Ar){return Ar+(Ar&1?2:1)},xt=0;xt<Le.length;xt++){We=Le[xt];var Ge=[{_level:We.level,_override:0,_isolate:0}],mt=void 0,ce=0,Ie=0,Pe=0;J.clear();for(var ke=We.start;ke<=We.end;ke++){var Te=Ue[ke];if(mt=Ge[Ge.length-1],J.set(Te,(J.get(Te)||0)+1),Te&a&&J.set(a,(J.get(a)||0)+1),Te&et)if(Te&(ne|B)){ye[ke]=mt._level;var he=(Te===ne?Mt:lt)(mt._level);he<=nt&&!ce&&!Ie?Ge.push({_level:he,_override:0,_isolate:0}):ce||Ie++}else if(Te&(L|W)){ye[ke]=mt._level;var ut=(Te===L?Mt:lt)(mt._level);ut<=nt&&!ce&&!Ie?Ge.push({_level:ut,_override:Te&L?F:U,_isolate:0}):ce||Ie++}else if(Te&s){Te&xe&&(Te=Yr(ke+1,!0)===1?pe:de),ye[ke]=mt._level,mt._override&&q(ke,mt._override);var rt=(Te===pe?Mt:lt)(mt._level);rt<=nt&&ce===0&&Ie===0?(Pe++,Ge.push({_level:rt,_override:0,_isolate:1,_isolInitIndex:ke})):ce++}else if(Te&Me){if(ce>0)ce--;else if(Pe>0){for(Ie=0;!Ge[Ge.length-1]._isolate;)Ge.pop();var De=Ge[Ge.length-1]._isolInitIndex;De!=null&&(tt.set(De,ke),tt.set(ke,De)),Ge.pop(),Pe--}mt=Ge[Ge.length-1],ye[ke]=mt._level,mt._override&&q(ke,mt._override)}else Te&ae?(ce===0&&(Ie>0?Ie--:!mt._isolate&&Ge.length>1&&(Ge.pop(),mt=Ge[Ge.length-1])),ye[ke]=mt._level):Te&H&&(ye[ke]=We.level);else ye[ke]=mt._level,mt._override&&Te!==ue&&q(ke,mt._override)}for(var at=[],St=null,Et=We.start;Et<=We.end;Et++){var Wt=Ue[Et];if(!(Wt&c)){var gn=ye[Et],Yt=Wt&s,pn=Wt===Me;St&&gn===St._level?(St._end=Et,St._endsWithIsolInit=Yt):at.push(St={_start:Et,_end:Et,_level:gn,_startsWithPDI:pn,_endsWithIsolInit:Yt})}}for(var kn=[],Fr=0;Fr<at.length;Fr++){var Sr=at[Fr];if(!Sr._startsWithPDI||Sr._startsWithPDI&&!tt.has(Sr._start)){for(var sr=[St=Sr],$n=void 0;St&&St._endsWithIsolInit&&($n=tt.get(St._end))!=null;)for(var qt=Fr+1;qt<at.length;qt++)if(at[qt]._start===$n){sr.push(St=at[qt]);break}for(var fr=[],Fi=0;Fi<sr.length;Fi++)for(var Y=sr[Fi],ee=Y._start;ee<=Y._end;ee++)fr.push(ee);for(var _e=ye[fr[0]],V=We.level,se=fr[0]-1;se>=0;se--)if(!(Ue[se]&c)){V=ye[se];break}var le=fr[fr.length-1],ve=ye[le],ge=We.level;if(!(Ue[le]&s)){for(var Be=le+1;Be<=We.end;Be++)if(!(Ue[Be]&c)){ge=ye[Be];break}}kn.push({_seqIndices:fr,_sosType:Math.max(V,_e)%2?F:U,_eosType:Math.max(ge,ve)%2?F:U})}}for(var Ze=0;Ze<kn.length;Ze++){var Je=kn[Ze],Se=Je._seqIndices,Lt=Je._sosType,dt=Je._eosType,ht=ye[Se[0]]&1?F:U;if(J.get(G))for(var It=0;It<Se.length;It++){var Ht=Se[It];if(Ue[Ht]&G){for(var jt=Lt,Zt=It-1;Zt>=0;Zt--)if(!(Ue[Se[Zt]]&c)){jt=Ue[Se[Zt]];break}q(Ht,jt&(s|Me)?re:jt)}}if(J.get(I))for(var Tt=0;Tt<Se.length;Tt++){var bt=Se[Tt];if(Ue[bt]&I)for(var Kt=Tt-1;Kt>=-1;Kt--){var $t=Kt===-1?Lt:Ue[Se[Kt]];if($t&o){$t===K&&q(bt,j);break}}}if(J.get(K))for(var Qt=0;Qt<Se.length;Qt++){var In=Se[Qt];Ue[In]&K&&q(In,F)}if(J.get(k)||J.get($))for(var Un=1;Un<Se.length-1;Un++){var On=Se[Un];if(Ue[On]&(k|$)){for(var un=0,an=0,Yn=Un-1;Yn>=0&&(un=Ue[Se[Yn]],!!(un&c));Yn--);for(var on=Un+1;on<Se.length&&(an=Ue[Se[on]],!!(an&c));on++);un===an&&(Ue[On]===k?un===I:un&(I|j))&&q(On,un)}}if(J.get(I))for(var rn=0;rn<Se.length;rn++){var zn=Se[rn];if(Ue[zn]&I){for(var kr=rn-1;kr>=0&&Ue[Se[kr]]&(Q|c);kr--)q(Se[kr],I);for(rn++;rn<Se.length&&Ue[Se[rn]]&(Q|c|I);rn++)Ue[Se[rn]]!==I&&q(Se[rn],I)}}if(J.get(Q)||J.get(k)||J.get($))for(var er=0;er<Se.length;er++){var Ji=Se[er];if(Ue[Ji]&(Q|k|$)){q(Ji,re);for(var Fs=er-1;Fs>=0&&Ue[Se[Fs]]&c;Fs--)q(Se[Fs],re);for(var Tn=er+1;Tn<Se.length&&Ue[Se[Tn]]&c;Tn++)q(Se[Tn],re)}}if(J.get(I))for(var lo=0,xa=Lt;lo<Se.length;lo++){var Kl=Se[lo],Zl=Ue[Kl];Zl&I?xa===U&&q(Kl,U):Zl&o&&(xa=Zl)}if(J.get(a)){var co=F|I|j,rl=co|U,vs=[];{for(var ks=[],ni=0;ni<Se.length;ni++)if(Ue[Se[ni]]&a){var ln=Fe[Se[ni]],ys=void 0;if(C(ln)!==null)if(ks.length<63)ks.push({char:ln,seqIndex:ni});else break;else if((ys=P(ln))!==null)for(var $i=ks.length-1;$i>=0;$i--){var uo=ks[$i].char;if(uo===ys||uo===P(D(ln))||C(D(uo))===ln){vs.push([ks[$i].seqIndex,ni]),ks.length=$i;break}}}vs.sort(function(Ar,zr){return Ar[0]-zr[0]})}for(var _s=0;_s<vs.length;_s++){for(var jf=vs[_s],or=jf[0],Bs=jf[1],Xf=!1,yi=0,Sa=or+1;Sa<Bs;Sa++){var wa=Se[Sa];if(Ue[wa]&rl){Xf=!0;var es=Ue[wa]&co?F:U;if(es===ht){yi=es;break}}}if(Xf&&!yi){yi=Lt;for(var Lo=or-1;Lo>=0;Lo--){var Ea=Se[Lo];if(Ue[Ea]&rl){var Wr=Ue[Ea]&co?F:U;Wr!==ht?yi=Wr:yi=ht;break}}}if(yi){if(Ue[Se[or]]=Ue[Se[Bs]]=yi,yi!==ht){for(var jr=or+1;jr<Se.length;jr++)if(!(Ue[Se[jr]]&c)){g(Fe[Se[jr]])&G&&(Ue[Se[jr]]=yi);break}}if(yi!==ht){for(var fo=Bs+1;fo<Se.length;fo++)if(!(Ue[Se[fo]]&c)){g(Fe[Se[fo]])&G&&(Ue[Se[fo]]=yi);break}}}}for(var xs=0;xs<Se.length;xs++)if(Ue[Se[xs]]&a){for(var il=xs,Ma=xs,_i=Lt,Ta=xs-1;Ta>=0;Ta--)if(Ue[Se[Ta]]&c)il=Ta;else{_i=Ue[Se[Ta]]&co?F:U;break}for(var ki=dt,Io=xs+1;Io<Se.length;Io++)if(Ue[Se[Io]]&(a|c))Ma=Io;else{ki=Ue[Se[Io]]&co?F:U;break}for(var Xr=il;Xr<=Ma;Xr++)Ue[Se[Xr]]=_i===ki?_i:ht;xs=Ma}}}for(var Br=We.start;Br<=We.end;Br++){var No=ye[Br],Bi=Ue[Br];if(No&1?Bi&(U|I|j)&&ye[Br]++:Bi&F?ye[Br]++:Bi&(j|I)&&(ye[Br]+=2),Bi&c&&(ye[Br]=Br===0?We.level:ye[Br-1]),Br===We.end||g(Fe[Br])&(ie|H))for(var Do=Br;Do>=0&&g(Fe[Do])&u;Do--)ye[Do]=We.level}}return{levels:ye,paragraphs:Le};function Yr(Ar,zr){for(var wr=Ar;wr<Fe.length;wr++){var dr=Ue[wr];if(dr&(F|K))return 1;if(dr&(H|U)||zr&&dr===Me)return 0;if(dr&s){var Ci=Uo(wr);wr=Ci===-1?Fe.length:Ci}}return 0}function Uo(Ar){for(var zr=1,wr=Ar+1;wr<Fe.length;wr++){var dr=Ue[wr];if(dr&H)break;if(dr&Me){if(--zr===0)return wr}else dr&s&&zr++}return-1}}var ot="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",He;function te(){if(!He){var Fe=w(ot,!0),qe=Fe.map,nt=Fe.reverseMap;nt.forEach(function(Ue,_t){qe.set(_t,Ue)}),He=qe}}function Ye(Fe){return te(),He.get(Fe)||null}function Re(Fe,qe,nt,Ue){var _t=Fe.length;nt=Math.max(0,nt==null?0:+nt),Ue=Math.min(_t-1,Ue==null?_t-1:+Ue);for(var J=new Map,q=nt;q<=Ue;q++)if(qe[q]&1){var ye=Ye(Fe[q]);ye!==null&&J.set(q,ye)}return J}function je(Fe,qe,nt,Ue){var _t=Fe.length;nt=Math.max(0,nt==null?0:+nt),Ue=Math.min(_t-1,Ue==null?_t-1:+Ue);var J=[];return qe.paragraphs.forEach(function(q){var ye=Math.max(nt,q.start),tt=Math.min(Ue,q.end);if(ye<tt){for(var Le=qe.levels.slice(ye,tt+1),We=tt;We>=ye&&g(Fe[We])&u;We--)Le[We]=q.level;for(var st=q.level,et=1/0,lt=0;lt<Le.length;lt++){var Mt=Le[lt];Mt>st&&(st=Mt),Mt<et&&(et=Mt|1)}for(var xt=st;xt>=et;xt--)for(var Ge=0;Ge<Le.length;Ge++)if(Le[Ge]>=xt){for(var mt=Ge;Ge+1<Le.length&&Le[Ge+1]>=xt;)Ge++;Ge>mt&&J.push([mt+ye,Ge+ye])}}}),J}function Ne(Fe,qe,nt,Ue){var _t=ct(Fe,qe,nt,Ue),J=[].concat(Fe);return _t.forEach(function(q,ye){J[ye]=(qe.levels[q]&1?Ye(Fe[q]):null)||Fe[q]}),J.join("")}function ct(Fe,qe,nt,Ue){for(var _t=je(Fe,qe,nt,Ue),J=[],q=0;q<Fe.length;q++)J[q]=q;return _t.forEach(function(ye){for(var tt=ye[0],Le=ye[1],We=J.slice(tt,Le+1),st=We.length;st--;)J[Le-st]=We[st]}),J}return e.closingToOpeningBracket=P,e.getBidiCharType=g,e.getBidiCharTypeName=y,e.getCanonicalBracket=D,e.getEmbeddingLevels=Xe,e.getMirroredCharacter=Ye,e.getMirroredCharactersMap=Re,e.getReorderSegments=je,e.getReorderedIndices=ct,e.getReorderedString=Ne,e.openingToClosingBracket=C,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}const dL=/\bvoid\s+main\s*\(\s*\)\s*{/g;function vS(n){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(r,i){let s=yn[i];return s?vS(s):r}return n.replace(e,t)}const Oi=[];for(let n=0;n<256;n++)Oi[n]=(n<16?"0":"")+n.toString(16);function p8(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Oi[n&255]+Oi[n>>8&255]+Oi[n>>16&255]+Oi[n>>24&255]+"-"+Oi[e&255]+Oi[e>>8&255]+"-"+Oi[e>>16&15|64]+Oi[e>>24&255]+"-"+Oi[t&63|128]+Oi[t>>8&255]+"-"+Oi[t>>16&255]+Oi[t>>24&255]+Oi[r&255]+Oi[r>>8&255]+Oi[r>>16&255]+Oi[r>>24&255]).toUpperCase()}const rf=Object.assign||function(){let n=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let r=arguments[e];if(r)for(let i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},m8=Date.now(),Kb=new WeakMap,Zb=new Map;let g8=1e10;function yS(n,e){const t=x8(e);let r=Kb.get(n);if(r||Kb.set(n,r=Object.create(null)),r[t])return new r[t];const i=`_onBeforeCompile${t}`,s=function(u,d){n.onBeforeCompile.call(this,u,d);const m=this.customProgramCacheKey()+"|"+u.vertexShader+"|"+u.fragmentShader;let g=Zb[m];if(!g){const y=v8(this,u,e,t);g=Zb[m]=y}u.vertexShader=g.vertexShader,u.fragmentShader=g.fragmentShader,rf(u.uniforms,this.uniforms),e.timeUniform&&(u.uniforms[e.timeUniform]={get value(){return Date.now()-m8}}),this[i]&&this[i](u)},o=function(){return a(e.chained?n:n.clone())},a=function(u){const d=Object.create(u,c);return Object.defineProperty(d,"baseMaterial",{value:n}),Object.defineProperty(d,"id",{value:g8++}),d.uuid=p8(),d.uniforms=rf({},u.uniforms,e.uniforms),d.defines=rf({},u.defines,e.defines),d.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",d.extensions=rf({},u.extensions,e.extensions),d._listeners=void 0,d},c={constructor:{value:o},isDerivedMaterial:{value:!0},type:{get:()=>n.type,set:u=>{n.type=u}},isDerivedFrom:{writable:!0,configurable:!0,value:function(u){const d=this.baseMaterial;return u===d||d.isDerivedMaterial&&d.isDerivedFrom(u)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return n.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return s},set(u){this[i]=u}},copy:{writable:!0,configurable:!0,value:function(u){return n.copy.call(this,u),!n.isShaderMaterial&&!n.isDerivedMaterial&&(rf(this.extensions,u.extensions),rf(this.defines,u.defines),rf(this.uniforms,rw.clone(u.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const u=new n.constructor;return a(u).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let u=this._depthMaterial;return u||(u=this._depthMaterial=yS(n.isDerivedMaterial?n.getDepthMaterial():new xy({depthPacking:QS}),e),u.defines.IS_DEPTH_MATERIAL="",u.uniforms=this.uniforms),u}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let u=this._distanceMaterial;return u||(u=this._distanceMaterial=yS(n.isDerivedMaterial?n.getDistanceMaterial():new Sy,e),u.defines.IS_DISTANCE_MATERIAL="",u.uniforms=this.uniforms),u}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:u,_distanceMaterial:d}=this;u&&u.dispose(),d&&d.dispose(),n.dispose.call(this)}}};return r[t]=o,new o}function v8(n,{vertexShader:e,fragmentShader:t},r,i){let{vertexDefs:s,vertexMainIntro:o,vertexMainOutro:a,vertexTransform:c,fragmentDefs:u,fragmentMainIntro:d,fragmentMainOutro:m,fragmentColorTransform:g,customRewriter:y,timeUniform:_}=r;if(s=s||"",o=o||"",a=a||"",u=u||"",d=d||"",m=m||"",(c||y)&&(e=vS(e)),(g||y)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=vS(t)),y){let w=y({vertexShader:e,fragmentShader:t});e=w.vertexShader,t=w.fragmentShader}if(g){let w=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,x=>(w.push(x),"")),m=`${g}
${w.join(`
`)}
${m}`}if(_){const w=`
uniform float ${_};
`;s=w+s,u=w+u}return c&&(e=`vec3 troika_position_${i};
vec3 troika_normal_${i};
vec2 troika_uv_${i};
${e}
`,s=`${s}
void troikaVertexTransform${i}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${c}
}
`,o=`
troika_position_${i} = vec3(position);
troika_normal_${i} = vec3(normal);
troika_uv_${i} = vec2(uv);
troikaVertexTransform${i}(troika_position_${i}, troika_normal_${i}, troika_uv_${i});
${o}
`,e=e.replace(/\b(position|normal|uv)\b/g,(w,x,S,b)=>/\battribute\s+vec[23]\s+$/.test(b.substr(0,S))?x:`troika_${x}_${i}`),n.map&&n.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${i}`))),e=Qb(e,i,s,o,a),t=Qb(t,i,u,d,m),{vertexShader:e,fragmentShader:t}}function Qb(n,e,t,r,i){return(r||i||t)&&(n=n.replace(dL,`
${t}
void troikaOrigMain${e}() {`),n+=`
void main() {
  ${r}
  troikaOrigMain${e}();
  ${i}
}`),n}function y8(n,e){return n==="uniforms"?void 0:typeof e=="function"?e.toString():e}let _8=0;const Jb=new Map;function x8(n){const e=JSON.stringify(n,y8);let t=Jb.get(e);return t==null&&Jb.set(e,t=++_8),t}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function S8(){return typeof window>"u"&&(self.window=self),function(n){var e={parse:function(i){var s=e._bin,o=new Uint8Array(i);if(s.readASCII(o,0,4)=="ttcf"){var a=4;s.readUshort(o,a),a+=2,s.readUshort(o,a),a+=2;var c=s.readUint(o,a);a+=4;for(var u=[],d=0;d<c;d++){var m=s.readUint(o,a);a+=4,u.push(e._readFont(o,m))}return u}return[e._readFont(o,0)]},_readFont:function(i,s){var o=e._bin,a=s;o.readFixed(i,s),s+=4;var c=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2;for(var u=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],d={_data:i,_offset:a},m={},g=0;g<c;g++){var y=o.readASCII(i,s,4);s+=4,o.readUint(i,s),s+=4;var _=o.readUint(i,s);s+=4;var w=o.readUint(i,s);s+=4,m[y]={offset:_,length:w}}for(g=0;g<u.length;g++){var x=u[g];m[x]&&(d[x.trim()]=e[x.trim()].parse(i,m[x].offset,m[x].length,d))}return d},_tabOffset:function(i,s,o){for(var a=e._bin,c=a.readUshort(i,o+4),u=o+12,d=0;d<c;d++){var m=a.readASCII(i,u,4);u+=4,a.readUint(i,u),u+=4;var g=a.readUint(i,u);if(u+=4,a.readUint(i,u),u+=4,m==s)return g}return 0}};e._bin={readFixed:function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<8|i[s+3])/65540},readF2dot14:function(i,s){return e._bin.readShort(i,s)/16384},readInt:function(i,s){return e._bin._view(i).getInt32(s)},readInt8:function(i,s){return e._bin._view(i).getInt8(s)},readShort:function(i,s){return e._bin._view(i).getInt16(s)},readUshort:function(i,s){return e._bin._view(i).getUint16(s)},readUshorts:function(i,s,o){for(var a=[],c=0;c<o;c++)a.push(e._bin.readUshort(i,s+2*c));return a},readUint:function(i,s){return e._bin._view(i).getUint32(s)},readUint64:function(i,s){return 4294967296*e._bin.readUint(i,s)+e._bin.readUint(i,s+4)},readASCII:function(i,s,o){for(var a="",c=0;c<o;c++)a+=String.fromCharCode(i[s+c]);return a},readUnicode:function(i,s,o){for(var a="",c=0;c<o;c++){var u=i[s++]<<8|i[s++];a+=String.fromCharCode(u)}return a},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(i,s,o){var a=e._bin._tdec;return a&&s==0&&o==i.length?a.decode(i):e._bin.readASCII(i,s,o)},readBytes:function(i,s,o){for(var a=[],c=0;c<o;c++)a.push(i[s+c]);return a},readASCIIArray:function(i,s,o){for(var a=[],c=0;c<o;c++)a.push(String.fromCharCode(i[s+c]));return a},_view:function(i){return i._dataView||(i._dataView=i.buffer?new DataView(i.buffer,i.byteOffset,i.byteLength):new DataView(new Uint8Array(i).buffer))}},e._lctf={},e._lctf.parse=function(i,s,o,a,c){var u=e._bin,d={},m=s;u.readFixed(i,s),s+=4;var g=u.readUshort(i,s);s+=2;var y=u.readUshort(i,s);s+=2;var _=u.readUshort(i,s);return s+=2,d.scriptList=e._lctf.readScriptList(i,m+g),d.featureList=e._lctf.readFeatureList(i,m+y),d.lookupList=e._lctf.readLookupList(i,m+_,c),d},e._lctf.readLookupList=function(i,s,o){var a=e._bin,c=s,u=[],d=a.readUshort(i,s);s+=2;for(var m=0;m<d;m++){var g=a.readUshort(i,s);s+=2;var y=e._lctf.readLookupTable(i,c+g,o);u.push(y)}return u},e._lctf.readLookupTable=function(i,s,o){var a=e._bin,c=s,u={tabs:[]};u.ltype=a.readUshort(i,s),s+=2,u.flag=a.readUshort(i,s),s+=2;var d=a.readUshort(i,s);s+=2;for(var m=u.ltype,g=0;g<d;g++){var y=a.readUshort(i,s);s+=2;var _=o(i,m,c+y,u);u.tabs.push(_)}return u},e._lctf.numOfOnes=function(i){for(var s=0,o=0;o<32;o++)(i>>>o&1)!=0&&s++;return s},e._lctf.readClassDef=function(i,s){var o=e._bin,a=[],c=o.readUshort(i,s);if(s+=2,c==1){var u=o.readUshort(i,s);s+=2;var d=o.readUshort(i,s);s+=2;for(var m=0;m<d;m++)a.push(u+m),a.push(u+m),a.push(o.readUshort(i,s)),s+=2}if(c==2){var g=o.readUshort(i,s);for(s+=2,m=0;m<g;m++)a.push(o.readUshort(i,s)),s+=2,a.push(o.readUshort(i,s)),s+=2,a.push(o.readUshort(i,s)),s+=2}return a},e._lctf.getInterval=function(i,s){for(var o=0;o<i.length;o+=3){var a=i[o],c=i[o+1];if(i[o+2],a<=s&&s<=c)return o}return-1},e._lctf.readCoverage=function(i,s){var o=e._bin,a={};a.fmt=o.readUshort(i,s),s+=2;var c=o.readUshort(i,s);return s+=2,a.fmt==1&&(a.tab=o.readUshorts(i,s,c)),a.fmt==2&&(a.tab=o.readUshorts(i,s,3*c)),a},e._lctf.coverageIndex=function(i,s){var o=i.tab;if(i.fmt==1)return o.indexOf(s);if(i.fmt==2){var a=e._lctf.getInterval(o,s);if(a!=-1)return o[a+2]+(s-o[a])}return-1},e._lctf.readFeatureList=function(i,s){var o=e._bin,a=s,c=[],u=o.readUshort(i,s);s+=2;for(var d=0;d<u;d++){var m=o.readASCII(i,s,4);s+=4;var g=o.readUshort(i,s);s+=2;var y=e._lctf.readFeatureTable(i,a+g);y.tag=m.trim(),c.push(y)}return c},e._lctf.readFeatureTable=function(i,s){var o=e._bin,a=s,c={},u=o.readUshort(i,s);s+=2,u>0&&(c.featureParams=a+u);var d=o.readUshort(i,s);s+=2,c.tab=[];for(var m=0;m<d;m++)c.tab.push(o.readUshort(i,s+2*m));return c},e._lctf.readScriptList=function(i,s){var o=e._bin,a=s,c={},u=o.readUshort(i,s);s+=2;for(var d=0;d<u;d++){var m=o.readASCII(i,s,4);s+=4;var g=o.readUshort(i,s);s+=2,c[m.trim()]=e._lctf.readScriptTable(i,a+g)}return c},e._lctf.readScriptTable=function(i,s){var o=e._bin,a=s,c={},u=o.readUshort(i,s);s+=2,u>0&&(c.default=e._lctf.readLangSysTable(i,a+u));var d=o.readUshort(i,s);s+=2;for(var m=0;m<d;m++){var g=o.readASCII(i,s,4);s+=4;var y=o.readUshort(i,s);s+=2,c[g.trim()]=e._lctf.readLangSysTable(i,a+y)}return c},e._lctf.readLangSysTable=function(i,s){var o=e._bin,a={};o.readUshort(i,s),s+=2,a.reqFeature=o.readUshort(i,s),s+=2;var c=o.readUshort(i,s);return s+=2,a.features=o.readUshorts(i,s,c),a},e.CFF={},e.CFF.parse=function(i,s,o){var a=e._bin;(i=new Uint8Array(i.buffer,s,o))[s=0],i[++s],i[++s],i[++s],s++;var c=[];s=e.CFF.readIndex(i,s,c);for(var u=[],d=0;d<c.length-1;d++)u.push(a.readASCII(i,s+c[d],c[d+1]-c[d]));s+=c[c.length-1];var m=[];s=e.CFF.readIndex(i,s,m);var g=[];for(d=0;d<m.length-1;d++)g.push(e.CFF.readDict(i,s+m[d],s+m[d+1]));s+=m[m.length-1];var y=g[0],_=[];s=e.CFF.readIndex(i,s,_);var w=[];for(d=0;d<_.length-1;d++)w.push(a.readASCII(i,s+_[d],_[d+1]-_[d]));if(s+=_[_.length-1],e.CFF.readSubrs(i,s,y),y.CharStrings){s=y.CharStrings,_=[],s=e.CFF.readIndex(i,s,_);var x=[];for(d=0;d<_.length-1;d++)x.push(a.readBytes(i,s+_[d],_[d+1]-_[d]));y.CharStrings=x}if(y.ROS){s=y.FDArray;var S=[];for(s=e.CFF.readIndex(i,s,S),y.FDArray=[],d=0;d<S.length-1;d++){var b=e.CFF.readDict(i,s+S[d],s+S[d+1]);e.CFF._readFDict(i,b,w),y.FDArray.push(b)}s+=S[S.length-1],s=y.FDSelect,y.FDSelect=[];var T=i[s];if(s++,T!=3)throw T;var C=a.readUshort(i,s);for(s+=2,d=0;d<C+1;d++)y.FDSelect.push(a.readUshort(i,s),i[s+2]),s+=3}return y.Encoding&&(y.Encoding=e.CFF.readEncoding(i,y.Encoding,y.CharStrings.length)),y.charset&&(y.charset=e.CFF.readCharset(i,y.charset,y.CharStrings.length)),e.CFF._readFDict(i,y,w),y},e.CFF._readFDict=function(i,s,o){var a;for(var c in s.Private&&(a=s.Private[1],s.Private=e.CFF.readDict(i,a,a+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(i,a+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(c)!=-1&&(s[c]=o[s[c]-426+35])},e.CFF.readSubrs=function(i,s,o){var a=e._bin,c=[];s=e.CFF.readIndex(i,s,c);var u,d=c.length;u=d<1240?107:d<33900?1131:32768,o.Bias=u,o.Subrs=[];for(var m=0;m<c.length-1;m++)o.Subrs.push(a.readBytes(i,s+c[m],c[m+1]-c[m]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(i,s){for(var o=0;o<i.charset.length;o++)if(i.charset[o]==s)return o;return-1},e.CFF.glyphBySE=function(i,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(i,e.CFF.tableSE[s])},e.CFF.readEncoding=function(i,s,o){e._bin;var a=[".notdef"],c=i[s];if(s++,c!=0)throw"error: unknown encoding format: "+c;var u=i[s];s++;for(var d=0;d<u;d++)a.push(i[s+d]);return a},e.CFF.readCharset=function(i,s,o){var a=e._bin,c=[".notdef"],u=i[s];if(s++,u==0)for(var d=0;d<o;d++){var m=a.readUshort(i,s);s+=2,c.push(m)}else{if(u!=1&&u!=2)throw"error: format: "+u;for(;c.length<o;){m=a.readUshort(i,s),s+=2;var g=0;for(u==1?(g=i[s],s++):(g=a.readUshort(i,s),s+=2),d=0;d<=g;d++)c.push(m),m++}}return c},e.CFF.readIndex=function(i,s,o){var a=e._bin,c=a.readUshort(i,s)+1,u=i[s+=2];if(s++,u==1)for(var d=0;d<c;d++)o.push(i[s+d]);else if(u==2)for(d=0;d<c;d++)o.push(a.readUshort(i,s+2*d));else if(u==3)for(d=0;d<c;d++)o.push(16777215&a.readUint(i,s+3*d-1));else if(c!=1)throw"unsupported offset size: "+u+", count: "+c;return(s+=c*u)-1},e.CFF.getCharString=function(i,s,o){var a=e._bin,c=i[s],u=i[s+1];i[s+2],i[s+3],i[s+4];var d=1,m=null,g=null;c<=20&&(m=c,d=1),c==12&&(m=100*c+u,d=2),21<=c&&c<=27&&(m=c,d=1),c==28&&(g=a.readShort(i,s+1),d=3),29<=c&&c<=31&&(m=c,d=1),32<=c&&c<=246&&(g=c-139,d=1),247<=c&&c<=250&&(g=256*(c-247)+u+108,d=2),251<=c&&c<=254&&(g=256*-(c-251)-u-108,d=2),c==255&&(g=a.readInt(i,s+1)/65535,d=5),o.val=g??"o"+m,o.size=d},e.CFF.readCharString=function(i,s,o){for(var a=s+o,c=e._bin,u=[];s<a;){var d=i[s],m=i[s+1];i[s+2],i[s+3],i[s+4];var g=1,y=null,_=null;d<=20&&(y=d,g=1),d==12&&(y=100*d+m,g=2),d!=19&&d!=20||(y=d,g=2),21<=d&&d<=27&&(y=d,g=1),d==28&&(_=c.readShort(i,s+1),g=3),29<=d&&d<=31&&(y=d,g=1),32<=d&&d<=246&&(_=d-139,g=1),247<=d&&d<=250&&(_=256*(d-247)+m+108,g=2),251<=d&&d<=254&&(_=256*-(d-251)-m-108,g=2),d==255&&(_=c.readInt(i,s+1)/65535,g=5),u.push(_??"o"+y),s+=g}return u},e.CFF.readDict=function(i,s,o){for(var a=e._bin,c={},u=[];s<o;){var d=i[s],m=i[s+1];i[s+2],i[s+3],i[s+4];var g=1,y=null,_=null;if(d==28&&(_=a.readShort(i,s+1),g=3),d==29&&(_=a.readInt(i,s+1),g=5),32<=d&&d<=246&&(_=d-139,g=1),247<=d&&d<=250&&(_=256*(d-247)+m+108,g=2),251<=d&&d<=254&&(_=256*-(d-251)-m-108,g=2),d==255)throw _=a.readInt(i,s+1)/65535,g=5,"unknown number";if(d==30){var w=[];for(g=1;;){var x=i[s+g];g++;var S=x>>4,b=15&x;if(S!=15&&w.push(S),b!=15&&w.push(b),b==15)break}for(var T="",C=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],P=0;P<w.length;P++)T+=C[w[P]];_=parseFloat(T)}d<=21&&(y=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][d],g=1,d==12&&(y=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][m],g=2)),y!=null?(c[y]=u.length==1?u[0]:u,u=[]):u.push(_),s+=g}return c},e.cmap={},e.cmap.parse=function(i,s,o){i=new Uint8Array(i.buffer,s,o),s=0;var a=e._bin,c={};a.readUshort(i,s),s+=2;var u=a.readUshort(i,s);s+=2;var d=[];c.tables=[];for(var m=0;m<u;m++){var g=a.readUshort(i,s);s+=2;var y=a.readUshort(i,s);s+=2;var _=a.readUint(i,s);s+=4;var w="p"+g+"e"+y,x=d.indexOf(_);if(x==-1){var S;x=c.tables.length,d.push(_);var b=a.readUshort(i,_);b==0?S=e.cmap.parse0(i,_):b==4?S=e.cmap.parse4(i,_):b==6?S=e.cmap.parse6(i,_):b==12?S=e.cmap.parse12(i,_):console.debug("unknown format: "+b,g,y,_),c.tables.push(S)}if(c[w]!=null)throw"multiple tables for one platform+encoding";c[w]=x}return c},e.cmap.parse0=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2;var c=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2,a.map=[];for(var u=0;u<c-6;u++)a.map.push(i[s+u]);return a},e.cmap.parse4=function(i,s){var o=e._bin,a=s,c={};c.format=o.readUshort(i,s),s+=2;var u=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2;var d=o.readUshort(i,s);s+=2;var m=d/2;c.searchRange=o.readUshort(i,s),s+=2,c.entrySelector=o.readUshort(i,s),s+=2,c.rangeShift=o.readUshort(i,s),s+=2,c.endCount=o.readUshorts(i,s,m),s+=2*m,s+=2,c.startCount=o.readUshorts(i,s,m),s+=2*m,c.idDelta=[];for(var g=0;g<m;g++)c.idDelta.push(o.readShort(i,s)),s+=2;for(c.idRangeOffset=o.readUshorts(i,s,m),s+=2*m,c.glyphIdArray=[];s<a+u;)c.glyphIdArray.push(o.readUshort(i,s)),s+=2;return c},e.cmap.parse6=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,a.firstCode=o.readUshort(i,s),s+=2;var c=o.readUshort(i,s);s+=2,a.glyphIdArray=[];for(var u=0;u<c;u++)a.glyphIdArray.push(o.readUshort(i,s)),s+=2;return a},e.cmap.parse12=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2,s+=2,o.readUint(i,s),s+=4,o.readUint(i,s),s+=4;var c=o.readUint(i,s);s+=4,a.groups=[];for(var u=0;u<c;u++){var d=s+12*u,m=o.readUint(i,d+0),g=o.readUint(i,d+4),y=o.readUint(i,d+8);a.groups.push([m,g,y])}return a},e.glyf={},e.glyf.parse=function(i,s,o,a){for(var c=[],u=0;u<a.maxp.numGlyphs;u++)c.push(null);return c},e.glyf._parseGlyf=function(i,s){var o=e._bin,a=i._data,c=e._tabOffset(a,"glyf",i._offset)+i.loca[s];if(i.loca[s]==i.loca[s+1])return null;var u={};if(u.noc=o.readShort(a,c),c+=2,u.xMin=o.readShort(a,c),c+=2,u.yMin=o.readShort(a,c),c+=2,u.xMax=o.readShort(a,c),c+=2,u.yMax=o.readShort(a,c),c+=2,u.xMin>=u.xMax||u.yMin>=u.yMax)return null;if(u.noc>0){u.endPts=[];for(var d=0;d<u.noc;d++)u.endPts.push(o.readUshort(a,c)),c+=2;var m=o.readUshort(a,c);if(c+=2,a.length-c<m)return null;u.instructions=o.readBytes(a,c,m),c+=m;var g=u.endPts[u.noc-1]+1;for(u.flags=[],d=0;d<g;d++){var y=a[c];if(c++,u.flags.push(y),(8&y)!=0){var _=a[c];c++;for(var w=0;w<_;w++)u.flags.push(y),d++}}for(u.xs=[],d=0;d<g;d++){var x=(2&u.flags[d])!=0,S=(16&u.flags[d])!=0;x?(u.xs.push(S?a[c]:-a[c]),c++):S?u.xs.push(0):(u.xs.push(o.readShort(a,c)),c+=2)}for(u.ys=[],d=0;d<g;d++)x=(4&u.flags[d])!=0,S=(32&u.flags[d])!=0,x?(u.ys.push(S?a[c]:-a[c]),c++):S?u.ys.push(0):(u.ys.push(o.readShort(a,c)),c+=2);var b=0,T=0;for(d=0;d<g;d++)b+=u.xs[d],T+=u.ys[d],u.xs[d]=b,u.ys[d]=T}else{var C;u.parts=[];do{C=o.readUshort(a,c),c+=2;var P={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(u.parts.push(P),P.glyphIndex=o.readUshort(a,c),c+=2,1&C){var D=o.readShort(a,c);c+=2;var U=o.readShort(a,c);c+=2}else D=o.readInt8(a,c),c++,U=o.readInt8(a,c),c++;2&C?(P.m.tx=D,P.m.ty=U):(P.p1=D,P.p2=U),8&C?(P.m.a=P.m.d=o.readF2dot14(a,c),c+=2):64&C?(P.m.a=o.readF2dot14(a,c),c+=2,P.m.d=o.readF2dot14(a,c),c+=2):128&C&&(P.m.a=o.readF2dot14(a,c),c+=2,P.m.b=o.readF2dot14(a,c),c+=2,P.m.c=o.readF2dot14(a,c),c+=2,P.m.d=o.readF2dot14(a,c),c+=2)}while(32&C);if(256&C){var F=o.readUshort(a,c);for(c+=2,u.instr=[],d=0;d<F;d++)u.instr.push(a[c]),c++}}return u},e.GDEF={},e.GDEF.parse=function(i,s,o,a){var c=s;s+=4;var u=e._bin.readUshort(i,s);return{glyphClassDef:u===0?null:e._lctf.readClassDef(i,c+u)}},e.GPOS={},e.GPOS.parse=function(i,s,o,a){return e._lctf.parse(i,s,o,a,e.GPOS.subt)},e.GPOS.subt=function(i,s,o,a){var c=e._bin,u=o,d={};if(d.fmt=c.readUshort(i,o),o+=2,s==1||s==2||s==3||s==7||s==8&&d.fmt<=2){var m=c.readUshort(i,o);o+=2,d.coverage=e._lctf.readCoverage(i,m+u)}if(s==1&&d.fmt==1){var g=c.readUshort(i,o);o+=2,g!=0&&(d.pos=e.GPOS.readValueRecord(i,o,g))}else if(s==2&&d.fmt>=1&&d.fmt<=2){g=c.readUshort(i,o),o+=2;var y=c.readUshort(i,o);o+=2;var _=e._lctf.numOfOnes(g),w=e._lctf.numOfOnes(y);if(d.fmt==1){d.pairsets=[];var x=c.readUshort(i,o);o+=2;for(var S=0;S<x;S++){var b=u+c.readUshort(i,o);o+=2;var T=c.readUshort(i,b);b+=2;for(var C=[],P=0;P<T;P++){var D=c.readUshort(i,b);b+=2,g!=0&&(j=e.GPOS.readValueRecord(i,b,g),b+=2*_),y!=0&&($=e.GPOS.readValueRecord(i,b,y),b+=2*w),C.push({gid2:D,val1:j,val2:$})}d.pairsets.push(C)}}if(d.fmt==2){var U=c.readUshort(i,o);o+=2;var F=c.readUshort(i,o);o+=2;var I=c.readUshort(i,o);o+=2;var k=c.readUshort(i,o);for(o+=2,d.classDef1=e._lctf.readClassDef(i,u+U),d.classDef2=e._lctf.readClassDef(i,u+F),d.matrix=[],S=0;S<I;S++){var Q=[];for(P=0;P<k;P++){var j=null,$=null;g!=0&&(j=e.GPOS.readValueRecord(i,o,g),o+=2*_),y!=0&&($=e.GPOS.readValueRecord(i,o,y),o+=2*w),Q.push({val1:j,val2:$})}d.matrix.push(Q)}}}else if(s==4&&d.fmt==1)d.markCoverage=e._lctf.readCoverage(i,c.readUshort(i,o)+u),d.baseCoverage=e._lctf.readCoverage(i,c.readUshort(i,o+2)+u),d.markClassCount=c.readUshort(i,o+4),d.markArray=e.GPOS.readMarkArray(i,c.readUshort(i,o+6)+u),d.baseArray=e.GPOS.readBaseArray(i,c.readUshort(i,o+8)+u,d.markClassCount);else if(s==6&&d.fmt==1)d.mark1Coverage=e._lctf.readCoverage(i,c.readUshort(i,o)+u),d.mark2Coverage=e._lctf.readCoverage(i,c.readUshort(i,o+2)+u),d.markClassCount=c.readUshort(i,o+4),d.mark1Array=e.GPOS.readMarkArray(i,c.readUshort(i,o+6)+u),d.mark2Array=e.GPOS.readBaseArray(i,c.readUshort(i,o+8)+u,d.markClassCount);else{if(s==9&&d.fmt==1){var H=c.readUshort(i,o);o+=2;var ie=c.readUint(i,o);if(o+=4,a.ltype==9)a.ltype=H;else if(a.ltype!=H)throw"invalid extension substitution";return e.GPOS.subt(i,a.ltype,u+ie)}console.debug("unsupported GPOS table LookupType",s,"format",d.fmt)}return d},e.GPOS.readValueRecord=function(i,s,o){var a=e._bin,c=[];return c.push(1&o?a.readShort(i,s):0),s+=1&o?2:0,c.push(2&o?a.readShort(i,s):0),s+=2&o?2:0,c.push(4&o?a.readShort(i,s):0),s+=4&o?2:0,c.push(8&o?a.readShort(i,s):0),s+=8&o?2:0,c},e.GPOS.readBaseArray=function(i,s,o){var a=e._bin,c=[],u=s,d=a.readUshort(i,s);s+=2;for(var m=0;m<d;m++){for(var g=[],y=0;y<o;y++)g.push(e.GPOS.readAnchorRecord(i,u+a.readUshort(i,s))),s+=2;c.push(g)}return c},e.GPOS.readMarkArray=function(i,s){var o=e._bin,a=[],c=s,u=o.readUshort(i,s);s+=2;for(var d=0;d<u;d++){var m=e.GPOS.readAnchorRecord(i,o.readUshort(i,s+2)+c);m.markClass=o.readUshort(i,s),a.push(m),s+=4}return a},e.GPOS.readAnchorRecord=function(i,s){var o=e._bin,a={};return a.fmt=o.readUshort(i,s),a.x=o.readShort(i,s+2),a.y=o.readShort(i,s+4),a},e.GSUB={},e.GSUB.parse=function(i,s,o,a){return e._lctf.parse(i,s,o,a,e.GSUB.subt)},e.GSUB.subt=function(i,s,o,a){var c=e._bin,u=o,d={};if(d.fmt=c.readUshort(i,o),o+=2,s!=1&&s!=2&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==2||s==4||s==5&&d.fmt<=2||s==6&&d.fmt<=2){var m=c.readUshort(i,o);o+=2,d.coverage=e._lctf.readCoverage(i,u+m)}if(s==1&&d.fmt>=1&&d.fmt<=2){if(d.fmt==1)d.delta=c.readShort(i,o),o+=2;else if(d.fmt==2){var g=c.readUshort(i,o);o+=2,d.newg=c.readUshorts(i,o,g),o+=2*d.newg.length}}else if(s==2&&d.fmt==1){g=c.readUshort(i,o),o+=2,d.seqs=[];for(var y=0;y<g;y++){var _=c.readUshort(i,o)+u;o+=2;var w=c.readUshort(i,_);d.seqs.push(c.readUshorts(i,_+2,w))}}else if(s==4)for(d.vals=[],g=c.readUshort(i,o),o+=2,y=0;y<g;y++){var x=c.readUshort(i,o);o+=2,d.vals.push(e.GSUB.readLigatureSet(i,u+x))}else if(s==5&&d.fmt==2){if(d.fmt==2){var S=c.readUshort(i,o);o+=2,d.cDef=e._lctf.readClassDef(i,u+S),d.scset=[];var b=c.readUshort(i,o);for(o+=2,y=0;y<b;y++){var T=c.readUshort(i,o);o+=2,d.scset.push(T==0?null:e.GSUB.readSubClassSet(i,u+T))}}}else if(s==6&&d.fmt==3){if(d.fmt==3){for(y=0;y<3;y++){g=c.readUshort(i,o),o+=2;for(var C=[],P=0;P<g;P++)C.push(e._lctf.readCoverage(i,u+c.readUshort(i,o+2*P)));o+=2*g,y==0&&(d.backCvg=C),y==1&&(d.inptCvg=C),y==2&&(d.ahedCvg=C)}g=c.readUshort(i,o),o+=2,d.lookupRec=e.GSUB.readSubstLookupRecords(i,o,g)}}else{if(s==7&&d.fmt==1){var D=c.readUshort(i,o);o+=2;var U=c.readUint(i,o);if(o+=4,a.ltype==9)a.ltype=D;else if(a.ltype!=D)throw"invalid extension substitution";return e.GSUB.subt(i,a.ltype,u+U)}console.debug("unsupported GSUB table LookupType",s,"format",d.fmt)}return d},e.GSUB.readSubClassSet=function(i,s){var o=e._bin.readUshort,a=s,c=[],u=o(i,s);s+=2;for(var d=0;d<u;d++){var m=o(i,s);s+=2,c.push(e.GSUB.readSubClassRule(i,a+m))}return c},e.GSUB.readSubClassRule=function(i,s){var o=e._bin.readUshort,a={},c=o(i,s),u=o(i,s+=2);s+=2,a.input=[];for(var d=0;d<c-1;d++)a.input.push(o(i,s)),s+=2;return a.substLookupRecords=e.GSUB.readSubstLookupRecords(i,s,u),a},e.GSUB.readSubstLookupRecords=function(i,s,o){for(var a=e._bin.readUshort,c=[],u=0;u<o;u++)c.push(a(i,s),a(i,s+2)),s+=4;return c},e.GSUB.readChainSubClassSet=function(i,s){var o=e._bin,a=s,c=[],u=o.readUshort(i,s);s+=2;for(var d=0;d<u;d++){var m=o.readUshort(i,s);s+=2,c.push(e.GSUB.readChainSubClassRule(i,a+m))}return c},e.GSUB.readChainSubClassRule=function(i,s){for(var o=e._bin,a={},c=["backtrack","input","lookahead"],u=0;u<c.length;u++){var d=o.readUshort(i,s);s+=2,u==1&&d--,a[c[u]]=o.readUshorts(i,s,d),s+=2*a[c[u]].length}return d=o.readUshort(i,s),s+=2,a.subst=o.readUshorts(i,s,2*d),s+=2*a.subst.length,a},e.GSUB.readLigatureSet=function(i,s){var o=e._bin,a=s,c=[],u=o.readUshort(i,s);s+=2;for(var d=0;d<u;d++){var m=o.readUshort(i,s);s+=2,c.push(e.GSUB.readLigature(i,a+m))}return c},e.GSUB.readLigature=function(i,s){var o=e._bin,a={chain:[]};a.nglyph=o.readUshort(i,s),s+=2;var c=o.readUshort(i,s);s+=2;for(var u=0;u<c-1;u++)a.chain.push(o.readUshort(i,s)),s+=2;return a},e.head={},e.head.parse=function(i,s,o){var a=e._bin,c={};return a.readFixed(i,s),s+=4,c.fontRevision=a.readFixed(i,s),s+=4,a.readUint(i,s),s+=4,a.readUint(i,s),s+=4,c.flags=a.readUshort(i,s),s+=2,c.unitsPerEm=a.readUshort(i,s),s+=2,c.created=a.readUint64(i,s),s+=8,c.modified=a.readUint64(i,s),s+=8,c.xMin=a.readShort(i,s),s+=2,c.yMin=a.readShort(i,s),s+=2,c.xMax=a.readShort(i,s),s+=2,c.yMax=a.readShort(i,s),s+=2,c.macStyle=a.readUshort(i,s),s+=2,c.lowestRecPPEM=a.readUshort(i,s),s+=2,c.fontDirectionHint=a.readShort(i,s),s+=2,c.indexToLocFormat=a.readShort(i,s),s+=2,c.glyphDataFormat=a.readShort(i,s),s+=2,c},e.hhea={},e.hhea.parse=function(i,s,o){var a=e._bin,c={};return a.readFixed(i,s),s+=4,c.ascender=a.readShort(i,s),s+=2,c.descender=a.readShort(i,s),s+=2,c.lineGap=a.readShort(i,s),s+=2,c.advanceWidthMax=a.readUshort(i,s),s+=2,c.minLeftSideBearing=a.readShort(i,s),s+=2,c.minRightSideBearing=a.readShort(i,s),s+=2,c.xMaxExtent=a.readShort(i,s),s+=2,c.caretSlopeRise=a.readShort(i,s),s+=2,c.caretSlopeRun=a.readShort(i,s),s+=2,c.caretOffset=a.readShort(i,s),s+=2,s+=8,c.metricDataFormat=a.readShort(i,s),s+=2,c.numberOfHMetrics=a.readUshort(i,s),s+=2,c},e.hmtx={},e.hmtx.parse=function(i,s,o,a){for(var c=e._bin,u={aWidth:[],lsBearing:[]},d=0,m=0,g=0;g<a.maxp.numGlyphs;g++)g<a.hhea.numberOfHMetrics&&(d=c.readUshort(i,s),s+=2,m=c.readShort(i,s),s+=2),u.aWidth.push(d),u.lsBearing.push(m);return u},e.kern={},e.kern.parse=function(i,s,o,a){var c=e._bin,u=c.readUshort(i,s);if(s+=2,u==1)return e.kern.parseV1(i,s-2,o,a);var d=c.readUshort(i,s);s+=2;for(var m={glyph1:[],rval:[]},g=0;g<d;g++){s+=2,o=c.readUshort(i,s),s+=2;var y=c.readUshort(i,s);s+=2;var _=y>>>8;if((_&=15)!=0)throw"unknown kern table format: "+_;s=e.kern.readFormat0(i,s,m)}return m},e.kern.parseV1=function(i,s,o,a){var c=e._bin;c.readFixed(i,s),s+=4;var u=c.readUint(i,s);s+=4;for(var d={glyph1:[],rval:[]},m=0;m<u;m++){c.readUint(i,s),s+=4;var g=c.readUshort(i,s);s+=2,c.readUshort(i,s),s+=2;var y=g>>>8;if((y&=15)!=0)throw"unknown kern table format: "+y;s=e.kern.readFormat0(i,s,d)}return d},e.kern.readFormat0=function(i,s,o){var a=e._bin,c=-1,u=a.readUshort(i,s);s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2;for(var d=0;d<u;d++){var m=a.readUshort(i,s);s+=2;var g=a.readUshort(i,s);s+=2;var y=a.readShort(i,s);s+=2,m!=c&&(o.glyph1.push(m),o.rval.push({glyph2:[],vals:[]}));var _=o.rval[o.rval.length-1];_.glyph2.push(g),_.vals.push(y),c=m}return s},e.loca={},e.loca.parse=function(i,s,o,a){var c=e._bin,u=[],d=a.head.indexToLocFormat,m=a.maxp.numGlyphs+1;if(d==0)for(var g=0;g<m;g++)u.push(c.readUshort(i,s+(g<<1))<<1);if(d==1)for(g=0;g<m;g++)u.push(c.readUint(i,s+(g<<2)));return u},e.maxp={},e.maxp.parse=function(i,s,o){var a=e._bin,c={},u=a.readUint(i,s);return s+=4,c.numGlyphs=a.readUshort(i,s),s+=2,u==65536&&(c.maxPoints=a.readUshort(i,s),s+=2,c.maxContours=a.readUshort(i,s),s+=2,c.maxCompositePoints=a.readUshort(i,s),s+=2,c.maxCompositeContours=a.readUshort(i,s),s+=2,c.maxZones=a.readUshort(i,s),s+=2,c.maxTwilightPoints=a.readUshort(i,s),s+=2,c.maxStorage=a.readUshort(i,s),s+=2,c.maxFunctionDefs=a.readUshort(i,s),s+=2,c.maxInstructionDefs=a.readUshort(i,s),s+=2,c.maxStackElements=a.readUshort(i,s),s+=2,c.maxSizeOfInstructions=a.readUshort(i,s),s+=2,c.maxComponentElements=a.readUshort(i,s),s+=2,c.maxComponentDepth=a.readUshort(i,s),s+=2),c},e.name={},e.name.parse=function(i,s,o){var a=e._bin,c={};a.readUshort(i,s),s+=2;var u=a.readUshort(i,s);s+=2,a.readUshort(i,s);for(var d,m=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],g=s+=2,y=0;y<u;y++){var _=a.readUshort(i,s);s+=2;var w=a.readUshort(i,s);s+=2;var x=a.readUshort(i,s);s+=2;var S=a.readUshort(i,s);s+=2;var b=a.readUshort(i,s);s+=2;var T=a.readUshort(i,s);s+=2;var C,P=m[S],D=g+12*u+T;if(_==0)C=a.readUnicode(i,D,b/2);else if(_==3&&w==0)C=a.readUnicode(i,D,b/2);else if(w==0)C=a.readASCII(i,D,b);else if(w==1)C=a.readUnicode(i,D,b/2);else if(w==3)C=a.readUnicode(i,D,b/2);else{if(_!=1)throw"unknown encoding "+w+", platformID: "+_;C=a.readASCII(i,D,b),console.debug("reading unknown MAC encoding "+w+" as ASCII")}var U="p"+_+","+x.toString(16);c[U]==null&&(c[U]={}),c[U][P!==void 0?P:S]=C,c[U]._lang=x}for(var F in c)if(c[F].postScriptName!=null&&c[F]._lang==1033)return c[F];for(var F in c)if(c[F].postScriptName!=null&&c[F]._lang==0)return c[F];for(var F in c)if(c[F].postScriptName!=null&&c[F]._lang==3084)return c[F];for(var F in c)if(c[F].postScriptName!=null)return c[F];for(var F in c){d=F;break}return console.debug("returning name table with languageID "+c[d]._lang),c[d]},e["OS/2"]={},e["OS/2"].parse=function(i,s,o){var a=e._bin.readUshort(i,s);s+=2;var c={};if(a==0)e["OS/2"].version0(i,s,c);else if(a==1)e["OS/2"].version1(i,s,c);else if(a==2||a==3||a==4)e["OS/2"].version2(i,s,c);else{if(a!=5)throw"unknown OS/2 table version: "+a;e["OS/2"].version5(i,s,c)}return c},e["OS/2"].version0=function(i,s,o){var a=e._bin;return o.xAvgCharWidth=a.readShort(i,s),s+=2,o.usWeightClass=a.readUshort(i,s),s+=2,o.usWidthClass=a.readUshort(i,s),s+=2,o.fsType=a.readUshort(i,s),s+=2,o.ySubscriptXSize=a.readShort(i,s),s+=2,o.ySubscriptYSize=a.readShort(i,s),s+=2,o.ySubscriptXOffset=a.readShort(i,s),s+=2,o.ySubscriptYOffset=a.readShort(i,s),s+=2,o.ySuperscriptXSize=a.readShort(i,s),s+=2,o.ySuperscriptYSize=a.readShort(i,s),s+=2,o.ySuperscriptXOffset=a.readShort(i,s),s+=2,o.ySuperscriptYOffset=a.readShort(i,s),s+=2,o.yStrikeoutSize=a.readShort(i,s),s+=2,o.yStrikeoutPosition=a.readShort(i,s),s+=2,o.sFamilyClass=a.readShort(i,s),s+=2,o.panose=a.readBytes(i,s,10),s+=10,o.ulUnicodeRange1=a.readUint(i,s),s+=4,o.ulUnicodeRange2=a.readUint(i,s),s+=4,o.ulUnicodeRange3=a.readUint(i,s),s+=4,o.ulUnicodeRange4=a.readUint(i,s),s+=4,o.achVendID=[a.readInt8(i,s),a.readInt8(i,s+1),a.readInt8(i,s+2),a.readInt8(i,s+3)],s+=4,o.fsSelection=a.readUshort(i,s),s+=2,o.usFirstCharIndex=a.readUshort(i,s),s+=2,o.usLastCharIndex=a.readUshort(i,s),s+=2,o.sTypoAscender=a.readShort(i,s),s+=2,o.sTypoDescender=a.readShort(i,s),s+=2,o.sTypoLineGap=a.readShort(i,s),s+=2,o.usWinAscent=a.readUshort(i,s),s+=2,o.usWinDescent=a.readUshort(i,s),s+=2},e["OS/2"].version1=function(i,s,o){var a=e._bin;return s=e["OS/2"].version0(i,s,o),o.ulCodePageRange1=a.readUint(i,s),s+=4,o.ulCodePageRange2=a.readUint(i,s),s+=4},e["OS/2"].version2=function(i,s,o){var a=e._bin;return s=e["OS/2"].version1(i,s,o),o.sxHeight=a.readShort(i,s),s+=2,o.sCapHeight=a.readShort(i,s),s+=2,o.usDefault=a.readUshort(i,s),s+=2,o.usBreak=a.readUshort(i,s),s+=2,o.usMaxContext=a.readUshort(i,s),s+=2},e["OS/2"].version5=function(i,s,o){var a=e._bin;return s=e["OS/2"].version2(i,s,o),o.usLowerOpticalPointSize=a.readUshort(i,s),s+=2,o.usUpperOpticalPointSize=a.readUshort(i,s),s+=2},e.post={},e.post.parse=function(i,s,o){var a=e._bin,c={};return c.version=a.readFixed(i,s),s+=4,c.italicAngle=a.readFixed(i,s),s+=4,c.underlinePosition=a.readShort(i,s),s+=2,c.underlineThickness=a.readShort(i,s),s+=2,c},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(i,s){var o=i.cmap,a=-1;if(o.p0e4!=null?a=o.p0e4:o.p3e1!=null?a=o.p3e1:o.p1e0!=null?a=o.p1e0:o.p0e3!=null&&(a=o.p0e3),a==-1)throw"no familiar platform and encoding!";var c=o.tables[a];if(c.format==0)return s>=c.map.length?0:c.map[s];if(c.format==4){for(var u=-1,d=0;d<c.endCount.length;d++)if(s<=c.endCount[d]){u=d;break}return u==-1||c.startCount[u]>s?0:65535&(c.idRangeOffset[u]!=0?c.glyphIdArray[s-c.startCount[u]+(c.idRangeOffset[u]>>1)-(c.idRangeOffset.length-u)]:s+c.idDelta[u])}if(c.format==12){if(s>c.groups[c.groups.length-1][1])return 0;for(d=0;d<c.groups.length;d++){var m=c.groups[d];if(m[0]<=s&&s<=m[1])return m[2]+(s-m[0])}return 0}throw"unknown cmap table format "+c.format},e.U.glyphToPath=function(i,s){var o={cmds:[],crds:[]};if(i.SVG&&i.SVG.entries[s]){var a=i.SVG.entries[s];return a==null?o:(typeof a=="string"&&(a=e.SVG.toPath(a),i.SVG.entries[s]=a),a)}if(i.CFF){var c={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:i.CFF.Private?i.CFF.Private.defaultWidthX:0,open:!1},u=i.CFF,d=i.CFF.Private;if(u.ROS){for(var m=0;u.FDSelect[m+2]<=s;)m+=2;d=u.FDArray[u.FDSelect[m+1]].Private}e.U._drawCFF(i.CFF.CharStrings[s],c,u,d,o)}else i.glyf&&e.U._drawGlyf(s,i,o);return o},e.U._drawGlyf=function(i,s,o){var a=s.glyf[i];a==null&&(a=s.glyf[i]=e.glyf._parseGlyf(s,i)),a!=null&&(a.noc>-1?e.U._simpleGlyph(a,o):e.U._compoGlyph(a,s,o))},e.U._simpleGlyph=function(i,s){for(var o=0;o<i.noc;o++){for(var a=o==0?0:i.endPts[o-1]+1,c=i.endPts[o],u=a;u<=c;u++){var d=u==a?c:u-1,m=u==c?a:u+1,g=1&i.flags[u],y=1&i.flags[d],_=1&i.flags[m],w=i.xs[u],x=i.ys[u];if(u==a)if(g){if(!y){e.U.P.moveTo(s,w,x);continue}e.U.P.moveTo(s,i.xs[d],i.ys[d])}else y?e.U.P.moveTo(s,i.xs[d],i.ys[d]):e.U.P.moveTo(s,(i.xs[d]+w)/2,(i.ys[d]+x)/2);g?y&&e.U.P.lineTo(s,w,x):_?e.U.P.qcurveTo(s,w,x,i.xs[m],i.ys[m]):e.U.P.qcurveTo(s,w,x,(w+i.xs[m])/2,(x+i.ys[m])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(i,s,o){for(var a=0;a<i.parts.length;a++){var c={cmds:[],crds:[]},u=i.parts[a];e.U._drawGlyf(u.glyphIndex,s,c);for(var d=u.m,m=0;m<c.crds.length;m+=2){var g=c.crds[m],y=c.crds[m+1];o.crds.push(g*d.a+y*d.b+d.tx),o.crds.push(g*d.c+y*d.d+d.ty)}for(m=0;m<c.cmds.length;m++)o.cmds.push(c.cmds[m])}},e.U._getGlyphClass=function(i,s){var o=e._lctf.getInterval(s,i);return o==-1?0:s[o+2]},e.U._applySubs=function(i,s,o,a){for(var c=i.length-s-1,u=0;u<o.tabs.length;u++)if(o.tabs[u]!=null){var d,m=o.tabs[u];if(!m.coverage||(d=e._lctf.coverageIndex(m.coverage,i[s]))!=-1){if(o.ltype==1)i[s],m.fmt==1?i[s]=i[s]+m.delta:i[s]=m.newg[d];else if(o.ltype==4)for(var g=m.vals[d],y=0;y<g.length;y++){var _=g[y],w=_.chain.length;if(!(w>c)){for(var x=!0,S=0,b=0;b<w;b++){for(;i[s+S+(1+b)]==-1;)S++;_.chain[b]!=i[s+S+(1+b)]&&(x=!1)}if(x){for(i[s]=_.nglyph,b=0;b<w+S;b++)i[s+b+1]=-1;break}}}else if(o.ltype==5&&m.fmt==2)for(var T=e._lctf.getInterval(m.cDef,i[s]),C=m.cDef[T+2],P=m.scset[C],D=0;D<P.length;D++){var U=P[D],F=U.input;if(!(F.length>c)){for(x=!0,b=0;b<F.length;b++){var I=e._lctf.getInterval(m.cDef,i[s+1+b]);if(T==-1&&m.cDef[I+2]!=F[b]){x=!1;break}}if(x){var k=U.substLookupRecords;for(y=0;y<k.length;y+=2)k[y],k[y+1]}}}else if(o.ltype==6&&m.fmt==3){if(!e.U._glsCovered(i,m.backCvg,s-m.backCvg.length)||!e.U._glsCovered(i,m.inptCvg,s)||!e.U._glsCovered(i,m.ahedCvg,s+m.inptCvg.length))continue;var Q=m.lookupRec;for(D=0;D<Q.length;D+=2){T=Q[D];var j=a[Q[D+1]];e.U._applySubs(i,s+T,j,a)}}}}},e.U._glsCovered=function(i,s,o){for(var a=0;a<s.length;a++)if(e._lctf.coverageIndex(s[a],i[o+a])==-1)return!1;return!0},e.U.glyphsToPath=function(i,s,o){for(var a={cmds:[],crds:[]},c=0,u=0;u<s.length;u++){var d=s[u];if(d!=-1){for(var m=u<s.length-1&&s[u+1]!=-1?s[u+1]:0,g=e.U.glyphToPath(i,d),y=0;y<g.crds.length;y+=2)a.crds.push(g.crds[y]+c),a.crds.push(g.crds[y+1]);for(o&&a.cmds.push(o),y=0;y<g.cmds.length;y++)a.cmds.push(g.cmds[y]);o&&a.cmds.push("X"),c+=i.hmtx.aWidth[d],u<s.length-1&&(c+=e.U.getPairAdjustment(i,d,m))}}return a},e.U.P={},e.U.P.moveTo=function(i,s,o){i.cmds.push("M"),i.crds.push(s,o)},e.U.P.lineTo=function(i,s,o){i.cmds.push("L"),i.crds.push(s,o)},e.U.P.curveTo=function(i,s,o,a,c,u,d){i.cmds.push("C"),i.crds.push(s,o,a,c,u,d)},e.U.P.qcurveTo=function(i,s,o,a,c){i.cmds.push("Q"),i.crds.push(s,o,a,c)},e.U.P.closePath=function(i){i.cmds.push("Z")},e.U._drawCFF=function(i,s,o,a,c){for(var u=s.stack,d=s.nStems,m=s.haveWidth,g=s.width,y=s.open,_=0,w=s.x,x=s.y,S=0,b=0,T=0,C=0,P=0,D=0,U=0,F=0,I=0,k=0,Q={val:0,size:0};_<i.length;){e.CFF.getCharString(i,_,Q);var j=Q.val;if(_+=Q.size,j=="o1"||j=="o18")u.length%2!=0&&!m&&(g=u.shift()+a.nominalWidthX),d+=u.length>>1,u.length=0,m=!0;else if(j=="o3"||j=="o23")u.length%2!=0&&!m&&(g=u.shift()+a.nominalWidthX),d+=u.length>>1,u.length=0,m=!0;else if(j=="o4")u.length>1&&!m&&(g=u.shift()+a.nominalWidthX,m=!0),y&&e.U.P.closePath(c),x+=u.pop(),e.U.P.moveTo(c,w,x),y=!0;else if(j=="o5")for(;u.length>0;)w+=u.shift(),x+=u.shift(),e.U.P.lineTo(c,w,x);else if(j=="o6"||j=="o7")for(var $=u.length,H=j=="o6",ie=0;ie<$;ie++){var re=u.shift();H?w+=re:x+=re,H=!H,e.U.P.lineTo(c,w,x)}else if(j=="o8"||j=="o24"){$=u.length;for(var ue=0;ue+6<=$;)S=w+u.shift(),b=x+u.shift(),T=S+u.shift(),C=b+u.shift(),w=T+u.shift(),x=C+u.shift(),e.U.P.curveTo(c,S,b,T,C,w,x),ue+=6;j=="o24"&&(w+=u.shift(),x+=u.shift(),e.U.P.lineTo(c,w,x))}else{if(j=="o11")break;if(j=="o1234"||j=="o1235"||j=="o1236"||j=="o1237")j=="o1234"&&(b=x,T=(S=w+u.shift())+u.shift(),k=C=b+u.shift(),D=C,F=x,w=(U=(P=(I=T+u.shift())+u.shift())+u.shift())+u.shift(),e.U.P.curveTo(c,S,b,T,C,I,k),e.U.P.curveTo(c,P,D,U,F,w,x)),j=="o1235"&&(S=w+u.shift(),b=x+u.shift(),T=S+u.shift(),C=b+u.shift(),I=T+u.shift(),k=C+u.shift(),P=I+u.shift(),D=k+u.shift(),U=P+u.shift(),F=D+u.shift(),w=U+u.shift(),x=F+u.shift(),u.shift(),e.U.P.curveTo(c,S,b,T,C,I,k),e.U.P.curveTo(c,P,D,U,F,w,x)),j=="o1236"&&(S=w+u.shift(),b=x+u.shift(),T=S+u.shift(),k=C=b+u.shift(),D=C,U=(P=(I=T+u.shift())+u.shift())+u.shift(),F=D+u.shift(),w=U+u.shift(),e.U.P.curveTo(c,S,b,T,C,I,k),e.U.P.curveTo(c,P,D,U,F,w,x)),j=="o1237"&&(S=w+u.shift(),b=x+u.shift(),T=S+u.shift(),C=b+u.shift(),I=T+u.shift(),k=C+u.shift(),P=I+u.shift(),D=k+u.shift(),U=P+u.shift(),F=D+u.shift(),Math.abs(U-w)>Math.abs(F-x)?w=U+u.shift():x=F+u.shift(),e.U.P.curveTo(c,S,b,T,C,I,k),e.U.P.curveTo(c,P,D,U,F,w,x));else if(j=="o14"){if(u.length>0&&!m&&(g=u.shift()+o.nominalWidthX,m=!0),u.length==4){var G=u.shift(),K=u.shift(),W=u.shift(),L=u.shift(),B=e.CFF.glyphBySE(o,W),ne=e.CFF.glyphBySE(o,L);e.U._drawCFF(o.CharStrings[B],s,o,a,c),s.x=G,s.y=K,e.U._drawCFF(o.CharStrings[ne],s,o,a,c)}y&&(e.U.P.closePath(c),y=!1)}else if(j=="o19"||j=="o20")u.length%2!=0&&!m&&(g=u.shift()+a.nominalWidthX),d+=u.length>>1,u.length=0,m=!0,_+=d+7>>3;else if(j=="o21")u.length>2&&!m&&(g=u.shift()+a.nominalWidthX,m=!0),x+=u.pop(),w+=u.pop(),y&&e.U.P.closePath(c),e.U.P.moveTo(c,w,x),y=!0;else if(j=="o22")u.length>1&&!m&&(g=u.shift()+a.nominalWidthX,m=!0),w+=u.pop(),y&&e.U.P.closePath(c),e.U.P.moveTo(c,w,x),y=!0;else if(j=="o25"){for(;u.length>6;)w+=u.shift(),x+=u.shift(),e.U.P.lineTo(c,w,x);S=w+u.shift(),b=x+u.shift(),T=S+u.shift(),C=b+u.shift(),w=T+u.shift(),x=C+u.shift(),e.U.P.curveTo(c,S,b,T,C,w,x)}else if(j=="o26")for(u.length%2&&(w+=u.shift());u.length>0;)S=w,b=x+u.shift(),w=T=S+u.shift(),x=(C=b+u.shift())+u.shift(),e.U.P.curveTo(c,S,b,T,C,w,x);else if(j=="o27")for(u.length%2&&(x+=u.shift());u.length>0;)b=x,T=(S=w+u.shift())+u.shift(),C=b+u.shift(),w=T+u.shift(),x=C,e.U.P.curveTo(c,S,b,T,C,w,x);else if(j=="o10"||j=="o29"){var ae=j=="o10"?a:o;if(u.length==0)console.debug("error: empty stack");else{var de=u.pop(),pe=ae.Subrs[de+ae.Bias];s.x=w,s.y=x,s.nStems=d,s.haveWidth=m,s.width=g,s.open=y,e.U._drawCFF(pe,s,o,a,c),w=s.x,x=s.y,d=s.nStems,m=s.haveWidth,g=s.width,y=s.open}}else if(j=="o30"||j=="o31"){var xe=u.length,Me=(ue=0,j=="o31");for(ue+=xe-($=-3&xe);ue<$;)Me?(b=x,T=(S=w+u.shift())+u.shift(),x=(C=b+u.shift())+u.shift(),$-ue==5?(w=T+u.shift(),ue++):w=T,Me=!1):(S=w,b=x+u.shift(),T=S+u.shift(),C=b+u.shift(),w=T+u.shift(),$-ue==5?(x=C+u.shift(),ue++):x=C,Me=!0),e.U.P.curveTo(c,S,b,T,C,w,x),ue+=4}else{if((j+"").charAt(0)=="o")throw console.debug("Unknown operation: "+j,i),j;u.push(j)}}}s.x=w,s.y=x,s.nStems=d,s.haveWidth=m,s.width=g,s.open=y};var t=e,r={Typr:t};return n.Typr=t,n.default=r,Object.defineProperty(n,"__esModule",{value:!0}),n}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function w8(){return function(n){var e=Uint8Array,t=Uint16Array,r=Uint32Array,i=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(j,$){for(var H=new t(31),ie=0;ie<31;++ie)H[ie]=$+=1<<j[ie-1];var re=new r(H[30]);for(ie=1;ie<30;++ie)for(var ue=H[ie];ue<H[ie+1];++ue)re[ue]=ue-H[ie]<<5|ie;return[H,re]},c=a(i,2),u=c[0],d=c[1];u[28]=258,d[258]=28;for(var m=a(s,0)[0],g=new t(32768),y=0;y<32768;++y){var _=(43690&y)>>>1|(21845&y)<<1;_=(61680&(_=(52428&_)>>>2|(13107&_)<<2))>>>4|(3855&_)<<4,g[y]=((65280&_)>>>8|(255&_)<<8)>>>1}var w=function(j,$,H){for(var ie=j.length,re=0,ue=new t($);re<ie;++re)++ue[j[re]-1];var G,K=new t($);for(re=0;re<$;++re)K[re]=K[re-1]+ue[re-1]<<1;{G=new t(1<<$);var W=15-$;for(re=0;re<ie;++re)if(j[re])for(var L=re<<4|j[re],B=$-j[re],ne=K[j[re]-1]++<<B,ae=ne|(1<<B)-1;ne<=ae;++ne)G[g[ne]>>>W]=L}return G},x=new e(288);for(y=0;y<144;++y)x[y]=8;for(y=144;y<256;++y)x[y]=9;for(y=256;y<280;++y)x[y]=7;for(y=280;y<288;++y)x[y]=8;var S=new e(32);for(y=0;y<32;++y)S[y]=5;var b=w(x,9),T=w(S,5),C=function(j){for(var $=j[0],H=1;H<j.length;++H)j[H]>$&&($=j[H]);return $},P=function(j,$,H){var ie=$/8|0;return(j[ie]|j[ie+1]<<8)>>(7&$)&H},D=function(j,$){var H=$/8|0;return(j[H]|j[H+1]<<8|j[H+2]<<16)>>(7&$)},U=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],F=function(j,$,H){var ie=new Error($||U[j]);if(ie.code=j,Error.captureStackTrace&&Error.captureStackTrace(ie,F),!H)throw ie;return ie},I=function(j,$,H){var ie=j.length;if(!ie||H&&!H.l&&ie<5)return $||new e(0);var re=!$||H,ue=!H||H.i;H||(H={}),$||($=new e(3*ie));var G,K=function(mt){var ce=$.length;if(mt>ce){var Ie=new e(Math.max(2*ce,mt));Ie.set($),$=Ie}},W=H.f||0,L=H.p||0,B=H.b||0,ne=H.l,ae=H.d,de=H.m,pe=H.n,xe=8*ie;do{if(!ne){H.f=W=P(j,L,1);var Me=P(j,L+1,3);if(L+=3,!Me){var Xe=j[(nt=((G=L)/8|0)+(7&G&&1)+4)-4]|j[nt-3]<<8,ot=nt+Xe;if(ot>ie){ue&&F(0);break}re&&K(B+Xe),$.set(j.subarray(nt,ot),B),H.b=B+=Xe,H.p=L=8*ot;continue}if(Me==1)ne=b,ae=T,de=9,pe=5;else if(Me==2){var He=P(j,L,31)+257,te=P(j,L+10,15)+4,Ye=He+P(j,L+5,31)+1;L+=14;for(var Re=new e(Ye),je=new e(19),Ne=0;Ne<te;++Ne)je[o[Ne]]=P(j,L+3*Ne,7);L+=3*te;var ct=C(je),Fe=(1<<ct)-1,qe=w(je,ct);for(Ne=0;Ne<Ye;){var nt,Ue=qe[P(j,L,Fe)];if(L+=15&Ue,(nt=Ue>>>4)<16)Re[Ne++]=nt;else{var _t=0,J=0;for(nt==16?(J=3+P(j,L,3),L+=2,_t=Re[Ne-1]):nt==17?(J=3+P(j,L,7),L+=3):nt==18&&(J=11+P(j,L,127),L+=7);J--;)Re[Ne++]=_t}}var q=Re.subarray(0,He),ye=Re.subarray(He);de=C(q),pe=C(ye),ne=w(q,de),ae=w(ye,pe)}else F(1);if(L>xe){ue&&F(0);break}}re&&K(B+131072);for(var tt=(1<<de)-1,Le=(1<<pe)-1,We=L;;We=L){var st=(_t=ne[D(j,L)&tt])>>>4;if((L+=15&_t)>xe){ue&&F(0);break}if(_t||F(2),st<256)$[B++]=st;else{if(st==256){We=L,ne=null;break}var et=st-254;if(st>264){var lt=i[Ne=st-257];et=P(j,L,(1<<lt)-1)+u[Ne],L+=lt}var Mt=ae[D(j,L)&Le],xt=Mt>>>4;if(Mt||F(3),L+=15&Mt,ye=m[xt],xt>3&&(lt=s[xt],ye+=D(j,L)&(1<<lt)-1,L+=lt),L>xe){ue&&F(0);break}re&&K(B+131072);for(var Ge=B+et;B<Ge;B+=4)$[B]=$[B-ye],$[B+1]=$[B+1-ye],$[B+2]=$[B+2-ye],$[B+3]=$[B+3-ye];B=Ge}}H.l=ne,H.p=We,H.b=B,ne&&(W=1,H.m=de,H.d=ae,H.n=pe)}while(!W);return B==$.length?$:function(mt,ce,Ie){(Ie==null||Ie>mt.length)&&(Ie=mt.length);var Pe=new(mt instanceof t?t:mt instanceof r?r:e)(Ie-ce);return Pe.set(mt.subarray(ce,Ie)),Pe}($,0,B)},k=new e(0),Q=typeof TextDecoder<"u"&&new TextDecoder;try{Q.decode(k,{stream:!0})}catch{}return n.convert_streams=function(j){var $=new DataView(j),H=0;function ie(){var He=$.getUint16(H);return H+=2,He}function re(){var He=$.getUint32(H);return H+=4,He}function ue(He){Xe.setUint16(ot,He),ot+=2}function G(He){Xe.setUint32(ot,He),ot+=4}for(var K={signature:re(),flavor:re(),length:re(),numTables:ie(),reserved:ie(),totalSfntSize:re(),majorVersion:ie(),minorVersion:ie(),metaOffset:re(),metaLength:re(),metaOrigLength:re(),privOffset:re(),privLength:re()},W=0;Math.pow(2,W)<=K.numTables;)W++;W--;for(var L=16*Math.pow(2,W),B=16*K.numTables-L,ne=12,ae=[],de=0;de<K.numTables;de++)ae.push({tag:re(),offset:re(),compLength:re(),origLength:re(),origChecksum:re()}),ne+=16;var pe,xe=new Uint8Array(12+16*ae.length+ae.reduce(function(He,te){return He+te.origLength+4},0)),Me=xe.buffer,Xe=new DataView(Me),ot=0;return G(K.flavor),ue(K.numTables),ue(L),ue(W),ue(B),ae.forEach(function(He){G(He.tag),G(He.origChecksum),G(ne),G(He.origLength),He.outOffset=ne,(ne+=He.origLength)%4!=0&&(ne+=4-ne%4)}),ae.forEach(function(He){var te,Ye=j.slice(He.offset,He.offset+He.compLength);if(He.compLength!=He.origLength){var Re=new Uint8Array(He.origLength);te=new Uint8Array(Ye,2),I(te,Re)}else Re=new Uint8Array(Ye);xe.set(Re,He.outOffset);var je=0;(ne=He.outOffset+He.origLength)%4!=0&&(je=4-ne%4),xe.set(new Uint8Array(je).buffer,He.outOffset+He.origLength),pe=ne+je}),Me.slice(0,pe)},Object.defineProperty(n,"__esModule",{value:!0}),n}({}).convert_streams}function E8(n,e){const t={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},i=1,s=2,o=4,a=8,c=16,u=32;let d;function m(U){if(!d){const F={R:s,L:i,D:o,C:c,U:u,T:a};d=new Map;for(let I in r){let k=0;r[I].split(",").forEach(Q=>{let[j,$]=Q.split("+");j=parseInt(j,36),$=$?parseInt($,36):0,d.set(k+=j,F[I]);for(let H=$;H--;)d.set(++k,F[I])})}}return d.get(U)||u}const g=1,y=2,_=3,w=4,x=[null,"isol","init","fina","medi"];function S(U){const F=new Uint8Array(U.length);let I=u,k=g,Q=-1;for(let j=0;j<U.length;j++){const $=U.codePointAt(j);let H=m($)|0,ie=g;H&a||(I&(i|o|c)?H&(s|o|c)?(ie=_,(k===g||k===_)&&F[Q]++):H&(i|u)&&(k===y||k===w)&&F[Q]--:I&(s|u)&&(k===y||k===w)&&F[Q]--,k=F[j]=ie,I=H,Q=j,$>65535&&j++)}return F}function b(U,F){const I=[];for(let Q=0;Q<F.length;Q++){const j=F.codePointAt(Q);j>65535&&Q++,I.push(n.U.codeToGlyph(U,j))}const k=U.GSUB;if(k){const{lookupList:Q,featureList:j}=k;let $;const H=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,ie=[];j.forEach(re=>{if(H.test(re.tag))for(let ue=0;ue<re.tab.length;ue++){if(ie[re.tab[ue]])continue;ie[re.tab[ue]]=!0;const G=Q[re.tab[ue]],K=/^(isol|init|fina|medi)$/.test(re.tag);K&&!$&&($=S(F));for(let W=0;W<I.length;W++)(!$||!K||x[$[W]]===re.tag)&&n.U._applySubs(I,W,G,Q)}})}return I}function T(U,F){const I=new Int16Array(F.length*3);let k=0;for(;k<F.length;k++){const H=F[k];if(H===-1)continue;I[k*3+2]=U.hmtx.aWidth[H];const ie=U.GPOS;if(ie){const re=ie.lookupList;for(let ue=0;ue<re.length;ue++){const G=re[ue];for(let K=0;K<G.tabs.length;K++){const W=G.tabs[K];if(G.ltype===1){if(n._lctf.coverageIndex(W.coverage,H)!==-1&&W.pos){$(W.pos,k);break}}else if(G.ltype===2){let L=null,B=Q();if(B!==-1){const ne=n._lctf.coverageIndex(W.coverage,F[B]);if(ne!==-1){if(W.fmt===1){const ae=W.pairsets[ne];for(let de=0;de<ae.length;de++)ae[de].gid2===H&&(L=ae[de])}else if(W.fmt===2){const ae=n.U._getGlyphClass(F[B],W.classDef1),de=n.U._getGlyphClass(H,W.classDef2);L=W.matrix[ae][de]}if(L){L.val1&&$(L.val1,B),L.val2&&$(L.val2,k);break}}}}else if(G.ltype===4){const L=n._lctf.coverageIndex(W.markCoverage,H);if(L!==-1){const B=Q(j),ne=B===-1?-1:n._lctf.coverageIndex(W.baseCoverage,F[B]);if(ne!==-1){const ae=W.markArray[L],de=W.baseArray[ne][ae.markClass];I[k*3]=de.x-ae.x+I[B*3]-I[B*3+2],I[k*3+1]=de.y-ae.y+I[B*3+1];break}}}else if(G.ltype===6){const L=n._lctf.coverageIndex(W.mark1Coverage,H);if(L!==-1){const B=Q();if(B!==-1){const ne=F[B];if(C(U,ne)===3){const ae=n._lctf.coverageIndex(W.mark2Coverage,ne);if(ae!==-1){const de=W.mark1Array[L],pe=W.mark2Array[ae][de.markClass];I[k*3]=pe.x-de.x+I[B*3]-I[B*3+2],I[k*3+1]=pe.y-de.y+I[B*3+1];break}}}}}}}}else if(U.kern&&!U.cff){const re=Q();if(re!==-1){const ue=U.kern.glyph1.indexOf(F[re]);if(ue!==-1){const G=U.kern.rval[ue].glyph2.indexOf(H);G!==-1&&(I[re*3+2]+=U.kern.rval[ue].vals[G])}}}}return I;function Q(H){for(let ie=k-1;ie>=0;ie--)if(F[ie]!==-1&&(!H||H(F[ie])))return ie;return-1}function j(H){return C(U,H)===1}function $(H,ie){for(let re=0;re<3;re++)I[ie*3+re]+=H[re]||0}}function C(U,F){const I=U.GDEF&&U.GDEF.glyphClassDef;return I?n.U._getGlyphClass(F,I):0}function P(...U){for(let F=0;F<U.length;F++)if(typeof U[F]=="number")return U[F]}function D(U){const F=Object.create(null),I=U["OS/2"],k=U.hhea,Q=U.head.unitsPerEm,j=P(I&&I.sTypoAscender,k&&k.ascender,Q),$={unitsPerEm:Q,ascender:j,descender:P(I&&I.sTypoDescender,k&&k.descender,0),capHeight:P(I&&I.sCapHeight,j),xHeight:P(I&&I.sxHeight,j),lineGap:P(I&&I.sTypoLineGap,k&&k.lineGap),supportsCodePoint(H){return n.U.codeToGlyph(U,H)>0},forEachGlyph(H,ie,re,ue){let G=0;const K=1/$.unitsPerEm*ie,W=b(U,H);let L=0;const B=T(U,W);return W.forEach((ne,ae)=>{if(ne!==-1){let de=F[ne];if(!de){const{cmds:pe,crds:xe}=n.U.glyphToPath(U,ne);let Me="",Xe=0;for(let Re=0,je=pe.length;Re<je;Re++){const Ne=t[pe[Re]];Me+=pe[Re];for(let ct=1;ct<=Ne;ct++)Me+=(ct>1?",":"")+xe[Xe++]}let ot,He,te,Ye;if(xe.length){ot=He=1/0,te=Ye=-1/0;for(let Re=0,je=xe.length;Re<je;Re+=2){let Ne=xe[Re],ct=xe[Re+1];Ne<ot&&(ot=Ne),ct<He&&(He=ct),Ne>te&&(te=Ne),ct>Ye&&(Ye=ct)}}else ot=te=He=Ye=0;de=F[ne]={index:ne,advanceWidth:U.hmtx.aWidth[ne],xMin:ot,yMin:He,xMax:te,yMax:Ye,path:Me}}ue.call(null,de,G+B[ae*3]*K,B[ae*3+1]*K,L),G+=B[ae*3+2]*K,re&&(G+=re*ie)}L+=H.codePointAt(L)>65535?2:1}),G}};return $}return function(F){const I=new Uint8Array(F,0,4),k=n._bin.readASCII(I,0,4);if(k==="wOFF")F=e(F);else if(k==="wOF2")throw new Error("woff2 fonts not supported");return D(n.parse(F)[0])}}const M8=Kh({name:"Typr Font Parser",dependencies:[S8,w8,E8],init(n,e,t){const r=n(),i=e();return t(r,i)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function T8(){return function(n){var e=function(){this.buckets=new Map};e.prototype.add=function(T){var C=T>>5;this.buckets.set(C,(this.buckets.get(C)||0)|1<<(31&T))},e.prototype.has=function(T){var C=this.buckets.get(T>>5);return C!==void 0&&(C&1<<(31&T))!=0},e.prototype.serialize=function(){var T=[];return this.buckets.forEach(function(C,P){T.push((+P).toString(36)+":"+C.toString(36))}),T.join(",")},e.prototype.deserialize=function(T){var C=this;this.buckets.clear(),T.split(",").forEach(function(P){var D=P.split(":");C.buckets.set(parseInt(D[0],36),parseInt(D[1],36))})};var t=Math.pow(2,8),r=t-1,i=~r;function s(T){var C=function(D){return D&i}(T).toString(16),P=function(D){return(D&i)+t-1}(T).toString(16);return"codepoint-index/plane"+(T>>16)+"/"+C+"-"+P+".json"}function o(T,C){var P=T&r,D=C.codePointAt(P/6|0);return((D=(D||48)-48)&1<<P%6)!=0}function a(T,C){var P;(P=T,P.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map(function(D){return D.split("-").map(function(U){return parseInt(U.trim(),16)})})).forEach(function(D){var U=D[0],F=D[1];F===void 0&&(F=U),C(U,F)})}function c(T,C){a(T,function(P,D){for(var U=P;U<=D;U++)C(U)})}var u={},d={},m=new WeakMap,g="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function y(T){var C=m.get(T);return C||(C=new e,c(T.ranges,function(P){return C.add(P)}),m.set(T,C)),C}var _,w=new Map;function x(T,C,P){return T[C]?C:T[P]?P:function(D){for(var U in D)return U}(T)}function S(T,C){var P=C;if(!T.includes(P)){P=1/0;for(var D=0;D<T.length;D++)Math.abs(T[D]-C)<Math.abs(P-C)&&(P=T[D])}return P}function b(T){return _||(_=new Set,c("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",function(C){_.add(C)})),_.has(T)}return n.CodePointSet=e,n.clearCache=function(){u={},d={}},n.getFontsForString=function(T,C){C===void 0&&(C={});var P,D=C.lang;D===void 0&&(D=new RegExp("\\p{Script=Hangul}","u").test(P=T)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(P)?"ja":"en");var U=C.category;U===void 0&&(U="sans-serif");var F=C.style;F===void 0&&(F="normal");var I=C.weight;I===void 0&&(I=400);var k=(C.dataUrl||g).replace(/\/$/g,""),Q=new Map,j=new Uint8Array(T.length),$={},H={},ie=new Array(T.length),re=new Map,ue=!1;function G(L){var B=w.get(L);return B||(B=fetch(k+"/"+L).then(function(ne){if(!ne.ok)throw new Error(ne.statusText);return ne.json().then(function(ae){if(!Array.isArray(ae)||ae[0]!==1)throw new Error("Incorrect schema version; need 1, got "+ae[0]);return ae[1]})}).catch(function(ne){if(k!==g)return ue||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+k+'", trying default CDN. '+ne.message),ue=!0),k=g,w.delete(L),G(L);throw ne}),w.set(L,B)),B}for(var K=function(L){var B=T.codePointAt(L),ne=s(B);ie[L]=ne,u[ne]||re.has(ne)||re.set(ne,G(ne).then(function(ae){u[ne]=ae})),B>65535&&(L++,W=L)},W=0;W<T.length;W++)K(W);return Promise.all(re.values()).then(function(){re.clear();for(var L=function(ne){var ae=T.codePointAt(ne),de=null,pe=u[ie[ne]],xe=void 0;for(var Me in pe){var Xe=H[Me];if(Xe===void 0&&(Xe=H[Me]=new RegExp(Me).test(D||"en")),Xe){for(var ot in xe=Me,pe[Me])if(o(ae,pe[Me][ot])){de=ot;break}break}}if(!de){e:for(var He in pe)if(He!==xe){for(var te in pe[He])if(o(ae,pe[He][te])){de=te;break e}}}de||(console.debug("No font coverage for U+"+ae.toString(16)),de="latin"),ie[ne]=de,d[de]||re.has(de)||re.set(de,G("font-meta/"+de+".json").then(function(Ye){d[de]=Ye})),ae>65535&&(ne++,B=ne)},B=0;B<T.length;B++)L(B);return Promise.all(re.values())}).then(function(){for(var L,B=null,ne=0;ne<T.length;ne++){var ae=T.codePointAt(ne);if(B&&(b(ae)||y(B).has(ae)))j[ne]=j[ne-1];else{B=d[ie[ne]];var de=$[B.id];if(!de){var pe=B.typeforms,xe=x(pe,U,"sans-serif"),Me=x(pe[xe],F,"normal"),Xe=S((L=pe[xe])===null||L===void 0?void 0:L[Me],I);de=$[B.id]=k+"/font-files/"+B.id+"/"+xe+"."+Me+"."+Xe+".woff"}var ot=Q.get(de);ot==null&&(ot=Q.size,Q.set(de,ot)),j[ne]=ot}ae>65535&&(ne++,j[ne]=j[ne-1])}return{fontUrls:Array.from(Q.keys()),chars:j}})},Object.defineProperty(n,"__esModule",{value:!0}),n}({})}function b8(n,e){const t=Object.create(null),r=Object.create(null);function i(o,a){const c=u=>{console.error(`Failure loading font ${o}`,u)};try{const u=new XMLHttpRequest;u.open("get",o,!0),u.responseType="arraybuffer",u.onload=function(){if(u.status>=400)c(new Error(u.statusText));else if(u.status>0)try{const d=n(u.response);d.src=o,a(d)}catch(d){c(d)}},u.onerror=c,u.send()}catch(u){c(u)}}function s(o,a){let c=t[o];c?a(c):r[o]?r[o].push(a):(r[o]=[a],i(o,u=>{u.src=o,t[o]=u,r[o].forEach(d=>d(u)),delete r[o]}))}return function(o,a,{lang:c,fonts:u=[],style:d="normal",weight:m="normal",unicodeFontsURL:g}={}){const y=new Uint8Array(o.length),_=[];o.length||b();const w=new Map,x=[];if(d!=="italic"&&(d="normal"),typeof m!="number"&&(m=m==="bold"?700:400),u&&!Array.isArray(u)&&(u=[u]),u=u.slice().filter(C=>!C.lang||C.lang.test(c)).reverse(),u.length){let U=0;(function F(I=0){for(let k=I,Q=o.length;k<Q;k++){const j=o.codePointAt(k);if(U===1&&_[y[k-1]].supportsCodePoint(j)||k>0&&/\s/.test(o[k]))y[k]=y[k-1],U===2&&(x[x.length-1][1]=k);else for(let $=y[k],H=u.length;$<=H;$++)if($===H){const ie=U===2?x[x.length-1]:x[x.length]=[k,k];ie[1]=k,U=2}else{y[k]=$;const{src:ie,unicodeRange:re}=u[$];if(!re||T(j,re)){const ue=t[ie];if(!ue){s(ie,()=>{F(k)});return}if(ue.supportsCodePoint(j)){let G=w.get(ue);typeof G!="number"&&(G=_.length,_.push(ue),w.set(ue,G)),y[k]=G,U=1;break}}}j>65535&&k+1<Q&&(y[k+1]=y[k],k++,U===2&&(x[x.length-1][1]=k))}S()})()}else x.push([0,o.length-1]),S();function S(){if(x.length){const C=x.map(P=>o.substring(P[0],P[1]+1)).join(`
`);e.getFontsForString(C,{lang:c||void 0,style:d,weight:m,dataUrl:g}).then(({fontUrls:P,chars:D})=>{const U=_.length;let F=0;x.forEach(k=>{for(let Q=0,j=k[1]-k[0];Q<=j;Q++)y[k[0]+Q]=D[F++]+U;F++});let I=0;P.forEach((k,Q)=>{s(k,j=>{_[Q+U]=j,++I===P.length&&b()})})})}else b()}function b(){a({chars:y,fonts:_})}function T(C,P){for(let D=0;D<P.length;D++){const[U,F=U]=P[D];if(U<=C&&C<=F)return!0}return!1}}}const A8=Kh({name:"FontResolver",dependencies:[b8,M8,T8],init(n,e,t){return n(e,t())}});function C8(n,e){const r=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,i="[^\\S\\u00A0]",s=new RegExp(`${i}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function o({text:_,lang:w,fonts:x,style:S,weight:b,preResolvedFonts:T,unicodeFontsURL:C},P){const D=({chars:U,fonts:F})=>{let I,k;const Q=[];for(let j=0;j<U.length;j++)U[j]!==k?(k=U[j],Q.push(I={start:j,end:j,fontObj:F[U[j]]})):I.end=j;P(Q)};T?D(T):n(_,D,{lang:w,fonts:x,style:S,weight:b,unicodeFontsURL:C})}function a({text:_="",font:w,lang:x,sdfGlyphSize:S=64,fontSize:b=400,fontWeight:T=1,fontStyle:C="normal",letterSpacing:P=0,lineHeight:D="normal",maxWidth:U=1/0,direction:F,textAlign:I="left",textIndent:k=0,whiteSpace:Q="normal",overflowWrap:j="normal",anchorX:$=0,anchorY:H=0,metricsOnly:ie=!1,unicodeFontsURL:re,preResolvedFonts:ue=null,includeCaretPositions:G=!1,chunkedBoundsSize:K=8192,colorRanges:W=null},L){const B=m(),ne={fontLoad:0,typesetting:0};_.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),_=_.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),b=+b,P=+P,U=+U,D=D||"normal",k=+k,o({text:_,lang:x,style:C,weight:T,fonts:typeof w=="string"?[{src:w}]:w,unicodeFontsURL:re,preResolvedFonts:ue},ae=>{ne.fontLoad=m()-B;const de=isFinite(U);let pe=null,xe=null,Me=null,Xe=null,ot=null,He=null,te=null,Ye=null,Re=0,je=0,Ne=Q!=="nowrap";const ct=new Map,Fe=m();let qe=k,nt=0,Ue=new g;const _t=[Ue];ae.forEach(Le=>{const{fontObj:We}=Le,{ascender:st,descender:et,unitsPerEm:lt,lineGap:Mt,capHeight:xt,xHeight:Ge}=We;let mt=ct.get(We);if(!mt){const Te=b/lt,he=D==="normal"?(st-et+Mt)*Te:D*b,ut=(he-(st-et)*Te)/2,rt=Math.min(he,(st-et)*Te),De=(st+et)/2*Te+rt/2;mt={index:ct.size,src:We.src,fontObj:We,fontSizeMult:Te,unitsPerEm:lt,ascender:st*Te,descender:et*Te,capHeight:xt*Te,xHeight:Ge*Te,lineHeight:he,baseline:-ut-st*Te,caretTop:De,caretBottom:De-rt},ct.set(We,mt)}const{fontSizeMult:ce}=mt,Ie=_.slice(Le.start,Le.end+1);let Pe,ke;We.forEachGlyph(Ie,b,P,(Te,he,ut,rt)=>{he+=nt,rt+=Le.start,Pe=he,ke=Te;const De=_.charAt(rt),at=Te.advanceWidth*ce,St=Ue.count;let Et;if("isEmpty"in Te||(Te.isWhitespace=!!De&&new RegExp(i).test(De),Te.canBreakAfter=!!De&&s.test(De),Te.isEmpty=Te.xMin===Te.xMax||Te.yMin===Te.yMax||r.test(De)),!Te.isWhitespace&&!Te.isEmpty&&je++,Ne&&de&&!Te.isWhitespace&&he+at+qe>U&&St){if(Ue.glyphAt(St-1).glyphObj.canBreakAfter)Et=new g,qe=-he;else for(let gn=St;gn--;)if(gn===0&&j==="break-word"){Et=new g,qe=-he;break}else if(Ue.glyphAt(gn).glyphObj.canBreakAfter){Et=Ue.splitAt(gn+1);const Yt=Et.glyphAt(0).x;qe-=Yt;for(let pn=Et.count;pn--;)Et.glyphAt(pn).x-=Yt;break}Et&&(Ue.isSoftWrapped=!0,Ue=Et,_t.push(Ue),Re=U)}let Wt=Ue.glyphAt(Ue.count);Wt.glyphObj=Te,Wt.x=he+qe,Wt.y=ut,Wt.width=at,Wt.charIndex=rt,Wt.fontData=mt,De===`
`&&(Ue=new g,_t.push(Ue),qe=-(he+at+P*b)+k)}),nt=Pe+ke.advanceWidth*ce+P*b});let J=0;_t.forEach(Le=>{let We=!0;for(let st=Le.count;st--;){const et=Le.glyphAt(st);We&&!et.glyphObj.isWhitespace&&(Le.width=et.x+et.width,Le.width>Re&&(Re=Le.width),We=!1);let{lineHeight:lt,capHeight:Mt,xHeight:xt,baseline:Ge}=et.fontData;lt>Le.lineHeight&&(Le.lineHeight=lt);const mt=Ge-Le.baseline;mt<0&&(Le.baseline+=mt,Le.cap+=mt,Le.ex+=mt),Le.cap=Math.max(Le.cap,Le.baseline+Mt),Le.ex=Math.max(Le.ex,Le.baseline+xt)}Le.baseline-=J,Le.cap-=J,Le.ex-=J,J+=Le.lineHeight});let q=0,ye=0;if($&&(typeof $=="number"?q=-$:typeof $=="string"&&(q=-Re*($==="left"?0:$==="center"?.5:$==="right"?1:u($)))),H&&(typeof H=="number"?ye=-H:typeof H=="string"&&(ye=H==="top"?0:H==="top-baseline"?-_t[0].baseline:H==="top-cap"?-_t[0].cap:H==="top-ex"?-_t[0].ex:H==="middle"?J/2:H==="bottom"?J:H==="bottom-baseline"?-_t[_t.length-1].baseline:u(H)*J)),!ie){const Le=e.getEmbeddingLevels(_,F);pe=new Uint16Array(je),xe=new Uint8Array(je),Me=new Float32Array(je*2),Xe={},te=[1/0,1/0,-1/0,-1/0],Ye=[],G&&(He=new Float32Array(_.length*4)),W&&(ot=new Uint8Array(je*3));let We=0,st=-1,et=-1,lt,Mt;if(_t.forEach((xt,Ge)=>{let{count:mt,width:ce}=xt;if(mt>0){let Ie=0;for(let rt=mt;rt--&&xt.glyphAt(rt).glyphObj.isWhitespace;)Ie++;let Pe=0,ke=0;if(I==="center")Pe=(Re-ce)/2;else if(I==="right")Pe=Re-ce;else if(I==="justify"&&xt.isSoftWrapped){let rt=0;for(let De=mt-Ie;De--;)xt.glyphAt(De).glyphObj.isWhitespace&&rt++;ke=(Re-ce)/rt}if(ke||Pe){let rt=0;for(let De=0;De<mt;De++){let at=xt.glyphAt(De);const St=at.glyphObj;at.x+=Pe+rt,ke!==0&&St.isWhitespace&&De<mt-Ie&&(rt+=ke,at.width+=ke)}}const Te=e.getReorderSegments(_,Le,xt.glyphAt(0).charIndex,xt.glyphAt(xt.count-1).charIndex);for(let rt=0;rt<Te.length;rt++){const[De,at]=Te[rt];let St=1/0,Et=-1/0;for(let Wt=0;Wt<mt;Wt++)if(xt.glyphAt(Wt).charIndex>=De){let gn=Wt,Yt=Wt;for(;Yt<mt;Yt++){let pn=xt.glyphAt(Yt);if(pn.charIndex>at)break;Yt<mt-Ie&&(St=Math.min(St,pn.x),Et=Math.max(Et,pn.x+pn.width))}for(let pn=gn;pn<Yt;pn++){const kn=xt.glyphAt(pn);kn.x=Et-(kn.x+kn.width-St)}break}}let he;const ut=rt=>he=rt;for(let rt=0;rt<mt;rt++){const De=xt.glyphAt(rt);he=De.glyphObj;const at=he.index,St=Le.levels[De.charIndex]&1;if(St){const Et=e.getMirroredCharacter(_[De.charIndex]);Et&&De.fontData.fontObj.forEachGlyph(Et,0,0,ut)}if(G){const{charIndex:Et,fontData:Wt}=De,gn=De.x+q,Yt=De.x+De.width+q;He[Et*4]=St?Yt:gn,He[Et*4+1]=St?gn:Yt,He[Et*4+2]=xt.baseline+Wt.caretBottom+ye,He[Et*4+3]=xt.baseline+Wt.caretTop+ye;const pn=Et-st;pn>1&&d(He,st,pn),st=Et}if(W){const{charIndex:Et}=De;for(;Et>et;)et++,W.hasOwnProperty(et)&&(Mt=W[et])}if(!he.isWhitespace&&!he.isEmpty){const Et=We++,{fontSizeMult:Wt,src:gn,index:Yt}=De.fontData,pn=Xe[gn]||(Xe[gn]={});pn[at]||(pn[at]={path:he.path,pathBounds:[he.xMin,he.yMin,he.xMax,he.yMax]});const kn=De.x+q,Fr=De.y+xt.baseline+ye;Me[Et*2]=kn,Me[Et*2+1]=Fr;const Sr=kn+he.xMin*Wt,sr=Fr+he.yMin*Wt,$n=kn+he.xMax*Wt,qt=Fr+he.yMax*Wt;Sr<te[0]&&(te[0]=Sr),sr<te[1]&&(te[1]=sr),$n>te[2]&&(te[2]=$n),qt>te[3]&&(te[3]=qt),Et%K===0&&(lt={start:Et,end:Et,rect:[1/0,1/0,-1/0,-1/0]},Ye.push(lt)),lt.end++;const fr=lt.rect;if(Sr<fr[0]&&(fr[0]=Sr),sr<fr[1]&&(fr[1]=sr),$n>fr[2]&&(fr[2]=$n),qt>fr[3]&&(fr[3]=qt),pe[Et]=at,xe[Et]=Yt,W){const Fi=Et*3;ot[Fi]=Mt>>16&255,ot[Fi+1]=Mt>>8&255,ot[Fi+2]=Mt&255}}}}}),He){const xt=_.length-st;xt>1&&d(He,st,xt)}}const tt=[];ct.forEach(({index:Le,src:We,unitsPerEm:st,ascender:et,descender:lt,lineHeight:Mt,capHeight:xt,xHeight:Ge})=>{tt[Le]={src:We,unitsPerEm:st,ascender:et,descender:lt,lineHeight:Mt,capHeight:xt,xHeight:Ge}}),ne.typesetting=m()-Fe,L({glyphIds:pe,glyphFontIndices:xe,glyphPositions:Me,glyphData:Xe,fontData:tt,caretPositions:He,glyphColors:ot,chunkedBounds:Ye,fontSize:b,topBaseline:ye+_t[0].baseline,blockBounds:[q,ye-J,q+Re,ye],visibleBounds:te,timings:ne})})}function c(_,w){a({..._,metricsOnly:!0},x=>{const[S,b,T,C]=x.blockBounds;w({width:T-S,height:C-b})})}function u(_){let w=_.match(/^([\d.]+)%$/),x=w?parseFloat(w[1]):NaN;return isNaN(x)?0:x/100}function d(_,w,x){const S=_[w*4],b=_[w*4+1],T=_[w*4+2],C=_[w*4+3],P=(b-S)/x;for(let D=0;D<x;D++){const U=(w+D)*4;_[U]=S+P*D,_[U+1]=S+P*(D+1),_[U+2]=T,_[U+3]=C}}function m(){return(self.performance||Date).now()}function g(){this.data=[]}const y=["glyphObj","x","y","width","charIndex","fontData"];return g.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/y.length)},glyphAt(_){let w=g.flyweight;return w.data=this.data,w.index=_,w},splitAt(_){let w=new g;return w.data=this.data.splice(_*y.length),w}},g.flyweight=y.reduce((_,w,x,S)=>(Object.defineProperty(_,w,{get(){return this.data[this.index*y.length+x]},set(b){this.data[this.index*y.length+x]=b}}),_),{data:null,index:0}),{typeset:a,measure:c}}const Af=()=>(self.performance||Date).now(),$y=fL();let $b;function R8(n,e,t,r,i,s,o,a,c,u,d=!0){return d?L8(n,e,t,r,i,s,o,a,c,u).then(null,m=>($b||(console.warn("WebGL SDF generation failed, falling back to JS",m),$b=!0),tA(n,e,t,r,i,s,o,a,c,u))):tA(n,e,t,r,i,s,o,a,c,u)}const R0=[],P8=5;let _S=0;function hL(){const n=Af();for(;R0.length&&Af()-n<P8;)R0.shift()();_S=R0.length?setTimeout(hL,0):0}const L8=(...n)=>new Promise((e,t)=>{R0.push(()=>{const r=Af();try{$y.webgl.generateIntoCanvas(...n),e({timing:Af()-r})}catch(i){t(i)}}),_S||(_S=setTimeout(hL,0))}),I8=4,N8=2e3,eA={};let D8=0;function tA(n,e,t,r,i,s,o,a,c,u){const d="TroikaTextSDFGenerator_JS_"+D8++%I8;let m=eA[d];return m||(m=eA[d]={workerModule:Kh({name:d,workerId:d,dependencies:[fL,Af],init(g,y){const _=g().javascript.generate;return function(...w){const x=y();return{textureData:_(...w),timing:y()-x}}},getTransferables(g){return[g.textureData.buffer]}}),requests:0,idleTimer:null}),m.requests++,clearTimeout(m.idleTimer),m.workerModule(n,e,t,r,i,s).then(({textureData:g,timing:y})=>{const _=Af(),w=new Uint8Array(g.length*4);for(let x=0;x<g.length;x++)w[x*4+u]=g[x];return $y.webglUtils.renderImageData(o,w,a,c,n,e,1<<3-u),y+=Af()-_,--m.requests===0&&(m.idleTimer=setTimeout(()=>{f8(d)},N8)),{timing:y}})}function U8(n){n._warm||($y.webgl.isSupported(n),n._warm=!0)}const O8=$y.webglUtils.resizeWebGLCanvasWithoutClearing,dm={unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},F8=new Rt;function rh(){return(self.performance||Date).now()}const nA=Object.create(null);function pL(n,e){n=z8({},n);const t=rh(),r=[];if(n.font&&r.push({label:"user",src:H8(n.font)}),n.font=r,n.text=""+n.text,n.sdfGlyphSize=n.sdfGlyphSize||dm.sdfGlyphSize,n.unicodeFontsURL=n.unicodeFontsURL||dm.unicodeFontsURL,n.colorRanges!=null){let g={};for(let y in n.colorRanges)if(n.colorRanges.hasOwnProperty(y)){let _=n.colorRanges[y];typeof _!="number"&&(_=F8.set(_).getHex()),g[y]=_}n.colorRanges=g}Object.freeze(n);const{textureWidth:i,sdfExponent:s}=dm,{sdfGlyphSize:o}=n,a=i/o*4;let c=nA[o];if(!c){const g=document.createElement("canvas");g.width=i,g.height=o*256/a,c=nA[o]={glyphCount:0,sdfGlyphSize:o,sdfCanvas:g,sdfTexture:new jn(g,void 0,void 0,void 0,Pn,Pn),contextLost:!1,glyphsByFont:new Map},c.sdfTexture.generateMipmaps=!1,k8(c)}const{sdfTexture:u,sdfCanvas:d}=c;vL(n).then(g=>{const{glyphIds:y,glyphFontIndices:_,fontData:w,glyphPositions:x,fontSize:S,timings:b}=g,T=[],C=new Float32Array(y.length*4);let P=0,D=0;const U=rh(),F=w.map($=>{let H=c.glyphsByFont.get($.src);return H||c.glyphsByFont.set($.src,H=new Map),H});y.forEach(($,H)=>{const ie=_[H],{src:re,unitsPerEm:ue}=w[ie];let G=F[ie].get($);if(!G){const{path:ne,pathBounds:ae}=g.glyphData[re][$],de=Math.max(ae[2]-ae[0],ae[3]-ae[1])/o*(dm.sdfMargin*o+.5),pe=c.glyphCount++,xe=[ae[0]-de,ae[1]-de,ae[2]+de,ae[3]+de];F[ie].set($,G={path:ne,atlasIndex:pe,sdfViewBox:xe}),T.push(G)}const{sdfViewBox:K}=G,W=x[D++],L=x[D++],B=S/ue;C[P++]=W+K[0]*B,C[P++]=L+K[1]*B,C[P++]=W+K[2]*B,C[P++]=L+K[3]*B,y[H]=G.atlasIndex}),b.quads=(b.quads||0)+(rh()-U);const I=rh();b.sdf={};const k=d.height,Q=Math.ceil(c.glyphCount/a),j=Math.pow(2,Math.ceil(Math.log2(Q*o)));j>k&&(console.info(`Increasing SDF texture size ${k}->${j}`),O8(d,i,j),u.dispose()),Promise.all(T.map($=>mL($,c,n.gpuAccelerateSDF).then(({timing:H})=>{b.sdf[$.atlasIndex]=H}))).then(()=>{T.length&&!c.contextLost&&(gL(c),u.needsUpdate=!0),b.sdfTotal=rh()-I,b.total=rh()-t,e(Object.freeze({parameters:n,sdfTexture:u,sdfGlyphSize:o,sdfExponent:s,glyphBounds:C,glyphAtlasIndices:y,glyphColors:g.glyphColors,caretPositions:g.caretPositions,chunkedBounds:g.chunkedBounds,ascender:g.ascender,descender:g.descender,lineHeight:g.lineHeight,capHeight:g.capHeight,xHeight:g.xHeight,topBaseline:g.topBaseline,blockBounds:g.blockBounds,visibleBounds:g.visibleBounds,timings:g.timings}))})}),Promise.resolve().then(()=>{c.contextLost||U8(d)})}function mL({path:n,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:r,sdfCanvas:i,contextLost:s},o){if(s)return Promise.resolve({timing:-1});const{textureWidth:a,sdfExponent:c}=dm,u=Math.max(t[2]-t[0],t[3]-t[1]),d=Math.floor(e/4),m=d%(a/r)*r,g=Math.floor(d/(a/r))*r,y=e%4;return R8(r,r,n,t,u,c,i,m,g,y,o)}function k8(n){const e=n.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),n.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),n.contextLost=!1;const r=[];n.glyphsByFont.forEach(i=>{i.forEach(s=>{r.push(mL(s,n,!0))})}),Promise.all(r).then(()=>{gL(n),n.sdfTexture.needsUpdate=!0})})}function B8({font:n,characters:e,sdfGlyphSize:t},r){let i=Array.isArray(e)?e.join(`
`):""+e;pL({font:n,sdfGlyphSize:t,text:i},r)}function z8(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}let h0;function H8(n){return h0||(h0=typeof document>"u"?{}:document.createElement("a")),h0.href=n,h0.href}function gL(n){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=n,{width:r,height:i}=e,s=n.sdfCanvas.getContext("webgl");let o=t.image.data;(!o||o.length!==r*i*4)&&(o=new Uint8Array(r*i*4),t.image={width:r,height:i,data:o},t.flipY=!1,t.isDataTexture=!0),s.readPixels(0,0,r,i,s.RGBA,s.UNSIGNED_BYTE,o)}}const G8=Kh({name:"Typesetter",dependencies:[C8,A8,h8],init(n,e,t){return n(e,t())}}),vL=Kh({name:"Typesetter",dependencies:[G8],init(n){return function(e){return new Promise(t=>{n.typeset(e,t)})}},getTransferables(n){const e=[];for(let t in n)n[t]&&n[t].buffer&&e.push(n[t].buffer);return e}});vL.onMainThread;const rA={};function V8(n){let e=rA[n];return e||(e=rA[n]=new nl(1,1,n,n).translate(.5,.5,0)),e}const W8="aTroikaGlyphBounds",iA="aTroikaGlyphIndex",j8="aTroikaGlyphColor";class X8 extends Tw{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Os,this.boundingBox=new Us}computeBoundingSphere(){}computeBoundingBox(){}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=V8(e);["position","normal","uv"].forEach(r=>{this.attributes[r]=t.attributes[r].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,r,i,s){this.updateAttributeData(W8,e,4),this.updateAttributeData(iA,t,1),this.updateAttributeData(j8,s,3),this._blockBounds=r,this._chunkedBounds=i,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:r}=this;if(t){const{PI:i,floor:s,min:o,max:a,sin:c,cos:u}=Math,d=i/2,m=i*2,g=Math.abs(t),y=e[0]/g,_=e[2]/g,w=s((y+d)/m)!==s((_+d)/m)?-g:o(c(y)*g,c(_)*g),x=s((y-d)/m)!==s((_-d)/m)?g:a(c(y)*g,c(_)*g),S=s((y+i)/m)!==s((_+i)/m)?g*2:a(g-u(y)*g,g-u(_)*g);r.min.set(w,e[1],t<0?-S:0),r.max.set(x,e[3],t<0?0:S)}else r.min.set(e[0],e[1],0),r.max.set(e[2],e[3],0);r.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(iA).count,r=this._chunkedBounds;if(r)for(let i=r.length;i--;){t=r[i].end;let s=r[i].rect;if(s[1]<e.w&&s[3]>e.y&&s[0]<e.z&&s[2]>e.x)break}this.instanceCount=t}updateAttributeData(e,t,r){const i=this.getAttribute(e);t?i&&i.array.length===t.length?(i.array.set(t),i.needsUpdate=!0):(this.setAttribute(e,new lu(t,r)),delete this._maxInstanceCount,this.dispose()):i&&this.deleteAttribute(e)}}const Y8=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,q8=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,K8=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,Z8=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function Q8(n){const e=yS(n,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new it},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Hn(0,0,0,0)},uTroikaClipRect:{value:new Hn(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new it},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Rt},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new xn},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:Y8,vertexTransform:q8,fragmentDefs:K8,fragmentColorTransform:Z8,customRewriter({vertexShader:t,fragmentShader:r}){let i=/\buniform\s+vec3\s+diffuse\b/;return i.test(r)&&(r=r.replace(i,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),i.test(t)||(t=t.replace(dL,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:r}}});return e.transparent=!0,e.forceSinglePass=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const Zw=new Ki({color:16777215,side:eo,transparent:!0}),sA=8421504,oA=new sn,p0=new oe,qx=new oe,am=[],J8=new oe,Kx="+x+y";function aA(n){return Array.isArray(n)?n[0]:n}let yL=()=>{const n=new ir(new nl(1,1),Zw);return yL=()=>n,n},_L=()=>{const n=new ir(new nl(1,1,32,1),Zw);return _L=()=>n,n};const $8={type:"syncstart"},eW={type:"synccomplete"},xL=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],tW=xL.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let SL=class extends ir{constructor(){const e=new X8;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=sA,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=Kx,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent($8),pL({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const r=this._queuedSyncs;r&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{r.forEach(i=>i&&i())})),this.dispatchEvent(eW),e&&e()})))}onBeforeRender(e,t,r,i,s,o){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(e){return Q8(e)}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=Zw.clone());if((!e||!e.isDerivedFrom(t))&&(e=this._derivedMaterial=this.createDerivedMaterial(t),t.addEventListener("dispose",function r(){t.removeEventListener("dispose",r),e.dispose()})),this.hasOutline()){let r=e._outlineMtl;return r||(r=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),r.isTextOutlineMaterial=!0,r.depthWrite=!1,r.map=null,e.addEventListener("dispose",function i(){e.removeEventListener("dispose",i),r.dispose()})),[r,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return aA(this.material).getDepthMaterial()}get customDistanceMaterial(){return aA(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,r=e.uniforms,i=this.textRenderInfo;if(i){const{sdfTexture:a,blockBounds:c}=i;r.uTroikaSDFTexture.value=a,r.uTroikaSDFTextureSize.value.set(a.image.width,a.image.height),r.uTroikaSDFGlyphSize.value=i.sdfGlyphSize,r.uTroikaSDFExponent.value=i.sdfExponent,r.uTroikaTotalBounds.value.fromArray(c),r.uTroikaUseGlyphColors.value=!t&&!!i.glyphColors;let u=0,d=0,m=0,g,y,_,w=0,x=0;if(t){let{outlineWidth:b,outlineOffsetX:T,outlineOffsetY:C,outlineBlur:P,outlineOpacity:D}=this;u=this._parsePercent(b)||0,d=Math.max(0,this._parsePercent(P)||0),g=D,w=this._parsePercent(T)||0,x=this._parsePercent(C)||0}else m=Math.max(0,this._parsePercent(this.strokeWidth)||0),m&&(_=this.strokeColor,r.uTroikaStrokeColor.value.set(_??sA),y=this.strokeOpacity,y==null&&(y=1)),g=this.fillOpacity;r.uTroikaEdgeOffset.value=u,r.uTroikaPositionOffset.value.set(w,x),r.uTroikaBlurRadius.value=d,r.uTroikaStrokeWidth.value=m,r.uTroikaStrokeOpacity.value=y,r.uTroikaFillOpacity.value=g??1,r.uTroikaCurveRadius.value=this.curveRadius||0;let S=this.clipRect;if(S&&Array.isArray(S)&&S.length===4)r.uTroikaClipRect.value.fromArray(S);else{const b=(this.fontSize||.1)*100;r.uTroikaClipRect.value.set(c[0]-b,c[1]-b,c[2]+b,c[3]+b)}this.geometry.applyClipRect(r.uTroikaClipRect.value)}r.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const s=t?this.outlineColor||0:this.color;if(s==null)delete e.color;else{const a=e.hasOwnProperty("color")?e.color:e.color=new Rt;(s!==a._input||typeof s=="object")&&a.set(a._input=s)}let o=this.orientation||Kx;if(o!==e._orientation){let a=r.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let c=o!==Kx&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(c){let[,u,d,m,g]=c;p0.set(0,0,0)[d]=u==="-"?1:-1,qx.set(0,0,0)[g]=m==="-"?-1:1,oA.lookAt(J8,p0.cross(qx),qx),a.setFromMatrix4(oA)}else a.identity();e._orientation=o}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),r=t?parseFloat(t[1]):NaN;e=(isNaN(r)?0:r/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new it){t.copy(e);const r=this.curveRadius;return r&&(t.x=Math.atan2(e.x,Math.abs(r)-Math.abs(e.z))*Math.abs(r)),t}worldPositionToTextCoords(e,t=new it){return p0.copy(e),this.localPositionToTextCoords(this.worldToLocal(p0),t)}raycast(e,t){const{textRenderInfo:r,curveRadius:i}=this;if(r){const s=r.blockBounds,o=i?_L():yL(),a=o.geometry,{position:c,uv:u}=a.attributes;for(let d=0;d<u.count;d++){let m=s[0]+u.getX(d)*(s[2]-s[0]);const g=s[1]+u.getY(d)*(s[3]-s[1]);let y=0;i&&(y=i-Math.cos(m/i)*i,m=Math.sin(m/i)*i),c.setXYZ(d,m,g,y)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,am.length=0,o.raycast(e,am);for(let d=0;d<am.length;d++)am[d].object=this,t.push(am[d])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,tW.forEach(r=>{this[r]=e[r]}),this}clone(){return new this.constructor().copy(this)}};xL.forEach(n=>{const e="_private_"+n;Object.defineProperty(SL.prototype,n,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});new Us;new Rt;const Cf=X.forwardRef(({sdfGlyphSize:n=64,anchorX:e="center",anchorY:t="middle",font:r,fontSize:i=1,children:s,characters:o,onSync:a,...c},u)=>{const d=ui(({invalidate:_})=>_),[m]=X.useState(()=>new SL),[g,y]=X.useMemo(()=>{const _=[];let w="";return X.Children.forEach(s,x=>{typeof x=="string"||typeof x=="number"?w+=x:_.push(x)}),[_,w]},[s]);return oP(()=>new Promise(_=>B8({font:r,characters:o},_)),["troika-text",r,o]),X.useLayoutEffect(()=>void m.sync(()=>{d(),a&&a(m)})),X.useEffect(()=>()=>m.dispose(),[m]),X.createElement("primitive",jm({object:m,ref:u,font:r,text:y,anchorX:e,anchorY:t,fontSize:i,sdfGlyphSize:n},c),g)}),nW=X.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:r,enableDamping:i=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:c,...u},d)=>{const m=ui(D=>D.invalidate),g=ui(D=>D.camera),y=ui(D=>D.gl),_=ui(D=>D.events),w=ui(D=>D.setEvents),x=ui(D=>D.set),S=ui(D=>D.get),b=ui(D=>D.performance),T=e||g,C=r||_.connected||y.domElement,P=X.useMemo(()=>new pV(T),[T]);return qh(()=>{P.enabled&&P.update()},-1),X.useEffect(()=>(s&&P.connect(s===!0?C:s),P.connect(C),()=>void P.dispose()),[s,C,t,P,m]),X.useEffect(()=>{const D=I=>{m(),t&&b.regress(),o&&o(I)},U=I=>{a&&a(I)},F=I=>{c&&c(I)};return P.addEventListener("change",D),P.addEventListener("start",U),P.addEventListener("end",F),()=>{P.removeEventListener("start",U),P.removeEventListener("end",F),P.removeEventListener("change",D)}},[o,a,c,P,m,w]),X.useEffect(()=>{if(n){const D=S().controls;return x({controls:P}),()=>x({controls:D})}},[n,P]),X.createElement("primitive",jm({ref:d,object:P,enableDamping:i},u))}),rW=3e3,iW=3001,wL=(n,e,t)=>{let r;switch(n){case ro:r=new Uint8ClampedArray(e*t*4);break;case bi:r=new Uint16Array(e*t*4);break;case Ga:r=new Uint32Array(e*t*4);break;case zS:r=new Int8Array(e*t*4);break;case HS:r=new Int16Array(e*t*4);break;case py:r=new Int32Array(e*t*4);break;case pi:r=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return r};let m0;const sW=(n,e,t,r)=>{if(m0!==void 0)return m0;const i=new oo(1,1,r);e.setRenderTarget(i);const s=new ir(new nl,new Ki({color:16777215}));e.render(s,t),e.setRenderTarget(null);const o=wL(n,i.width,i.height);return e.readRenderTargetPixels(i,0,0,i.width,i.height,o),i.dispose(),s.geometry.dispose(),s.material.dispose(),m0=o[0]!==0,m0};class Qw{constructor(e){var t,r,i,s,o,a,c,u,d,m,g,y,_,w,x,S;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(T){throw this._renderer.setRenderTarget(null),T}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const b={format:di,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(r=e.renderTargetOptions)===null||r===void 0?void 0:r.anisotropy:1,generateMipmaps:((i=e.renderTargetOptions)===null||i===void 0?void 0:i.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter)!==void 0?(a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter:Pn,minFilter:((c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter)!==void 0?(u=e.renderTargetOptions)===null||u===void 0?void 0:u.minFilter:Pn,samples:((d=e.renderTargetOptions)===null||d===void 0?void 0:d.samples)!==void 0?(m=e.renderTargetOptions)===null||m===void 0?void 0:m.samples:void 0,wrapS:((g=e.renderTargetOptions)===null||g===void 0?void 0:g.wrapS)!==void 0?(y=e.renderTargetOptions)===null||y===void 0?void 0:y.wrapS:gr,wrapT:((_=e.renderTargetOptions)===null||_===void 0?void 0:_.wrapT)!==void 0?(w=e.renderTargetOptions)===null||w===void 0?void 0:w.wrapT:gr};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=Qw.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new cg,this._camera=new Ya,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!sW(this._type,this._renderer,this._camera,b)){let T;switch(this._type){case bi:T=this._renderer.extensions.has("EXT_color_buffer_float")?pi:void 0;break}T!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${pi}`),this._type=T):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new ir(new nl,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new oo(this.width,this.height,b),this._renderTarget.texture.mapping=((x=e.renderTargetOptions)===null||x===void 0?void 0:x.mapping)!==void 0?(S=e.renderTargetOptions)===null||S===void 0?void 0:S.mapping:iu}static instantiateRenderer(){const e=new wy;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=wL(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Tf(this.toArray(),this.width,this.height,di,this._type,(e==null?void 0:e.mapping)||iu,(e==null?void 0:e.wrapS)||gr,(e==null?void 0:e.wrapT)||gr,(e==null?void 0:e.magFilter)||Pn,(e==null?void 0:e.minFilter)||Pn,(e==null?void 0:e.anisotropy)||1,so);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof ao&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof jn&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof jn&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const oW=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,aW=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class lW extends ao{constructor({gamma:e,offsetHdr:t,offsetSdr:r,gainMapMin:i,gainMapMax:s,maxDisplayBoost:o,hdrCapacityMin:a,hdrCapacityMax:c,sdr:u,gainMap:d}){super({name:"GainMapDecoderMaterial",vertexShader:oW,fragmentShader:aW,uniforms:{sdr:{value:u},gainMap:{value:d},gamma:{value:new oe(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new oe().fromArray(t)},offsetSdr:{value:new oe().fromArray(r)},gainMapMin:{value:new oe().fromArray(i)},gainMapMax:{value:new oe().fromArray(s)},weightFactor:{value:(Math.log2(o)-a)/(c-a)}},blending:ja,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=o,this._hdrCapacityMin=a,this._hdrCapacityMax=c,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class EL extends Error{}class ML extends Error{}const lm=(n,e,t)=>{const r=new RegExp(`${e}="([^"]*)"`,"i").exec(n);if(r)return r[1];const i=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(n);if(i){const s=i[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return s&&s.length===3?s.map(o=>o.replace(/<\/?rdf:li>/g,"")):i[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},cW=n=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(n):e=n.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const r=e.indexOf("x:xmpmeta>",t),i=e.slice(t,r+10);try{const s=lm(i,"hdrgm:GainMapMin","0"),o=lm(i,"hdrgm:GainMapMax"),a=lm(i,"hdrgm:Gamma","1"),c=lm(i,"hdrgm:OffsetSDR","0.015625"),u=lm(i,"hdrgm:OffsetHDR","0.015625"),d=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(i),m=d?d[1]:"0",g=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(i);if(!g)throw new Error("Incomplete gainmap metadata");const y=g[1];return{gainMapMin:Array.isArray(s)?s.map(_=>parseFloat(_)):[parseFloat(s),parseFloat(s),parseFloat(s)],gainMapMax:Array.isArray(o)?o.map(_=>parseFloat(_)):[parseFloat(o),parseFloat(o),parseFloat(o)],gamma:Array.isArray(a)?a.map(_=>parseFloat(_)):[parseFloat(a),parseFloat(a),parseFloat(a)],offsetSdr:Array.isArray(c)?c.map(_=>parseFloat(_)):[parseFloat(c),parseFloat(c),parseFloat(c)],offsetHdr:Array.isArray(u)?u.map(_=>parseFloat(_)):[parseFloat(u),parseFloat(u),parseFloat(u)],hdrCapacityMin:parseFloat(m),hdrCapacityMax:parseFloat(y)}}catch{}t=e.indexOf("<x:xmpmeta",r)}};class uW{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,r)=>{const i=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){r(new Error("Not a valid jpeg"));return}const o=s.byteLength;let a=2,c=0,u;for(;a<o;){if(++c>250){r(new Error(`Found no marker after ${c} loops `));return}if(s.getUint8(a)!==255){r(new Error(`Not a valid marker at offset 0x${a.toString(16)}, found: 0x${s.getUint8(a).toString(16)}`));return}if(u=s.getUint8(a+1),i&&console.log(`Marker: ${u.toString(16)}`),u===226){i&&console.log("Found APP2 marker (0xffe2)");const d=a+4;if(s.getUint32(d)===1297106432){const m=d+4;let g;if(s.getUint16(m)===18761)g=!1;else if(s.getUint16(m)===19789)g=!0;else{r(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(m+2,!g)!==42){r(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const y=s.getUint32(m+4,!g);if(y<8){r(new Error("Not valid TIFF data! (First offset less than 8)"));return}const _=m+y,w=s.getUint16(_,!g),x=_+2;let S=0;for(let P=x;P<x+12*w;P+=12)s.getUint16(P,!g)===45057&&(S=s.getUint32(P+8,!g));const T=_+2+w*12+4,C=[];for(let P=T;P<T+S*16;P+=16){const D={MPType:s.getUint32(P,!g),size:s.getUint32(P+4,!g),dataOffset:s.getUint32(P+8,!g),dependantImages:s.getUint32(P+12,!g),start:-1,end:-1,isFII:!1};D.dataOffset?(D.start=m+D.dataOffset,D.isFII=!1):(D.start=0,D.isFII=!0),D.end=D.start+D.size,C.push(D)}if(this.options.extractNonFII&&C.length){const P=new Blob([s]),D=[];for(const U of C){if(U.isFII&&!this.options.extractFII)continue;const F=P.slice(U.start,U.end+1,"image/jpeg");D.push(F)}t(D)}}}a+=2+s.getUint16(a+2)}})}}const fW=async n=>{const e=cW(n);if(!e)throw new ML("Gain map XMP metadata not found");const r=await new uW({extractFII:!0,extractNonFII:!0}).extract(n);if(r.length!==2)throw new EL("Gain map recovery image not found");return{sdr:new Uint8Array(await r[0].arrayBuffer()),gainMap:new Uint8Array(await r[1].arrayBuffer()),metadata:e}},lA=n=>new Promise((e,t)=>{const r=document.createElement("img");r.onload=()=>{e(r)},r.onerror=i=>{t(i)},r.src=URL.createObjectURL(n)});class TL extends Qi{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new Hy}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new lW({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new jn,sdr:new jn});return new Qw({width:16,height:16,type:bi,colorSpace:so,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,r,i){const s=i?new Blob([i],{type:"image/jpeg"}):void 0,o=new Blob([r],{type:"image/jpeg"});let a,c,u=!1;if(typeof createImageBitmap>"u"){const g=await Promise.all([s?lA(s):Promise.resolve(void 0),lA(o)]);c=g[0],a=g[1],u=!0}else{const g=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:"flipY"})]);c=g[0],a=g[1]}const d=new jn(c||new ImageData(2,2),iu,gr,gr,Pn,_1,di,ro,1,so);d.flipY=u,d.needsUpdate=!0;const m=new jn(a,iu,gr,gr,Pn,_1,di,ro,1,ti);m.flipY=u,m.needsUpdate=!0,e.width=a.width,e.height=a.height,e.material.gainMap=d,e.material.sdr=m,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class dW extends TL{load([e,t,r],i,s,o){const a=this.prepareQuadRenderer();let c,u,d;const m=async()=>{if(c&&u&&d){try{await this.render(a,d,c,u)}catch(I){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(r),typeof o=="function"&&o(I),a.disposeOnDemandRenderer();return}typeof i=="function"&&i(a),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(r),a.disposeOnDemandRenderer()}};let g=!0,y=0,_=0,w=!0,x=0,S=0,b=!0,T=0,C=0;const P=()=>{if(typeof s=="function"){const I=y+x+T,k=_+S+C,Q=g&&w&&b;s(new ProgressEvent("progress",{lengthComputable:Q,loaded:k,total:I}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(r);const D=new gs(this._internalLoadingManager);D.setResponseType("arraybuffer"),D.setRequestHeader(this.requestHeader),D.setPath(this.path),D.setWithCredentials(this.withCredentials),D.load(e,async I=>{if(typeof I=="string")throw new Error("Invalid sdr buffer");c=I,await m()},I=>{g=I.lengthComputable,_=I.loaded,y=I.total,P()},I=>{this.manager.itemError(e),typeof o=="function"&&o(I)});const U=new gs(this._internalLoadingManager);U.setResponseType("arraybuffer"),U.setRequestHeader(this.requestHeader),U.setPath(this.path),U.setWithCredentials(this.withCredentials),U.load(t,async I=>{if(typeof I=="string")throw new Error("Invalid gainmap buffer");u=I,await m()},I=>{w=I.lengthComputable,S=I.loaded,x=I.total,P()},I=>{this.manager.itemError(t),typeof o=="function"&&o(I)});const F=new gs(this._internalLoadingManager);return F.setRequestHeader(this.requestHeader),F.setPath(this.path),F.setWithCredentials(this.withCredentials),F.load(r,async I=>{if(typeof I!="string")throw new Error("Invalid metadata string");d=JSON.parse(I),await m()},I=>{b=I.lengthComputable,C=I.loaded,T=I.total,P()},I=>{this.manager.itemError(r),typeof o=="function"&&o(I)}),a}}class hW extends TL{load(e,t,r,i){const s=this.prepareQuadRenderer(),o=new gs(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async a=>{if(typeof a=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const c=new Uint8Array(a);let u,d,m;try{const g=await fW(c);u=g.sdr,d=g.gainMap,m=g.metadata}catch(g){if(g instanceof ML||g instanceof EL)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),m={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},u=c;else throw g}try{await this.render(s,m,u,d)}catch(g){this.manager.itemError(e),typeof i=="function"&&i(g),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},r,a=>{this.manager.itemError(e),typeof i=="function"&&i(a)}),s}}const $m={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},bL="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",_h=n=>Array.isArray(n),Jw=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function e_({files:n=Jw,path:e="",preset:t=void 0,encoding:r=void 0,extensions:i}={}){let s=null,o=!1;t&&($w(t),n=$m[t],e=bL),o=_h(n);const{extension:a,isCubemap:c}=eE(n);if(s=tE(a),!s)throw new Error("useEnvironment: Unrecognized file extension: "+n);const u=ui(y=>y.gl);X.useLayoutEffect(()=>{if(a!=="webp"&&a!=="jpg"&&a!=="jpeg")return;function y(){Fh.clear(s,o?[n]:n)}u.domElement.addEventListener("webglcontextlost",y,{once:!0})},[n,u.domElement]);const d=Fh(s,o?[n]:n,y=>{(a==="webp"||a==="jpg"||a==="jpeg")&&y.setRenderer(u),y.setPath==null||y.setPath(e),i&&i(y)});let m=o?d[0]:d;if(a==="jpg"||a==="jpeg"||a==="webp"){var g;m=(g=m.renderTarget)==null?void 0:g.texture}return m.mapping=c?Ja:Lh,"colorSpace"in m?m.colorSpace=r??c?"srgb":"srgb-linear":m.encoding=r??c?iW:rW,m}const pW={files:Jw,path:"",preset:void 0,extensions:void 0};e_.preload=n=>{const e={...pW,...n};let{files:t,path:r=""}=e;const{preset:i,extensions:s}=e;i&&($w(i),t=$m[i],r=bL);const{extension:o}=eE(t);if(o==="webp"||o==="jpg"||o==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const a=tE(o);if(!a)throw new Error("useEnvironment: Unrecognized file extension: "+t);Fh.preload(a,_h(t)?[t]:t,c=>{c.setPath==null||c.setPath(r),s&&s(c)})};const mW={files:Jw,preset:void 0};e_.clear=n=>{const e={...mW,...n};let{files:t}=e;const{preset:r}=e;r&&($w(r),t=$m[r]);const{extension:i}=eE(t),s=tE(i);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+t);Fh.clear(s,_h(t)?[t]:t)};function $w(n){if(!(n in $m))throw new Error("Preset must be one of: "+Object.keys($m).join(", "))}function eE(n){var e;const t=_h(n)&&n.length===6,r=_h(n)&&n.length===3&&n.some(o=>o.endsWith("json")),i=_h(n)?n[0]:n;return{extension:t?"cube":r?"webp":i.startsWith("data:application/exr")?"exr":i.startsWith("data:application/hdr")?"hdr":i.startsWith("data:image/jpeg")?"jpg":(e=i.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:r}}function tE(n){return n==="cube"?jR:n==="hdr"?s8:n==="exr"?o8:n==="jpg"||n==="jpeg"?hW:n==="webp"?dW:null}const gW=n=>n.current&&n.current.isScene,vW=n=>gW(n)?n.current:n;function nE(n,e,t,r,i={}){var s,o,a,c;i={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...i};const u=vW(e||t),d=u.background,m=u.environment,g={backgroundBlurriness:u.backgroundBlurriness,backgroundIntensity:u.backgroundIntensity,backgroundRotation:(s=(o=u.backgroundRotation)==null||o.clone==null?void 0:o.clone())!==null&&s!==void 0?s:[0,0,0],environmentIntensity:u.environmentIntensity,environmentRotation:(a=(c=u.environmentRotation)==null||c.clone==null?void 0:c.clone())!==null&&a!==void 0?a:[0,0,0]};return n!=="only"&&(u.environment=r),n&&(u.background=r),kc(u,i),()=>{n!=="only"&&(u.environment=m),n&&(u.background=d),kc(u,g)}}function rE({scene:n,background:e=!1,map:t,...r}){const i=ui(s=>s.scene);return X.useLayoutEffect(()=>{if(t)return nE(e,n,i,t,r)}),null}function AL({background:n=!1,scene:e,blur:t,backgroundBlurriness:r,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:o,environmentRotation:a,...c}){const u=e_(c),d=ui(m=>m.scene);return X.useLayoutEffect(()=>nE(n,e,d,u,{backgroundBlurriness:t??r,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:o,environmentRotation:a})),X.useEffect(()=>()=>{u.dispose()},[u]),null}function yW({children:n,near:e=.1,far:t=1e3,resolution:r=256,frames:i=1,map:s,background:o=!1,blur:a,backgroundBlurriness:c,backgroundIntensity:u,backgroundRotation:d,environmentIntensity:m,environmentRotation:g,scene:y,files:_,path:w,preset:x=void 0,extensions:S}){const b=ui(F=>F.gl),T=ui(F=>F.scene),C=X.useRef(null),[P]=X.useState(()=>new cg),D=X.useMemo(()=>{const F=new iw(r);return F.texture.type=bi,F},[r]);X.useEffect(()=>()=>{D.dispose()},[D]),X.useLayoutEffect(()=>{if(i===1){const F=b.autoClear;b.autoClear=!0,C.current.update(b,P),b.autoClear=F}return nE(o,y,T,D.texture,{backgroundBlurriness:a??c,backgroundIntensity:u,backgroundRotation:d,environmentIntensity:m,environmentRotation:g})},[n,P,D.texture,y,T,o,i,b]);let U=1;return qh(()=>{if(i===1/0||U<i){const F=b.autoClear;b.autoClear=!0,C.current.update(b,P),b.autoClear=F,U++}}),X.createElement(X.Fragment,null,W0(X.createElement(X.Fragment,null,n,X.createElement("cubeCamera",{ref:C,args:[e,t,D]}),_||x?X.createElement(AL,{background:!0,files:_,preset:x,path:w,extensions:S}):s?X.createElement(rE,{background:!0,map:s,extensions:S}):null),P))}function _W(n){var e,t,r,i;const s=e_(n),o=n.map||s;X.useMemo(()=>Wy({GroundProjectedEnvImpl:oV}),[]),X.useEffect(()=>()=>{s.dispose()},[s]);const a=X.useMemo(()=>[o],[o]),c=(e=n.ground)==null?void 0:e.height,u=(t=n.ground)==null?void 0:t.radius,d=(r=(i=n.ground)==null?void 0:i.scale)!==null&&r!==void 0?r:1e3;return X.createElement(X.Fragment,null,X.createElement(rE,jm({},n,{map:o})),X.createElement("groundProjectedEnvImpl",{args:a,scale:d,height:c,radius:u}))}function xW(n){return n.ground?X.createElement(_W,n):n.map?X.createElement(rE,n):n.children?X.createElement(yW,n):X.createElement(AL,n)}class SW extends Co{constructor(e,t){super(),this.inputSource=null,this.xrControllerModel=null,this.index=e,this.controller=t.xr.getController(e),this.grip=t.xr.getControllerGrip(e),this.hand=t.xr.getHand(e),this.grip.userData.name="grip",this.controller.userData.name="controller",this.hand.userData.name="hand",this.visible=!1,this.add(this.controller,this.grip,this.hand),this._onConnected=this._onConnected.bind(this),this._onDisconnected=this._onDisconnected.bind(this),this.controller.addEventListener("connected",this._onConnected),this.controller.addEventListener("disconnected",this._onDisconnected)}_onConnected(e){e.fake||e.data&&(this.visible=!0,this.inputSource=e.data,this.dispatchEvent(e))}_onDisconnected(e){e.fake||(this.visible=!1,this.inputSource=null,this.dispatchEvent(e))}dispose(){this.controller.removeEventListener("connected",this._onConnected),this.controller.removeEventListener("disconnected",this._onDisconnected)}}var cA,uA;const wW=n=>Array.from(new Set(n)),To=typeof window<"u"&&((cA=window.document)!=null&&cA.createElement||((uA=window.navigator)==null?void 0:uA.product)==="ReactNative")?X.useLayoutEffect:X.useEffect;function Wa(n){const e=X.useRef(n);return To(()=>void(e.current=n),[n]),e}function ih(n,e,{handedness:t}={}){const r=Wa(e),i=hi(s=>s.controllers);To(()=>{const s=i.map(o=>{if(t&&o.inputSource&&o.inputSource.handedness!==t)return;const a=c=>r.current({nativeEvent:c,target:o});return o.controller.addEventListener(n,a),()=>o.controller.removeEventListener(n,a)});return()=>s.forEach(o=>o==null?void 0:o())},[i,t,n])}const fA=new sn;function EW({children:n}){const e=ui(m=>m.events),t=ui(m=>m.get),r=ui(m=>m.raycaster),i=hi(m=>m.controllers),s=hi(m=>m.interactions),o=hi(m=>m.hoverState),a=hi(m=>m.hasInteraction),c=hi(m=>m.getInteraction),u=X.useCallback(m=>{const g=Array.from(s.keys());return fA.identity().extractRotation(m.matrixWorld),r.ray.origin.setFromMatrixPosition(m.matrixWorld),r.ray.direction.set(0,0,-1).applyMatrix4(fA),r.intersectObjects(g,!0)},[s,r]);qh(()=>{var m;if(s.size!==0)for(const g of i){if(!((m=g.inputSource)!=null&&m.handedness))return;const y=o[g.inputSource.handedness],_=new Set;let w=u(g.controller);if(e.filter)w=e.filter(w,t());else{const x=w.find(S=>S==null?void 0:S.object);x&&(w=[x])}for(const x of w){let S=x.object;for(;S;){if(a(S,"onHover")&&!y.has(S)){const T=c(S,"onHover");for(const C of T)C({target:g,intersection:x,intersections:w})}const b=c(S,"onMove");b==null||b.forEach(T=>T({target:g,intersection:x,intersections:w})),y.set(S,x),_.add(S.id),S=S.parent}}for(const x of y.keys())if(!_.has(x.id)){y.delete(x);const S=c(x,"onBlur");if(!S)continue;for(const b of S)b({target:g,intersections:w})}}});const d=X.useCallback(m=>g=>{var y;if(!((y=g.target.inputSource)!=null&&y.handedness))return;const _=o[g.target.inputSource.handedness],w=Array.from(new Set(_.values()));s.forEach((x,S)=>{var b,T,C;if(_.has(S)){if(!x[m])return;for(const P of x[m])(b=P.current)==null||b.call(P,{target:g.target,intersection:_.get(S),intersections:w})}else if(m==="onSelect"&&x.onSelectMissed)for(const P of x.onSelectMissed)(T=P.current)==null||T.call(P,{target:g.target,intersections:w});else if(m==="onSqueeze"&&x.onSqueezeMissed)for(const P of x.onSqueezeMissed)(C=P.current)==null||C.call(P,{target:g.target,intersections:w})})},[o,s]);return ih("select",d("onSelect")),ih("selectstart",d("onSelectStart")),ih("selectend",d("onSelectEnd")),ih("squeeze",d("onSqueeze")),ih("squeezeend",d("onSqueezeEnd")),ih("squeezestart",d("onSqueezeStart")),X.createElement(X.Fragment,null,n)}function aa(n,e,t){const r=hi(o=>o.addInteraction),i=hi(o=>o.removeInteraction),s=Wa(t);To(()=>{const o=n.current;if(!(!o||!s.current))return r(o,e,s),()=>i(o,e,s)},[n,e,r,i])}const eg=X.forwardRef(function({onHover:e,onBlur:t,onSelectStart:r,onSelectEnd:i,onSelectMissed:s,onSelect:o,onSqueezeStart:a,onSqueezeEnd:c,onSqueezeMissed:u,onSqueeze:d,onMove:m,children:g},y){const _=X.useRef(null);return X.useImperativeHandle(y,()=>_.current),aa(_,"onHover",e),aa(_,"onBlur",t),aa(_,"onSelectStart",r),aa(_,"onSelectEnd",i),aa(_,"onSelectMissed",s),aa(_,"onSelect",o),aa(_,"onSqueezeStart",a),aa(_,"onSqueezeEnd",c),aa(_,"onSqueezeMissed",u),aa(_,"onSqueeze",d),aa(_,"onMove",m),X.createElement("group",{ref:_},g)});X.forwardRef(function({onSelectStart:e,onSelectEnd:t,children:r,...i},s){const o=X.useRef(),a=X.useRef(null),c=X.useMemo(()=>new sn,[]);return X.useImperativeHandle(s,()=>a.current),qh(()=>{const u=o.current,d=a.current;u&&(d.applyMatrix4(c),d.applyMatrix4(u.matrixWorld),d.updateMatrixWorld(),c.copy(u.matrixWorld).invert())}),X.createElement(eg,{ref:a,onSelectStart:u=>{o.current=u.target.controller,c.copy(u.target.controller.matrixWorld).invert(),e==null||e(u)},onSelectEnd:u=>{u.target.controller===o.current&&(o.current=void 0),t==null||t(u)},...i},r)});const CL=X.createContext(null),Rf=Vy((n,e)=>({set:n,get:e,session:null,referenceSpaceType:null}));function MW({foveation:n=0,frameRate:e=void 0,referenceSpace:t="local-floor",onSessionStart:r,onSessionEnd:i,onVisibilityChange:s,onInputSourcesChange:o,children:a}){const c=ui(T=>T.gl),u=ui(T=>T.camera),d=hi(T=>T.player),m=hi(T=>T.get),g=hi(T=>T.set),y=hi(T=>T.session),_=hi(T=>T.controllers),w=Wa(r),x=Wa(i),S=Wa(s),b=Wa(o);return To(()=>{const T=[0,1].map(C=>{const P=new SW(C,c),D=()=>g(F=>({controllers:[...F.controllers,P]})),U=()=>g(F=>({controllers:F.controllers.filter(I=>I!==P)}));return P.addEventListener("connected",D),P.addEventListener("disconnected",U),()=>{P.removeEventListener("connected",D),P.removeEventListener("disconnected",U)}});return()=>T.forEach(C=>C())},[c,g]),To(()=>Rf.subscribe(({session:T})=>g(()=>({session:T}))),[c.xr,g]),To(()=>{c.xr.setFoveation(n),g(()=>({foveation:n}))},[c.xr,n,g]),To(()=>{var T;try{e&&((T=y==null?void 0:y.updateTargetFrameRate)==null||T.call(y,e))}catch{}g(()=>({frameRate:e}))},[y,e,g]),To(()=>{const T=Rf.getState();c.xr.setReferenceSpaceType(t),g(()=>({referenceSpace:t})),T.set({referenceSpaceType:t})},[c.xr,t,g]),To(()=>{if(!y)return void c.xr.setSession(null);const T=U=>{var F;g(()=>({isPresenting:!0})),(F=w.current)==null||F.call(w,{nativeEvent:{...U,target:y},target:y})},C=U=>{var F;g(()=>({isPresenting:!1,session:null})),Rf.setState(()=>({session:null})),(F=x.current)==null||F.call(x,{nativeEvent:{...U,target:y},target:y})},P=U=>{var F;(F=S.current)==null||F.call(S,{nativeEvent:U,target:y})},D=U=>{var F;const I=Object.values(y.inputSources).some(k=>k.hand);g(()=>({isHandTracking:I})),(F=b.current)==null||F.call(b,{nativeEvent:U,target:y})};return c.xr.addEventListener("sessionstart",T),c.xr.addEventListener("sessionend",C),y.addEventListener("visibilitychange",P),y.addEventListener("inputsourceschange",D),c.xr.setSession(y).then(()=>{c.xr.setFoveation(m().foveation)}),()=>{c.xr.removeEventListener("sessionstart",T),c.xr.removeEventListener("sessionend",C),y.removeEventListener("visibilitychange",P),y.removeEventListener("inputsourceschange",D)}},[y,c.xr,g,m]),X.createElement(EW,null,X.createElement("primitive",{object:d},X.createElement("primitive",{object:u}),_.map(T=>X.createElement("primitive",{key:T.index,object:T}))),a)}function TW(n){const e=X.useMemo(()=>Vy((t,r)=>({set:t,get:r,controllers:[],isPresenting:!1,isHandTracking:!1,player:new Co,session:null,foveation:0,referenceSpace:"local-floor",hoverState:{left:new Map,right:new Map,none:new Map},interactions:new Map,hasInteraction(i,s){var o;return!!((o=r().interactions.get(i))!=null&&o[s].some(a=>a.current))},getInteraction(i,s){var o;return(o=r().interactions.get(i))==null?void 0:o[s].reduce((a,c)=>(c.current&&a.push(c.current),a),[])},addInteraction(i,s,o){const a=r().interactions;a.has(i)||a.set(i,{onHover:[],onBlur:[],onSelect:[],onSelectEnd:[],onSelectStart:[],onSelectMissed:[],onSqueeze:[],onSqueezeEnd:[],onSqueezeStart:[],onSqueezeMissed:[],onMove:[]}),a.get(i)[s].push(o)},removeInteraction(i,s,o){const a=r().interactions.get(i);if(a){const c=a[s].indexOf(o);c!==-1&&a[s].splice(c,1)}}})),[]);return X.createElement(CL.Provider,{value:e},X.createElement(MW,{...n}))}const bW=(n,e)=>{var t;if(!(!n&&!e))return n&&!e?{optionalFeatures:[n]}:n&&e?{...e,optionalFeatures:wW([...(t=e.optionalFeatures)!=null?t:[],n])}:e},AW=async(n,e)=>{const t=Rf.getState();if(t.session){console.warn("@react-three/xr: session already started, please stop it first");return}const r=bW(t.referenceSpaceType,e),i=await navigator.xr.requestSession(n,r);return t.set(()=>({session:i})),i},CW=async()=>{const n=Rf.getState();if(!n.session){console.warn("@react-three/xr: no session to stop, please start it first");return}await n.session.end(),n.set({session:null})},RW=async(n,{sessionInit:e,enterOnly:t,exitOnly:r}={})=>{const i=Rf.getState();if(!(i.session&&t)&&!(!i.session&&r))return i.session?await CW():await AW(n,e)},PW=(n,e,t)=>{switch(n){case"entered":return`Exit ${e}`;case"exited":return`Enter ${e}`;case"unsupported":default:switch(t){case"https":return"HTTPS needed";case"security":return`${e} blocked`;case"unknown":default:return`${e} unsupported`}}},RL=X.forwardRef(function({mode:e,sessionInit:t,enterOnly:r=!1,exitOnly:i=!1,onClick:s,onError:o,children:a,...c},u){var d;const[m,g]=X.useState("exited"),[y,_]=X.useState("unknown"),w=PW(m,e,y),x=e==="inline"?e:`immersive-${e.toLowerCase()}`,S=Wa(o);To(()=>{if(!(navigator!=null&&navigator.xr))return void g("unsupported");navigator.xr.isSessionSupported(x).then(T=>{if(T)g("exited");else{const C=location.protocol==="https:";g("unsupported"),_(C?"unknown":"https")}}).catch(T=>{g("unsupported"),"name"in T&&T.name==="SecurityError"?_("security"):_("unknown")})},[x]),To(()=>Rf.subscribe(T=>{T.session?g("entered"):m!=="unsupported"&&g("exited")}),[m]);const b=X.useCallback(async T=>{s==null||s(T);try{RW(x,{sessionInit:t,enterOnly:r,exitOnly:i})}catch(C){const P=S.current;if(P&&C instanceof Error)P(C);else throw C}},[s,x,t,r,i,S]);return X.createElement("button",{...c,ref:u,onClick:m==="unsupported"?s:b},(d=typeof a=="function"?a(m):a)!=null?d:w)}),PL={position:"absolute",bottom:"24px",left:"50%",transform:"translateX(-50%)",padding:"12px 24px",border:"1px solid white",borderRadius:"4px",background:"rgba(0, 0, 0, 0.1)",color:"white",font:"normal 0.8125rem sans-serif",outline:"none",zIndex:99999,cursor:"pointer"};X.forwardRef(({style:n=PL,sessionInit:e={domOverlay:typeof document<"u"?{root:document.body}:void 0,optionalFeatures:["hit-test","dom-overlay","dom-overlay-for-handheld-ar"]},children:t,...r},i)=>X.createElement(RL,{...r,ref:i,mode:"AR",style:n,sessionInit:e},t));const LW=X.forwardRef(({style:n=PL,sessionInit:e={optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]},children:t,...r},i)=>X.createElement(RL,{...r,ref:i,mode:"VR",style:n,sessionInit:e},t));function hi(n=t=>t,e){const t=X.useContext(CL);if(!t)throw new Error("useXR must be used within an <XR /> component!");return t(n,e)}const IW="https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles",NW="generic-trigger";class DW{constructor(e=null,t=IW){this.gltfLoader=e??new oL,this.path=t,this._assetCache={}}initializeControllerModel(e,t){return t.targetRayMode!=="tracked-pointer"||!t.gamepad?Promise.resolve():$V(t,this.path,NW).then(({profile:r,assetPath:i})=>{if(!i)throw new Error("no asset path");const s=new i8(t,r,i);e.connectMotionController(s);const o=s.assetUrl,a=this._assetCache[o];if(a){const c=a.scene.clone();e.connectModel(c)}else{if(!this.gltfLoader)throw new Error("GLTFLoader not set.");this.gltfLoader.setPath(""),this.gltfLoader.load(o,c=>{if(!e.motionController){console.warn("motionController gone while gltf load, bailing...");return}this._assetCache[o]=c;const u=c.scene.clone();e.connectModel(u)},void 0,()=>{throw new Error(`Asset ${o} missing or malformed.`)})}}).catch(r=>{console.warn(r)})}}const dA=n=>"envMap"in n,hA=(n,e)=>{n.envMap=e,n.needsUpdate=!0},LL=(n,e)=>{e instanceof ir&&(Array.isArray(e.material)?e.material.forEach(t=>dA(t)?hA(t,n):void 0):dA(e.material)&&hA(e.material,n))},pA=n=>"envMapIntensity"in n,mA=(n,e)=>{n.envMapIntensity=e,n.needsUpdate=!0},xS=(n,e)=>{e instanceof ir&&(Array.isArray(e.material)?e.material.forEach(t=>pA(t)?mA(t,n):void 0):pA(e.material)&&mA(e.material,n))};function UW(n,e){Object.values(n.components).forEach(t=>{const{type:r,touchPointNodeName:i,visualResponses:s}=t;if(r===Nr.ComponentType.TOUCHPAD&&i)if(t.touchPointNode=e.getObjectByName(i),t.touchPointNode){const o=new Xh(.001),a=new Ki({color:255}),c=new ir(o,a);t.touchPointNode.add(c)}else console.warn(`Could not find touch dot, ${t.touchPointNodeName}, in touchpad component ${t.id}`);Object.values(s).forEach(o=>{const{valueNodeName:a,minNodeName:c,maxNodeName:u,valueNodeProperty:d}=o;if(d===Nr.VisualResponseProperty.TRANSFORM&&c&&u){if(o.minNode=e.getObjectByName(c),o.maxNode=e.getObjectByName(u),!o.minNode){console.warn(`Could not find ${c} in the model`);return}if(!o.maxNode){console.warn(`Could not find ${u} in the model`);return}}o.valueNode=e.getObjectByName(a),o.valueNode||console.warn(`Could not find ${a} in the model`)})})}function OW(n,e){UW(n.motionController,e),(n.envMap||n.envMapIntensity!=null)&&e.traverse(t=>{n.envMap&&LL(n.envMap,t),n.envMapIntensity!=null&&xS(n.envMapIntensity,t)}),n.add(e)}class FW extends Co{constructor(){super(),this.motionController=null,this.envMap=null,this.envMapIntensity=1,this.scene=null}setEnvironmentMap(e,t=1){var r;return this.envMap===e&&this.envMapIntensity===t?this:(this.envMap=e,this.envMapIntensity=t,(r=this.scene)==null||r.traverse(i=>{LL(e,i),xS(t,i)}),this)}setEnvironmentMapIntensity(e){var t;return this.envMapIntensity===e?this:(this.envMapIntensity=e,(t=this.scene)==null||t.traverse(r=>xS(e,r)),this)}connectModel(e){if(!this.motionController){console.warn("scene tried to add, but no motion controller");return}this.scene=e,OW(this,e),this.dispatchEvent({type:"modelconnected",data:e})}connectMotionController(e){this.motionController=e,this.dispatchEvent({type:"motionconnected",data:e})}updateMatrixWorld(e){super.updateMatrixWorld(e),this.motionController&&(this.motionController.updateFromGamepad(),Object.values(this.motionController.components).forEach(t=>{Object.values(t.visualResponses).forEach(r=>{const{valueNode:i,minNode:s,maxNode:o,value:a,valueNodeProperty:c}=r;i&&(c===Nr.VisualResponseProperty.VISIBILITY&&typeof a=="boolean"?i.visible=a:c===Nr.VisualResponseProperty.TRANSFORM&&s&&o&&typeof a=="number"&&(i.quaternion.slerpQuaternions(s.quaternion,o.quaternion,a),i.position.lerpVectors(s.position,o.position,a)))})}))}disconnect(){this.dispatchEvent({type:"motiondisconnected",data:this.motionController}),this.dispatchEvent({type:"modeldisconnected",data:this.scene}),this.motionController=null,this.scene&&this.remove(this.scene),this.scene=null}dispose(){this.disconnect()}}const kW=X.forwardRef(function({target:e,hideOnBlur:t=!1,...r},i){const s=hi(c=>c.hoverState),o=X.useRef(null),a=X.useMemo(()=>new En().setFromPoints([new oe(0,0,0),new oe(0,0,-1)]),[]);return X.useImperativeHandle(i,()=>o.current),qh(()=>{if(!e.inputSource)return;let c=1;const u=s[e.inputSource.handedness].values().next().value;u&&e.inputSource.handedness!=="none"?(c=u.distance,t&&(o.current.visible=!1)):t&&(o.current.visible=!0);const d=-.01;o.current.scale.z=c+d}),X.createElement("line",{ref:o,geometry:a,"material-opacity":.8,"material-transparent":!0,...r})}),BW=new DW,zW=({target:n,envMap:e,envMapIntensity:t})=>{const r=X.useRef(null),i=Wa(c=>{e!=null&&c.setEnvironmentMap(e)}),s=Wa(c=>c.setEnvironmentMap(null)),o=Wa(c=>{t!=null&&c.setEnvironmentMapIntensity(t)}),a=X.useCallback(c=>{var u,d,m;if(r.current=c,c){if(n.xrControllerModel=c,(u=n.inputSource)!=null&&u.hand)return;i.current(c),o.current(c),n.inputSource?BW.initializeControllerModel(c,n.inputSource):console.warn("no input source on XRController when handleControllerModel")}else{if((d=n.inputSource)!=null&&d.hand)return;(m=n.xrControllerModel)==null||m.disconnect(),n.xrControllerModel=null}},[n,o,i]);return X.useLayoutEffect(()=>{r.current&&(e?i.current(r.current):s.current(r.current))},[e,i,s]),X.useLayoutEffect(()=>{r.current&&o.current(r.current)},[t,o]),X.createElement("xRControllerModel",{ref:a})};function HW({rayMaterial:n={},hideRaysOnBlur:e=!1,envMap:t,envMapIntensity:r}){const i=hi(a=>a.controllers),s=hi(a=>a.isHandTracking),o=X.useMemo(()=>Object.entries(n).reduce((a,[c,u])=>({...a,[`material-${c}`]:u}),{}),[JSON.stringify(n)]);return X.useMemo(()=>Wy({XRControllerModel:FW}),[]),X.createElement(X.Fragment,null,i.map((a,c)=>X.createElement(X.Fragment,{key:c},W0(X.createElement(zW,{target:a,envMap:t,envMapIntensity:r}),a.grip),W0(X.createElement(kW,{visible:!s,hideOnBlur:e,target:a,...o}),a.controller))))}const GW="https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles/generic-hand/";class VW{constructor(e,t,r=GW,i,s){this.controller=t,this.handModel=e,this.bones=[];const o=new oL;s||o.setPath(r),o.load(s??`${i}.glb`,a=>{const c=a.scene.children[0];this.handModel.add(c),this.scene=c;const u=c.getObjectByProperty("type","SkinnedMesh");u.frustumCulled=!1,u.castShadow=!0,u.receiveShadow=!0,["wrist","thumb-metacarpal","thumb-phalanx-proximal","thumb-phalanx-distal","thumb-tip","index-finger-metacarpal","index-finger-phalanx-proximal","index-finger-phalanx-intermediate","index-finger-phalanx-distal","index-finger-tip","middle-finger-metacarpal","middle-finger-phalanx-proximal","middle-finger-phalanx-intermediate","middle-finger-phalanx-distal","middle-finger-tip","ring-finger-metacarpal","ring-finger-phalanx-proximal","ring-finger-phalanx-intermediate","ring-finger-phalanx-distal","ring-finger-tip","pinky-finger-metacarpal","pinky-finger-phalanx-proximal","pinky-finger-phalanx-intermediate","pinky-finger-phalanx-distal","pinky-finger-tip"].forEach(m=>{const g=c.getObjectByName(m);g!==void 0?g.jointName=m:console.warn(`Couldn't find ${m} in ${i} hand mesh`),this.bones.push(g)})})}updateMesh(){const e=this.controller.joints;let t=!0;for(let r=0;r<this.bones.length;r++){const i=this.bones[r];if(i){const s=e[i.jointName];if(s.visible){const o=s.position;i.position.copy(o),i.quaternion.copy(s.quaternion),t=!1}}}t&&this.scene?this.scene.visible=!1:this.scene&&(this.scene.visible=!0)}dispose(){this.scene&&this.handModel.remove(this.scene)}}const WW=.01,jW="index-finger-tip";class XW extends Ln{constructor(e,t,r){super(),this._onConnected=i=>{const s=i.data;s.hand&&!this.motionController&&(this.xrInputSource=s,this.motionController=new VW(this,this.controller,void 0,s.handedness,s.handedness==="left"?this.leftModelPath:this.rightModelPath))},this._onDisconnected=()=>{var i;(i=this.xrInputSource)!=null&&i.hand&&this.motionControllerCleanup()},this.controller=e,this.motionController=null,this.envMap=null,this.leftModelPath=t,this.rightModelPath=r,this.mesh=null,this.xrInputSource=null,e.addEventListener("connected",this._onConnected),e.addEventListener("disconnected",this._onDisconnected)}motionControllerCleanup(){var e;this.clear(),(e=this.motionController)==null||e.dispose(),this.motionController=null}updateMatrixWorld(e){super.updateMatrixWorld(e),this.motionController&&this.motionController.updateMesh()}getPointerPosition(){const e=this.controller.joints[jW];return e?e.position:null}intersectBoxObject(e){const t=this.getPointerPosition();if(t){const r=new Os(t,WW),i=new Us().setFromObject(e);return r.intersectsBox(i)}else return!1}checkButton(e){this.intersectBoxObject(e)?e.onPress():e.onClear(),e.isPressed()&&e.whilePressed()}dispose(){this.motionControllerCleanup(),this.controller.removeEventListener("connected",this._onConnected),this.controller.removeEventListener("disconnected",this._onDisconnected)}}function IL({modelLeft:n,modelRight:e}){const t=hi(r=>r.controllers);return X.useMemo(()=>Wy({OculusHandModel:XW}),[]),To(()=>{for(const r of t)r.hand.dispatchEvent({type:"connected",data:r.inputSource,fake:!0})},[t,n,e]),X.createElement(X.Fragment,null,t.map(({hand:r})=>W0(X.createElement("oculusHandModel",{args:[r,n,e]}),r)))}const YW=()=>Ee.jsxs("div",{className:"loading-container",children:[Ee.jsx("div",{className:"spinner"}),Ee.jsx("p",{children:"Loading VR Todo Experience..."})]}),qW=({todo:n,position:e,onToggle:t,onDelete:r,index:i})=>{const[s,o]=X.useState(!1),[a,c]=X.useState(!1),[u,d]=X.useState(!1),m=X.useRef(null),{scale:g,opacity:y,posY:_}=V6({from:{scale:n.isNew?0:1,opacity:n.isNew?0:1,posY:n.isNew?-.2:0},to:{scale:n.isLeaving?.7:1,opacity:n.isLeaving?0:1,posY:0},config:{mass:1.2,tension:240,friction:24,clamp:n.isLeaving}});qh(()=>{m.current&&(m.current.position.y=e[1]+_.get(),m.current.scale.set(g.get(),g.get(),g.get()),s&&!n.isLeaving?m.current.position.z=.1:m.current.position.z=e[2])});const w=y.get();return Ee.jsxs("group",{ref:m,position:[e[0],e[1],e[2]],frustumCulled:!1,onPointerOver:()=>o(!0),onPointerOut:()=>o(!1),children:[Ee.jsxs("mesh",{castShadow:!0,receiveShadow:!0,frustumCulled:!1,children:[Ee.jsx("planeGeometry",{args:[3.6,.4]}),Ee.jsx("meshStandardMaterial",{color:s?"#F5F5F5":"#FFFFFF",transparent:!0,opacity:w,emissive:s?"#8B5CF6":"#000000",emissiveIntensity:s?.05:0})]}),Ee.jsxs("mesh",{position:[-1.75,0,.02],children:[Ee.jsx("planeGeometry",{args:[.1,.4]}),Ee.jsx("meshStandardMaterial",{color:n.color})]}),Ee.jsx(Cf,{position:[-.8,0,.02],fontSize:.16,color:n.completed?"#9CA3AF":"#1F2937",anchorX:"left",anchorY:"middle",frustumCulled:!1,renderOrder:2,maxWidth:2.5,overflowWrap:"break-word",children:n.text}),n.completed&&Ee.jsxs("mesh",{position:[-.05,0,.03],children:[Ee.jsx("planeGeometry",{args:[2.8,.02]}),Ee.jsx("meshBasicMaterial",{color:"#9CA3AF"})]}),Ee.jsx(eg,{onSelect:()=>t(n.id),children:Ee.jsxs("group",{position:[1.4,0,.02],onPointerEnter:()=>c(!0),onPointerLeave:()=>c(!1),children:[Ee.jsxs("mesh",{castShadow:!0,children:[Ee.jsx("boxGeometry",{args:[.2,.2,.02]}),Ee.jsx("meshStandardMaterial",{color:n.completed?"#8B5CF6":"#E5E7EB",emissive:a?"#8B5CF6":"#000000",emissiveIntensity:a?.5:0})]}),n.completed&&Ee.jsx(Cf,{position:[0,0,.02],fontSize:.16,color:"#FFFFFF",anchorX:"center",anchorY:"middle",children:""}),a&&Ee.jsxs("mesh",{position:[0,0,-.01],rotation:[0,0,0],children:[Ee.jsx("planeGeometry",{args:[.25,.25]}),Ee.jsx("meshBasicMaterial",{color:"#8B5CF6",opacity:.3,transparent:!0})]})]})}),Ee.jsx(eg,{onSelect:()=>r(n.id),children:Ee.jsxs("group",{position:[1.7,0,.02],onPointerEnter:()=>d(!0),onPointerLeave:()=>d(!1),children:[Ee.jsxs("mesh",{castShadow:!0,children:[Ee.jsx("circleGeometry",{args:[.12,32]}),Ee.jsx("meshStandardMaterial",{color:u?"#EF4444":"#F87171",emissive:u?"#EF4444":"#000000",emissiveIntensity:u?.5:0})]}),Ee.jsx(Cf,{position:[0,0,.02],fontSize:.14,color:"#FFFFFF",anchorX:"center",anchorY:"middle",children:"x"}),u&&Ee.jsxs("mesh",{position:[0,0,-.01],rotation:[0,0,0],children:[Ee.jsx("circleGeometry",{args:[.15,32]}),Ee.jsx("meshBasicMaterial",{color:"#EF4444",opacity:.3,transparent:!0})]})]})})]})},KW=({todos:n,onToggle:e,onDelete:t,onAdd:r,onClearCompleted:i})=>{const{isPresenting:s}=hi(),[o,a]=X.useState(null),[c,u]=X.useState(!1),d=[{text:"Complete project deadline",color:"#EF4444"},{text:"Respond to emails",color:"#F59E0B"},{text:"Attend team meeting",color:"#10B981"},{text:"Review document",color:"#3B82F6"},{text:"Call client",color:"#8B5CF6"},{text:"Shopping",color:"#EC4899"},{text:"Workout session",color:"#14B8A6"},{text:"Plan weekend",color:"#6366F1"}],m=(y,_)=>{const w=Math.random().toString(36).substr(2,9);r({id:w,text:y,completed:!1,color:_,isNew:!0,isLeaving:!1}),u(!1)},g=X.useMemo(()=>n.map((y,_)=>{const w=-_*.5;return Ee.jsx(qW,{todo:y,position:[0,w,0],onToggle:e,onDelete:t,index:_},y.id)}),[n,e,t]);return Ee.jsxs(Ee.Fragment,{children:[Ee.jsxs("group",{position:[0,1.5,-1.5],rotation:[-.1,0,0],children:[Ee.jsxs("mesh",{position:[0,.5,0],children:[Ee.jsx("planeGeometry",{args:[4,.6]}),Ee.jsx("meshStandardMaterial",{color:"#8B5CF6"})]}),Ee.jsx(Cf,{position:[0,.5,.01],fontSize:.3,color:"#FFFFFF",anchorX:"center",anchorY:"middle",children:"VR Todo List"}),Ee.jsxs("mesh",{position:[0,-1.5,-.05],receiveShadow:!0,children:[Ee.jsx("boxGeometry",{args:[4,4,.1]}),Ee.jsx("meshStandardMaterial",{color:"#F3F4F6"})]}),Ee.jsx(eg,{onSelect:()=>u(y=>!y),children:Ee.jsxs("group",{position:[1.6,.5,.1],children:[Ee.jsxs("mesh",{children:[Ee.jsx("circleGeometry",{args:[.2,32]}),Ee.jsx("meshStandardMaterial",{color:"#F3F4F6"})]}),Ee.jsx(Cf,{position:[0,0,.01],fontSize:.25,color:"#8B5CF6",anchorX:"center",anchorY:"middle",children:c?"Hide Tasks":"Quick Tasks"})]})}),c&&Ee.jsxs("group",{position:[0,-.8,.1],children:[Ee.jsxs("mesh",{position:[0,.5,-.01],children:[Ee.jsx("planeGeometry",{args:[3.6,3.6]}),Ee.jsx("meshStandardMaterial",{color:"#FFFFFF",transparent:!0,opacity:.9})]}),d.map((y,_)=>{const w=_%2,x=Math.floor(_/2),S=w===0?-.9:.9,b=1.5-x*.8;return Ee.jsx(eg,{onSelect:()=>m(y.text,y.color),children:Ee.jsxs("group",{position:[S,b,0],children:[Ee.jsxs("mesh",{children:[Ee.jsx("planeGeometry",{args:[1.6,.6]}),Ee.jsx("meshStandardMaterial",{color:"#F3F4F6"})]}),Ee.jsxs("mesh",{position:[-.7,0,.01],children:[Ee.jsx("circleGeometry",{args:[.15,32]}),Ee.jsx("meshStandardMaterial",{color:y.color})]}),Ee.jsx(Cf,{position:[0,0,.01],fontSize:.14,color:"#1F2937",anchorX:"center",anchorY:"middle",maxWidth:1.3,textAlign:"center",children:y.text})]})},_)})]}),Ee.jsx("group",{position:[0,-.3,.1],children:g})]}),Ee.jsx(NL,{}),Ee.jsx(IL,{})]})},NL=()=>{const{controllers:n,isPresenting:e}=hi();return X.useEffect(()=>{n&&n.forEach(t=>{t.grip&&(t.grip.visible=!0)})},[n,e]),Ee.jsxs(Ee.Fragment,{children:[Ee.jsx(HW,{}),e&&Ee.jsxs("group",{position:[0,.5,-1],children:[Ee.jsxs("mesh",{position:[0,0,-.01],children:[Ee.jsx("planeGeometry",{args:[.6,.1]}),Ee.jsx("meshBasicMaterial",{color:"#000000",opacity:.7,transparent:!0})]}),Ee.jsx(Cf,{position:[0,0,0],fontSize:.05,color:"#FFFFFF",anchorX:"center",anchorY:"middle",children:"Point at objects and press trigger to interact"})]})]})},ZW=()=>{const[n,e]=X.useState([]),[t,r]=X.useState(!0),[i,s]=X.useState(null),[o,a]=X.useState(""),[c,u]=X.useState("#8B5CF6"),[d,m]=X.useState(!0),[g,y]=X.useState(""),[_,w]=X.useState(!1);X.useEffect(()=>{console.log("Scene3D component mounted");try{console.log("THREE is available:",If),y(F=>F+`THREE v${If}; `);const U=document.createElement("canvas").getContext("webgl");if(!U)console.error("WebGL not available"),y(F=>F+"WebGL not available; ");else{console.log("WebGL available:",U.getParameter(U.VERSION));const F=U.getParameter(U.RENDERER),I=U.getParameter(U.VENDOR);y(k=>k+`WebGL: ${U.getParameter(U.VERSION)}; Renderer: ${F}; Vendor: ${I}; `)}}catch(D){console.error("Error during Scene3D initialization:",D),y(U=>U+`Error: ${D.message}; `)}},[]),X.useEffect(()=>{x()},[]);const x=async()=>{try{r(!0);const D=await fetch("https://jsonplaceholder.typicode.com/todos?_limit=10");if(!D.ok)throw new Error(`API responded with status: ${D.status}`);const F=(await D.json()).map(I=>({id:String(I.id),text:I.title,completed:I.completed,color:S(),isLeaving:!1}));e(F)}catch(D){console.error("Error fetching todos:",D),s(D instanceof Error?D.message:"Failed to fetch todos"),e([{id:"1",text:"Learn React Three Fiber",completed:!1,color:"#EF4444"},{id:"2",text:"Build VR Todo App",completed:!0,color:"#3B82F6"},{id:"3",text:"Fix rendering issues",completed:!1,color:"#10B981"}])}finally{r(!1)}},S=()=>{const D=["#8B5CF6","#D946EF","#F97316","#0EA5E9","#10B981","#EF4444"];return D[Math.floor(Math.random()*D.length)]},b=D=>{e(U=>[{...D,isNew:!0},...U]),fetch("/api/todos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)}).catch(U=>console.error("Error saving todo:",U))},T=D=>{e(F=>F.map(I=>I.id===D?{...I,completed:!I.completed}:I));const U=n.find(F=>F.id===D);U&&fetch(`/api/todos/${D}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({completed:!U.completed})}).catch(F=>console.error("Error updating todo:",F))},C=D=>{e(U=>U.map(F=>F.id===D?{...F,isLeaving:!0}:F)),setTimeout(()=>{e(U=>U.filter(F=>F.id!==D)),fetch(`/api/todos/${D}`,{method:"DELETE"}).catch(U=>console.error("Error deleting todo:",U))},500)},P=()=>{const D=n.filter(U=>U.completed).map(U=>U.id);e(U=>U.map(F=>F.completed?{...F,isLeaving:!0}:F)),setTimeout(()=>{e(U=>U.filter(F=>!F.completed)),D.forEach(U=>{fetch(`/api/todos/${U}`,{method:"DELETE"}).catch(F=>console.error("Error deleting todo:",F))})},500)};return Ee.jsx("div",{className:"scene-container",children:t?Ee.jsx(YW,{}):i?Ee.jsxs("div",{className:"error-message",children:[Ee.jsxs("p",{children:["Error: ",i]}),Ee.jsx("button",{className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-md",onClick:x,children:"Retry"})]}):Ee.jsxs(Ee.Fragment,{children:[Ee.jsx("div",{className:"absolute top-4 right-4 z-10",children:Ee.jsx(LW,{})}),Ee.jsxs(UG,{shadows:!0,camera:{position:[0,1.5,3],fov:50},children:[Ee.jsx("color",{attach:"background",args:["#f0f0f0"]}),Ee.jsx("fog",{attach:"fog",args:["#f8f9fa",5,20]}),Ee.jsxs(X.Suspense,{fallback:null,children:[Ee.jsxs(TW,{children:[Ee.jsx(NL,{}),Ee.jsx(IL,{}),Ee.jsx(KW,{todos:n,onToggle:T,onDelete:C,onAdd:b,onClearCompleted:P})]}),Ee.jsx("ambientLight",{intensity:.5}),Ee.jsx("directionalLight",{position:[5,5,5],intensity:.8,castShadow:!0}),Ee.jsx(xW,{preset:"city"}),Ee.jsx(nW,{})]})]})]})})},QW=()=>Ee.jsx("div",{className:"w-full h-screen bg-gray-50",children:Ee.jsx(ZW,{})}),JW=()=>{const n=eC();return X.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),Ee.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:Ee.jsxs("div",{className:"text-center",children:[Ee.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),Ee.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),Ee.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},$W=new wU,e9=()=>Ee.jsx(MU,{client:$W,children:Ee.jsxs($D,{children:[Ee.jsx(QI,{}),Ee.jsx(bN,{}),Ee.jsx(uO,{basename:"/fifo-verse-explorer-10",children:Ee.jsxs(aO,{children:[Ee.jsx(u1,{path:"/",element:Ee.jsx(QW,{})}),Ee.jsx(u1,{path:"*",element:Ee.jsx(JW,{})})]})})]})});d3.createRoot(document.getElementById("root")).render(Ee.jsx(e9,{}));
